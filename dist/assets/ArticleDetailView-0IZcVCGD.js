import"./journalist-QNhBHHjf.js";import{d as U,a as b,h as N,w as _,Y as c,G as D,a2 as L,a3 as P,ac as V,aq as F,b0 as j,b1 as G,ap as I,k as C,aU as O,b2 as R,V as q,l as J,o as K,c as z,j as a,as as T,K as $}from"./index-eLyz9_Ts.js";import"./organization-qjYuRO6g.js";import"./article-type.code-5cb8riL1.js";import{m as H}from"./map-api-response-QNIeEJ9n.js";import{p as Q}from"./time-formatter-ySAnBDjB.js";import{u as W}from"./use-article-modals-Q7kcwEpc.js";import{_ as X}from"./ArticleHeader.vue_vue_type_script_setup_true_lang-yXyrXb9T.js";import{_ as Z,a as h}from"./ArticleTabPanel.vue_vue_type_script_setup_true_lang-AIjmoLGW.js";import"./vue-multiselect-Yz8FsF-E.js";import"./GSingleSelect-7u8H0FdH.js";import"./sam-tw0uWIQ_.js";import"./purify.es-OZOo_0xz.js";import"./spell-check-OnBbfX8h.js";/* empty css                                                                  */import"./GDatePicker.vue_vue_type_style_index_0_lang-aP5TJiAZ.js";import"./program-omP_c4K3.js";import"./code-mapper-C6rl9hti.js";/* empty css                                                                    *//* empty css                                                                        */import"./tag-Q73uuSte.js";import"./category-zIRntbmZ.js";import"./department-wnuBQoCo.js";import"./GEditor.vue_vue_type_style_index_0_lang-FifEywK1.js";import"./file-Gx0JxWZZ.js";import"./GVideoPlayer-1SUF8s3O.js";import"./main-sHItgwS4.js";import{_ as tt,a as et}from"./VideoCoverageDetailModal.vue_vue_type_script_setup_true_lang-kK6MFMJO.js";import{_ as it}from"./ContentHeaderButtons.vue_vue_type_script_setup_true_lang-Db8CUXqr.js";import"./vue-resizable.umd.min-blE9hPz6.js";import"./use-pagination-JgK9yJDA.js";import"./FormItem.vue_vue_type_script_setup_true_lang-ZXQ_7x89.js";import"./use-model-wrapper-XtiLc3Xd.js";import"./OrganizationSelect.vue_vue_type_script_setup_true_lang-BNuugYEX.js";import"./ArticleTypeSelect.vue_vue_type_script_setup_true_lang-Kp5wzGNr.js";import"./ProgramSelect.vue_vue_type_script_setup_true_lang-UHoCrnxw.js";import"./CuesheetPrompter-o2cqkH-a.js";import"./cuesheet-item-code-_LsFMWbX.js";import"./ArticleFormatSelect.vue_vue_type_script_setup_true_lang-0vSziBpo.js";import"./VDCEditor.vue_vue_type_script_setup_true_lang-IhnNo6sk.js";import"./file-division-code-x51qUgaH.js";import"./edtior.helper-P5juSeN5.js";import"./ArticleFileTabPanel.vue_vue_type_script_setup_true_lang-Yk1q8ET1.js";import"./GTextarea-5GIFD2Mo.js";import"./FileDropzone.vue_vue_type_script_setup_true_lang-SVeHifZw.js";import"./FileListView.vue_vue_type_script_setup_true_lang-A40KFqZZ.js";import"./GNoData.vue_vue_type_script_setup_true_lang-rWUb5JCO.js";import"./SpellCheckerModal.vue_vue_type_script_setup_true_lang-Vt6XDlm8.js";import"./GMovableModal.vue_vue_type_script_setup_true_lang-elQvXjL0.js";import"./PageLoader.vue_vue_type_script_setup_true_lang-ZvbvX14z.js";import"./GDateTimePicker-bSYwb_xW.js";import"./use-date-GeeGTbYh.js";import"./ArticleDivisionSelect.vue_vue_type_script_setup_true_lang-Ln9_DwnO.js";import"./UserSearchModal.vue_vue_type_script_setup_true_lang-iHw_FmsN.js";import"./make-grid-column-aeLSdEws.js";import"./PermissionSettingModal.vue_vue_type_script_setup_true_lang-Cz5aOmSI.js";import"./FormLabel.vue_vue_type_script_setup_true_lang-SB4ukE1P.js";import"./vue.runtime.esm-bundler-3P3R-Xon.js";import"./GEditor.vue_vue_type_script_setup_true_lang-a2qGOvtc.js";const rt={class:"flex justify-end"},at={class:"flex justify-center gap-x-2 my-4"},ot=U({__name:"EditingRequestDetailModal",emits:["close"],setup(o,{emit:d}){const A=d,v=()=>{A("close")},g=[{id:1,label:"Post"},{id:2,label:"수정"},{id:3,label:"닫기",action:v}];return(f,i)=>(b(),N(P,{"modal-class":"","content-class":"xl:px-0",onClose:v},{title:_(()=>i[0]||(i[0]=[c("span",null,"편집의뢰 상세",-1)])),content:_(()=>[c("div",rt,[D(it,{"menu-items":g})]),i[1]||(i[1]=c("div",null,[c("div",null,"상세정보")],-1)),i[2]||(i[2]=c("div",null,[c("div")],-1)),i[3]||(i[3]=c("div",null,null,-1))]),bottom:_(()=>[c("div",at,[D(L,{"button-text":"확인",onClick:v})])]),_:1}))}});function lt(o){const d=V(),{getActiveTab:A,deleteTab:v}=F(),{moveEditArticle:g}=I(),f=async(m,p)=>{try{const l=p.del===o.DELETED?await d.fetchDeletedArticle(m):await d.fetchArticle(m);if(l.success){const r=H(l.data,"fetchArticle");o.setArticleType(r.articleType),o.setArticleFormat(r.articleFormat),o.setArticleTitle(r.articleTitle),o.setArticleEditorState(j({artclTypCd:r.artclTypCd,capList:r.capList,ancMentCtt:r.ancMentCtt||JSON.stringify([`
`]),artclCtt:r.artclCtt||JSON.stringify([`
`])}));const u={...o.articleDetailItem.value};return Object.keys(r).forEach(n=>{if(n in u)switch(n){case"brdcSchdDtm":case"inputDtm":u[n]=G(r[n]);break;case"ancMentCttTime":case"artclCttTime":u[n]=Q(r[n]);break;default:u[n]=r[n]}}),u.program={id:r.brdcPgmId,brdcPgmNm:r.brdcPgmNm},o.setArticleDetailItem(u),r}}catch(l){console.error("useArticleDetailActions getArticle Error",l)}};return{getArticle:f,handleNavigateToEdit:async(m,p)=>{if(await f(m,p),o.articleDetailItem.value.lckYn!=="Y")try{(await d.lockArticle(m)).success&&(v(A),g({articleId:m,articleTitle:o.articleTitle.value,deleteYn:p.del}))}catch(l){console.error("useArticleDetailActions handleNavigateToEdit Error",l)}}}}function nt(){const o="Y",d=C(""),A=C("00:00"),v=C("00:00"),g=C("00:00"),f=C(O.Straight),i=C(R.Broadcasting),m=q({userNm:"",deptNm:"",brdcSchdDtm:"",ancMentCttTime:A.value,artclCttTime:v.value,inputDtm:"",apprvTypDtm:"",program:{id:0,brdcPgmNm:"",channel:{chDivId:1}},lckYn:"",artclDivCd:"div_001",userGroupId:"",userGroupNm:""}),p=C({anchorTextArray:[""],reporterTextArray:[""],captionArray:[]}),l=C(null);return{DELETED:o,articleTitle:d,ancMentCttTime:A,articleTimeMs:v,reportTimeMs:g,articleType:f,articleFormat:i,articleDetailItem:m,articleEditorState:p,setArticleType:s=>{f.value=s},setArticleFormat:s=>{i.value=s},setArticleTitle:s=>{d.value=s},setArticleEditorState:s=>{p.value=s},setArticleDetailItem:s=>{m.value=s},articleFile:l}}const st={class:"!pt-0 h-full"},ct={class:"flex flex-wrap"},mt={class:"w-[70%]"},dt={class:"w-[30%]"},Ce=U({__name:"ArticleDetailView",props:{id:{},query:{}},setup(o){const d=o,{moveListArticle:A}=I(),{getActiveTab:v,deleteTab:g}=F(),{modals:f,toggleModal:i}=W(),m=nt(),{articleTitle:p,ancMentCttTime:l,articleTimeMs:r,reportTimeMs:u,articleType:n,articleFormat:y,articleDetailItem:E,articleEditorState:s,articleFile:M}=m,{getArticle:k,handleNavigateToEdit:B}=lt(m),S=C(""),x={cgCreate:()=>i("cgCreate"),videoCoverageCreate:()=>i("videoCoverageCreate"),editingCreate:()=>i("editingCreate")},Y=J(()=>[{id:1,label:"CG의뢰",action:x.cgCreate},{id:2,label:"취재의뢰",action:x.videoCoverageCreate},{id:3,label:"편집의뢰",action:x.editingCreate},{id:4,label:"오디오"},{id:5,label:"편집",action:()=>B},{id:6,label:"출고"},{id:7,label:"출고취소"},{id:8,label:"데스킹요청"},{id:9,label:"데스킹취소"},{id:10,label:"데스킹 요청"},{id:11,label:"인쇄"},{id:12,label:"닫기",action:()=>{g(v),A()}}]);return K(async()=>{var t;const w=await k(Number(d.id),{del:(t=d.query)==null?void 0:t.del});S.value=w.artclCtt}),(w,t)=>(b(),z("div",st,[c("div",null,[D(X,{"menu-items":Y.value,"is-show-search":!1},null,8,["menu-items"])]),c("div",ct,[c("div",mt,[D(Z,{content:S.value,"onUpdate:content":t[0]||(t[0]=e=>S.value=e),"article-type":a(n),"onUpdate:articleType":t[1]||(t[1]=e=>T(n)?n.value=e:null),"article-format":a(y),"onUpdate:articleFormat":t[2]||(t[2]=e=>T(y)?y.value=e:null),title:a(p),"onUpdate:title":t[3]||(t[3]=e=>T(p)?p.value=e:null),"anc-ment-ctt-time":a(l),"onUpdate:ancMentCttTime":t[4]||(t[4]=e=>T(l)?l.value=e:null),"article-time":a(r),"onUpdate:articleTime":t[5]||(t[5]=e=>T(r)?r.value=e:null),"report-time":a(u),"onUpdate:reportTime":t[6]||(t[6]=e=>T(u)?u.value=e:null),"article-editor-state":a(s),"onUpdate:articleEditorState":t[7]||(t[7]=e=>T(s)?s.value=e:null),"is-read-only":!0},null,8,["content","article-type","article-format","title","anc-ment-ctt-time","article-time","report-time","article-editor-state"])]),c("div",dt,[D(h,{"article-detail-info-data":a(E),"onUpdate:articleDetailInfoData":t[8]||(t[8]=e=>T(E)?E.value=e:null),"article-file-data":a(M),"onUpdate:articleFileData":t[9]||(t[9]=e=>T(M)?M.value=e:null),mode:"read"},null,8,["article-detail-info-data","article-file-data"])]),c("div",null,[a(f).cgCreate?(b(),N(a(tt),{key:0,onClose:t[10]||(t[10]=e=>a(i)("cgCreate"))})):$("",!0),a(f).videoCoverageCreate?(b(),N(a(et),{key:1,onClose:t[11]||(t[11]=e=>a(i)("videoCoverageCreate"))})):$("",!0),a(f).editingCreate?(b(),N(a(ot),{key:2,onClose:t[12]||(t[12]=e=>a(i)("editingCreate"))})):$("",!0)])])]))}});export{Ce as default};
