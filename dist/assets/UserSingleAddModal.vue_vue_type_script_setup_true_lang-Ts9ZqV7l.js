var ve=Object.defineProperty;var fe=(f,b,d)=>b in f?ve(f,b,{enumerable:!0,configurable:!0,writable:!0,value:d}):f[b]=d;var v=(f,b,d)=>(fe(f,typeof b!="symbol"?b+"":b,d),d);import{d as q,ab as te,k as y,ae as Z,V as de,aT as ee,W as ie,l as ae,o as W,a as p,h as A,w as _,Y as r,Q as be,G as n,j as l,c as E,X as G,a0 as V,a2 as N,K as k,F as ye,C as ge,a1 as H,a3 as se,ag as Q,ah as z,aU as _e,aa as ne,t as he,aM as Ie,a4 as De}from"./index-eLyz9_Ts.js";import{a as ke,b as Ce}from"./CoveragePlanSearch.vue_vue_type_script_setup_true_lang-kZic9Ocd.js";import{u as Se}from"./coverage-plan-nI7mLZOB.js";import{_ as Ne}from"./GNoData.vue_vue_type_script_setup_true_lang-rWUb5JCO.js";import{c as Ve,a as xe}from"./async-validator.util-IJrtpoc1.js";import{u as we}from"./use-date-GeeGTbYh.js";import"./GDatePicker.vue_vue_type_style_index_0_lang-aP5TJiAZ.js";import{G as Te}from"./GDateTimePicker-bSYwb_xW.js";import{G as F}from"./GSingleSelect-7u8H0FdH.js";import{A as Ae}from"./app-authority-code-Q9MU7mjP.js";import{_ as $e}from"./ArticleTypeSelect.vue_vue_type_script_setup_true_lang-Kp5wzGNr.js";import{G as X}from"./GTextarea-5GIFD2Mo.js";import{u as Oe}from"./use-model-wrapper-XtiLc3Xd.js";import{_ as Ue}from"./UserAddSelect.vue_vue_type_script_setup_true_lang-1UBsZdY3.js";import{_ as Me}from"./DepartmentMultiSelect.vue_vue_type_script_setup_true_lang-OqmQVQH2.js";import{u as Ye}from"./TotalWorkflow.vue_vue_type_script_setup_true_lang-RSVNUNvR.js";import{u as Le}from"./department-wnuBQoCo.js";class Ee{constructor(){v(this,"allOption",{id:"",name:"상태 전체",label:"상태 전체"});v(this,"PENDING",{id:"pending",name:"준비",label:"준비"});v(this,"ASSIGN",{id:"assign",name:"배정",label:"배정"});v(this,"INGESTING",{id:"ingesting",name:"인제스트중",label:"인제스트중"});v(this,"COMPLETE",{id:"complete",name:"완료",label:"완료"});v(this,"values",[this.PENDING,this.ASSIGN,this.INGESTING,this.COMPLETE]);v(this,"allValues",[this.allOption,this.PENDING,this.ASSIGN,this.INGESTING,this.COMPLETE])}}const J=new Ee;class Ge{constructor(){v(this,"allOption",{id:"",name:"상태 전체",label:"상태 전체"});v(this,"OBV_ASSN_DIV_001",{id:"obv_assn_div_001",name:"차량배차/현장합류",label:"차량배차/현장합류"});v(this,"OBV_ASSN_DIV_002",{id:"obv_assn_div_002",name:"차량배차/회사동행",label:"차량배차/회사동행"});v(this,"OBV_ASSN_DIV_003",{id:"obv_assn_div_003",name:"자차이동/현장합류",label:"자차이동/현장합류"});v(this,"OBV_ASSN_DIV_004",{id:"obv_assn_div_004",name:"자차이동/회사이동",label:"자차이동/회사이동"});v(this,"OBV_ASSN_DIV_005",{id:"obv_assn_div_005",name:"동행안함",label:"동행안함"});v(this,"values",[this.OBV_ASSN_DIV_001,this.OBV_ASSN_DIV_002,this.OBV_ASSN_DIV_003,this.OBV_ASSN_DIV_004,this.OBV_ASSN_DIV_005]);v(this,"allValues",[this.allOption,this.OBV_ASSN_DIV_001,this.OBV_ASSN_DIV_002,this.OBV_ASSN_DIV_003,this.OBV_ASSN_DIV_004,this.OBV_ASSN_DIV_005])}}const Be=new Ge,Re={class:"flex flex-col space-x-2 h-full"},He={class:"flex space-x-2 w-full h-full pb-2 border-b dark:border-dark-border overflow-auto"},Pe={key:0,class:"pt-2 flex justify-end"},je={key:0,class:"flex flex-col h-full w-1/3"},ze={class:"font-semibold dark:text-dark-gray-200"},Fe={key:0,class:"overflow-auto p-2 space-y-2"},qe={class:"flex flex-wrap justify-between"},We={class:""},Ke={class:"flex space-x-2"},Qe={class:"flex space-x-2"},Xe={class:"sm:flex sm:flex-row-reverse pt-4 pb-2"},Je={class:"space-x-3 flex items-center"},Ra=q({__name:"CoveragePlanInfoModal",props:{mode:{default:"create"},coveragePlanId:{default:0}},emits:["close"],setup(f,{emit:b}){const d=f,h=b,{departmentId:$,departmentName:O}=te(),{fetchCoveragePlan:s,createCoveragePlan:x,updateCoveragePlan:U}=Se(),e=y({coveragePlanId:0,title:"",departmentId:$,departmentName:O,reporter:void 0,reportDate:Z().format("YYYY-MM-DD"),articleType:void 0,content:"",remark:"",phoneNumber:"",approveDateTime:"",approverId:"",approverUserId:"",approverName:"",updateDateTime:"",updaterUserId:"",updaterId:"",isSensitiveArticle:!1}),c=y([]),g=y(!1),u=y(0),C=de({title:ee(e.value,"title"),departmentId:ee(e.value,"departmentId")}),{pass:w,errorFields:M}=ie(C,Ve.rules),T=()=>{h("close")},Y=()=>{e.value.title="",e.value.reporterId=void 0,e.value.reportDate=Z().format("YYYY-MM-DD"),e.value.articleTypeCode=_e.Straight,e.value.content="",e.value.remark="",e.value.isSensitiveArticle=!1},a=()=>{c.value.push(Q.cloneDeep(e.value)),Y()},t=(i,D)=>{u.value=D,e.value.title=i.title,e.value.reporter=i.reporter,e.value.reportDate=i.reportDate,e.value.articleType=i.articleType,e.value.content=i.content,e.value.remark=i.remark,e.value.isSensitiveArticle=i.isSensitiveArticle,g.value=!0},o=()=>{c.value.splice(u.value,1,Q.cloneDeep(e.value)),Y()},S=i=>{c.value.push(i)},I=i=>{c.value.splice(i,1)},B=()=>{g.value?o():a(),g.value=!1},P=async()=>{const D={coveragePlanList:Q.cloneDeep(c.value).map(m=>{var j;return{title:m.title,content:m.content,remark:m.remark,reportDate:m.reportDate,reporterId:(j=m.reporterId)!=null&&j.id?m.reporterId.id:"",departmentId:m.departmentId,departmentName:m.departmentName,articleTypeCode:m.articleTypeCode.id,isSensitiveArticle:m.isSensitiveArticle,phoneNumber:m.phoneNumber}})};(await x(D)).success&&(window.Notify.success({message:z.coveragePlan.create}),h("close",!0,d.mode))},ue=async()=>{var R,m;const i={title:e.value.title,content:e.value.content,remark:e.value.remark,reportDate:e.value.reportDate,reporterId:(R=e.value.reporterId)==null?void 0:R.id,departmentId:e.value.departmentId,departmentName:e.value.departmentName,articleTypeCode:(m=e.value.articleTypeCode)==null?void 0:m.id,phoneNumber:e.value.phoneNumber,isSensitiveArticle:e.value.isSensitiveArticle};(await U(d.coveragePlanId,i)).success&&(window.Notify.success({message:z.coveragePlan.edit}),h("close",!0))},ce=()=>{d.mode==="create"?P():ue()},me=async()=>{const i=await s(d.coveragePlanId);i.success&&(Object.assign(e.value,i.data),e.value.isSensitiveArticle=i.data.sensitiveArticleYn==="Y")},pe=ae(()=>d.mode==="read"||d.mode==="readOnly");return W(async()=>{d.mode!=="create"&&await me()}),(i,D)=>(p(),A(se,{"modal-class":i.mode==="create"?"w-3/5":"w-1/3","content-class":i.mode==="create"?"h-[75vh]":"h-[65vh]",onClose:T},{title:_(()=>D[1]||(D[1]=[r("div",null,"취재계획",-1)])),content:_(()=>{var R,m,j;return[r("div",Re,[r("div",He,[r("div",{class:be(["flex flex-col h-full p-1 overflow-auto",i.mode==="create"?"w-2/3":"w-full"])},[n(ke,{"coverage-plan-meta-data":e.value,"onUpdate:coveragePlanMetaData":D[0]||(D[0]=L=>e.value=L),mode:i.mode,"error-title-msg":(m=(R=l(M))==null?void 0:R.title)!=null&&m.length?(j=l(M))==null?void 0:j.title[0].message:""},null,8,["coverage-plan-meta-data","mode","error-title-msg"]),i.mode==="create"?(p(),E("div",Pe,[n(N,{disabled:!l(w),onClick:B},{default:_(()=>[G(V(g.value?"취재계획 수정":"취재계획 추가"),1)]),_:1},8,["disabled"])])):k("",!0)],2),i.mode==="create"?(p(),E("div",je,[r("div",ze," 취재계획 추가 목록 ("+V(c.value.length)+"건) ",1),c.value.length?(p(),E("div",Fe,[(p(!0),E(ye,null,ge(c.value,(L,K)=>{var le,oe;return p(),E("div",{key:`coveragePlan-${K}`,class:"space-y-2 border dark:text-dark-gray-200 dark:border-dark-border p-2 rounded-md"},[r("div",qe,[r("div",We,"취재일: "+V(L.reportDate),1),r("div",Ke,[n(N,{icon:"pencil",onClick:re=>t(L,K)},null,8,["onClick"]),n(N,{icon:"document-duplicate",onClick:re=>S(L)},null,8,["onClick"]),n(N,{icon:"trash",disabled:g.value,onClick:re=>I(K)},null,8,["disabled","onClick"])])]),n(H,{"model-value":L.title,disabled:"",label:"제목"},null,8,["model-value"]),r("div",Qe,[n(H,{"model-value":(le=L.reporterId)==null?void 0:le.userNm,disabled:"",label:"취재기자",class:"flex-1"},null,8,["model-value"]),n(H,{"model-value":(oe=L.articleTypeCode)==null?void 0:oe.name,disabled:"",label:"형식",class:"flex-1"},null,8,["model-value"])])])}),128))])):k("",!0),c.value.length?k("",!0):(p(),A(Ne,{key:1}))])):k("",!0)]),r("div",Xe,[r("div",Je,[n(N,{type:"secondary",class:"dark:bg-dark-secondary dark:text-white dark:hover:bg-gray-600",onClick:T},{default:_(()=>D[2]||(D[2]=[G("취소")])),_:1}),pe.value?k("",!0):(p(),A(N,{key:0,disabled:i.mode==="create"&&!c.value.length||i.mode==="edit"&&!l(w),onClick:ce},{default:_(()=>[G(V(i.mode==="create"?"추가":"수정"),1)]),_:1},8,["disabled"]))])])])]}),_:1},8,["modal-class","content-class"]))}}),Ze={class:"space-y-2 px-2"},ea={class:"flex flex-col w-full space-y-2"},aa={key:1,class:"space-y-1"},ta={class:"flex space-x-2 items-center"},sa={class:"flex space-x-2"},la={class:"flex flex-col w-full space-y-2"},oa={key:0,class:"dark:text-dark-gray-200 space-y-2 pt-2 border-t dark:border-dark-border"},ra={class:"flex space-x-2 items-center"},da={class:"flex-1 text-xs space-y-1"},ia={class:"truncate p-2 h-8 border shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary block rounded-md border-gray-300 dark:border-slate-600 bg-gray-200 dark:bg-dark-disabled"},na={class:"flex-1 text-xs space-y-1"},ua={class:"truncate p-2 h-8 border shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary block rounded-md border-gray-300 dark:border-slate-600 bg-gray-200 dark:bg-dark-disabled"},ca={class:"flex space-x-2 items-center"},ma={class:"flex-1 text-xs space-y-1"},pa={class:"truncate p-2 h-8 border shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary block rounded-md border-gray-300 dark:border-slate-600 bg-gray-200 dark:bg-dark-disabled"},va={class:"flex-1 text-xs space-y-1"},fa={class:"truncate p-2 h-8 border shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary block rounded-md border-gray-300 dark:border-slate-600 bg-gray-200 dark:bg-dark-disabled"},ba=q({__name:"CoverageScheduleMetaData",props:{coverageScheduleMetaData:{default:()=>({title:"",content:"",startDateTime:"",reportLocation:"",obvAssignDivisionCode:void 0,remark:"",articleTypeCode:void 0,vanNumber:"",departmentId:0,departmentName:"",reporter:void 0,coveragePlanId:0,videoReporterList:[],inputerName:"",inputDateTime:"",updaterName:"",updateDateTime:""})},mode:{default:"create"},errorTitleMsg:{default:""}},emits:["update:coverageScheduleMetaData"],setup(f,{emit:b}){const d=f,h=b,{can:$}=te(),{formatDate:O}=we(),s=Oe(d,h,"coverageScheduleMetaData"),{fetchUsers:x,getChDivId:U}=ne(),e=y(Be.values),c=y([{departmentId:s.value.departmentId,departmentName:s.value.departmentName}]),g=y([]),u=ae(()=>d.mode==="read"),C=async()=>{const a={chDivId:U,useYn:"Y",delYn:"N",deptIds:[c.value[0].departmentId],size:1e4},t=await x(a);t.success&&(g.value=t.data.content)},w=ae(()=>{let a;switch(s.value.scheduleStatusCode){case J.COMPLETE.id:a="primary";break;case J.INGESTING.id:a="blue";break;case J.ASSIGN.id:a="yellow";break;default:a="gray"}return a}),M=async a=>{console.log("coveragePlan",a),s.value.coveragePlanId=a==null?void 0:a.coveragePlanId,s.value.department=a==null?void 0:a.departmentId,c.value=[{departmentId:a==null?void 0:a.departmentId,departmentName:a==null?void 0:a.departmentName}],await C(),d.mode==="create"&&(s.value.title=a==null?void 0:a.title,s.value.reporter=a==null?void 0:a.reporterId,s.value.articleTypeCode=a==null?void 0:a.articleTypeCode)},T=()=>{s.value.coveragePlanId=0},Y=a=>{c.value=a,C()};return he(()=>s.value.reporter,a=>{s.value.phoneNumber=a==null?void 0:a.phoneNumber}),W(async()=>{await C()}),(a,t)=>(p(),E("div",Ze,[r("div",ea,[l($)(l(Ae).COVERAGE_PLAN_READ.code)?(p(),A(Ce,{key:0,disabled:u.value,"coverage-plan-id":l(s).coveragePlanId,onOnSelected:M,onOnCanceled:T},null,8,["disabled","coverage-plan-id"])):k("",!0),n(l(H),{modelValue:l(s).title,"onUpdate:modelValue":t[0]||(t[0]=o=>l(s).title=o),placeholder:"제목",label:"제목",required:"",disabled:u.value,"error-msg":a.errorTitleMsg},null,8,["modelValue","disabled","error-msg"]),u.value?(p(),E("div",aa,[t[13]||(t[13]=r("div",{class:"flex sm:text-xs text-xs font-medium text-gray-700 dark:text-white"},"상태",-1)),n(Ie,{color:w.value,"font-size":"text-sm",text:l(s).scheduleStatusCodeName,class:"w-12"},null,8,["color","text"])])):k("",!0),r("div",null,[u.value?k("",!0):(p(),A(Me,{key:0,"selected-departments":c.value,"onUpdate:selectedDepartments":t[1]||(t[1]=o=>c.value=o),"use-multi-select":!1,onOnSelectedDepartment:Y},null,8,["selected-departments"])),u.value?(p(),A(l(H),{key:1,modelValue:l(s).departmentName,"onUpdate:modelValue":t[2]||(t[2]=o=>l(s).departmentName=o),placeholder:"부서명",label:"부서명",disabled:!0},null,8,["modelValue"])):k("",!0)]),n(l(Te),{modelValue:l(s).startDateTime,"onUpdate:modelValue":t[3]||(t[3]=o=>l(s).startDateTime=o),name:"startTime",label:"취재일시",format:"yy-MM-dd HH:mm",disabled:u.value},null,8,["modelValue","disabled"]),r("div",ta,[n(F,{modelValue:l(s).reporter,"onUpdate:modelValue":t[4]||(t[4]=o=>l(s).reporter=o),name:"reporter",label:"취재기자",options:g.value,"item-label":"userNm","track-by":"id","allow-empty":"",searchable:!1,placeholder:"취재기자를 선택해주세요.",disabled:u.value,class:"flex-1"},null,8,["modelValue","options","disabled"]),l(s).reporter&&l(s).phoneNumber?(p(),A(De,{key:0,modelValue:l(s).phoneNumber,"onUpdate:modelValue":t[5]||(t[5]=o=>l(s).phoneNumber=o),label:"연락처","mask-format":"###-####-####",placeholder:"등록된 연락처가 없습니다.",disabled:!0,class:"flex-1"},null,8,["modelValue"])):k("",!0)]),r("div",sa,[n(F,{modelValue:l(s).obvAssignDivisionCode,"onUpdate:modelValue":t[6]||(t[6]=o=>l(s).obvAssignDivisionCode=o),name:"obvAssignDivision",label:"영상구분",options:e.value,"item-label":"label","track-by":"id","allow-empty":!0,disabled:u.value,placeholder:"영상구분 선택",class:"flex-1"},null,8,["modelValue","options","disabled"]),n($e,{modelValue:l(s).articleTypeCode,"onUpdate:modelValue":t[7]||(t[7]=o=>l(s).articleTypeCode=o),label:"형식",disabled:u.value,placeholder:"형식 선택","allow-empty":"",class:"flex-1"},null,8,["modelValue","disabled"])]),n(X,{modelValue:l(s).reportLocation,"onUpdate:modelValue":t[8]||(t[8]=o=>l(s).reportLocation=o),label:"취재장소",rows:4,disabled:u.value},null,8,["modelValue","disabled"])]),r("div",la,[n(Ue,{modelValue:l(s).videoReporterList,"onUpdate:modelValue":t[9]||(t[9]=o=>l(s).videoReporterList=o),name:"videoReporter",label:"영상기자 배정","table-name":"영상기자",searchable:"",disabled:u.value,class:"space-y-2"},null,8,["modelValue","disabled"]),n(X,{modelValue:l(s).content,"onUpdate:modelValue":t[10]||(t[10]=o=>l(s).content=o),label:"내용",rows:4,disabled:u.value},null,8,["modelValue","disabled"]),n(X,{modelValue:l(s).remark,"onUpdate:modelValue":t[11]||(t[11]=o=>l(s).remark=o),label:"비고",rows:4,disabled:u.value},null,8,["modelValue","disabled"]),n(l(H),{modelValue:l(s).vanNumber,"onUpdate:modelValue":t[12]||(t[12]=o=>l(s).vanNumber=o),placeholder:"차량번호",label:"차량번호",disabled:u.value},null,8,["modelValue","disabled"])]),a.mode==="read"?(p(),E("div",oa,[r("div",ra,[r("div",da,[t[14]||(t[14]=r("span",{class:"truncate"},"작성자",-1)),r("div",ia,V(l(s).inputerUserId?`${l(s).inputerName}(${l(s).inputerUserId})`:""),1)]),r("div",na,[t[15]||(t[15]=r("span",{class:"truncate"},"작성일시",-1)),r("div",ua,V(l(O)(l(s).inputDateTime,"YYYY-MM-DD HH:mm:ss")),1)])]),r("div",ca,[r("div",ma,[t[16]||(t[16]=r("span",{class:"truncate"},"수정자",-1)),r("div",pa,V(l(s).updaterUserId?`${l(s).updaterName}(${l(s).updaterUserId})`:""),1)]),r("div",va,[t[17]||(t[17]=r("span",{class:"truncate"},"수정일시",-1)),r("div",fa,V(l(O)(l(s).updateDateTime,"YYYY-MM-DD HH:mm:ss")),1)])])])):k("",!0)]))}}),ya={class:"flex flex-col space-x-2 h-full justify-between"},ga={class:"sm:flex sm:flex-row-reverse pt-4 pb-2 overflow-auto"},_a={class:"space-x-3 flex items-center"},Ha=q({__name:"CoverageScheduleInfoModal",props:{mode:{default:"create"},coverageScheduleId:{default:0},coveragePlanId:{default:0}},emits:["close"],setup(f,{emit:b}){const d=f,h=b,{departmentId:$,departmentName:O}=te(),{createCoverageSchedule:s,fetchCoverageSchedule:x,updateCoverageSchedule:U}=Ye(),e=y({title:"",content:"",startDateTime:Z().format("YYYY-MM-DD HH:mm:DD"),reportLocation:"",obvAssignDivisionCode:void 0,remark:"",articleTypeCode:void 0,vanNumber:"",departmentId:$,departmentName:O,department:$,reporter:void 0,coveragePlanId:void 0,videoReporterList:[],inputerName:"",inputDateTime:"",updaterName:"",updateDateTime:""}),c=de({title:ee(e.value,"title")}),{pass:g,errorFields:u}=ie(c,xe.rules),C=()=>{h("close")},w=async()=>{var t;const a=await x(d.coverageScheduleId);a.success&&(Object.assign(e.value,a.data),e.value.department=a.data.departmentId,e.value.reporter=a.data.reporterId,e.value.coveragePlanId=(t=a.data.coveragePlan)==null?void 0:t.coveragePlanId)},M=async()=>{var a,t,o,S;try{const I={title:e.value.title,content:e.value.content,remark:e.value.remark,startDateTime:e.value.startDateTime,reportLocation:e.value.reportLocation,vanNumber:e.value.vanNumber,videoReporterIdList:(a=e.value.videoReporterList)==null?void 0:a.map(P=>P.id),articleTypeCode:(t=e.value.articleTypeCode)==null?void 0:t.id,obvAssignDivisionCode:(o=e.value.obvAssignDivisionCode)==null?void 0:o.id,departmentId:e.value.departmentId,departmentName:e.value.departmentName,reporterId:(S=e.value.reporter)==null?void 0:S.id,coveragePlanId:e.value.coveragePlanId};(await s(I)).success&&(window.Notify.success({message:z.coverageSchedule.create}),h("close",!0,d.mode))}catch(I){console.error(I)}},T=async()=>{var o,S,I,B;const a={title:e.value.title,content:e.value.content,remark:e.value.remark,startDateTime:e.value.startDateTime,reportLocation:e.value.reportLocation,vanNumber:e.value.vanNumber,videoReporterIdList:(o=e.value.videoReporterList)==null?void 0:o.map(P=>P.id),articleTypeCode:(S=e.value.articleTypeCode)==null?void 0:S.id,obvAssignDivisionCode:(I=e.value.obvAssignDivisionCode)==null?void 0:I.id,departmentId:e.value.departmentId,departmentName:e.value.departmentName,reporterId:(B=e.value.reporter)==null?void 0:B.id,coveragePlanId:e.value.coveragePlanId};(await U(d.coverageScheduleId,a)).success&&(window.Notify.success({message:z.coverageSchedule.edit}),h("close",!0))},Y=async()=>{d.mode==="create"?await M():await T()};return W(async()=>{d.mode!=="create"&&await w(),d.coveragePlanId&&(e.value.coveragePlanId=d.coveragePlanId)}),(a,t)=>(p(),A(se,{"modal-class":"w-3/5","overflow-fixed":"",onClose:C},{title:_(()=>t[1]||(t[1]=[r("div",null,"취재일정",-1)])),content:_(()=>{var o,S,I;return[r("div",ya,[n(ba,{"coverage-schedule-meta-data":e.value,"onUpdate:coverageScheduleMetaData":t[0]||(t[0]=B=>e.value=B),mode:a.mode,"error-title-msg":(S=(o=l(u))==null?void 0:o.title)!=null&&S.length?(I=l(u))==null?void 0:I.title[0].message:"",class:"flex w-full h-full space-x-4"},null,8,["coverage-schedule-meta-data","mode","error-title-msg"]),r("div",ga,[r("div",_a,[n(N,{type:"secondary",class:"dark:bg-dark-secondary dark:text-white dark:hover:bg-gray-600",onClick:C},{default:_(()=>t[2]||(t[2]=[G("취소")])),_:1}),n(N,{disabled:!l(g),onClick:Y},{default:_(()=>[G(V(a.mode==="create"?"추가":"수정"),1)]),_:1},8,["disabled"])])])])]}),_:1}))}}),ha={class:"flex flex-col h-full space-y-4 overflow-auto"},Ia={class:"flex flex-row-reverse pt-4 pb-2"},Da={class:"space-x-3 flex items-center"},Pa=q({__name:"UserSingleAddModal",props:{headerTitle:{default:"사용자 추가"},label:{default:"사용자 선택"},tableName:{default:"사용자"},deptId:{default:void 0},disabled:{type:Boolean,default:!1},disabledDept:{type:Boolean,default:!1}},emits:["close","on-add-user"],setup(f,{emit:b}){const d=f,h=b,{fetchDepartments:$}=Le(),{fetchUsers:O,getChDivId:s}=ne(),x=y(!1),U=y([]),e=y(d.deptId),c=y(d.deptId),g=y([]),u=y(),C=async()=>{const a=await $({useYn:!0});a.success&&(U.value=a.data)},w=async()=>{try{x.value=!0;const a={chDivId:s,useYn:"Y",delYn:"N",deptId:c.value,size:1e4},t=await O(a);t.success&&(g.value=t.data.content)}catch(a){console.error(a)}finally{x.value=!1}},M=()=>{c.value=e.value.id,w()},T=()=>{h("close")},Y=()=>{h("on-add-user",u.value)};return W(async()=>{await C(),await w()}),(a,t)=>(p(),A(se,{"modal-class":"xl:w-1/5 lg:w-2/5 md:w-2/5 sm:w-3/5 w-1/2","content-class":"h-[25vh]",onClose:T},{title:_(()=>[G(V(a.headerTitle),1)]),content:_(()=>[r("div",ha,[n(F,{modelValue:e.value,"onUpdate:modelValue":t[0]||(t[0]=o=>e.value=o),name:"dept",label:"부서",options:U.value,"item-label":"deptNm","track-by":"id","allow-empty":"",searchable:!1,disabled:a.disabledDept,placeholder:"부서를 선택해주세요.","onSelect:value":M},null,8,["modelValue","options","disabled"]),n(F,{modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=o=>u.value=o),name:"user","is-loading":x.value,label:a.label?a.label:"",options:g.value,"item-label":"userNm","track-by":"userId","allow-empty":!0,searchable:!0,required:!1,disabled:a.disabled,"preselect-first":!1,placeholder:"사용자를 선택해주세요."},null,8,["modelValue","is-loading","label","options","disabled"]),r("div",Ia,[r("div",Da,[n(N,{type:"secondary",class:"dark:bg-dark-secondary dark:text-white dark:hover:bg-gray-600",onClick:T},{default:_(()=>t[2]||(t[2]=[G("취소")])),_:1}),n(N,{onClick:Y},{default:_(()=>t[3]||(t[3]=[G(" 추가 ")])),_:1})])])])]),_:1}))}});export{J as C,Ra as _,Ha as a,Pa as b,ba as c};
