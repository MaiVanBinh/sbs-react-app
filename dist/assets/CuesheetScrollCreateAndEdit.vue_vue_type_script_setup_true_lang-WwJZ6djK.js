import{d as T,l as _,a5 as E,t as L,o as O,a as f,c as D,Y as l,G as i,a6 as K,a0 as y,j as a,a1 as N,aD as q,u as z,aa as Q,k as S,av as W,V as Y,w as V,an as H,ao as J,h as $,K as g,ah as I,ap as X}from"./index-eLyz9_Ts.js";import{_ as Z}from"./VDCEditor.vue_vue_type_script_setup_true_lang-IhnNo6sk.js";import{_ as ee}from"./ConfirmModal.vue_vue_type_script_setup_true_lang-k_ZxaDhN.js";import{_ as w}from"./ModalButton.vue_vue_type_script_setup_true_lang-WIw8hxFk.js";import{_ as te}from"./GDatePicker.vue_vue_type_style_index_0_lang-aP5TJiAZ.js";import{u as se}from"./use-model-wrapper-XtiLc3Xd.js";import{_ as ae}from"./ProgramSelect.vue_vue_type_script_setup_true_lang-UHoCrnxw.js";import{u as oe}from"./program-omP_c4K3.js";import{b as M}from"./time-formatter-ySAnBDjB.js";import{_ as le}from"./CuesheetScrollHeader.vue_vue_type_script_setup_true_lang-5tdp6pBY.js";const ne={class:"text-primary-gray-40 dark:text-white mt-2 space-y-3"},ie={class:"flex items-center justify-start mb-4 gap-6"},re={class:"flex items-center gap-2"},ce={class:"w-[84px] text-right shrink-0"},ue={class:"flex items-center gap-2"},de={class:"w-[84px] text-right shrink-0"},me={class:"flex items-center gap-2"},pe={class:"w-[84px] text-right shrink-0"},fe=T({__name:"CuesheetScrollInfo",props:{dataDetail:{}},emits:["update:dataDetail"],setup(k,{emit:m}){const r=k,C=m,v=oe(),x=_(()=>v.programs),s=se(r,C,"dataDetail"),b=_(()=>s.value.artclDivStartDateTime?M(s.value.artclDivStartDateTime):""),o=_(()=>s.value.artclDivEndDateTime?M(s.value.artclDivEndDateTime):""),{t:p}=E();return L(()=>s.value.brdcPgmId,()=>{const e=x.value.find(n=>n.id===s.value.brdcPgmId);s.value.program=e},{immediate:!0,deep:!0}),O(()=>{s.value.artclDivStartDateTime=b.value,s.value.artclDivEndDateTime=o.value}),(e,n)=>(f(),D("div",ne,[l("div",ie,[i(K,{icon:"custom-chevron",size:"w-[17px] h-[17px]"}),l("p",null,y(a(p)("PersonalArticle.상세정보")),1)]),l("div",re,[l("p",ce,y(a(p)("PersonalArticle.프로그램")),1),i(ae,{modelValue:a(s).program,"onUpdate:modelValue":n[0]||(n[0]=c=>a(s).program=c),label:"",class:"short-multiselect w-full"},null,8,["modelValue"])]),l("div",ue,[l("p",de,y(a(p)("Cuesheet.작성일")),1),i(te,{modelValue:a(s).scrlDtm,"onUpdate:modelValue":n[1]||(n[1]=c=>a(s).scrlDtm=c),class:"w-full",intent:"primary"},null,8,["modelValue"])]),l("div",me,[l("p",pe,y(a(p)("PersonalArticle.작성자")),1),i(N,{modelValue:a(s).inputrNm,"onUpdate:modelValue":n[2]||(n[2]=c=>a(s).inputrNm=c),readonly:"",intent:"primary",class:"w-full"},null,8,["modelValue"]),i(N,{modelValue:a(s).deptNm,"onUpdate:modelValue":n[3]||(n[3]=c=>a(s).deptNm=c),readonly:"",intent:"primary",class:"w-full"},null,8,["modelValue"])])]))}}),ve={class:"dark:text-white text-xs"},ye={class:"flex justify-between flex-grow h-full overflow-y-hidden flex-wrap pt-2"},_e={class:"flex flex-col h-[85vh] w-[70%] p-2.5 border border-primary-gray-999 rounded-md"},xe={class:"flex items-center gap-2 mb-3"},he={class:"w-[40px] text-right mr-2 font-bold text-primary-gray-40 dark:text-white"},ge={class:"flex-grow overflow-y-auto"},we={class:"flex flex-col h-[85vh] w-[29.5%] py-2 px-1 border border-primary-gray-999 rounded-md"},De={class:"px-11 h-[50px] border-t border-primary-gray-surface flex items-center justify-center"},ke={key:0,class:"flex items-center justify-center gap-x-2 p-2 w-full"},Ce={key:1,class:"flex items-center justify-center gap-x-2 w-full"},Pe=T({__name:"CuesheetScrollCreateAndEdit",props:{id:{}},setup(k){const m=k,{t:r}=E(),C=[{id:1,name:r("Community.상세정보")}],v=q(),{moveListCuesheetScroll:x}=X(),s=z(),{getUserInfo:b}=Q(),o=S({titl:"",ctt:"",brdcPgmId:null,scrlDtm:W(new Date),inputrNm:"",deptNm:"",attcFiles:[],program:null}),p=S(null),e=Y({isOpen:!1,title:"",content:"",type:"confirm",case:"confirm",icon:"exclamationCircle"}),n=_(()=>!!m.id),c=_(()=>b),P=async d=>{try{const t=await v.cuesheet.scroll.findOne(d);t.success&&(o.value=t.data)}catch(t){console.log("Fail to get data",t)}},U=()=>{e.title="Information",e.isOpen=!0,e.content=r("Community.제목을 입력하여 주세요"),e.type="basic",e.case="check-title",e.icon="customInfo"},j=()=>{e.title="확인",e.isOpen=!0,e.content=n.value?`${r("Community.내용이 변경되었습니다")}.
${r("Community.저장하시겠습니까?")}`:r("Community.저장하시겠습니까?"),e.type="confirm",e.case=n.value?"edit":"create",e.icon="customQuestionMark"},A=()=>{p.value.onClose()},h=()=>{e.isOpen=!1},B=async(d,t)=>{const u=await v.cuesheet.scroll.update(d,t);u!=null&&u.success?(window.Notify.success({message:I.cuesheet.scroll.success.edit}),x(s,"Edit")):window.Notify.error({message:u.msg})},R=async d=>{const t=await v.cuesheet.scroll.create(d);t!=null&&t.success?(window.Notify.success({message:I.cuesheet.scroll.success.create}),x(s)):window.Notify.error({message:t.msg})},F=()=>{if(!o.value.titl){U();return}j()},G=async()=>{var t;h();const d={titl:o.value.titl||"",ctt:o.value.ctt||"",brdcPgmId:((t=o.value.program)==null?void 0:t.id)||null,scrlDtm:o.value.scrlDtm||"",attcFileIds:[]};n.value&&m.id?B(m.id,d):R(d)};return O(()=>{if(m.id){P(m.id);return}o.value.inputrNm=c.value.userNm,o.value.deptNm=c.value.deptNm}),(d,t)=>(f(),D("div",ve,[i(le,{ref_key:"headerRef",ref:p,"is-edit-and-create":!0,onOnSave:F},null,512),l("div",ye,[l("div",_e,[l("div",xe,[l("p",he,y(a(r)("Community.제목")),1),i(N,{modelValue:o.value.titl,"onUpdate:modelValue":t[0]||(t[0]=u=>o.value.titl=u),name:"title",class:"w-3/5",intent:"primary","custom-input-class":"rounded-none"},null,8,["modelValue"])]),l("div",ge,[i(Z,{content:o.value.ctt,"editor-class":"h-full","onUpdate:content":t[1]||(t[1]=u=>o.value.ctt=u)},null,8,["content"])])]),l("div",we,[l("div",null,[i(J,{"is-plain-text-mode":!0,"overflow-class":!0,tabs:C,"is-compact-mode":!0,class:"justify-center space-y-3 rounded-xl"},{default:V(()=>[i(a(H),null,{default:V(()=>[i(fe,{"data-detail":o.value,"onUpdate:dataDetail":t[2]||(t[2]=u=>o.value=u)},null,8,["data-detail"])]),_:1})]),_:1})])])]),e.isOpen?(f(),$(ee,{key:0,"use-slot":"",intent:"secondary",text:e.content,type:e.type,title:e.title,icon:e.icon,onClose:h},{bottom:V(()=>[l("div",De,[e.type==="basic"?(f(),D("div",ke,[i(w,{text:"OK",icon:"check",onClick:h})])):g("",!0),e.type==="confirm"?(f(),D("div",Ce,[i(w,{text:a(r)("Community.예"),icon:"check",onClick:G},null,8,["text"]),i(w,{type:"warning",text:a(r)("Community.아니요"),icon:"xMark",onClick:A},null,8,["text"]),e.case==="edit"?(f(),$(w,{key:0,type:"warning",text:a(r)("Community.취소"),icon:"xMark",onClick:h},null,8,["text"])):g("",!0)])):g("",!0)])]),_:1},8,["text","type","title","icon"])):g("",!0)]))}});export{Pe as _};
