import{g as Se,M as dt}from"./splitpanes.es-dEoJOrhT.js";import{d as ee,a as D,h as x,w as I,X as k,Y as u,a0 as b,a3 as se,k as $,l as G,o as Te,G as y,c as Z,C as ce,F as me,a2 as z,a7 as ut,a1 as ct,Q as pe,al as Ie,ac as fe,aa as mt,ah as X,ae as pt,V as ft,ag as vt,t as xe,ai as gt,aj as ht,j as n,K as M,aV as W,aW as yt,ap as Ct}from"./index-eLyz9_Ts.js";import{u as wt}from"./use-dynamic-height-sJY6bk6Z.js";import{d as At,a as St}from"./journalist-QNhBHHjf.js";import"./organization-qjYuRO6g.js";import{w as De,b as ue}from"./pagination-_g_gc7Ms.js";import"./article-type.code-5cb8riL1.js";import{B}from"./buttons-3hbXC8Cn.js";import{u as Dt}from"./use-article-modals-Q7kcwEpc.js";import{u as _t,_ as Et}from"./ArticleHeader.vue_vue_type_script_setup_true_lang-yXyrXb9T.js";import{u as Tt}from"./use-intersection-observer-N6Mx7i0c.js";import"./vue-multiselect-Yz8FsF-E.js";import{G as It}from"./GSingleSelect-7u8H0FdH.js";import{u as xt}from"./sam-tw0uWIQ_.js";import"./purify.es-OZOo_0xz.js";import{_ as Rt}from"./SpellCheckerModal.vue_vue_type_script_setup_true_lang-Vt6XDlm8.js";/* empty css                                                                  */import{c as q}from"./make-grid-column-aeLSdEws.js";import{_ as Pt}from"./FormItem.vue_vue_type_script_setup_true_lang-ZXQ_7x89.js";import{G as Lt}from"./GTextarea-5GIFD2Mo.js";import{_ as _e}from"./FormLabel.vue_vue_type_script_setup_true_lang-SB4ukE1P.js";import"./GDatePicker.vue_vue_type_style_index_0_lang-aP5TJiAZ.js";import"./program-omP_c4K3.js";import{_ as ne}from"./ConfirmModal.vue_vue_type_script_setup_true_lang-k_ZxaDhN.js";import"./code-mapper-C6rl9hti.js";/* empty css                                                                    *//* empty css                                                                        */import"./tag-Q73uuSte.js";import"./category-zIRntbmZ.js";import"./department-wnuBQoCo.js";import"./GEditor.vue_vue_type_style_index_0_lang-FifEywK1.js";import"./file-Gx0JxWZZ.js";import"./GVideoPlayer-1SUF8s3O.js";import"./main-sHItgwS4.js";import"./vue-resizable.umd.min-blE9hPz6.js";import{u as Ot}from"./use-button-actions-XDAYYO3a.js";import{u as Ut}from"./use-grid-T1qwEXJA.js";import{_ as Vt}from"./ArticleList.vue_vue_type_script_setup_true_lang-q4Hao7dw.js";import{_ as Nt}from"./ArticleSearchTabPanel.vue_vue_type_script_setup_true_lang-t50ochUl.js";import{_ as $t}from"./ListViewToggle.vue_vue_type_script_setup_true_lang-ATgWoXP0.js";import"./use-pagination-JgK9yJDA.js";import"./ContentHeaderButtons.vue_vue_type_script_setup_true_lang-Db8CUXqr.js";import"./use-model-wrapper-XtiLc3Xd.js";import"./OrganizationSelect.vue_vue_type_script_setup_true_lang-BNuugYEX.js";import"./ArticleTypeSelect.vue_vue_type_script_setup_true_lang-Kp5wzGNr.js";import"./ProgramSelect.vue_vue_type_script_setup_true_lang-UHoCrnxw.js";import"./GMovableModal.vue_vue_type_script_setup_true_lang-elQvXjL0.js";import"./spell-check-OnBbfX8h.js";import"./PageLoader.vue_vue_type_script_setup_true_lang-ZvbvX14z.js";import"./GNoData.vue_vue_type_script_setup_true_lang-rWUb5JCO.js";import"./use-date-GeeGTbYh.js";import"./vue.runtime.esm-bundler-3P3R-Xon.js";import"./BaseList.vue_vue_type_script_setup_true_lang-aJzIAVm-.js";import"./format.util-TjqX3dGB.js";import"./time-formatter-ySAnBDjB.js";import"./html-dompurify.util-O5obI-gX.js";import"./IconLabel.vue_vue_type_script_setup_true_lang-1rGRsbjZ.js";import"./VDCEditor.vue_vue_type_script_setup_true_lang-IhnNo6sk.js";import"./file-division-code-x51qUgaH.js";import"./edtior.helper-P5juSeN5.js";import"./InjestDefaultForm.vue_vue_type_script_setup_true_lang-5k6d6I19.js";import"./VideoCoverageDetailModal.vue_vue_type_script_setup_true_lang-kK6MFMJO.js";import"./GEditor.vue_vue_type_script_setup_true_lang-a2qGOvtc.js";import"./FileListView.vue_vue_type_script_setup_true_lang-A40KFqZZ.js";import"./GRadioGroup-cHw1G1ew.js";import"./CommentV2.vue_vue_type_script_setup_true_lang-bRF2pab6.js";const Mt=ee({__name:"AuthorityViewModal",emits:["close"],setup(e,{emit:s}){const o=s,c=()=>{o("close")};return(C,d)=>(D(),x(se,{"modal-class":"w-1/3","content-class":"h-full",onClose:c},{title:I(()=>d[0]||(d[0]=[k("권한보기")])),content:I(()=>d[1]||(d[1]=[u("span",null,b("<사용자 부서 설정된 목록>"),-1),u("div",null,[u("div",null,"사용자 이름"),u("div",null,"Kim Lee Park")],-1)])),bottom:I(()=>d[2]||(d[2]=[])),_:1}))}}),Bt={class:"flex flex-col h-full justify-between"},zt={class:"flex space-x-2 items-center"},qt={class:"h-full flex gap-4 items-center p-6"},Gt={class:"relative inline-block w-[58px] h-[58px]"},Ht=["src","alt"],jt=["src","alt"],Kt={class:"space-x-2 flex items-center justify-center py-2"},Ft=ee({__name:"ArticleUrgencyDistributeModal",props:{articleId:{}},emits:["close"],setup(e,{emit:s}){const o=e,c=s,{fetchSamChannelGroup:C}=xt(),d=$(),A=$([]),R=G(()=>{var p;return(p=d.value)==null?void 0:p.channels.map(f=>({id:f.id,name:f.name,logo:f.logo,imageUrl:f.image_url}))}),U=G(()=>{var V;const a=((V=d.value)==null?void 0:V.channels)||[],p=a.map(P=>P.platform_id),f=a.map(P=>P.pivot.channel_id),F=p.map(P=>`platform_id[]=${P}`).join("&"),_=f.map(P=>`channel_id[]=${P}`).join("&");return`https://dev-sam.ynatv.co.kr/nrcs/publish?article_id=${o.articleId}&${_}&${F}`}),h=(a=!1)=>{c("close",a)},m=async()=>{try{const a=await C();a.success&&(A.value=a.data,d.value=A.value.find(p=>p.id===80))}catch(a){console.error(a)}},l=()=>{window.open(U.value,"_blank")};return Te(()=>{m()}),(a,p)=>(D(),x(se,{"modal-class":"",onClose:h},{title:I(()=>p[1]||(p[1]=[k("배포 기사 작성")])),content:I(()=>[u("div",Bt,[u("div",zt,[p[2]||(p[2]=u("div",null,"기사 유형",-1)),y(It,{modelValue:d.value,"onUpdate:modelValue":p[0]||(p[0]=f=>d.value=f),options:A.value,name:"distribute","item-label":"name","track-by":"id","allow-empty":!1,"preselect-first":!0,searchable:!1,disabled:!0,placeholder:"기사 유형",class:"flex-1"},null,8,["modelValue","options"])]),u("div",qt,[(D(!0),Z(me,null,ce(R.value,f=>(D(),Z("div",{key:f.id,class:"flex flex-col items-center"},[u("div",Gt,[u("img",{src:f.imageUrl,alt:f.name,class:"rounded-full shadow-xl absolute w-12 h-12 top-1/2 left-0 transform -translate-y-1/2"},null,8,Ht),u("img",{src:f.logo,alt:f.name,class:"rounded-full shadow-xl absolute w-7 h-7 top-1/2 right-0 transform -translate-y-1/2"},null,8,jt)]),u("span",null,b(f.name),1)]))),128))]),u("div",Kt,[y(z,{onClick:l},{default:I(()=>p[3]||(p[3]=[k("작성")])),_:1})])])]),_:1}))}}),Yt={class:"flex flex-col h-full"},Qt={class:"p-3"},Jt={class:"flex justify-start gap-2"},Wt={class:"flex-1 px-4 pb-4 overflow-hidden"},Xt={class:"flex justify-between gap-4 h-full"},Zt={class:"w-[40%]"},bt={class:"border rounded h-[calc(100%-1.5rem)] flex"},kt={class:"flex-1 overflow-y-auto"},eo={class:"flex items-center"},to={class:"ml-2"},oo={class:"text-sm text-gray-500"},ro={class:"border-l w-12 bg-gray-50 overflow-y-auto"},no={class:"flex flex-col"},so=["onClick"],io={class:"flex flex-col justify-center gap-2"},ao={class:"w-[40%]"},lo={class:"border rounded h-[calc(100%-1.5rem)] overflow-hidden"},uo={class:"flex justify-center gap-x-2"},co=ee({__name:"ArticleDeskingConfigModal",setup(e){const s=$(""),o=$([]),c=$([{id:"user1",name:"홍길동",department:"개발팀",approvalStep:1,selected:!1},{id:"user2",name:"홍길동2",department:"개발팀2",approvalStep:1,selected:!1},{id:"user3",name:"홍길동3",department:"개발팀3",approvalStep:1,selected:!1}]),C=["전체","ㄱ","ㅎ","A","Z","0","9"],d=$("전체"),A=p=>{d.value=p},R=()=>{const p=c.value.filter(f=>f.selected);o.value.push(...p),c.value=c.value.map(f=>({...f,selected:!1}))},U=()=>{o.value=o.value.filter(p=>!p.selected)},h=()=>{o.value=[]},m=()=>{console.log("submit")},l=()=>{console.log("onClose")},a=[q({headerName:"선택"}),q({headerName:"결재단계"}),q({headerName:"부서명"}),q({headerName:"사용자ID"}),q({headerName:"이름"})];return(p,f)=>{const F=ut("g-checkbox");return D(),x(se,{"modal-class":"w-[80%] h-[80%]","content-class":"h-[80%]"},{title:I(()=>f[1]||(f[1]=[k("데스킹 설정")])),content:I(()=>[u("div",Yt,[u("div",Qt,[u("div",Jt,[y(Pt,{label:"사용자"},{default:I(()=>[y(ct,{modelValue:s.value,"onUpdate:modelValue":f[0]||(f[0]=_=>s.value=_),placeholder:"사용자 이름을 입력하세요"},null,8,["modelValue"])]),_:1}),y(z,{"button-text":"조회"})])]),u("div",Wt,[u("div",Xt,[u("div",Zt,[f[2]||(f[2]=u("div",{class:"mb-2 font-bold"},"조직도",-1)),u("div",bt,[u("div",kt,[(D(!0),Z(me,null,ce(c.value,_=>(D(),Z("div",{key:_.id,class:"flex items-center justify-between p-2 hover:bg-gray-50 border-b"},[u("div",eo,[y(F,{modelValue:_.selected,"onUpdate:modelValue":V=>_.selected=V},null,8,["modelValue","onUpdate:modelValue"]),u("span",to,b(_.name),1)]),u("span",oo,b(_.department),1)]))),128))]),u("div",ro,[u("div",no,[(D(),Z(me,null,ce(C,_=>u("button",{key:_,type:"button",class:pe(["px-2 py-1.5 text-sm hover:bg-gray-100 border-b",d.value===_?"bg-blue-50 text-blue-600 font-medium":""]),onClick:V=>A(_)},b(_),11,so)),64))])])])]),u("div",io,[y(z,{"button-text":"추가 >",onClick:R}),y(z,{"button-text":"< 삭제",onClick:U}),y(z,{"button-text":"모두 삭제",onClick:h})]),u("div",ao,[f[3]||(f[3]=u("div",{class:"mb-2 font-bold"},"데스킹 설정 목록",-1)),u("div",lo,[y(Ie,{"column-defs":a})])])])])])]),bottom:I(()=>[u("div",uo,[y(z,{"button-text":"확인",onClick:m}),y(z,{"button-text":"취소",type:"secondary",onClick:l})])]),_:1})}}}),mo={class:"flex flex-col h-full gap-t-4"},po={class:"h-[70%] space-y-2"},fo={class:"h-[30%] space-y-2"},vo={class:"flex justify-center gap-x-2 mb-2"},go=ee({__name:"ArticleDeskingApproveModal",setup(e){const s=[q({headerName:"결재단계"}),q({headerName:"부서명"}),q({headerName:"사용자ID"}),q({headerName:"이름"}),q({headerName:"현황"})],o=()=>{console.log("approve")},c=()=>{console.log("return")},C=()=>{console.log("onClose")};return(d,A)=>(D(),x(se,{"modal-class":"w-1/2 h-[60%]","content-class":"h-[75%]"},{title:I(()=>A[0]||(A[0]=[k("데스킹 승인")])),content:I(()=>[u("div",mo,[u("div",po,[y(_e,{icon:"chevronRight",label:"데스킹 현황"}),y(Ie,{"column-defs":s})])]),u("div",fo,[y(_e,{icon:"chevronRight",label:"반려사유"}),y(Lt,{rows:3})])]),bottom:I(()=>[u("div",vo,[y(z,{"button-text":"승인",onClick:o}),y(z,{"button-text":"반려",type:"warning",onClick:c}),y(z,{"button-text":"취소",type:"secondary",onClick:C})])]),_:1}))}});function Ee(e){const s={rptrId:e.rptrId,chDivIds:e.chDivIds,artclDivCd:e.artclDivCd,deptId:e.deptId,searchValue:e.searchValue};return e.divSearchDateType?{...s,divSearchDateType:e.divSearchDateType,divSearchDate:e.divSearchDate}:(e.artclTypCd!==void 0&&e.artclTypCd!==null&&(s.artclTypCd=e.artclTypCd),e.brdcPgmId!==void 0&&e.brdcPgmId&&(s.brdcPgmId=e.brdcPgmId),{...s,startDate:e.startDate,endDate:e.endDate})}function ho(e,s,o){const c=fe(),{fetchArticles:C,fetchArticle:d,fetchArticleHistory:A,fetchDeletedArticles:R,fetchDeletedArticle:U,lockArticle:h,unlockArticle:m,deleteArticle:l,restoreArticle:a,personalTransferArticle:p,requestDesking:f,fetchArticleDeskings:F}=c,{getChDivId:_}=mt(),V=async()=>{var g,i;try{const v=De.default(Ee({searchValue:e.value.searchValue,startDate:e.value.startDate,endDate:e.value.endDate,divSearchDateType:e.value.divSearchDateType,divSearchDate:e.value.divSearchDate,chDivIds:_,brdcPgmId:e.value.brdcPgmId,artclTypCd:e.value.artclTypCd}),s.default),L=await C(v);L.success&&((g=o==null?void 0:o.onListSuccess)==null||g.call(o,L.data),(i=o==null?void 0:o.onUpdatePageInfo)==null||i.call(o,ue(L.data,s.default)))}catch(v){console.error("useArticleActions getArticles Error",v)}},P=async g=>{var i;try{const v=await d(g);v.success&&((i=o==null?void 0:o.onDetailSuccess)==null||i.call(o,v.data))}catch(v){console.error("useArticleActions getArticle Error",v)}},Y=async g=>{var i,v,L;try{const Q=(i=g[0])==null?void 0:i.data.id;if(!Q)return;const ae={page:s.history.page.value-1,size:s.history.size.value,sort:s.history.sortColumns.value},J=await A(Q,ae);J!=null&&J.success&&((v=o==null?void 0:o.onHistoryListSuccess)==null||v.call(o,J.data),(L=o==null?void 0:o.onUpdatePageInfo)==null||L.call(o,ue(J.data,s.history)))}catch(Q){console.error("useArticleActions getArticleHistory Error",Q)}},H=async()=>{var g,i;try{const v=De.default(Ee({startDate:e.value.startDate,endDate:e.value.endDate,divSearchDateType:e.value.divSearchDateType,divSearchDate:e.value.divSearchDate,chDivIds:_}),s.default),L=await R(v);L.success&&((g=o==null?void 0:o.onDeletedArticleListSuccess)==null||g.call(o,L.data),(i=o==null?void 0:o.onUpdatePageInfo)==null||i.call(o,ue(L.data,s.default)))}catch(v){console.error("useArticleActions getDeletedArticles Error",v)}};return{getArticleList:V,getArticle:P,getArticleHistory:Y,getDeletedArticleList:H,getDeletedArticle:async g=>{var i;try{const v=await U(g);v.success&&((i=o==null?void 0:o.onDeletedArticleSuccess)==null||i.call(o,v.data))}catch(v){console.error("userARticleActions getDeletedArticle Error",v)}},lockArticleItem:async g=>{try{const i=await h(g);if(!i.success)throw new Error("Failed to lock article");return i}catch(i){console.error("useArticleActions lockArticle Error:",i)}},unlockArticleItem:async g=>{try{(await m(g,{isForce:!0})).success&&(window.Notify.success({message:X.article.success.unlock}),await V())}catch(i){window.Notify.error({message:X.article.failed.unlock}),console.error("useArticleActions unlockArticle Error",i)}},deleteArticleItem:async g=>{try{const i=await l(g);if(i.success)return window.Notify.success({message:X.article.success.delete}),await V(),i.success}catch(i){window.Notify.error({message:X.article.failed.delete}),console.error("useArticleActions deleteArticleItem Error",i)}},restoreArticleItem:async g=>{try{const i=await a(g);if(i.success)return window.Notify.success({message:X.article.success.restore}),await H(),i.success}catch(i){window.Notify.error({message:X.article.failed.restore}),console.error("useArticleActions restoreArticleItem Error",i)}},personalTransfer:async g=>{try{const i={changeReporter:!0,changeScheduledDay:!0,reportLocation:"class_000",scheduledDay:pt().format("YYYYY-MM-DD HH:mm:ss"),replaceArticle:!0},v=await p(g,i);if(v.sucesss)return v.success}catch(i){console.error("useArticleActions personalTransfer Error",i)}},deskingRequest:async g=>{try{const v=await f(g,{apprvUserIds:[0]});if(v.success)return v.success}catch(i){console.error("useArticleActions deskingRequest Error",i)}},getDeskingList:async g=>{var i;try{const v=await F(g);v.success&&((i=o==null?void 0:o.onDeskingListSuccess)==null||i.call(o,v.data))}catch(v){console.error("useArticleActions getDeskingList Error",v)}}}}function yo(e){const s=fe(),{fetchCommentList:o,createComment:c,deleteComment:C,toggleCommentReaction:d}=s,A=async m=>{var l;try{const a=await o(m);a.success&&((l=e==null?void 0:e.onArticleCommentListSuccess)==null||l.call(e,a.data))}catch(a){console.error("useArticleCommentActions getCommentList Error",a)}};return{getCommentList:A,submitComment:async(m,l,a)=>{try{const p={cmntCtt:l};a&&(p.hrnkCmntId=a),(await c(m,p)).success&&await A(m)}catch(p){console.error("useArticleCommentActions submitComment Error",p)}},removeComment:async(m,l)=>{try{(await C(m,l)).success&&await A(m)}catch(a){console.error("useArticleCommentActions deleteComment Error",a)}},toggleReaction:async(m,l,a)=>{try{(await d(m,l,{reactionType:a?0:1})).success&&await A(m)}catch(p){console.error("useArticleCommentActions toggleReaction Error",p)}}}}function Co(e,s,o,c){const C=G(()=>c!=null&&c.value?c.value.deskingTypCd?["W","R"].includes(c.value.deskingTypCd):!0:!1),d=G(()=>!(c!=null&&c.value)||!c.value.deskingTypCd?!1:["D"].includes(c.value.deskingTypCd)),A=G(()=>c!=null&&c.value?c.value.deskingTypCd?["D","A"].includes(c.value.deskingTypCd):!0:!1),R=G(()=>[{id:1,label:"인쇄",disabled:s(B.PRINT)},{id:2,label:"Post"},{id:3,label:"닫기"}]),U=G(()=>{const l=[];return C.value&&l.push({id:4,label:"데스킹 요청",action:()=>o.toggleModal("deskingConfig"),disabled:s(B.DESKING_REQUEST)}),d.value&&l.push({id:5,label:"데스킹 취소",action:o.onDeskingCancel,disabled:s(B.DESKING_CANCEL)}),A.value&&l.push({id:6,label:"데스킹 승인",action:()=>o.toggleModal("deskingApprove"),disabled:s(B.DESKING_APPROVE)}),l.push({id:7,label:"개인이관",action:o.onPersonalTransfer,disabled:s(B.TRANSFER)},{id:8,label:"신규",action:o.moveNewArticle},{id:9,label:"교정",action:o.handleNavigateToEdit,disabled:s(B.EDIT)},{id:10,label:"인터넷이관",disabled:s(B.TRANSFER)},{id:11,label:"기사백업",disabled:s(B.BACKUP_ARTICLE)},{id:12,label:"삭제",action:()=>o.toggleModal("delete"),disabled:s(B.DELETE)}),l}),h=G(()=>[{id:12,label:"복구",action:()=>o.toggleModal("restore"),disabled:s(B.RESTORE)}]);return{menuItems:G(()=>[...e.value?h.value:U.value,...R.value])}}function wo(e){const s=ft({left:100,right:0}),o=vt.debounce(c=>{c?(s.left=50,s.right=50):(s.left=100,s.right=0)},16);return xe(()=>e.value,c=>{o(!!c)}),{paneSize:s}}function Ao(e){const s=$(!1),o=async()=>{var h;try{await((h=e==null?void 0:e.onSearch)==null?void 0:h.call(e))}catch(m){console.error("useArticleSearchActions onSearch Error",m)}};return{onSearch:o,onChangeDateType:async h=>{var m;try{await new Promise(l=>{var a;h&&((a=e==null?void 0:e.onUpdateSearchCondition)==null||a.call(e,{divSearchDateType:h})),l(null)}),await((m=e==null?void 0:e.onSearch)==null?void 0:m.call(e))}catch(l){console.error("useArticleSearchActions onChangeDateType Error",l)}},onChangeDate:async h=>{var m;try{await new Promise(l=>{var a;h&&((a=e==null?void 0:e.onUpdateSearchCondition)==null||a.call(e,{divSearchDate:h})),l(null)}),await((m=e==null?void 0:e.onSearch)==null?void 0:m.call(e))}catch(l){console.error("useArticleSearchActions onChangeDate Error",l)}},onChangeProgram:async h=>{var m;try{await new Promise(l=>{var a;h&&((a=e==null?void 0:e.onUpdateSearchCondition)==null||a.call(e,{brdcPgmId:h||void 0})),l(null)}),await((m=e==null?void 0:e.onSearch)==null?void 0:m.call(e))}catch(l){console.error("useArticleSearchActions onChangeProgram Error",l)}},onChangeArticleType:async h=>{var m;try{await new Promise(l=>{var a;(a=e==null?void 0:e.onUpdateSearchCondition)==null||a.call(e,{artclTypCd:h||void 0}),l(null)}),await((m=e==null?void 0:e.onSearch)==null?void 0:m.call(e))}catch(l){console.error("useArticleSearchActions onChangeArticleType Error",l)}},onChangeTransferType:async h=>{var m;try{await new Promise(l=>{var a;h&&((a=e==null?void 0:e.onUpdateSearchCondition)==null||a.call(e,{})),l(null)}),await((m=e==null?void 0:e.onSearch)==null?void 0:m.call(e))}catch(l){console.error("useArticleSearchActions onChangeTransferType Error",l)}},onToggleDeletedArticles:async h=>{try{s.value=h,await o()}catch(m){console.error("useArticleSearchActions onToggleDeletedArticles",m)}},showDeletedArticles:s,onUpdateSearchCondition:e==null?void 0:e.onUpdateSearchCondition}}const So={class:"relative flex flex-grow h-full overflow-y-hidden mt-2"},Nr=ee({__name:"ArticleView",setup(e){const s=fe(),o=At(),c=St(),{modals:C,toggleModal:d}=Dt(),{scrollGrid:A}=Ut(),{dynamicHeightVh:R}=wt("h-[73vh]","h-[80vh]"),{moveNewArticle:U,moveEditArticle:h,moveCueSheetDetail:m}=Ct(),l=$(null),a=$(!1),p=$("list"),f=$(),{fetchPersonalization:F,savePersonalization:_,updatePersonalization:V}=o,{code:P,selectedArticle:Y,selectedRowIndex:H,selectedRows:j,selectedArticleData:E,selectedArticleHistoryData:te,selectedArticleCommentData:ie,articleListItem:oe,articleEditorState:ve,articleFile:ge,articleSearchCondition:re,columnDefs:g,customColumn:i,isDeleteArticle:v,isDisasterArticle:L,articleListPagination:Q,articleHistoryListPagination:ae,hasSelectedItems:J,showDeleteList:le}=_t(),{isActionDisabled:Re}=Ot(J),{sortColumns:Pe,onChangePage:Le,pageInfo:he,setPageChangeCallback:Oe}=Q,{getArticleList:O,getArticle:ye,getArticleHistory:Ue,getDeletedArticleList:Ve,getDeletedArticle:Ne,lockArticleItem:$e,unlockArticleItem:Me,deleteArticleItem:Be,restoreArticleItem:ze,personalTransfer:qe,deskingRequest:Ge}=ho(re,{default:Q,history:ae},{onListSuccess:t=>{oe.value=t.content},onDetailSuccess:t=>{E.value=t},onHistoryListSuccess:t=>{te.value=t.content},onDeletedArticleListSuccess:t=>{oe.value=t.content},onDeletedArticleSuccess:t=>{E.value=t},onUpdatePageInfo:t=>{he.value=t}}),{getCommentList:He,submitComment:je,removeComment:Ke,toggleReaction:Fe}=yo({onArticleCommentListSuccess:t=>{ie.value=t}});Oe(async()=>{await O()});const{onSearch:Ye,onChangeDateType:Qe,onChangeDate:Je,onChangeArticleType:We,onChangeProgram:Xe,onChangeTransferType:Ze,onToggleDeletedArticles:be,showDeletedArticles:Ce,onUpdateSearchCondition:ke}=Ao({onSearch:async()=>{try{Ce.value?(le.value=!0,await Ve()):(le.value=!1,await O())}catch(t){console.error("Failed to get article list",t)}},onUpdateSearchCondition:t=>{re.value={...re.value,...t}}}),{observerTarget:et,setupObserver:tt}=Tt({onIntersect:async()=>{var t,r,S;await O(),(S=(r=(t=j.value)==null?void 0:t[0])==null?void 0:r.data)!=null&&S.id&&await ye(j.value[0].data.id)}}),{paneSize:we}=wo(Y),ot=async()=>{const t={classificationCode:P.value,columns:JSON.stringify(g.value.map(r=>r.field))};try{const r=await _(t);r.success&&(f.value=r.data.personalizationId,await de())}catch(r){console.error("articleView onSavePersonalColumn Error",r)}},de=async()=>{i.value=g.value.map(r=>r);const t=P.value;try{const r=await F(t);if(r||await ot(),r.success){f.value=r.data.personalizationId;const S=JSON.parse(r.data.columns),K=i.value.sort((w,N)=>S.indexOf(w.field)-S.indexOf(N.field));i.value=[...K]}}catch(r){console.error("articleView getPersonalColumn Error",r)}},rt=async t=>{try{const r=f.value,S={columns:JSON.stringify(t.map(w=>w.field))};(await V(r,S)).success&&await de()}catch(r){console.error("articleView onUpdatePersonalColumn Error",r)}},Ae=()=>{H.value<50&&(H.value+=1)},nt=t=>{m({cuesheetId:t.id,title:t.brdcPgmNm,brdcStartTime:t.brdcStartTime})},st=()=>{window.EventBus.on(W.MqEventBusEmitEnum.UPDATE_LOCK_ARTICLE,async()=>{await O()}),window.EventBus.on(W.MqEventBusEmitEnum.UPDATE_UNLOCK_ARTICLE,async()=>{await O()}),window.EventBus.on(W.MqEventBusEmitEnum.UPDATE_FORCE_UNLOCK_ARTICLE,async()=>{await O()}),window.EventBus.on(W.MqEventBusEmitEnum.CREATE_ARTICLE,async()=>{Ae(),await O()}),window.EventBus.on(W.MqEventBusEmitEnum.CREATE_COPY_ARTICLE,async()=>{Ae(),await O()}),window.EventBus.on(W.MqEventBusEmitEnum.DELETE_ARTICLE,async()=>{await O()}),window.EventBus.on(W.MqEventBusEmitEnum.UPDATE_APPROVE_STATUS_ARTICLE,async()=>{await O()})},T={navigation:{onNavigateToEdit:async()=>{try{E.value.lckYn==="Y"?d("editing"):(await $e(E.value.id)).success&&h({articleId:E.value.id,articleTitle:E.value.title})}catch(t){console.error("articleView handleNavigateToEdit Error",t)}}},grid:{onMoveColumn:async t=>{try{await rt(t)}catch(r){console.error("articleView onMoveColumn Error",r)}},onSortColumn:t=>{Pe.value=yt(t),O()},getData:t=>{g.value=t}},row:{onRowSelect:async t=>{var r,S,K,w;try{H.value=(r=t[0])==null?void 0:r.rowIndex,j.value=t;const N=((K=(S=t[0])==null?void 0:S.data)==null?void 0:K.id)??null;Y.value=((w=t[0])==null?void 0:w.data)??null,s.selectArticleId=N,N&&(Ce.value?await Ne(N):await ye(N))}catch(N){console.error("articleView onSelect Error",N)}},onDeselect:()=>{H.value=0,j.value=[],E.value=void 0,te.value=[],s.selectArticleId=null,Y.value=null},onDoubleClick:async t=>{try{Y.value=t.data,await T.navigation.onNavigateToEdit()}catch(r){console.error("articleView onDoubleClickedRow Error",r)}}},data:{onDelete:async()=>{try{if(!s.selectArticleId)return;await Be(s.selectArticleId)&&d("delete")}catch(t){console.error("ArticleView onDeleteArticle Error",t)}},onRestore:async()=>{try{if(!s.selectArticleId)return;await ze(s.selectArticleId)&&d("restore")}catch(t){console.error("ArticleView onRestoreArticle Error",t)}},onPersonalTransfer:async()=>{try{const t=E.value.id;await qe(t)&&d("personalTransfer")}catch(t){console.error("ArticleView onPersonalTransfer Error",t)}},onUnlock:async()=>{try{const t=E.value.id;await Me(t)}catch(t){console.error("ArticleView onUnlock Error",t)}},onSubmitComment:async(t,r)=>{try{const S=E.value.id;await je(S,t,r)}catch(S){console.error("ArticleView onSubmitCommnet Error",S)}},onRemoveComment:async t=>{console.log("debug logic..",t);try{const r=E.value.id;await Ke(r,t)}catch(r){console.error("ArticleView onRemoveComment Error",r)}},onToggleCommentReaction:async(t,r)=>{try{const S=E.value.id;await Fe(S,t,r)}catch(S){console.error("ArticleView onToggleReaction Error",S)}}},desking:{onDeskingRequest:async()=>{try{if(!s.selectArticleId)return;await Ge(s.selectArticleId)&&console.log("success")}catch(t){console.error("ArticleView onDeskingRequest Error",t)}}},tab:{onLoadHistory:async()=>{var t;(t=j.value)!=null&&t.length&&await Ue(j.value)},onLoadComment:async()=>{var t,r;(t=E.value)!=null&&t.id&&await He((r=E.value)==null?void 0:r.id)}}},{menuItems:it}=Co(le,Re,{onPersonalTransfer:T.data.onPersonalTransfer,moveNewArticle:U,handleNavigateToEdit:T.navigation.onNavigateToEdit,toggleModal:d},Y),at=t=>{switch(t.srcKey){case"rightScroll":{A(l.value,"right");break}case"leftScroll":{A(l.value,"left");break}}};return xe(()=>[v.value,L.value],()=>{O()}),Te(()=>{tt(),de(),st(),c.setShortKey()}),(t,r)=>{var K;const S=gt("shortkey");return ht((D(),Z("div",{ref_key:"observerTarget",ref:et,class:"w-full",onShortkey:at},[y(Et,{title:"공용기사",type:"list","menu-items":n(it),"onClick:search":n(Ye),onOnChangeDateType:n(Qe),onOnChangeDate:n(Je),onOnChangeProgram:n(Xe),onOnChangeArticleType:n(We),onOnChangeTransferType:n(Ze),onOnToggleDeletedArticles:n(be),"onUpdate:detailSearchValue":r[0]||(r[0]=w=>n(ke)(w))},null,8,["menu-items","onClick:search","onOnChangeDateType","onOnChangeDate","onOnChangeProgram","onOnChangeArticleType","onOnChangeTransferType","onOnToggleDeletedArticles"]),y($t,{modelValue:p.value,"onUpdate:modelValue":r[1]||(r[1]=w=>p.value=w),class:"mt-2"},null,8,["modelValue"]),u("div",So,[y(n(dt),{class:"default-theme"},{default:I(()=>[y(n(Se),{size:n(we).left},{default:I(()=>[u("div",{ref_key:"gridContainer",ref:l,class:pe(n(R))},[y(Vt,{class:"relative","is-loading":a.value,"view-type":p.value,"row-data":n(oe),"custom-column":n(i),"page-info":n(he),"selected-row-index":n(H),"is-show-column-setting":"",onDoubleClickedRow:T.row.onDoubleClick,onOnRowSelect:T.row.onRowSelect,onOnRowDeselect:T.row.onDeselect,onOnMoveColumn:T.grid.onMoveColumn,onOnSortColumn:T.grid.onSortColumn,onOnChangePage:n(Le),onOnGridReady:T.grid.getData,onOnMoveCueSheet:nt},null,8,["is-loading","view-type","row-data","custom-column","page-info","selected-row-index","onDoubleClickedRow","onOnRowSelect","onOnRowDeselect","onOnMoveColumn","onOnSortColumn","onOnChangePage","onOnGridReady"])],2)]),_:1},8,["size"]),y(n(Se),{size:n(we).right,class:pe(n(R))},{default:I(()=>{var w,N;return[n(E)?(D(),x(Nt,{key:(w=n(E))==null?void 0:w.id,"article-editor-state":n(ve),"article-data":n(E),"article-history-data":n(te),"article-comment-data":n(ie),"article-id":(N=n(E))==null?void 0:N.id,"article-file-tab":n(ge),mode:"read",onShowAuthorityViewModal:r[2]||(r[2]=lt=>n(d)("authorityView")),onShowSpellCheckerModal:r[3]||(r[3]=lt=>n(d)("spellChecker")),"onUpdate:historyPage":T.tab.onLoadHistory,onOnLoadComment:T.tab.onLoadComment,onOnUnlock:T.data.onUnlock,onSubmitComment:T.data.onSubmitComment,onRemoveComment:T.data.onRemoveComment,onRefreshComments:T.tab.onLoadComment,onToggleCommentReaction:T.data.onToggleCommentReaction},null,8,["article-editor-state","article-data","article-history-data","article-comment-data","article-id","article-file-tab","onUpdate:historyPage","onOnLoadComment","onOnUnlock","onSubmitComment","onRemoveComment","onRefreshComments","onToggleCommentReaction"])):M("",!0)]}),_:1},8,["size","class"])]),_:1})]),n(C).distribute?(D(),x(n(Ft),{key:0,"article-id":(K=n(j)[0])==null?void 0:K.data.id,onClose:r[4]||(r[4]=w=>n(d)("distribute"))},null,8,["article-id"])):M("",!0),n(C).authorityView?(D(),x(n(Mt),{key:1,onClose:r[5]||(r[5]=w=>n(d)("authorityView"))})):M("",!0),n(C).spellChecker?(D(),x(n(Rt),{key:2,onClose:r[6]||(r[6]=w=>n(d)("spellChecker"))})):M("",!0),n(C).deskingConfig?(D(),x(n(co),{key:3,onClose:r[7]||(r[7]=w=>n(d)("deskingConfig"))})):M("",!0),n(C).deskingApprove?(D(),x(n(go),{key:4,onClose:r[8]||(r[8]=w=>n(d)("deskingApprove"))})):M("",!0),n(C).personalTransfer?(D(),x(n(ne),{key:5,type:"basic",text:"개인기사로 전송이 완료되었습니다",onClose:r[9]||(r[9]=w=>n(d)("personalTransfer"))})):M("",!0),n(C).delete?(D(),x(n(ne),{key:6,text:"공용기사를 삭제하시겠습니까?",onOnSubmit:T.data.onDelete,onClose:r[10]||(r[10]=w=>n(d)("delete"))},null,8,["onOnSubmit"])):M("",!0),n(C).restore?(D(),x(n(ne),{key:7,text:"삭제된 공용기사를 복구 하시겠습니까?",onOnSubmit:T.data.onRestore,onClose:r[11]||(r[11]=w=>n(d)("restore"))},null,8,["onOnSubmit"])):M("",!0),n(C).editing?(D(),x(n(ne),{key:8,type:"basic",text:"기사가 교정상태입니다.",onClose:r[12]||(r[12]=w=>n(d)("editing"))})):M("",!0)],32)),[[S,n(c).currentShortkeys]])}}});export{Nr as default};
