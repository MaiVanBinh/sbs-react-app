import{a as q,b as F,c as G}from"./journalist-QNhBHHjf.js";import{d as R,ac as O,k as D,t as X,o as T,ai as E,a as g,h as S,w as A,X as Y,Y as s,G as l,j as e,a1 as J,aj as v,a3 as Q,aq as W,l as C,c as Z,K as M,ap as ee}from"./index-eLyz9_Ts.js";import"./organization-qjYuRO6g.js";import{u as te,_ as oe,a as ne}from"./StrategyPlanningElements.vue_vue_type_script_setup_true_lang-0cEeGHMx.js";import{u as se}from"./use-button-actions-XDAYYO3a.js";import{_ as ae}from"./StrategyMeetingHeader.vue_vue_type_script_setup_true_lang-6-ome72p.js";import"./vue-multiselect-Yz8FsF-E.js";import"./GSingleSelect-7u8H0FdH.js";import"./sam-tw0uWIQ_.js";import{_ as le}from"./ContentHeaderButtons.vue_vue_type_script_setup_true_lang-Db8CUXqr.js";import{_ as w}from"./IconLabel.vue_vue_type_script_setup_true_lang-1rGRsbjZ.js";import{d as h}from"./format.util-TjqX3dGB.js";import{h as ie}from"./html-dompurify.util-O5obI-gX.js";import"./spell-check-OnBbfX8h.js";/* empty css                                                                  */import"./GDatePicker.vue_vue_type_style_index_0_lang-aP5TJiAZ.js";import"./article-type.code-5cb8riL1.js";import"./program-omP_c4K3.js";import{_ as re}from"./ConfirmModal.vue_vue_type_script_setup_true_lang-k_ZxaDhN.js";import{_ as ce}from"./StrategyPlanningFormModal.vue_vue_type_script_setup_true_lang-ntoTljTI.js";import{_ as me}from"./CuesheetArticleSearchModal.vue_vue_type_script_setup_true_lang-_otPBcvS.js";/* empty css                                                                    *//* empty css                                                                        */import"./tag-Q73uuSte.js";import"./category-zIRntbmZ.js";import"./department-wnuBQoCo.js";import"./code-mapper-C6rl9hti.js";import"./GEditor.vue_vue_type_style_index_0_lang-FifEywK1.js";import"./file-Gx0JxWZZ.js";import"./GVideoPlayer-1SUF8s3O.js";import"./main-sHItgwS4.js";import"./vue-resizable.umd.min-blE9hPz6.js";import"./buttons-3hbXC8Cn.js";import"./FormItem.vue_vue_type_script_setup_true_lang-ZXQ_7x89.js";import"./make-grid-column-aeLSdEws.js";import"./use-model-wrapper-XtiLc3Xd.js";import"./purify.es-OZOo_0xz.js";import"./use-date-GeeGTbYh.js";import"./GMovableModal.vue_vue_type_script_setup_true_lang-elQvXjL0.js";import"./vue.runtime.esm-bundler-3P3R-Xon.js";const ue={class:"flex justify-end"},de={class:"w-full mt-4"},pe={class:"flex justify-between mt-4"},fe={class:"mt-4 p-4 w-full h-[70vh] border rounded-md"},ge=["innerHTML"],ve=R({__name:"ArticleViewModal",emits:["close"],setup(_,{emit:I}){const p=I,u=()=>{p("close")},o=O(),c=D(""),b=[{id:0,label:"인쇄"},{id:1,label:"닫기",action:()=>p("close")}],y=async()=>{o.selectArticleId&&await o.fetchArticle(o.selectArticleId)};return X(()=>o.articleDetailItem.artclCtt,async f=>{if(!f){c.value="";return}try{const n=await ie(f);c.value=n}catch(n){console.error("Error sanitizing content",n),c.value=""}},{immediate:!0}),T(()=>{y()}),(f,n)=>{const a=E("tooltip");return g(),S(Q,{"modal-class":"w-1/2 h-full","content-class":"h-full",onClose:u},{title:A(()=>n[1]||(n[1]=[Y("기사/기획서 내용보기")])),content:A(()=>[s("div",null,[s("div",ue,[l(le,{"menu-items":b})]),s("div",de,[l(J,{modelValue:e(o).articleDetailItem.artclTitl,"onUpdate:modelValue":n[0]||(n[0]=m=>e(o).articleDetailItem.artclTitl=m)},null,8,["modelValue"])]),s("div",pe,[v(l(w,{icon:"Pencil",text:e(h)(e(o).articleDetailItem.inputrNm)},null,8,["text"]),[[a,"작성자"]]),v(l(w,{icon:"Pencil",text:e(h)(e(o).articleDetailItem.brdcPgmNm)},null,8,["text"]),[[a,"프로그램"]]),v(l(w,{icon:"Pencil",text:e(h)(e(o).articleDetailItem.artclCttTime)},null,8,["text"]),[[a,"전체멘트시간"]]),v(l(w,{icon:"Pencil",text:e(h)(e(o).articleDetailItem.inputDtm)},null,8,["text"]),[[a,"작성시간"]]),v(l(w,{icon:"Pencil",text:e(h)(e(o).articleDetailItem.updtDtm)},null,8,["text"]),[[a,"??"]])]),s("div",fe,[s("div",{class:"whitespace-pre-wrap break-words w-full box-border",innerHTML:c.value},null,8,ge)])])]),_:1})}}});function _e(){const _=D({articleView:!1,cuesheetArticleSearch:!1,strategyPlanningInfo:!1,elementDelete:!1});return{isShowModals:_,openModal:u=>{_.value[u]=!0},closeModal:u=>{_.value[u]=!1}}}const ye={class:"w-full h-[calc(100vh-180px)]"},at=R({__name:"StrategyPlanningEditView",setup(_){const{moveStrategyMeetingList:I}=ee(),p=q(),{deleteTab:u,getActiveTab:o}=W(),c=F(),{updateStrategyMeeting:b}=c,y=G(),{setInfoElements:f}=y,{isShowModals:n,openModal:a,closeModal:m}=_e(),k=C(()=>y.infoData),d=D(null),x=D(!1),N=C(()=>x.value),{isActionDisabled:B}=se(N),P=()=>{u(o),I()},U=()=>{d.value&&d.value.insertRow()},j=()=>{d.value&&d.value.addRow()},V=()=>{d.value&&(d.value.handleDeleteRow(),m("elementDelete"))},K=async i=>{try{const t={...i};if((await b(t)).success){m("strategyPlanningInfo");const r=c.selectStrategyMeetingId;r&&f(r)}}catch(t){console.log("Failed StrategyPlanning Info Update",t)}},L=i=>{x.value=i},z=i=>{switch(i.srcKey){case"articleSearch":{a("cuesheetArticleSearch");break}case"articleView":{a("articleView");break}case"newSave":{console.log("new save@@@@");break}case"planningInfoModal":{a("strategyPlanningInfo");break}case"close":{console.log("close@@@@"),P();break}}},{editMenuItems:H}=te(B,{insertRow:U,addRow:j,deleteRow:V,openModal:a,closedTabAndMovePage:P});return T(()=>{y.mode="edit";const i=c.selectStrategyMeetingId;i&&(f(i),p.setShortKey())}),(i,t)=>{const $=E("shortkey");return v((g(),Z("div",{onShortkey:z},[s("div",null,[l(ae,{"is-show-search":!1,"menu-items":e(H)},null,8,["menu-items"])]),s("div",null,[l(oe)]),s("div",ye,[l(ne,{ref_key:"elementsRef",ref:d,"onUpdate:selectedItems":L},null,512)]),s("div",null,[e(n).cuesheetArticleSearch?(g(),S(e(me),{key:0,onClose:t[0]||(t[0]=r=>e(m)("cuesheetArticleSearch")),onDoubleClickedRow:t[1]||(t[1]=r=>e(a)("cuesheetArticleSearch"))})):M("",!0)]),s("div",null,[e(n).articleView?(g(),S(e(ve),{key:0,onClose:t[2]||(t[2]=r=>e(m)("articleView"))})):M("",!0)]),s("div",null,[e(n).strategyPlanningInfo?(g(),S(e(ce),{key:0,modelValue:k.value,"onUpdate:modelValue":[t[3]||(t[3]=r=>k.value=r),K],onClose:t[4]||(t[4]=r=>e(m)("strategyPlanningInfo"))},null,8,["modelValue"])):M("",!0)]),s("div",null,[e(n).elementDelete?(g(),S(e(re),{key:0,text:"삭제하시겠습니까?",onOnSubmit:V,onClose:t[5]||(t[5]=r=>e(m)("elementDelete"))})):M("",!0)])],32)),[[$,e(p).currentShortkeys]])}}});export{at as default};
