import{d as te,l as se,a5 as me,a as q,c as ve,G as l,Y as s,j as e,a1 as S,w as O,h as C,an as ut,K as ee,ao as rt,aD as ct,k as a,ad as ze,o as Ae,a0 as H,C as vt,Q as mt,F as pt,L as Je,a2 as y,a3 as xe,aj as le,aN as Se,ak as Ne,al as ft,am as Mt,bf as bt,V as Le,W as Ze,x as et,t as xt,ai as Be,X as We,as as Pe,a4 as ge,bN as Ue,ev as Oe,c6 as Rt,ae as Ye,af as qt,aG as gt,ah as Me,r as Vt,R as yt}from"./index-eLyz9_Ts.js";import{g as Fe,M as tt}from"./splitpanes.es-dEoJOrhT.js";import{G as wt}from"./GSingleSelect-7u8H0FdH.js";import{_ as _t,i as ht}from"./RequestMovieList.vue_vue_type_script_setup_true_lang-ZrIKGRWZ.js";import{_ as lt,R as re}from"./request-state-code-yOgGt4ZJ.js";import{_ as He}from"./GNoData.vue_vue_type_script_setup_true_lang-rWUb5JCO.js";import{u as Xe}from"./use-model-wrapper-XtiLc3Xd.js";import{_ as je}from"./FileDropzone.vue_vue_type_script_setup_true_lang-SVeHifZw.js";import{G as ce}from"./GTextarea-5GIFD2Mo.js";import{_ as Ve}from"./UserSelect.vue_vue_type_script_setup_true_lang-Hk5THi0e.js";import{R as ot}from"./async-validator.util-IJrtpoc1.js";import{F as Te}from"./file-division-code-x51qUgaH.js";import{G as Ke}from"./GVideoPlayer-1SUF8s3O.js";import{_ as Ct}from"./VideoList.vue_vue_type_script_setup_true_lang-tHhi7MCM.js";import{_ as kt}from"./GTagSelect.vue_vue_type_script_setup_true_lang-WNNVbcKh.js";import{r as It}from"./use-render-component-K20sHqiA.js";import{_ as at}from"./UserAddSelect.vue_vue_type_script_setup_true_lang-1UBsZdY3.js";import{u as st}from"./file-Gx0JxWZZ.js";import{_ as $t}from"./GDatePicker.vue_vue_type_style_index_0_lang-aP5TJiAZ.js";import{u as Qe}from"./request-video-E7HyVAPm.js";import"./company-enum-MfEiIQ-N.js";import{P as Ge}from"./panel-size-enum-06wl-l7a.js";import{_ as Et}from"./ArticleTypeSelect.vue_vue_type_script_setup_true_lang-Kp5wzGNr.js";import{_ as Dt}from"./ConfirmButton.vue_vue_type_script_setup_true_lang-onM9evN8.js";import{_ as At}from"./DepartmentMultiSelect.vue_vue_type_script_setup_true_lang-OqmQVQH2.js";import"./vue-multiselect-Yz8FsF-E.js";import"./request-video-status-code-xC1SmtSe.js";import"./use-request-graphic-XV-ZVIJE.js";import"./tag-Q73uuSte.js";import"./program-omP_c4K3.js";import"./category-zIRntbmZ.js";import"./department-wnuBQoCo.js";import"./ArticleSearchTabPanel.vue_vue_type_script_setup_true_lang-t50ochUl.js";import"./format.util-TjqX3dGB.js";import"./time-formatter-ySAnBDjB.js";import"./journalist-QNhBHHjf.js";import"./organization-qjYuRO6g.js";import"./html-dompurify.util-O5obI-gX.js";import"./purify.es-OZOo_0xz.js";import"./IconLabel.vue_vue_type_script_setup_true_lang-1rGRsbjZ.js";import"./VDCEditor.vue_vue_type_script_setup_true_lang-IhnNo6sk.js";import"./edtior.helper-P5juSeN5.js";import"./article-type.code-5cb8riL1.js";import"./ArticleHeader.vue_vue_type_script_setup_true_lang-yXyrXb9T.js";import"./use-pagination-JgK9yJDA.js";import"./ContentHeaderButtons.vue_vue_type_script_setup_true_lang-Db8CUXqr.js";import"./FormItem.vue_vue_type_script_setup_true_lang-ZXQ_7x89.js";import"./OrganizationSelect.vue_vue_type_script_setup_true_lang-BNuugYEX.js";import"./ProgramSelect.vue_vue_type_script_setup_true_lang-UHoCrnxw.js";import"./InjestDefaultForm.vue_vue_type_script_setup_true_lang-5k6d6I19.js";import"./FormLabel.vue_vue_type_script_setup_true_lang-SB4ukE1P.js";import"./VideoCoverageDetailModal.vue_vue_type_script_setup_true_lang-kK6MFMJO.js";import"./GEditor.vue_vue_type_script_setup_true_lang-a2qGOvtc.js";import"./GEditor.vue_vue_type_style_index_0_lang-FifEywK1.js";import"./FileListView.vue_vue_type_script_setup_true_lang-A40KFqZZ.js";import"./main-sHItgwS4.js";import"./vue.runtime.esm-bundler-3P3R-Xon.js";import"./make-grid-column-aeLSdEws.js";import"./GRadioGroup-cHw1G1ew.js";/* empty css                                                                    */import"./CommentV2.vue_vue_type_script_setup_true_lang-bRF2pab6.js";/* empty css                                                                  */import"./RequestItemImage.vue_vue_type_script_setup_true_lang-9Wg4vW2c.js";import"./no-image-ERwb0SRC.js";import"./use-date-GeeGTbYh.js";const St={class:"h-full space-y-2"},Nt={class:"space-y-2"},Ut=te({__name:"VideoMetaData",props:{metaData:{}},setup(T){const w=T,d=se(()=>({title:"",category:"",videoReporterName:""})),x=se(()=>{var p,v,u;return{src:(v=(p=w.metaData)==null?void 0:p.proxyVideo)==null?void 0:v.proxyVideoUrl,type:`${(u=w.metaData)==null?void 0:u.mediaType}/mp4`}}),{t:i}=me();return(p,v)=>(q(),ve("div",St,[l(Ke,{"video-source":x.value},null,8,["video-source"]),s("section",Nt,[l(S,{modelValue:d.value.title,"onUpdate:modelValue":v[0]||(v[0]=u=>d.value.title=u),label:e(i)("VideoMetaData.제목"),disabled:""},null,8,["modelValue","label"]),l(S,{modelValue:d.value.category,"onUpdate:modelValue":v[1]||(v[1]=u=>d.value.category=u),label:e(i)("VideoMetaData.카테고리"),disabled:""},null,8,["modelValue","label"]),l(S,{label:e(i)("VideoMetaData.취재계절"),disabled:""},null,8,["label"]),l(S,{modelValue:d.value.videoReporterName,"onUpdate:modelValue":v[2]||(v[2]=u=>d.value.videoReporterName=u),label:e(i)("VideoMetaData.제작자"),disabled:""},null,8,["modelValue","label"]),l(S,{label:e(i)("VideoMetaData.촬영일"),disabled:""},null,8,["label"]),l(S,{label:e(i)("VideoMetaData.촬영장소"),disabled:""},null,8,["label"]),l(S,{label:e(i)("VideoMetaData.방송일"),disabled:""},null,8,["label"]),l(S,{label:e(i)("VideoMetaData.방송시간"),disabled:""},null,8,["label"]),l(kt,{label:e(i)("VideoMetaData.키워드"),"item-label":e(i)("VideoMetaData.키워드"),disabled:""},null,8,["label","item-label"]),l(S,{label:e(i)("VideoMetaData.설명"),disabled:""},null,8,["label"])])]))}}),Ot={class:"flex flex-col h-full bg-white p-0.5 dark:bg-dark rounded-md"},Ft=te({__name:"VideoTabPanel",props:{isLoading:{type:Boolean},isShowMetaData:{type:Boolean,default:!0},videoMetaData:{default:void 0}},setup(T){const w=T,d=se(()=>[{id:1,name:"메타데이터",isShow:w==null?void 0:w.isShowMetaData}].filter(x=>x.isShow));return(x,i)=>(q(),ve("div",Ot,[l(rt,{tabs:d.value},{default:O(()=>[x.isShowMetaData?(q(),C(e(ut),{key:0,unmount:!1,class:"flex flex-col h-full"},{default:O(()=>[x.isLoading||!x.videoMetaData?(q(),C(He,{key:0})):(q(),C(Ut,{key:1,"meta-data":x.videoMetaData},null,8,["meta-data"]))]),_:1})):ee("",!0)]),_:1},8,["tabs"])]))}}),jt={class:"flex flex-col h-full space-y-2"},Tt={class:"flex items-center space-x-2"},Lt=["onClick"],Pt={class:"flex flex-col h-full"},Gt={class:"flex self-end space-x-2 justify-end"},nt=te({__name:"SearchVideoModal",emits:["close","on-selected"],setup(T,{emit:w}){const d=w,{t:x}=me(),i=()=>{d("close")},p=ct(),v=a(ze.sm),u=a(!1),c=a(1),U=a(["asc","desc"]),$=a(""),m=a({isShow:!0,page:c.value,totalPages:0,totalElements:0,numberOfElements:0,size:v.value}),M=a([]),b=a(),g=a(),k=a([{id:1,name:"mam",label:"MAM 검색"},{id:2,name:"ingest",label:"INGEST 의뢰"},{id:3,name:"graphic",label:"그래픽 의뢰"}]),E=a(),K=L=>{E.value=L.id},G=async()=>{const L={startDate:"2024-01-01",endDate:"2024-06-29",pageable:{page:c.value-1,size:ze.sm,sort:[U.value[0]]},keyword:$.value};try{u.value=!0;const j=await p.mam.basic.findAll(L);j.success&&(M.value=j.data.data)}catch(j){console.log("Fail to get mam video list",j)}finally{u.value=!1}},z=L=>{b.value=L.map(j=>j.data),g.value=L.map(j=>j.data)[0],console.log(g.value)},P=()=>{c.value=1,G()},I=()=>{d("on-selected",b.value),i()};return Ae(()=>{E.value=k.value[0].id,E.value&&G()}),(L,j)=>(q(),C(xe,{"modal-class":"sm:w-[90vw]","content-class":"h-[85vh]",onClose:i},{title:O(()=>[s("div",null,H(e(x)("Modal.RequestMovie.EditModal.SearchVideoModal.영상_검색")),1)]),content:O(()=>[s("div",jt,[s("div",Tt,[(q(!0),ve(pt,null,vt(k.value,Y=>(q(),ve("button",{key:Y.id,type:"button",class:mt(["rounded-full px-1 lg:px-2 xl:px-4 py-1 text-sm font-medium leading-5 hover:text-white hover:bg-primary focus:outline-none",[E.value===Y.id?"bg-primary text-white font-D2CodingBold":"bg-gray-100 text-black"]]),onClick:oe=>K(Y)},H(Y.label),11,Lt))),128)),l(S,{modelValue:$.value,"onUpdate:modelValue":j[0]||(j[0]=Y=>$.value=Y),width:"w-72",onKeyup:Je(P,["enter"])},null,8,["modelValue"]),l(y,{icon:"magnifying-glass",onClick:P})]),l(e(tt),{class:"default-theme"},{default:O(()=>[l(e(Fe),null,{default:O(()=>[s("div",Pt,[l(Ct,{"row-data":M.value,"page-info":m.value,onSelectedRow:z},null,8,["row-data","page-info"])])]),_:1}),l(e(Fe),{size:"44","max-size":"80","min-size":"44"},{default:O(()=>[l(Ft,{"is-loading":u.value,"video-meta-data":g.value},null,8,["is-loading","video-meta-data"])]),_:1})]),_:1}),s("div",Gt,[l(y,{type:"secondary","button-text":e(x)("Modal.RequestMovie.EditModal.SearchVideoModal.취소"),onClick:i},null,8,["button-text"]),l(y,{"button-text":e(x)("Modal.RequestMovie.EditModal.SearchVideoModal.선택"),disabled:!b.value,onClick:I},null,8,["button-text","disabled"])])])]),_:1}))}}),zt={class:"flex items-center"},Yt={key:1,class:"flex justify-center items-center space-x-2"},Bt=te({__name:"MediaActionMenu",props:{rowIndex:{},isBeforeRequest:{type:Boolean,default:!1}},emits:["click-approve","click-reject","click-remove"],setup(T,{emit:w}){const d=w,x=()=>{d("click-approve")},i=()=>{d("click-reject")},p=()=>{alert("개발중")},v=()=>{d("click-remove")};return(u,c)=>(q(),ve("div",zt,[u.isBeforeRequest?le((q(),C(Ne,{key:0,icon:"trash",onClick:v},null,512)),[[e(Se),"삭제"]]):(q(),ve("div",Yt,[le(l(Ne,{icon:"check-circle",onClick:x},null,512),[[e(Se),"검수요청"]]),le(l(Ne,{icon:"no-symbol",onClick:i},null,512),[[e(Se),"반려"]]),le(l(Ne,{icon:"arrow-top-right-on-square",onClick:p},null,512),[[e(Se),"MAM"]])]))]))}}),it=te({__name:"RequestExtractionList",props:{rowData:{}},emits:["selected-row","on-grid-ready","on-click-remove"],setup(T,{emit:w}){const d=w,x=a(),i=c=>{const U=document.createElement("div"),$={rowIndex:c.rowIndex,isBeforeRequest:!0,onClickRemove:()=>{d("on-click-remove",c.rowIndex)}};return It(Bt,$,U)},p=[{headerName:"순번",filter:!1,maxWidth:60,valueGetter:"node.rowIndex",cellRenderer:c=>Mt(c)},{headerName:"콘텐츠ID",field:"contentId",minWidth:100},{headerName:"시작지점",field:"markIn",minWidth:96},{headerName:"끝지점",field:"markOut",minWidth:96},{headerName:"길이",field:"duration",minWidth:96},{headerName:"ACTION",field:"",minWidth:60,cellClass:"flex items-center",cellRenderer:c=>i(c)}],v=c=>{d("selected-row",c)},u=c=>{x.value=c.api,d("on-grid-ready",c)};return(c,U)=>(q(),C(ft,{"row-data":c.rowData,"column-defs":p,onSelectedRows:v,onOnGridReady:u},null,8,["row-data"]))}}),Wt={class:"flex flex-col h-full space-y-4"},Ht={class:"flex w-full h-full space-x-1 overflow-y-hidden"},Kt={class:"flex-1 h-full p-2 overflow-y-auto"},Qt={class:"h-full space-y-2"},Xt={class:"flex items-center space-x-2"},Jt={class:"flex items-center space-x-2"},Zt={class:"space-y-2"},el={class:"space-y-2"},tl={class:"flex-1 h-full space-y-2 p-2 overflow-y-auto"},ll={class:"flex items-center justify-between"},ol={class:"text-gray-800 dark:text-dark-gray-200 text-sm"},al={class:"self-end"},sl={class:"w-full"},nl={key:0,class:"w-full aspect-video"},il={class:"grid grid-flow-col sm:grid-rows-3 xl:grid-rows-2 2xl:grid-rows-1 gap-2 w-full dark:text-dark-gray-200"},dl={class:"flex items-center space-x-2"},ul={class:"flex items-center space-x-2"},rl={class:"flex items-center space-x-2"},cl={class:"w-10 text-xs"},vl={class:"flex items-center justify-between text-xs dark:text-dark-gray-200"},ml={class:"flex space-x-2 justify-end"},pl=te({__name:"RequestCreateModal",props:{requestFile:{},dubbingFile:{},requestArticleTitle:{default:""},articleId:{default:0}},emits:["close","on-create","update:requestArticleTitle","update:articleId"],setup(T,{emit:w}){const d=T,x=w,{t:i}=me(),{tusFileUpload:p}=st(),{requestArticleTitle:v,articleId:u}=bt(d,x);let c;const U=a(),$=a("00:00:00"),m=a("00:00:00"),M=a("00:00:00"),b=a("00:00:00"),g=a(),k=a(!1),E=a(),K=a(),G=a(),z=se(()=>{var V;return((V=G.value)==null?void 0:V.phoneNumber)||""}),P=a(),I=a(),L=a(),j=a([]),Y=a([]),oe=a([]),N=a([]),B=Xe(d,x,"requestFile"),Q=Xe(d,x,"dubbingFile"),X=()=>{x("close")},J=Le({title:""}),{pass:ne,errorFields:Z}=Ze(J,ot),pe=a(!1),ie=a(!1),be=()=>{pe.value=!0},ae=V=>{u.value=V.id,v.value=V.artclTitl},de=()=>{u.value=null,v.value=""},fe=async V=>{if(!V)return[];for await(const r of V){const A={fileDivisionCode:Te.Request.id,publicYn:"Y",file:r,fileName:r.name},F=await p(A);F.success&&Y.value.push(F.data.contentId)}},ye=async V=>{if(!V)return[];for await(const r of V){const A={fileDivisionCode:Te.Request.id,publicYn:"Y",file:r,fileName:r.name},F=await p(A);F.success&&oe.value.push(F.data.contentId)}},W=async()=>{var A;const V=c.api.getRenderedNodes();N.value=V.map(F=>{var f,t,o;return{markIn:(f=F.data)==null?void 0:f.markIn,markOut:(t=F.data)==null?void 0:t.markOut,markOrder:F==null?void 0:F.rowIndex,mamId:(o=F.data)==null?void 0:o.contentId}});const r={title:J.title,content:K.value,articleId:u.value||null,editorId:((A=G.value)==null?void 0:A.id)||null,assignContent:P.value,directions:I.value,attachmentContentIdList:Y.value||[],reporterAudioContentIdList:oe.value||[],segmentInformationList:N.value};x("on-create",r),X()},we=V=>{G.value=V,V&&(G.value=null)},_e=()=>{ie.value=!0},he=V=>{var r;E.value=V[0],U.value=(r=E.value)==null?void 0:r.contentId},Ce=se(()=>{var V,r,A;return{src:(r=(V=E.value)==null?void 0:V.proxyVideo)==null?void 0:r.proxyVideoUrl,type:`${(A=E.value)==null?void 0:A.mediaType}/mp4`}}),ke=V=>{c=V},Re=(V,r)=>{const A=Oe(V)-Oe(r);if(A<0){b.value="00:00:00",k.value=!0;return}b.value=Ue(A),k.value=!1},qe=()=>{N.value.push({markIn:m.value,markOut:M.value,duration:b.value,contentId:U.value}),c.api.setGridOption("rowData",N.value)},Ie=V=>{const r=c.api.getRenderedNodes();N.value=r.filter(A=>A.rowIndex!==V).map(A=>A.data),c.api.setGridOption("rowData",N.value)},ue=()=>{m.value=$.value,M.value=$.value},$e=V=>{g.value=Ue(V)},Ee=()=>{m.value=g.value},De=()=>{M.value=g.value};return et(()=>{Re(M.value,m.value)}),xt(()=>v.value,()=>{J.title=v.value||""},{immediate:!0}),(V,r)=>{const A=Be("tooltip");return q(),C(xe,{"modal-class":"sm:w-[90vw]","content-class":"h-[85vh]",onClose:X},{title:O(()=>[We(H(e(i)("Modal.RequestMovie.CreateModal.영상편집의뢰_등록")),1)]),content:O(()=>{var F,f,t,o;return[s("div",Wt,[s("div",Ht,[s("div",Kt,[s("div",Qt,[s("div",Xt,[l(S,{modelValue:e(v),"onUpdate:modelValue":r[0]||(r[0]=n=>Pe(v)?v.value=n:null),class:"flex-1","auto-complete":!1,label:e(i)("Modal.RequestMovie.CreateModal.기사_조회"),placeholder:e(i)("Modal.RequestMovie.CreateModal.기사를_선택해주세요"),disabled:!0},null,8,["modelValue","label","placeholder"]),(F=e(v))!=null&&F.length?(q(),C(y,{key:1,class:"self-end",icon:"trash",type:"secondary",onClick:de})):(q(),C(y,{key:0,class:"self-end",icon:"magnifying-glass",onClick:be}))]),l(S,{modelValue:J.title,"onUpdate:modelValue":r[1]||(r[1]=n=>J.title=n),"error-placeholder":!1,"error-msg":(t=(f=e(Z))==null?void 0:f.title)!=null&&t.length?(o=e(Z))==null?void 0:o.title[0].message:"",label:e(i)("Modal.RequestMovie.CreateModal.제목"),placeholder:e(i)("Modal.RequestMovie.CreateModal.제목을_입력해주세요"),required:""},null,8,["modelValue","error-msg","label","placeholder"]),l(ce,{modelValue:K.value,"onUpdate:modelValue":r[2]||(r[2]=n=>K.value=n),rows:8,maxlength:2e3,label:e(i)("Modal.RequestMovie.CreateModal.내용"),placeholder:e(i)("Modal.RequestMovie.CreateModal.의뢰_요청_사항을_입력해주세요")},null,8,["modelValue","label","placeholder"]),s("div",Jt,[l(Ve,{modelValue:G.value,"onUpdate:modelValue":r[3]||(r[3]=n=>G.value=n),"allow-empty":"","is-login-user":"",class:"flex-1",label:e(i)("Modal.RequestMovie.CreateModal.편집자"),placeholder:e(i)("Modal.RequestMovie.CreateModal.편집자"),onOnRemove:we},null,8,["modelValue","label","placeholder"]),l(S,{modelValue:z.value,"onUpdate:modelValue":r[4]||(r[4]=n=>z.value=n),class:"flex-1",label:e(i)("Modal.RequestMovie.CreateModal.연락처"),disabled:""},null,8,["modelValue","label"])]),l(ce,{modelValue:P.value,"onUpdate:modelValue":r[5]||(r[5]=n=>P.value=n),rows:8,maxlength:2e3,label:e(i)("Modal.RequestMovie.CreateModal.배정_내역"),placeholder:e(i)("Modal.RequestMovie.CreateModal.배정_내역을_입력해주세요")},null,8,["modelValue","label","placeholder"]),l(ce,{modelValue:I.value,"onUpdate:modelValue":r[6]||(r[6]=n=>I.value=n),rows:4,maxlength:500,label:e(i)("Modal.RequestMovie.CreateModal.지시사항"),placeholder:e(i)("Modal.RequestMovie.CreateModal.지시사항을_입력해주세요")},null,8,["modelValue","label","placeholder"]),l(Ve,{modelValue:L.value,"onUpdate:modelValue":r[7]||(r[7]=n=>L.value=n),label:e(i)("RequestGraphic.GraphicCreateModal.의뢰_정보.검수자")},null,8,["modelValue","label"]),l(at,{modelValue:j.value,"onUpdate:modelValue":r[8]||(r[8]=n=>j.value=n),label:"참조자","table-name":"참조자 연락차",searchable:"","use-department":!1,class:"space-y-2"},null,8,["modelValue"]),s("div",Zt,[r[16]||(r[16]=s("div",{class:"flex truncate sm:text-xs text-xs font-medium text-gray-700 dark:text-white"}," 첨부파일 ",-1)),l(je,{"file-data":e(B),"onUpdate:fileData":r[9]||(r[9]=n=>Pe(B)?B.value=n:null),mode:"create",onOnUploadFile:fe},null,8,["file-data"])]),s("div",el,[r[17]||(r[17]=s("div",{class:"flex truncate sm:text-xs text-xs font-medium text-gray-700 dark:text-white"}," 리포터 더빙 ",-1)),l(je,{"file-data":e(Q),"onUpdate:fileData":r[10]||(r[10]=n=>Pe(Q)?Q.value=n:null),mode:"create",onOnUploadFile:ye},null,8,["file-data"])])])]),s("div",tl,[s("div",ll,[s("span",ol,H(e(i)("Modal.RequestMovie.CreateModal.영상_제목")),1),s("div",al,[l(y,{type:"secondary",icon:"magnifying-glass","button-text":e(i)("Modal.RequestMovie.CreateModal.영상검색"),onClick:_e},null,8,["button-text"])])]),s("div",sl,[E.value?(q(),C(Ke,{key:1,"video-source":Ce.value,"onUpdate:currentTime":$e},null,8,["video-source"])):(q(),ve("div",nl,[l(He)]))]),s("div",il,[s("div",dl,[l(y,{class:"w-10","button-text":e(i)("Modal.RequestMovie.CreateModal.시작지점"),onClick:Ee},null,8,["button-text"]),l(ge,{modelValue:m.value,"onUpdate:modelValue":r[11]||(r[11]=n=>m.value=n),"mask-format":"##:##:##",width:"w-20",disabled:!E.value},null,8,["modelValue","disabled"])]),s("div",ul,[l(y,{class:"w-10","button-text":e(i)("Modal.RequestMovie.CreateModal.끝지점"),onClick:De},null,8,["button-text"]),l(ge,{modelValue:M.value,"onUpdate:modelValue":r[12]||(r[12]=n=>M.value=n),"mask-format":"##:##:##",width:"w-20",disabled:!E.value},null,8,["modelValue","disabled"])]),s("div",rl,[s("span",cl,H(e(i)("Modal.RequestMovie.CreateModal.길이")),1),l(ge,{modelValue:b.value,"onUpdate:modelValue":r[13]||(r[13]=n=>b.value=n),"mask-format":"##:##:##",width:"w-20",disabled:""},null,8,["modelValue"])]),le(l(y,{class:"justify-self-end",type:"secondary",icon:"material-filter-alt-off",onClick:ue},null,512),[[A,e(i)("Modal.RequestMovie.CreateModal.초기화")]])]),s("div",vl,[s("span",null,H(e(i)("Modal.RequestMovie.CreateModal.구간추출정보")),1),l(y,{"button-text":e(i)("Modal.RequestMovie.CreateModal.추가"),disabled:!E.value||k.value||b.value===$.value,onClick:qe},null,8,["button-text","disabled"])]),l(it,{"row-data":N.value,onOnGridReady:ke,onOnClickRemove:Ie},null,8,["row-data"])])]),s("div",ml,[l(y,{type:"secondary","button-text":e(i)("Modal.RequestMovie.CreateModal.취소"),onClick:X},null,8,["button-text"]),l(y,{"button-text":e(i)("Modal.RequestMovie.CreateModal.확인"),disabled:!e(ne),onClick:W},null,8,["button-text","disabled"])])]),pe.value?(q(),C(lt,{key:0,onSelectedRequestArticle:ae,onClose:r[14]||(r[14]=n=>pe.value=!1)})):ee("",!0),ie.value?(q(),C(nt,{key:1,onOnSelected:he,onClose:r[15]||(r[15]=n=>ie.value=!1)})):ee("",!0)]}),_:1})}}}),fl={class:"flex flex-col h-full space-y-4"},Ml={class:"flex w-full h-full space-x-1 overflow-y-hidden"},bl={class:"flex-1 h-full p-2 overflow-y-auto"},xl={class:"h-full space-y-2"},Rl={class:"flex items-center space-x-2"},ql={class:"flex items-center space-x-2"},gl={class:"space-y-2"},Vl={class:"space-y-2"},yl={class:"flex-1 h-full space-y-2 p-2 overflow-y-auto"},wl={class:"flex items-center justify-between"},_l={class:"text-gray-800 dark:text-dark-gray-200 text-sm"},hl={class:"self-end"},Cl={class:"w-full"},kl={key:0,class:"w-full aspect-video"},Il={class:"grid grid-flow-col sm:grid-rows-3 md:grid-rows-2 xl:grid-rows-1 gap-2 w-full dark:text-dark-gray-200"},$l={class:"flex items-center space-x-2"},El={class:"flex items-center space-x-2"},Dl={class:"flex items-center space-x-2"},Al={class:"w-10 text-xs"},Sl={class:"flex items-center justify-between text-xs dark:text-dark-gray-200"},Nl={class:"flex space-x-2 justify-end"},Ul=te({__name:"RequestEditModal",props:{requestId:{default:0},requestFile:{}},emits:["close","on-edit","on-assign-editor"],setup(T,{emit:w}){const{t:d}=me(),x=T,i=w,{fetchRequestVideo:p}=Qe(),{tusFileUpload:v}=st(),u=a(),c=a(),U=a("00:00:00"),$=a("00:00:00"),m=a("00:00:00"),M=a("00:00:00"),b=a(),g=a(!1),k=a(),E=a(),K=a(),G=a(),z=a(),P=a(),I=a(),L=a(),j=a(),Y=a([]),oe=se(()=>{var f;return((f=P.value)==null?void 0:f.phoneNumber)||""}),N=a([]),B=a([]),Q=a([]),X=a([]),J=a([]);let ne;const Z=Le({title:""}),{pass:pe,errorFields:ie}=Ze(Z,ot),be=async()=>{var f,t;try{const o=await p(x.requestId);o.success&&(z.value=o.data.requestStatusCode,u.value=o.data.article?o.data.article.articleTitle:"",Z.title=o.data.title,K.value=o.data.content||"",P.value=o.data.editorId||void 0,L.value=o.data.directions||"",I.value=o.data.assignContent||"",c.value=o.data.assignDateTime?Ye(o.data.assignDateTime).format("YYYY-MM-DD HH:mm:ss"):c.value,N.value=o.data.attachmentFileList.map(n=>({...n,name:n.mediaTitle})),B.value=o.data.reporterAudioFileList.map(n=>({...n,name:n.mediaTitle})),(f=N.value)!=null&&f.length&&(Q.value=N.value.map(n=>n==null?void 0:n.fileId)),(t=B.value)!=null&&t.length&&(X.value=B.value.map(n=>n==null?void 0:n.fileId)),J.value=o.data.segmentInformationList.map(n=>({...n,contentId:n.mamId})))}catch(o){console.log("Fail to get detail request video",o)}},ae=()=>{i("close"),N.value=[]},de=a(!1),fe=a(!1),ye=()=>{de.value=!0},W=async f=>{if(!f)return[];let t=[];const o=[];t=N.value.filter(h=>"fileId"in h).map(h=>{const{fileName:D,...R}=h;return{fileNm:D,...R}});const n=t==null?void 0:t.map(h=>h.fileId);for await(const h of f){const D={fileDivisionCode:Te.Request.id,publicYn:"Y",file:h,fileName:h.name},R=await v(D);R.success&&o.push(R.data.contentId)}Q.value=[...n,...o]},we=async f=>{if(!f)return[];let t=[];const o=[];t=B.value.filter(h=>"fileId"in h).map(h=>{const{fileName:D,...R}=h;return{fileNm:D,...R}});const n=t==null?void 0:t.map(h=>h.fileId);for await(const h of f){const D={fileDivisionCode:Te.Request.id,publicYn:"Y",file:h,fileName:h.name},R=await v(D);R.success&&o.push(R.data.contentId)}X.value=[...n,...o]},_e=async f=>{if(!f)return[];const t=f.fileId,o=N.value.filter(n=>n.fileId!==t);if(N.value=o,!(o!=null&&o.length)){Q.value=[];return}Q.value=o.map(n=>n.fileId)},he=f=>{G.value=f.id,u.value=f.artclTitl,u.value&&(Z.title=u.value)},Ce=async()=>{var t;const f={title:Z.title,content:K.value,articleId:G.value||null,editorId:((t=P.value)==null?void 0:t.id)||null,assignContent:I.value,directions:L.value,attachmentContentIdList:Q.value||null,reporterAudioContentIdList:X.value||null};i("on-edit",f),ae()},ke=()=>{G.value=null,u.value=null},Re=f=>{P.value=f,f&&(P.value=null)},qe=()=>{fe.value=!0},Ie=f=>{var t;E.value=f[0],k.value=(t=E.value)==null?void 0:t.contentId},ue=se(()=>{var f,t,o;return{src:(t=(f=E.value)==null?void 0:f.proxyVideo)==null?void 0:t.proxyVideoUrl,type:`${(o=E.value)==null?void 0:o.mediaType}/mp4`}}),$e=f=>{b.value=Ue(f)},Ee=()=>{$.value=b.value},De=()=>{m.value=b.value},V=(f,t)=>{const o=Oe(f)-Oe(t);if(o<0){M.value="00:00:00",g.value=!0;return}M.value=Ue(o),g.value=!1},r=async()=>{J.value.push({markIn:$.value,markOut:m.value,duration:M.value,contentId:k.value}),ne.api.setGridOption("rowData",J.value)},A=()=>{$.value=U.value,m.value=U.value},F=f=>{ne=f};return et(()=>{V(m.value,$.value)}),Rt(async()=>{await be()}),(f,t)=>{const o=Be("tooltip");return q(),C(xe,{"modal-class":"sm:w-[90vw]","content-class":"h-[85vh]",onClose:ae},{title:O(()=>[We(H(e(d)("Modal.RequestMovie.EditModal.영상편집의뢰_수정")),1)]),content:O(()=>{var n,h,D,R;return[s("div",fl,[s("div",Ml,[s("div",bl,[s("div",xl,[s("div",Rl,[l(S,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=_=>u.value=_),class:"flex-1","auto-complete":!1,label:e(d)("Modal.RequestMovie.CreateModal.기사_조회"),placeholder:e(d)("Modal.RequestMovie.CreateModal.기사를_선택해주세요"),disabled:!0},null,8,["modelValue","label","placeholder"]),(n=u.value)!=null&&n.length?(q(),C(y,{key:1,class:"self-end",icon:"trash",type:"secondary",onClick:ke})):(q(),C(y,{key:0,class:"self-end",icon:"magnifying-glass",onClick:ye}))]),l(S,{modelValue:Z.title,"onUpdate:modelValue":t[1]||(t[1]=_=>Z.title=_),"error-placeholder":!0,"error-msg":(D=(h=e(ie))==null?void 0:h.title)!=null&&D.length?(R=e(ie))==null?void 0:R.title[0].message:"",label:e(d)("Modal.RequestMovie.EditModal.제목"),placeholder:e(d)("Modal.RequestMovie.EditModal.제목을_입력해주세요"),required:""},null,8,["modelValue","error-msg","label","placeholder"]),l(ce,{modelValue:K.value,"onUpdate:modelValue":t[2]||(t[2]=_=>K.value=_),rows:8,maxlength:2e3,label:e(d)("Modal.RequestMovie.EditModal.내용"),placeholder:e(d)("Modal.RequestMovie.EditModal.의뢰_요청_사항을_입력해주세요")},null,8,["modelValue","label","placeholder"]),s("div",ql,[l(Ve,{modelValue:P.value,"onUpdate:modelValue":t[3]||(t[3]=_=>P.value=_),"allow-empty":"",class:"flex-1",label:e(d)("Modal.RequestMovie.EditModal.편집자"),placeholder:e(d)("Modal.RequestMovie.EditModal.편집자"),disabled:!(z.value===e(re).PREPARE.id||z.value===e(re).ASSIGN.id),onOnRemove:Re},null,8,["modelValue","label","placeholder","disabled"]),l(S,{modelValue:oe.value,"onUpdate:modelValue":t[4]||(t[4]=_=>oe.value=_),class:"flex-1",label:e(d)("Modal.RequestMovie.EditModal.연락처"),disabled:""},null,8,["modelValue","label"])]),l(ce,{modelValue:I.value,"onUpdate:modelValue":t[5]||(t[5]=_=>I.value=_),rows:8,maxlength:2e3,label:e(d)("Modal.RequestMovie.EditModal.배정_내역"),placeholder:e(d)("Modal.RequestMovie.EditModal.배정_내역을_입력해주세요"),disabled:!(z.value===e(re).PREPARE.id||z.value===e(re).ASSIGN.id)},null,8,["modelValue","label","placeholder","disabled"]),l(ce,{modelValue:L.value,"onUpdate:modelValue":t[6]||(t[6]=_=>L.value=_),rows:4,maxlength:500,label:e(d)("Modal.RequestMovie.EditModal.지시사항"),placeholder:e(d)("Modal.RequestMovie.EditModal.지시사항을_입력해주세요"),disabled:!(z.value===e(re).PREPARE.id||z.value===e(re).ASSIGN.id)},null,8,["modelValue","label","placeholder","disabled"]),l(Ve,{modelValue:j.value,"onUpdate:modelValue":t[7]||(t[7]=_=>j.value=_),label:e(d)("RequestGraphic.GraphicCreateModal.의뢰_정보.검수자")},null,8,["modelValue","label"]),l(at,{modelValue:Y.value,"onUpdate:modelValue":t[8]||(t[8]=_=>Y.value=_),label:"참조자","table-name":"참조자 연락차",searchable:"","use-department":!1,class:"space-y-2"},null,8,["modelValue"]),l($t,{modelValue:c.value,"onUpdate:modelValue":t[9]||(t[9]=_=>c.value=_),label:e(d)("Modal.RequestMovie.EditModal.배정일시"),placeholder:c.value?c.value:e(d)("Modal.RequestMovie.EditModal.배정이_필요합니다"),disabled:""},null,8,["modelValue","label","placeholder"]),s("div",gl,[t[17]||(t[17]=s("div",{class:"flex truncate sm:text-xs text-xs font-medium text-gray-700 dark:text-white"}," 첨부파일 ",-1)),l(je,{"file-data":N.value,"onUpdate:fileData":t[10]||(t[10]=_=>N.value=_),mode:"edit",onOnUploadFile:W,onOnDeleteFile:_e},null,8,["file-data"])]),s("div",Vl,[t[18]||(t[18]=s("div",{class:"flex truncate sm:text-xs text-xs font-medium text-gray-700 dark:text-white"}," 리포터 더빙 ",-1)),l(je,{"file-data":B.value,"onUpdate:fileData":t[11]||(t[11]=_=>B.value=_),mode:"edit",onOnUploadFile:we},null,8,["file-data"])])])]),s("div",yl,[s("div",wl,[s("span",_l,H(e(d)("Modal.RequestMovie.EditModal.영상_제목")),1),s("div",hl,[l(y,{type:"secondary",icon:"magnifying-glass","button-text":e(d)("Modal.RequestMovie.EditModal.영상검색"),onClick:qe},null,8,["button-text"])])]),s("div",Cl,[E.value?(q(),C(Ke,{key:1,"video-source":ue.value,"onUpdate:currentTime":$e},null,8,["video-source"])):(q(),ve("div",kl,[l(He)]))]),s("div",Il,[s("div",$l,[l(y,{class:"w-10","button-text":e(d)("Modal.RequestMovie.EditModal.시작지점"),onClick:Ee},null,8,["button-text"]),l(ge,{modelValue:$.value,"onUpdate:modelValue":t[12]||(t[12]=_=>$.value=_),"mask-format":"##:##:##",width:"w-20",disabled:!E.value},null,8,["modelValue","disabled"])]),s("div",El,[l(y,{class:"w-10","button-text":e(d)("Modal.RequestMovie.EditModal.끝지점"),onClick:De},null,8,["button-text"]),l(ge,{modelValue:m.value,"onUpdate:modelValue":t[13]||(t[13]=_=>m.value=_),"mask-format":"##:##:##",width:"w-20",disabled:!E.value},null,8,["modelValue","disabled"])]),s("div",Dl,[s("span",Al,H(e(d)("Modal.RequestMovie.EditModal.길이")),1),l(ge,{modelValue:M.value,"onUpdate:modelValue":t[14]||(t[14]=_=>M.value=_),"mask-format":"##:##:##",width:"w-20",disabled:""},null,8,["modelValue"])]),le(l(y,{class:"justify-self-end",icon:"arrow-path",onClick:A},null,512),[[o,e(d)("Modal.RequestMovie.EditModal.새로고침")]])]),s("div",Sl,[s("span",null,H(e(d)("Modal.RequestMovie.EditModal.구간정보")),1),l(y,{"button-text":e(d)("Modal.RequestMovie.EditModal.추가"),disabled:!E.value||g.value||M.value===U.value,onClick:r},null,8,["button-text","disabled"])]),l(it,{"row-data":J.value,onOnGridReady:F},null,8,["row-data"])])]),s("div",Nl,[l(y,{type:"secondary","button-text":e(d)("Modal.RequestMovie.EditModal.취소"),onClick:ae},null,8,["button-text"]),l(y,{"button-text":e(d)("Modal.RequestMovie.EditModal.확인"),disabled:!e(pe),onClick:Ce},null,8,["button-text","disabled"])])]),de.value?(q(),C(lt,{key:0,onSelectedRequestArticle:he,onClose:t[15]||(t[15]=_=>de.value=!1)})):ee("",!0),fe.value?(q(),C(nt,{key:1,onOnSelected:Ie,onClose:t[16]||(t[16]=_=>fe.value=!1)})):ee("",!0)]}),_:1})}}}),Ol={class:"h-full space-y-6 py-2"},Fl={class:"space-y-4"},jl={class:"flex space-x-2 w-full justify-between"},Tl={class:"flex justify-end space-x-2"},Ll=te({__name:"EditorAssignModal",props:{requestInfo:{}},emits:["close","on-assign-editor"],setup(T,{emit:w}){const d=T,x=w,{t:i}=me(),p=()=>{x("close")},v=a({editorId:void 0,assignContent:"",editorPhonenumber:"",editorName:"",directions:""}),u=a(),c=se(()=>{var m;return((m=u.value)==null?void 0:m.phoneNumber)||""}),U=()=>{var M;const m={editorId:(M=u.value)==null?void 0:M.id,assignContent:v.value.assignContent,directions:v.value.directions};x("on-assign-editor",m),p()},$=m=>{u.value=m,m&&(u.value=null)};return Ae(()=>{var m,M,b,g,k;v.value={editorId:((m=d.requestInfo)==null?void 0:m.editorId)||void 0,assignContent:((M=d.requestInfo)==null?void 0:M.assignContent)||"",editorPhonenumber:((b=d.requestInfo)==null?void 0:b.editorPhonenumber)||"",editorName:((g=d.requestInfo)==null?void 0:g.editorName)||"",directions:((k=d.requestInfo)==null?void 0:k.directions)||""},u.value=v.value.editorId}),(m,M)=>(q(),C(xe,{"modal-class":"sm:w-1/3",onClose:p},{title:O(()=>[s("div",null,H(e(i)("Modal.RequestMovie.EditorAssignModal.편집자_배정")),1)]),content:O(()=>[s("div",Ol,[s("div",Fl,[s("div",jl,[l(Ve,{modelValue:u.value,"onUpdate:modelValue":M[0]||(M[0]=b=>u.value=b),label:e(i)("Modal.RequestMovie.EditorAssignModal.편집자"),placeholder:e(i)("Modal.RequestMovie.EditorAssignModal.편집자"),"allow-empty":"","is-login-user":"",class:"flex-1",onOnRemove:$},null,8,["modelValue","label","placeholder"]),l(S,{modelValue:c.value,"onUpdate:modelValue":M[1]||(M[1]=b=>c.value=b),class:"flex-1",label:e(i)("Modal.RequestMovie.EditorAssignModal.연락처"),placeholder:"- 없이 숫자로 입력",disabled:""},null,8,["modelValue","label"])]),l(ce,{modelValue:v.value.assignContent,"onUpdate:modelValue":M[2]||(M[2]=b=>v.value.assignContent=b),label:e(i)("Modal.RequestMovie.EditorAssignModal.전달사항"),placeholder:"배정 내용을 입력해주세요. (최대 2,000자)"},null,8,["modelValue","label"])]),s("div",Tl,[l(y,{type:"secondary","button-text":e(i)("Modal.RequestMovie.EditorAssignModal.취소"),onClick:p},null,8,["button-text"]),l(y,{"button-text":e(i)("Modal.RequestMovie.EditorAssignModal.편집자_배정"),onClick:U},null,8,["button-text"])])])]),_:1}))}}),Pl={class:"h-full space-y-8"},Gl={class:"flex justify-end space-x-2"},dt=te({__name:"RejectReasonModal",emits:["close","handle-reject-request"],setup(T,{emit:w}){const{t:d}=me(),x=a(),i=w,p=()=>{i("close")},v=()=>{const u={isApprove:!1,rejectReason:x.value};i("handle-reject-request",u)};return(u,c)=>(q(),C(xe,{"modal-class":"sm:w-1/3",onClose:p},{title:O(()=>[We(H(e(d)("Modal.RequestMovie.RejectReasonModal.반려사유_입력")),1)]),content:O(()=>[s("div",Pl,[s("div",null,[l(ce,{modelValue:x.value,"onUpdate:modelValue":c[0]||(c[0]=U=>x.value=U),rows:5,placeholder:e(d)("Modal.RequestMovie.RejectReasonModal.반려사유를_입력해주세요")},null,8,["modelValue","placeholder"])]),s("div",Gl,[l(y,{type:"secondary","button-text":e(d)("Modal.RequestMovie.RejectReasonModal.취소"),onClick:p},null,8,["button-text"]),l(y,{"button-text":e(d)("Modal.RequestMovie.RejectReasonModal.확인"),onClick:v},null,8,["button-text"])])])]),_:1}))}}),zl={class:"h-full space-y-4 p-1"},Yl={class:"space-y-5"},Bl={class:"flex space-x-2"},Wl={class:"flex space-x-2"},Hl={class:"flex justify-end space-x-2"},Kl=te({__name:"ReporterReviewModal",props:{requestVideoId:{}},emits:["on-approve","on-reject","close"],setup(T,{emit:w}){const d=T,x=w,{fetchRequestVideo:i}=Qe(),p=Le({title:"",reporter:"",reporterPhoneNumber:"",editorPhoneNumber:"",editorName:""}),v=()=>{x("close")},{t:u}=me(),c=a(!1),U=async()=>{const b=await i(d.requestVideoId);b.success&&(p.title=b.data.title,p.reporter=b.data.reporterName,p.reporterPhoneNumber=b.data.editorPhoneNumber,p.editorPhoneNumber=b.data.editorPhoneNumber,p.editorName=b.data.editorName)},$=()=>{c.value=!0},m=()=>{x("on-approve",{isApprove:!0,rejectReason:""})},M=b=>{x("on-reject",b)};return Ae(()=>{d.requestVideoId&&U()}),(b,g)=>(q(),C(xe,{"modal-class":"sm:w-1/3 ",onClose:v},{title:O(()=>[s("div",null,H(e(u)("Modal.RequestMovie.ReporterReviewModal.기자검수")),1)]),content:O(()=>[s("div",zl,[s("div",Yl,[l(ce,{modelValue:p.title,"onUpdate:modelValue":g[0]||(g[0]=k=>p.title=k),label:e(u)("Modal.RequestMovie.ReporterReviewModal.제목"),disabled:""},null,8,["modelValue","label"]),s("div",Bl,[l(S,{modelValue:p.reporter,"onUpdate:modelValue":g[1]||(g[1]=k=>p.reporter=k),label:e(u)("Modal.RequestMovie.ReporterReviewModal.취재기자"),class:"flex-1",disabled:""},null,8,["modelValue","label"]),l(S,{modelValue:p.reporterPhoneNumber,"onUpdate:modelValue":g[2]||(g[2]=k=>p.reporterPhoneNumber=k),label:e(u)("Modal.RequestMovie.ReviewModal.연락처"),placeholder:"- 없이 숫자로 입력",class:"flex-1",disabled:""},null,8,["modelValue","label"])]),s("div",Wl,[l(S,{modelValue:p.editorName,"onUpdate:modelValue":g[3]||(g[3]=k=>p.editorName=k),label:e(u)("Modal.RequestMovie.ReporterReviewModal.편집자"),class:"flex-1",disabled:""},null,8,["modelValue","label"]),l(S,{modelValue:p.editorPhoneNumber,"onUpdate:modelValue":g[4]||(g[4]=k=>p.editorPhoneNumber=k),label:e(u)("Modal.RequestMovie.ReporterReviewModal.연락처"),class:"flex-1",disabled:""},null,8,["modelValue","label"])]),g[6]||(g[6]=s("div",{class:"flex items-center justify-center text-sm text-gray-800 dark:text-gray-200"},[s("span",null,"⚠ 산출물의 검수를 진행 후 승인 절차를 진행해주세요.")],-1))]),s("div",Hl,[l(y,{type:"secondary","button-text":e(u)("Modal.RequestMovie.ReporterReviewModal.취소"),onClick:v},null,8,["button-text"]),l(y,{icon:"no-symbol",type:"secondary","button-text":e(u)("Modal.RequestMovie.ReporterReviewModal.반려"),onClick:$},null,8,["button-text"]),l(y,{icon:"check","button-text":e(u)("Modal.RequestMovie.ReporterReviewModal.승인"),onClick:m},null,8,["button-text"])])]),s("div",null,[c.value?(q(),C(dt,{key:0,onHandleRejectRequest:M,onClose:g[5]||(g[5]=k=>c.value=!1)})):ee("",!0)])]),_:1}))}}),Ql={class:"h-full space-y-6 py-2"},Xl={class:"space-y-4"},Jl={class:"flex space-x-2 w-full justify-between"},Zl={class:"flex justify-end space-x-2"},eo=te({__name:"RequestVideoCompleteModal",props:{requestVideoId:{}},emits:["close","on-complete-request-video"],setup(T,{emit:w}){const d=T,x=w,{t:i}=me(),p=()=>{x("close")},v=Le({editorId:void 0,assignContent:"",editorPhonenumber:"",editorName:"",directions:""}),u=a(),c=se(()=>{var m;return((m=u.value)==null?void 0:m.phoneNumber)||""}),U=()=>{var M;const m={checkerId:(M=u.value)==null?void 0:M.id};x("on-complete-request-video",m)},$=m=>{u.value=m,m&&(u.value=null)};return Ae(()=>{console.log("requestVideoId :: ",d.requestVideoId),console.log("editorInfo :: ",v)}),(m,M)=>(q(),C(xe,{"modal-class":"sm:w-1/3","overflow-fixed":"",onClose:p},{title:O(()=>[s("div",null,H(e(i)("Modal.RequestMovie.EditorAssignModal.의뢰_완료")),1)]),content:O(()=>[s("div",Ql,[s("div",Xl,[s("div",Jl,[l(Ve,{modelValue:u.value,"onUpdate:modelValue":M[0]||(M[0]=b=>u.value=b),label:e(i)("Modal.RequestMovie.EditorAssignModal.내부_확인자"),placeholder:e(i)("Modal.RequestMovie.EditorAssignModal.내부_확인자"),"allow-empty":"",class:"flex-1",onOnRemove:$},null,8,["modelValue","label","placeholder"]),l(S,{modelValue:c.value,"onUpdate:modelValue":M[1]||(M[1]=b=>c.value=b),class:"flex-1",label:e(i)("Modal.RequestMovie.EditorAssignModal.연락처"),placeholder:"- 없이 숫자로 입력",disabled:""},null,8,["modelValue","label"])])]),s("div",Zl,[l(y,{type:"secondary","button-text":e(i)("Modal.RequestMovie.EditorAssignModal.취소"),onClick:p},null,8,["button-text"]),l(y,{"button-text":e(i)("Modal.RequestMovie.EditorAssignModal.완료"),onClick:U},null,8,["button-text"])])])]),_:1}))}}),to={class:"flex flex-col h-full"},lo={class:"flex justify-between flex-wrap gap-1 mb-3"},oo={class:"flex items-center flex-wrap gap-1.5"},ao={class:"space-x-1.5"},ba=te({__name:"RequestMovieView",setup(T){const{t:w}=me(),{fetchRequestVideoList:d,createRequestVideo:x,updateRequestVideo:i,deleteRequestVideo:p,assignRequestVideo:v,forceCompleteRequestVideo:u,confirmMediaRequestVideo:c,completeRequestVideo:U}=Qe(),$=a(),m=a(),M=a(re.values),b=a(),g=a([Ye().subtract(1,"week").format("YYYY-MM-DD"),Ye().format("YYYY-MM-DD")]),k=a(""),E=a(1),K=a(ze.sm),G=a("asc"),z=a({isShow:!1,page:1,totalElements:0,totalPages:1,numberOfElements:0,size:K.value}),P=a([]),I=a(),L=a(),j=a(),Y=a(!1),oe=a([]),N=a(!1),B=a(!1),Q=a("create"),X=a(0),J=a(0),ne=a([]),Z=a([]),pe=a(0),ie=a(""),be=a(!1),ae=a(!1),de=a(!1),fe=a(!1),ye=se(()=>{var t;return ht((t=I.value)==null?void 0:t.requestStatusCode)}),W=async()=>{var o,n,h;const t={page:E.value-1,size:K.value,sort:[G.value],reporterId:((o=$.value)==null?void 0:o.id)||"",requestStatusCode:((n=m.value)==null?void 0:n.id)||"",searchValue:k.value,startDate:g.value[0],endDate:g.value[1],articleType:(h=b.value)==null?void 0:h.id};try{Y.value=!0;const D=await d(t);D.success&&(P.value=D.data.content,z.value={isShow:!0,page:E.value,totalElements:D.data.totalElements,totalPages:D.data.totalPages,numberOfElements:D.data.numberOfElements,size:D.data.size})}catch(D){console.log("Fail to get request video",D)}finally{Y.value=!1}},we=t=>{var o,n,h,D;L.value=(o=t[0])==null?void 0:o.rowIndex,I.value=(n=t[0])==null?void 0:n.data,j.value=(D=(h=t[0])==null?void 0:h.data)==null?void 0:D.id},_e=t=>{I.value=t.data,B.value=!0},he=()=>{Q.value="create",N.value=!0},Ce=async t=>{try{const o={title:t.title,content:t.content,articleId:t.articleId,editorId:t.editorId,assignContent:t.assignContent,directions:t.directions,attachmentContentIdList:t.attachmentContentIdList,reporterAudioContentIdList:t.reporterAudioContentIdList,segmentInformationList:t.segmentInformationList};(await x(o)).success&&(window.Notify.success({message:Me.requestVideo.create}),N.value=!1,await W())}catch(o){console.log("Fail to add request video",o)}},ke=async()=>{Q.value="edit",B.value=!0},Re=async t=>{const o={title:t.title,content:t.content,articleId:t.articleId,editorId:t.editorId,assignContent:t.assignContent,directions:t.directions,fileIdList:t.fileIdList};try{(await i(I.value.id,o)).success&&(window.Notify.success({message:Me.requestVideo.edit}),await W())}catch(n){console.log("Fail to edit request video",n)}},qe=async t=>{if(!I.value.id)return;const o={editorId:t.editorId,assignContent:t.assignContent,directions:t.directions};try{(await v(I.value.id,o)).success&&(window.Notify.success({message:Me.requestVideo.assign}),await W())}catch(n){console.log("Fail to assign editor",n)}},Ie=async()=>{try{(await p(I.value.id)).success&&(window.Notify.success({message:Me.requestVideo.delete}),await W())}catch(t){console.log("Fail to delete request video",t)}},ue=()=>{W()},$e=async()=>{E.value=1,I.value=null,L.value=0,k.value="",m.value=re.values[0],$.value.id="",$.value.label="기획자 전체",await W()},Ee=t=>{const{articleId:o}=t.data;Vt.replace({name:yt.ReadArticle,params:{id:o}})},De=()=>{be.value=!0},V=async()=>{(await u(I.value.id)).success&&(window.Notify.success({message:Me.requestVideo.forceComplete}),await W())},r=async t=>{(await U(X.value,t)).success&&(window.Notify.success({message:Me.requestVideo.complete}),await W())},A=async t=>{try{(await c(X.value,J.value,t)).success&&(t.isApprove?window.Notify.success({message:Me.requestVideo.approve}):window.Notify.success({message:Me.requestVideo.reject}),await W(),ae.value=!1)}catch(o){console.log("Fail to request complete",o)}finally{ae.value=!1}},F=t=>{A(t),de.value=!1},f=t=>{oe.value=t};return Ae(async()=>{await W()}),(t,o)=>{var h,D;const n=Be("tooltip");return q(),ve("div",to,[s("div",lo,[s("div",oo,[l(qt,{modelValue:g.value,"onUpdate:modelValue":[o[0]||(o[0]=R=>g.value=R),ue]},null,8,["modelValue"]),l(At,{"selected-departments":oe.value,"onUpdate:selectedDepartments":o[1]||(o[1]=R=>oe.value=R),onOnSelectedDepartment:f},null,8,["selected-departments"]),l(Et,{modelValue:b.value,"onUpdate:modelValue":o[2]||(o[2]=R=>b.value=R),class:"w-32","is-all-option":!0,"preselect-first":!0,onOnSelected:ue},null,8,["modelValue"]),l(wt,{modelValue:m.value,"onUpdate:modelValue":o[3]||(o[3]=R=>m.value=R),"track-by":"id","preselect-first":!0,"item-label":"label",searchable:!1,options:M.value,"onSelect:value":ue},null,8,["modelValue","options"]),l(S,{modelValue:k.value,"onUpdate:modelValue":o[4]||(o[4]=R=>k.value=R),placeholder:e(w)("RequestMovie.검색어"),width:"w-72",onKeydown:Je(ue,["enter"])},null,8,["modelValue","placeholder"]),l(y,{icon:"magnifying-glass",onClick:ue})]),s("div",ao,[le(l(y,{icon:"plus","button-text":e(w)("RequestMovie.의뢰_등록"),onClick:he},null,8,["button-text"]),[[n,e(w)("RequestMovie.의뢰_등록")]]),le(l(Dt,{icon:"check-badge",title:`${(h=I.value)==null?void 0:h.title}`,html:"<div>의 의뢰를 수동 완료하시겠습니까?</div>","button-text":e(w)("RequestMovie.수동_완료"),disabled:!I.value,onOnConfirm:V},null,8,["title","button-text","disabled"]),[[n,e(w)("RequestMovie.수동_완료")]]),le(l(y,{icon:"arrow-path",onClick:$e},null,512),[[n,e(w)("RequestMovie.새로고침")]]),le(l(y,{icon:"pencil",disabled:!I.value||ye.value,onClick:ke},null,8,["disabled"]),[[n,e(w)("RequestMovie.의뢰_수정")]]),le(l(gt,{icon:"trash",disabled:!I.value||I.value.requestStatusCode===e(re).DONE.id,onOnConfirm:Ie},null,8,["disabled"]),[[n,e(w)("RequestMovie.의뢰_삭제")]])])]),l(e(tt),{class:"default-theme"},{default:O(()=>[l(e(Fe),null,{default:O(()=>[l(_t,{"row-data":P.value,"page-info":z.value,onSelectedRow:we,onDoubleClickedRow:_e,onOnClickRequestArticle:Ee,onOnClickEditorAssign:De},null,8,["row-data","page-info"])]),_:1}),l(e(Fe),{size:e(Ge).request.size,"max-size":e(Ge).request.maxSize,"min-size":e(Ge).request.minSize},null,8,["size","max-size","min-size"])]),_:1}),N.value?(q(),C(pl,{key:0,"request-file":ne.value,"onUpdate:requestFile":o[5]||(o[5]=R=>ne.value=R),"dubbing-file":Z.value,"onUpdate:dubbingFile":o[6]||(o[6]=R=>Z.value=R),"article-id":pe.value,"onUpdate:articleId":o[7]||(o[7]=R=>pe.value=R),"request-article-title":ie.value,"onUpdate:requestArticleTitle":o[8]||(o[8]=R=>ie.value=R),class:"flex flex-col h-full",onOnCreate:Ce,onClose:o[9]||(o[9]=R=>N.value=!1)},null,8,["request-file","dubbing-file","article-id","request-article-title"])):ee("",!0),B.value?(q(),C(Ul,{key:1,"request-file":ne.value,"onUpdate:requestFile":o[10]||(o[10]=R=>ne.value=R),"request-id":(D=I.value)==null?void 0:D.id,onOnEdit:Re,onOnAssignEditor:qe,onClose:o[11]||(o[11]=R=>B.value=!1)},null,8,["request-file","request-id"])):ee("",!0),be.value?(q(),C(Ll,{key:2,"request-info":I.value,onOnEdit:Re,onOnAssignEditor:qe,onClose:o[12]||(o[12]=R=>be.value=!1)},null,8,["request-info"])):ee("",!0),fe.value?(q(),C(eo,{key:3,"request-video-id":X.value,onOnCompleteRequestVideo:r,onClose:o[13]||(o[13]=R=>fe.value=!1)},null,8,["request-video-id"])):ee("",!0),ae.value?(q(),C(Kl,{key:4,"request-video-id":X.value,onOnApprove:A,onOnReject:F,onClose:o[14]||(o[14]=R=>ae.value=!1)},null,8,["request-video-id"])):ee("",!0),de.value?(q(),C(dt,{key:5,onHandleRejectRequest:F,onClose:o[15]||(o[15]=R=>de.value=!1)})):ee("",!0)])}}});export{ba as default};
