import{d as P,aq as k,ac as I,k as i,aU as h,b2 as q,V as y,ae as B,o as O,a as V,c as j,G as s,w as v,j as f,Y as R,aj as H,b0 as J,b4 as L,ag as $,au as z}from"./index-eLyz9_Ts.js";import{g as b,M as G}from"./splitpanes.es-dEoJOrhT.js";import{_ as K,a as Q}from"./ArticleTabPanel.vue_vue_type_script_setup_true_lang-vwb57C9h.js";import{u as W}from"./file-Gx0JxWZZ.js";import"./use-model-wrapper-XtiLc3Xd.js";import"./GEditor.vue_vue_type_style_index_0_lang-FifEywK1.js";import"./GEditor.vue_vue_type_script_setup_true_lang-a2qGOvtc.js";import"./file-division-code-x51qUgaH.js";import"./ArticleTypeSelect.vue_vue_type_script_setup_true_lang-Kp5wzGNr.js";import"./article-type.code-5cb8riL1.js";import"./GSingleSelect-7u8H0FdH.js";import"./vue-multiselect-Yz8FsF-E.js";import"./SpellCheckerModal.vue_vue_type_script_setup_true_lang-Vt6XDlm8.js";import"./GMovableModal.vue_vue_type_script_setup_true_lang-elQvXjL0.js";import"./spell-check-OnBbfX8h.js";import"./PageLoader.vue_vue_type_script_setup_true_lang-ZvbvX14z.js";import"./GNoData.vue_vue_type_script_setup_true_lang-rWUb5JCO.js";import"./CuesheetPrompter-o2cqkH-a.js";import"./cuesheet-item-code-_LsFMWbX.js";import"./ArticleFileTabPanel.vue_vue_type_script_setup_true_lang-Yk1q8ET1.js";import"./GTextarea-5GIFD2Mo.js";/* empty css                                                                  */import"./FileDropzone.vue_vue_type_script_setup_true_lang-SVeHifZw.js";import"./FileListView.vue_vue_type_script_setup_true_lang-A40KFqZZ.js";import"./GVideoPlayer-1SUF8s3O.js";import"./main-sHItgwS4.js";import"./vue.runtime.esm-bundler-3P3R-Xon.js";import"./ArticleFormatSelect.vue_vue_type_script_setup_true_lang-0vSziBpo.js";import"./journalist-QNhBHHjf.js";import"./organization-qjYuRO6g.js";import"./tag-Q73uuSte.js";import"./ProgramSelect.vue_vue_type_script_setup_true_lang-UHoCrnxw.js";import"./program-omP_c4K3.js";import"./UserSelect.vue_vue_type_script_setup_true_lang-Hk5THi0e.js";import"./ArticleDivisionSelect.vue_vue_type_script_setup_true_lang-Ln9_DwnO.js";import"./category-zIRntbmZ.js";import"./GTagSelect.vue_vue_type_script_setup_true_lang-WNNVbcKh.js";import"./department-wnuBQoCo.js";import"./GDatePicker.vue_vue_type_style_index_0_lang-aP5TJiAZ.js";import"./use-date-GeeGTbYh.js";import"./GDateTimePicker-bSYwb_xW.js";/* empty css                                                                        */import"./CoveragePlanSearch.vue_vue_type_script_setup_true_lang-kZic9Ocd.js";import"./CoveragePlanList.vue_vue_type_script_setup_true_lang-vJ0F3lvx.js";import"./use-render-component-K20sHqiA.js";import"./DepartmentMultiSelect.vue_vue_type_script_setup_true_lang-OqmQVQH2.js";import"./coverage-plan-nI7mLZOB.js";import"./ConfirmButton.vue_vue_type_script_setup_true_lang-onM9evN8.js";import"./app-authority-code-Q9MU7mjP.js";import"./vue-resizable.umd.min-blE9hPz6.js";const X={class:"!pt-0 h-full"},Z={class:"h-full flex flex-col p-1"},Qt=P({__name:"ArticleDetailReadView",props:{id:{},query:{}},setup(C){const o=C,D=k(),{getActiveTab:M,changeArticleTabMode:A}=D,S=I(),{fetchArticle:N,fetchDeletedArticle:x,lockArticle:w}=S,{fileDownload:E}=W(),c=i(""),d=i("00:00"),p=i("00:00"),n=i("00:00"),l=i(h.Straight),g=i(q.Broadcasting),m=y({deptNm:"",brdcPgmNm:"",brdcSchdDtm:"",ancMentCttTime:0,artclCttTime:0,artclExtTime:0}),u=i({anchorTextArray:[""],reporterTextArray:[""],captionArray:[]}),r=y({reporter:"",program:void 0,anchorTime:p,reportTime:n,articleTime:d,extraTime:{isPositive:!0,time:"00:00",sec:0},division:void 0,embargo:B().format("YYYY-MM-DD HH:mm:ss"),category:void 0,tag:[],coveragePlanId:void 0,urgency:!1,disaster:!1,priority:void 0}),T=i([]),U=async()=>{var a;const t=o.query.del==="Y"?await x(o.id):await N(Number(o.id));t.success&&(m.deptNm=t.data.deptNm,m.brdcPgmNm=t.data.brdcPgmNm,m.brdcSchdDtm=t.data.brdcSchdDtm,m.ancMentCttTime=t.data.ancMentCttTime,m.artclCttTime=t.data.artclCttTime,c.value=t.data.artclTitl,l.value=t.data.artclTypCd,u.value=J({artclTypCd:t.data.artclTypCd,capList:t.data.articleCaps,ancMentCtt:t.data.ancMentCtt||JSON.stringify([`
`]),artclCtt:t.data.artclCtt||JSON.stringify([`
`])}),r.reporter=t.data.rptrNm,r.program=t.data.brdcPgmId,r.extraTime={isPositive:t.data.artclExtTime>=0,time:L(t.data.artclExtTime),sec:t.data.artclExtTime},r.division=t.data.artclDivCd,r.embargo=t.data.artclDivDtm,r.category=t.data.artclCateId,r.tag=t.data.articleTags.map(e=>({...e.tag,tagName:e.tag.tagNm})),r.coveragePlanId=(a=t.data.coveragePlan)==null?void 0:a.id,r.urgency=t.data.urgYn==="Y",r.disaster=t.data.disYn==="Y",r.priority=t.data.priority,T.value=t.data.articleAttachmentFileList.map(e=>({...e,name:e.fileName})))},Y=t=>{E(t.file)},F=async()=>{const t=$.cloneDeep(M);t.clickedTabClose||(await w(o.id)).success&&A({mode:"edit",currentTab:t,articleTitle:c.value,articleId:o.id})};return O(()=>{U()}),(t,a)=>(V(),j("div",X,[s(f(G),{class:"default-theme"},{default:v(()=>[s(f(b),{size:"70"},{default:v(()=>[R("div",Z,[s(K,{"article-title":c.value,"onUpdate:articleTitle":a[0]||(a[0]=e=>c.value=e),"article-type":l.value,"onUpdate:articleType":a[1]||(a[1]=e=>l.value=e),"article-format":g.value,"onUpdate:articleFormat":a[2]||(a[2]=e=>g.value=e),"article-time":d.value,"onUpdate:articleTime":a[3]||(a[3]=e=>d.value=e),"anchor-time":p.value,"onUpdate:anchorTime":a[4]||(a[4]=e=>p.value=e),"report-time":n.value,"onUpdate:reportTime":a[5]||(a[5]=e=>n.value=e),"article-editor-state":u.value,"onUpdate:articleEditorState":a[6]||(a[6]=e=>u.value=e),"is-read-only":!0,"is-delete":t.query.del==="Y",onOnClickedEdit:F},null,8,["article-title","article-type","article-format","article-time","anchor-time","report-time","article-editor-state","is-delete"])])]),_:1}),s(f(b),{class:"30"},{default:v(()=>[H(s(Q,{"article-type":l.value,"onUpdate:articleType":a[7]||(a[7]=e=>l.value=e),"article-meta-data-tab":r,"onUpdate:articleMetaDataTab":a[8]||(a[8]=e=>r=e),"article-file-tab":T.value,"onUpdate:articleFileTab":a[9]||(a[9]=e=>T.value=e),"article-id":t.id,mode:"read","is-read-only":!0,class:"h-full px-1",onOnDownloadFile:Y},null,8,["article-type","article-meta-data-tab","article-file-tab","article-id"]),[[z,!1]])]),_:1})]),_:1})]))}});export{Qt as default};
