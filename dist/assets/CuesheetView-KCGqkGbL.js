import{d as z,a as c,h as N,w as T,X as pe,Y as s,G as i,a2 as k,a3 as Te,l as F,o as oe,c as b,a0 as _e,al as we,k as y,ai as Ee,aj as K,j as h,aE as $e,b7 as He,b8 as ke,K as q,Q as B,i as Pe,aH as je,aI as ze,a1 as M,b9 as se,ba as Ue,aP as fe,aa as We,$ as ye,aw as Ie,F as ne,C as ae,ak as re,ax as Se,ay as xe,bb as be,bc as ve,am as Ye,ad as Be,ac as Fe,ae as de,ah as ie,ab as Ge,au as Xe,af as qe,ap as Ze}from"./index-eLyz9_Ts.js";import{a as Je,_ as Ke}from"./CuesheetInfoModal.vue_vue_type_script_setup_true_lang-QKULMJcg.js";import{b as Qe}from"./pagination-_g_gc7Ms.js";import{u as Ne}from"./use-pagination-JgK9yJDA.js";import{B as le}from"./buttons-3hbXC8Cn.js";import{u as et}from"./use-button-actions-XDAYYO3a.js";import{u as tt}from"./use-intersection-observer-N6Mx7i0c.js";import{w as ot}from"./format.util-TjqX3dGB.js";import{_ as De}from"./ContentHeaderButtons.vue_vue_type_script_setup_true_lang-Db8CUXqr.js";import{_ as st}from"./ProgramSelect.vue_vue_type_script_setup_true_lang-UHoCrnxw.js";import{c as I}from"./make-grid-column-aeLSdEws.js";import{_ as nt,g as at,c as rt}from"./CuesheetDetailList.vue_vue_type_script_setup_true_lang-QigiNQfb.js";import"./journalist-QNhBHHjf.js";import"./organization-qjYuRO6g.js";import"./code-mapper-C6rl9hti.js";import"./vue-multiselect-Yz8FsF-E.js";import"./GSingleSelect-7u8H0FdH.js";import{G as it}from"./GRadioGroup-cHw1G1ew.js";import"./GDatePicker.vue_vue_type_style_index_0_lang-aP5TJiAZ.js";import{_ as j}from"./FormItem.vue_vue_type_script_setup_true_lang-ZXQ_7x89.js";import{_ as Re}from"./FontSizeSelect.vue_vue_type_script_setup_true_lang-aHE2H38g.js";import{_ as lt}from"./CuesheetArticleSearchModal.vue_vue_type_script_setup_true_lang-_otPBcvS.js";import"./tag-Q73uuSte.js";import"./article-type.code-5cb8riL1.js";import"./category-zIRntbmZ.js";import"./department-wnuBQoCo.js";import"./use-model-wrapper-XtiLc3Xd.js";/* empty css                                                                        */import"./UserSearchModal.vue_vue_type_script_setup_true_lang-iHw_FmsN.js";import"./OrganizationSelect.vue_vue_type_script_setup_true_lang-BNuugYEX.js";import"./program-omP_c4K3.js";import"./use-render-component-K20sHqiA.js";import"./icon-zhslyYqN.js";import"./NoDataIcon-o0HaqPy2.js";import"./cuesheet-item-code-_LsFMWbX.js";/* empty css                                                                    */import"./use-date-GeeGTbYh.js";import"./GMovableModal.vue_vue_type_script_setup_true_lang-elQvXjL0.js";const dt={class:"flex justify-center gap-x-2 border-t-2 py-2"},ut=z({__name:"CuesheetMenuModal",emits:["detail","edit","close"],setup(o,{emit:u}){const e=u;return(d,l)=>(c(),N(Te,{"modal-class":"w-1/3",onClose:l[3]||(l[3]=()=>e("close"))},{title:T(()=>l[4]||(l[4]=[pe("큐시트")])),content:T(()=>[l[5]||(l[5]=s("div",{class:"text-center p-4"},[pe(" 편집 가능한 큐시트입니다."),s("br"),pe(" 버튼을 선택해 주세요. ")],-1)),s("div",dt,[i(k,{"button-text":"조회",onClick:l[0]||(l[0]=()=>e("detail"))}),i(k,{"button-text":"편집",onClick:l[1]||(l[1]=()=>e("edit"))}),i(k,{"button-text":"취소",onClick:l[2]||(l[2]=()=>e("close"))})])]),_:1}))}}),ct={class:"flex flex-col h-full"},mt={class:"p-1 bg-gray-600 text-white font-medium w-fit"},ht={class:"flex justify-between items-center my-2"},pt={class:"text-sm"},ft={class:"flex-grow"},vt=z({__name:"CuesheetHistoryList",props:{cuesheet:{},historyList:{},pageInfo:{}},emits:["on-change-type","on-change-page"],setup(o,{emit:u}){const e=o,d=u,l=[{typeId:"00",typeName:"전체"},{typeId:"01",typeName:"접근이력"},{typeId:"02",typeName:"변경이력"}],r=[I({headerName:"구분",field:"cueSheetHistoryData.actionDiv",maxWidth:100}),I({headerName:"제목",field:"cueSheetHistoryData.itemTitle"}),I({headerName:"수정이력",field:"cueSheetHistoryData.message"}),I({headerName:"작업설명",field:"cueSheetHistoryData.taskExpl"}),I({headerName:"ID",field:"inputerName",maxWidth:100}),I({headerName:"IP",field:"loginIp",maxWidth:110}),I({headerName:"발생시각",field:"inputDateTime"})],t=F(()=>{const D=e.cuesheet;return`${D.brdcPgmNm} / 차수:${D.cueVer} / ${D.brdcDt} [${D.brdcStartTime} ~ ${D.brdcEndTime}]`}),n=F(()=>e.historyList.length),a=D=>{d("on-change-type",D)},g=D=>{d("on-change-page",D)};return oe(()=>{console.log(e.cuesheet)}),(D,R)=>(c(),b("div",ct,[s("span",mt,_e(t.value),1),s("div",ht,[s("div",pt,"총 "+_e(n.value)+"건",1),i(it,{"track-by":"typeName","value-key":"typeId",options:l,"page-info":D.pageInfo,class:"border rounded-md px-2 pb-1 w-fit","onUpdate:modelValue":a},null,8,["page-info"])]),s("div",ft,[i(we,{"row-data":D.historyList,"column-defs":r,"page-info":D.pageInfo,onOnChangePage:g},null,8,["row-data","page-info"])])]))}}),gt={class:"flex flex-col h-full"},Oe=z({__name:"CuesheetHistoryModal",props:{cuesheet:{},historyData:{},pageInfo:{}},emits:["on-close","on-change-type","on-change-page"],setup(o,{emit:u}){const e=o,d=u,l=()=>{d("on-close")},r=n=>{d("on-change-type",n)},t=n=>{d("on-change-page",n)};return(n,a)=>(c(),N(Te,{"modal-class":"w-[calc(100vw-30%)]","content-class":"h-[80vh]",onClose:l},{title:T(()=>a[0]||(a[0]=[s("div",null,"이력조회",-1)])),content:T(()=>[s("div",gt,[i(vt,{cuesheet:e.cuesheet,"history-list":e.historyData,"page-info":n.pageInfo,onOnChangeType:r,onOnChangeApge:t},null,8,["cuesheet","history-list","page-info"])])]),_:1}))}}),Me=z({__name:"GFullModal",props:{intent:{default:""},isChange:{type:Boolean,default:!1},close:{type:Boolean,default:!0},overflow:{default:""},modalClass:{default:"w-full h-full"},contentClass:{default:""},dialogOverlay:{type:Boolean,default:!1},overflowFixed:{type:Boolean,default:!1},banner:{type:Boolean,default:!1},alertType:{default:"info"},alertText:{default:""},titleClass:{default:""},iconClass:{default:""}},emits:["close"],setup(o,{emit:u}){const e=o,d=u,l=y(!0),r=()=>{e.isChange,d("close")};return(t,n)=>{const a=Ee("shortkey");return c(),N(h(ze),{appear:"",as:"template",show:l.value},{default:T(()=>[i(h(je),{as:"div",static:!0,class:B(["flex flex-col h-full fixed z-[1000] inset-0",[t.overflow,t.overflowFixed?"overflow-visible":"overflow-auto"]]),open:l.value,unmount:!0},{default:T(()=>[K((c(),b("div",{class:"text-center",onShortkey:r},[i(h($e),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:T(()=>[i(h(He),{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:n[0]||(n[0]=g=>t.dialogOverlay?r:!1)})]),_:1}),n[2]||(n[2]=s("span",{class:"inline-block align-middle h-screen","aria-hidden":"true"},"​",-1)),i(h($e),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:T(()=>[s("div",{class:B(["truncate bg-white dark:bg-dark inline-block text-left shadow-xl transform transition-all align-middle",[t.modalClass,t.overflowFixed?"!overflow-visible":"overflow-hidden"]])},[t.banner?(c(),N(ke,{key:0,type:t.alertType,text:t.alertText},null,8,["type","text"])):q("",!0),s("div",{class:B(["flex flex-col pt-2 mb-2 sm:pt-4 sm:mb-4 px-2 sm:px-4 md:px-6 xl:px-8",[t.contentClass,t.overflowFixed?" overflow-visible":" overflow-auto"]])},[Pe(t.$slots,"content")],2),Pe(t.$slots,"bottom"),n[1]||(n[1]=s("div",{id:"modal-popup-container"},null,-1))],2)]),_:3})],32)),[[a,["esc"]]])]),_:3},8,["class","open"])]),_:3},8,["show"])}}}),yt={class:"flex justify-center items-center py-1 rounded-md bg-red-600 text-white font-bold"},Ae=z({__name:"CurrentTime",setup(o){const u=y(""),e=()=>{const d=new Date,l=String(d.getHours()).padStart(2,"0"),r=String(d.getMinutes()).padStart(2,"0"),t=String(d.getSeconds()).padStart(2,"0");u.value=`${l}:${r}:${t}`};return oe(()=>{e(),setInterval(e,1e3)}),(d,l)=>(c(),b("div",yt,[s("span",null,_e(u.value),1)]))}}),Ct={class:"flex flex-col space-y-4"},_t={class:"grid grid-cols-6 gap-4"},wt={class:"col-span-2"},It={class:"col-span-1"},St={class:"col-span-1"},xt={class:"col-span-1"},bt={class:"col-span-1 flex items-center justify-center"},Dt={class:"grid grid-cols-6 gap-4"},$t={class:"col-span-2"},Pt={class:"flex space-x-2"},Nt={class:"col-span-1"},Tt={class:"col-span-1"},Et={class:"col-span-1"},Ce="w-full bg-black text-green-400 rounded-md p-1 text-center",Rt=z({__name:"CuesheetPreInfo",props:{modelValue:{},fontSize:{}},emits:["update:fontSize"],setup(o,{emit:u}){const e=o,d=u;return(l,r)=>(c(),b("div",Ct,[s("div",_t,[s("div",wt,[i(j,{label:"프로그램",class:"flex"},{default:T(()=>{var t,n;return[i(M,{"model-value":(t=e.modelValue)==null?void 0:t.brdcPgmNm,readonly:"",class:"w-full"},null,8,["model-value"]),i(M,{"model-value":(n=e.modelValue)==null?void 0:n.cueVer,readonly:"",class:"w-full"},null,8,["model-value"])]}),_:1})]),s("div",It,[i(j,{label:"방송시간"},{default:T(()=>[K(s("input",{"data-maska":"##:##:##",class:B(Ce),value:"111111",readonly:""},null,512),[[h(se)]])]),_:1})]),s("div",St,[i(j,{label:"누적시간"},{default:T(()=>[K(s("input",{"data-maska":"##:##:##",class:B(Ce),value:"111111",readonly:""},null,512),[[h(se)]])]),_:1})]),s("div",xt,[i(j,{label:"남은시간"},{default:T(()=>[K(s("input",{"data-maska":"##:##:##",class:B(Ce),value:"111111",readonly:""},null,512),[[h(se)]])]),_:1})]),s("div",bt,[i(Ae)])]),s("div",Dt,[s("div",$t,[i(j,{label:"방송일시",class:"flex"},{default:T(()=>{var t,n,a;return[i(M,{"model-value":(t=e.modelValue)==null?void 0:t.brdcDt,readonly:"",class:"w-32"},null,8,["model-value"]),s("div",Pt,[i(M,{"model-value":(n=e.modelValue)==null?void 0:n.brdcStartTime,readonly:"",class:"w-28"},null,8,["model-value"]),r[1]||(r[1]=s("span",null,"~",-1)),i(M,{"model-value":(a=e.modelValue)==null?void 0:a.brdcEndTime,readonly:"",class:"w-28"},null,8,["model-value"])])]}),_:1})]),s("div",Nt,[i(j,{label:"PD",class:"flex"},{default:T(()=>[i(M,{class:"w-full",readonly:""}),i(M,{class:"w-full",readonly:""})]),_:1})]),s("div",Tt,[i(j,{label:"ANC",class:"flex"},{default:T(()=>[i(M,{class:"w-full",readonly:""}),i(M,{class:"w-full",readonly:""})]),_:1})]),s("div",Et,[i(j,{label:"TD",class:"flex"},{default:T(()=>[i(M,{class:"w-full",readonly:""}),i(M,{class:"w-full",readonly:""})]),_:1})]),s("div",null,[i(Re,{"model-value":e.fontSize,"onUpdate:modelValue":r[0]||(r[0]=t=>d("update:fontSize",t))},null,8,["model-value"])])])]))}}),Ot={class:"flex justify-end mb-2"},Mt={class:"mb-2"},At={class:"h-[100vh] w-[calc(100vw-4%)]"},Lt=z({__name:"CuesheetPreviewModal",props:{menuItems:{},cuesheetPreInfoData:{},cuesheetPreItemListData:{}},setup(o){const u=o,e=Ue(),{getIcons:d}=fe(e),{getUserInfo:l}=We(),r=y("text-[14px]");return(t,n)=>(c(),N(Me,{class:"overflow-hidden"},{title:T(()=>n[1]||(n[1]=[pe("큐시트 사전배정")])),content:T(()=>[s("div",Ot,[i(De,{"menu-items":t.menuItems},null,8,["menu-items"])]),s("div",Mt,[i(Rt,{"font-size":r.value,"onUpdate:fontSize":n[0]||(n[0]=a=>r.value=a),"model-value":u.cuesheetPreInfoData},null,8,["font-size","model-value"])]),s("div",At,[i(nt,{"row-data":u.cuesheetPreItemListData,"user-info":h(l),"icon-list":h(d),"font-size":r.value,mode:"read"},null,8,["row-data","user-info","icon-list","font-size"])])]),_:1}))}}),Vt={class:"flex justify-between items-center bg-gray-200 p-2 rounded-sm"},Ht={class:"flex flex-col space-y-4"},kt={class:"grid grid-cols-6 gap-4"},jt={class:"col-span-2"},zt={class:"col-span-1"},Ut={class:"col-span-1"},Wt={class:"col-span-1"},Yt={class:"flex items-center justify-center"},Bt={class:"grid grid-cols-6 gap-4"},Ft={class:"col-span-2"},Gt={class:"flex space-x-2"},Xt={class:"col-span-1"},qt={class:"col-span-1"},Zt={class:"col-span-1"},Jt={class:"flex flex-col items-center gap-2"},Kt={class:"flex gap-1"},Qt={class:"grid grid-cols-3 gap-1"},J="primary",he="w-full bg-black text-green-400 rounded-md py-1 h-[26px] !shadow-none !rounded-[3px] text-center",eo=z({__name:"CuesheetFormInfo",props:{modelValue:{},fontSize:{}},emits:["update:fontSize"],setup(o,{emit:u}){const e=o,d=u;return(l,r)=>{const t=Ee("tooltip");return c(),b("div",Vt,[s("div",Ht,[s("div",kt,[s("div",jt,[i(j,{label:"매체",class:"flex"},{default:T(()=>{var n,a;return[i(M,{"model-value":(n=e.modelValue)==null?void 0:n.brdcPgmNm,readonly:"",class:"w-full",intent:J},null,8,["model-value"]),i(M,{"model-value":(a=e.modelValue)==null?void 0:a.cueVer,readonly:"",class:"w-full",intent:J},null,8,["model-value"])]}),_:1})]),s("div",zt,[i(j,{label:"방송시간"},{default:T(()=>[K(s("input",{"data-maska":"##:##:##",class:B(he),value:"111111",readonly:""},null,512),[[h(se)]])]),_:1})]),s("div",Ut,[i(j,{label:"누적시간"},{default:T(()=>[K(s("input",{"data-maska":"##:##:##",class:B(he),value:"111111",readonly:""},null,512),[[h(se)]])]),_:1})]),s("div",Wt,[i(j,{label:"남은시간"},{default:T(()=>[K(s("input",{"data-maska":"##:##:##",class:B(he),value:"111111",readonly:""},null,512),[[h(se)]])]),_:1})]),s("div",Yt,[i(Ae,{class:B(he)})])]),s("div",Bt,[s("div",Ft,[i(j,{label:"방송일시",class:"flex"},{default:T(()=>{var n,a,g;return[i(M,{"model-value":(n=e.modelValue)==null?void 0:n.brdcDt,readonly:"",intent:J},null,8,["model-value"]),s("div",Gt,[i(M,{"model-value":(a=e.modelValue)==null?void 0:a.brdcStartTime,readonly:"",intent:J},null,8,["model-value"]),r[1]||(r[1]=s("span",null,"~",-1)),i(M,{"model-value":(g=e.modelValue)==null?void 0:g.brdcEndTime,readonly:"",intent:J},null,8,["model-value"])])]}),_:1})]),s("div",Xt,[i(j,{label:"PD",class:"flex"},{default:T(()=>[i(M,{class:"w-full",readonly:"",intent:J}),i(M,{class:"w-full",readonly:"",intent:J})]),_:1})]),s("div",qt,[i(j,{label:"ANC",class:"flex"},{default:T(()=>[i(M,{class:"w-full",readonly:"",intent:J}),i(M,{class:"w-full",readonly:"",intent:J})]),_:1})]),s("div",Zt,[i(j,{label:"TD",class:"flex"},{default:T(()=>[i(M,{class:"w-full",readonly:"",intent:J}),i(M,{class:"w-full",readonly:"",intent:J})]),_:1})]),s("div",null,[i(Re,{"model-value":e.fontSize,"onUpdate:modelValue":r[0]||(r[0]=n=>d("update:fontSize",n))},null,8,["model-value"])])])]),s("div",Jt,[s("div",Kt,[i(ye,{label:"DVE요청"}),i(ye,{label:"맞춤법검사"}),i(ye,{label:"기획서/기사전환"})]),s("div",Qt,[K(i(k,{icon:"pencilSquare",type:"secondary"},null,512),[[t,"아이템 메모"]]),K(i(k,{icon:"arrowsUpDown",type:"secondary"},null,512),[[t,"큐시트 컬럼순서변경"]]),K(i(k,{icon:"questionMarkCircle",type:"secondary"},null,512),[[t,"큐시트 상태정보 도움말"]])])])])}}}),to=["onClick"],oo={class:"flex justify-center items-center h-full"},so={key:0,class:"w-8 h-8 border-2 border-gray-400 rounded-md flex items-center justify-center"},no={key:1,class:"w-8 h-8 border-2 border-gray-400 rounded-md flex items-center justify-center"},ao={class:"grid grid-cols-4 gap-2 p-2"},ro={key:0,class:"border-2 text-center hover:bg-gray-200 hover:cursor-pointer"},io={key:1,class:"border-2 text-center hover:bg-gray-200"},lo=z({__name:"CustomVideoButton",props:{params:{type:Object,required:!0}},setup(o,{expose:u}){const e=o,d=y(["","",""]),l=y(null),r=y({top:0,left:0}),t=y(null),n=F(()=>e.params.mode==="detail"),a=[{id:"00",name:"",icon:""},{id:"01",name:"첨부파일",icon:"PaperClip"},{id:"02",name:"VCR",icon:""},{id:"03",name:"중계",icon:""},{id:"04",name:"LTE",icon:""},{id:"05",name:"수동",icon:""},{id:"06",name:"위성",icon:""},{id:"07",name:"출연",icon:""},{id:"08",name:"국제",icon:""},{id:"09",name:"VF",icon:""},{id:"10",name:"PANO",icon:""},{id:"11",name:"기타",icon:""},{id:"12",name:"O,F",icon:""},{id:"13",name:"XD",icon:""},{id:"14",name:"M/@",icon:""}],g=()=>{l.value=null},D=(C,P)=>{l.value===C?g():(l.value=C,r.value={top:P.clientY+10,left:P.clientX+10})},R=(C,P)=>{d.value[P]=C;const p=e.params.data,S=p.frm?p.frm.split(","):[];S.includes(C)||S.push(C),p.frm=S.join(","),e.params.api.applyTransaction({update:[p]}),e.params.selectVideo(e.params.data),g()},U=C=>{const P=e.params.data,p=P.video?P.video.split(","):[];delete p[C],delete d.value[C],P.video=p.join(",").replace(/,$/,""),e.params.api.applyTransaction({update:[P]}),e.params.selectVideo(e.params.data),g()};return Ie(t,()=>{g()}),oe(()=>{}),u({closeVideoIconList:g}),(C,P)=>(c(),b("div",{ref_key:"refElement",ref:t,class:"flex justify-between items-center"},[(c(),b(ne,null,ae([0,1,2],p=>{var S,$,A;return s("div",{key:p,class:B(["w-1/3 h-5 relative",n.value?"cursor-pointer":"cursor-default"]),onClick:_=>n.value&&D(p,_)},[s("div",oo,[d.value[p]?(c(),b("div",no,[(S=a.find(_=>_.id===d.value[p]))!=null&&S.icon?(c(),N(re,{key:0,icon:($=a.find(_=>_.id===d.value[p]))==null?void 0:$.icon},null,8,["icon"])):(c(),N(k,{key:1,"button-text":(A=a.find(_=>_.id===d.value[p]))==null?void 0:A.name,type:"text"},null,8,["button-text"]))])):(c(),b("div",so))]),(c(),N(xe,{to:"#modal-popup-container"},[l.value===p?(c(),b("div",{key:0,ref_for:!0,ref_key:"refElement",ref:t,class:"absolute bg-white shadow-lg border rounded z-55",style:Se({top:r.value.top+"px",left:r.value.left+"px",width:"auto",height:"auto"})},[s("div",ao,[(c(),b(ne,null,ae(a,(_,x)=>s("div",{key:x,class:"rounded-md"},[_.icon.length>0?(c(),b("div",ro,[i(re,{icon:_.icon,class:"py-[6px]",onClick:m=>n.value&&R(_.id,p)},null,8,["icon","onClick"])])):(c(),b("div",io,[_.name?(c(),N(k,{key:1,"button-text":_.name,type:"text",onClick:m=>n.value&&R(_.id,p)},null,8,["button-text","onClick"])):(c(),N(k,{key:0,"button-text":"선택해제",class:"text-red-400",type:"text",onClick:m=>n.value&&U(p)},null,8,["onClick"]))]))])),64))])],4)):q("",!0)]))],10,to)}),64))],512))}}),uo=["onClick"],co={class:"flex justify-center items-center h-full"},mo={key:0,class:"w-8 h-8 border-2 border-gray-400 rounded-md flex items-center justify-center"},ho={key:1,class:"w-8 h-8 border-2 border-gray-400 rounded-md flex items-center justify-center"},po={class:"grid grid-cols-4 gap-2 p-2"},fo={key:0,class:"border-2 text-center hover:bg-gray-200 hover:cursor-pointer"},vo={key:1,class:"border-2 text-center hover:bg-gray-200"},go=z({__name:"CustomAudioButton",props:{params:{type:Object,required:!0}},setup(o,{expose:u}){const e=o,d=y(["","",""]),l=y(null),r=y({top:0,left:0}),t=y(null),n=F(()=>e.params.mode==="detail"),a=[{id:"00",name:"",icon:""},{id:"01",name:"첨부파일",icon:"PaperClip"},{id:"02",name:"VCR",icon:""},{id:"03",name:"중계",icon:""},{id:"04",name:"LTE",icon:""},{id:"05",name:"수동",icon:""},{id:"06",name:"위성",icon:""},{id:"07",name:"출연",icon:""},{id:"08",name:"국제",icon:""},{id:"09",name:"VF",icon:""},{id:"10",name:"PANO",icon:""},{id:"11",name:"기타",icon:""},{id:"12",name:"O,F",icon:""},{id:"13",name:"XD",icon:""},{id:"14",name:"M/@",icon:""}],g=()=>{l.value=null},D=(C,P)=>{l.value===C?g():(l.value=C,r.value={top:P.clientY+10,left:P.clientX+10})},R=(C,P)=>{d.value[P]=C;const p=e.params.data,S=p.frm?p.frm.split(","):[];S.includes(C)||S.push(C),p.frm=S.join(","),e.params.api.applyTransaction({update:[p]}),e.params.selectAudio(e.params.data),g()},U=C=>{const P=e.params.data,p=P.audio?P.audio.split(","):[];delete p[C],delete d.value[C],P.audio=p.join(",").replace(/,$/,""),e.params.api.applyTransaction({update:[P]}),e.params.selectAudio(e.params.data),g()};return Ie(t,()=>{g()}),oe(()=>{}),u({closeAudioIconList:g}),(C,P)=>(c(),b("div",{ref_key:"refElement",ref:t,class:"flex justify-between items-center"},[(c(),b(ne,null,ae([0,1,2],p=>{var S,$,A;return s("div",{key:p,class:B(["w-1/3 h-5 relative",n.value?"cursor-pointer":"cursor-default"]),onClick:_=>D(p,_)},[s("div",co,[d.value[p]?(c(),b("div",ho,[(S=a.find(_=>_.id===d.value[p]))!=null&&S.icon?(c(),N(re,{key:0,icon:($=a.find(_=>_.id===d.value[p]))==null?void 0:$.icon},null,8,["icon"])):(c(),N(k,{key:1,"button-text":(A=a.find(_=>_.id===d.value[p]))==null?void 0:A.name,type:"text"},null,8,["button-text"]))])):(c(),b("div",mo))]),(c(),N(xe,{to:"#modal-popup-container"},[l.value===p?(c(),b("div",{key:0,ref_for:!0,ref_key:"refElement",ref:t,class:"absolute bg-white shadow-lg border rounded z-55",style:Se({top:r.value.top+"px",left:r.value.left+"px",width:"auto",height:"auto"})},[s("div",po,[(c(),b(ne,null,ae(a,(_,x)=>s("div",{key:x,class:"rounded-md"},[_.icon.length>0?(c(),b("div",fo,[i(re,{icon:_.icon,class:"py-[6px]",onClick:m=>n.value&&R(_.id,p)},null,8,["icon","onClick"])])):(c(),b("div",vo,[_.name?(c(),N(k,{key:1,"button-text":_.name,type:"text",onClick:m=>n.value&&R(_.id,p)},null,8,["button-text","onClick"])):(c(),N(k,{key:0,"button-text":"선택해제",class:"text-red-400",type:"text",onClick:m=>n.value&&U(p)},null,8,["onClick"]))]))])),64))])],4)):q("",!0)]))],10,uo)}),64))],512))}}),yo=["onClick"],Co={class:"flex justify-center items-center h-full"},_o={key:0,class:"w-8 h-8 border-2 border-gray-400 rounded-md flex items-center justify-center"},wo={key:1,class:"w-8 h-8 border-2 border-gray-400 rounded-md flex items-center justify-center"},Io={class:"grid grid-cols-4 gap-2 p-2"},So={key:0,class:"border-2 text-center hover:bg-gray-200 hover:cursor-pointer"},xo={key:1,class:"border-2 text-center hover:bg-gray-200"},bo=z({__name:"CustomCamButton",props:{params:{type:Object,required:!0}},setup(o,{expose:u}){const e=o,d=be(),{camSlotCount:l}=fe(d),r=y(Array(l.value).fill("")),t=y(null),n=y({top:0,left:0}),a=y(null),g=F(()=>e.params.mode==="detail"),D=[{id:"00",name:"",icon:""},{id:"01",name:"첨부파일",icon:"PaperClip"},{id:"02",name:"VCR",icon:""},{id:"03",name:"중계",icon:""},{id:"04",name:"LTE",icon:""},{id:"05",name:"수동",icon:""},{id:"06",name:"위성",icon:""},{id:"07",name:"출연",icon:""},{id:"08",name:"국제",icon:""},{id:"09",name:"VF",icon:""},{id:"10",name:"PANO",icon:""},{id:"11",name:"기타",icon:""},{id:"12",name:"O,F",icon:""},{id:"13",name:"XD",icon:""},{id:"14",name:"M/@",icon:""}],R=()=>{t.value=null},U=(p,S)=>{t.value===p?R():(t.value=p,n.value={top:S.clientY+10,left:S.clientX+10})},C=(p,S)=>{r.value[S]=p;const $=e.params.data,A=$.frm?$.frm.split(","):[];A.includes(p)||A.push(p),$.cam=A.join(","),e.params.api.applyTransaction({update:[$]}),e.params.selectCam(e.params.data),R()},P=p=>{const S=e.params.data,$=S.cam?S.cam.split(","):[];delete $[p],delete r.value[p],S.cam=$.join(",").replace(/,$/,""),e.params.api.applyTransaction({update:[S]}),e.params.selectCam(e.params.data),R()};return Ie(a,()=>{R()}),oe(()=>{}),u({closeCamIconList:R}),(p,S)=>(c(),b("div",{ref_key:"refElement",ref:a,class:"flex justify-between items-center"},[(c(!0),b(ne,null,ae(h(l),$=>{var A,_,x;return c(),b("div",{key:$,class:B(["w-1/3 h-5 relative",g.value?"cursor-pointer":"cursor-default"]),onClick:m=>g.value&&U($,m)},[s("div",Co,[r.value[$]?(c(),b("div",wo,[(A=D.find(m=>m.id===r.value[$]))!=null&&A.icon?(c(),N(re,{key:0,icon:(_=D.find(m=>m.id===r.value[$]))==null?void 0:_.icon},null,8,["icon"])):(c(),N(k,{key:1,"button-text":(x=D.find(m=>m.id===r.value[$]))==null?void 0:x.name,type:"text"},null,8,["button-text"]))])):(c(),b("div",_o))]),(c(),N(xe,{to:"#modal-popup-container"},[t.value===$?(c(),b("div",{key:0,ref_for:!0,ref_key:"refElement",ref:a,class:"absolute bg-white shadow-lg border rounded z-55",style:Se({top:n.value.top+"px",left:n.value.left+"px",width:"auto",height:"auto"})},[s("div",Io,[(c(),b(ne,null,ae(D,(m,v)=>s("div",{key:v,class:"rounded-md"},[m.icon.length>0?(c(),b("div",So,[i(re,{icon:m.icon,class:"py-[6px]",onClick:Y=>g.value&&C(m.id,$)},null,8,["icon","onClick"])])):(c(),b("div",xo,[m.name?(c(),N(k,{key:1,"button-text":m.name,type:"text",onClick:Y=>g.value&&C(m.id,$)},null,8,["button-text","onClick"])):(c(),N(k,{key:0,"button-text":"선택해제",class:"text-red-400",type:"text",onClick:Y=>g.value&&P($)},null,8,["onClick"]))]))])),64))])],4)):q("",!0)]))],10,yo)}),128))],512))}}),Do={class:"w-full h-full"},$o=z({__name:"CuesheetItems",props:{rowData:{}},emits:["cuesheet-item-list-api","refresh-data","selected-row"],setup(o,{expose:u,emit:e}){const d=e,l=ve(),r=be(),{createCuesheetItem:t,deleteCuesheetItem:n,createCuesheetArticle:a}=r,{getCuesheetItems:g,camSlotCount:D,audioSlotCount:R}=fe(r),U=y(),C=y([]),P=y(),p={3:120,4:160,5:200},S=F(()=>p[D.value]||120),$=F(()=>p[R.value]||120),A=[I({headerName:"",checkboxSelection:!0,maxWidth:40}),I({headerName:"NO",field:"no",maxWidth:60,valueGetter:"node.rowIndex",cellRenderer:w=>Ye(w)}),I({headerName:"누적",field:"artclAcumTime",maxWidth:100}),I({headerName:"소요",field:"cueItemTime",maxWidth:80}),I({headerName:"구분",field:"artclTypeCd",maxWidth:80,cellRenderer:w=>{const V=w.value==="ST_01"?"S":"R";return`<span class='flex items-center justify-center w-6 h-6 text-white font-bold rounded-full ${V==="R"?"bg-green-500":"bg-emerald-300"}'>${V}</span>`}}),I({headerName:"DVE",field:"dveComment",maxWidth:80}),I({headerName:"제목",field:"cueItemTitl",minWidth:120,flex:1}),I({headerName:"기자",field:"rptrNm",maxWidth:80}),I({headerName:"CAM",cellRenderer:bo,minWidth:S.value,maxWidth:S.value,cellRendererParams:()=>({mode:l.mode})}),I({headerName:"VIDEO",cellRenderer:lo,cellRendererParams:()=>({mode:l.mode})}),I({headerName:"AUDIO",cellRenderer:go,minWidth:$.value,maxWidth:$.value,cellRendererParams:()=>({mode:l.mode})}),I({headerName:"미디어월",field:"mediaWall"}),I({headerName:"조명/전식",field:"lightingPower"}),I({headerName:"비고",field:"rmk"}),I({headerName:"전송현황"}),I({headerName:"수퍼",maxWidth:80}),I({headerName:"편집배정",field:"beforeEditNm",maxWidth:100})],_=w=>{C.value=w,d("selected-row",w)},x=w=>{P.value=w,U.value=w,d("cuesheet-item-list-api",w)};return u({addNewRow:async()=>{var X;let w;if(C.value.length>0){const Z=C.value.length-1;w=C.value[Z].data.cueItemOrd+1}else w=g.value.length;const V={cueId:(X=l.selectedCuesheetId)==null?void 0:X.toString(),cueItemOrd:w};(await t(V)).success&&d("refresh-data")},insertNewRow:async()=>{var V;let w;if(C.value.length>0){const L=C.value.length-1;w=C.value[L].data.cueItemOrd;const Z={cueId:(V=l.selectedCuesheetId)==null?void 0:V.toString(),cueItemOrd:w};console.log(Z),(await t(Z)).success&&d("refresh-data")}},deleteRow:async()=>{try{if(C.value){const w={cueItemId:C.value[0].data.id,cueId:l.selectedCuesheetId};(await n(w)).success&&d("refresh-data")}}catch(w){console.error("CuesheetItems deleteRow Error",w)}},addArticleRow:async w=>{console.log("debug drop row::::",w);const V={cueId:l.selectedCuesheetId,cueItemOrd:w[0].rowIndex,artclId:w[0].data.id};(await a(V)).success&&d("refresh-data")}}),(w,V)=>(c(),b("div",Do,[i(we,{"column-defs":A,"row-data":w.rowData,"row-selection":"multiple","row-drag-managed":!0,"row-drag-multi-row":!0,"header-height":25,onSelectedRows:_,onOnGridReady:x},null,8,["row-data"])]))}}),Po={class:"flex items-center gap-2 justify-between"},No={class:"flex items-center gap-2"},To={class:"mt-2"},Eo={class:"mt-2 h-[calc(100vh-240px)] drop-zone"},Ro=z({__name:"CuesheetDetailModal",props:{cuesheetInfoData:{},cuesheetItemListData:{},cuesheetHistoryData:{}},emits:["on-close","on-editing","refresh-data"],setup(o,{emit:u}){const e=o,d=u,l=ve(),r=y(!1),t=y(!1),n=y(!1),a=y(null),g=y([]),D=y(1),R=y(Be.xs),U=y({isShow:!0,page:D.value,totalElements:0,totalPages:1,numberOfElements:0,size:R.value}),p=[{id:1,label:"이력조회",action:()=>{r.value=!r.value}},{id:2,label:"히스토리",action:()=>{t.value=!t.value}}],S=F(()=>[{id:1,label:"순서고침"},{id:2,label:"새로고침"},{id:3,label:"ANC"},{id:4,label:"교정"},{id:5,label:"EDL"},{id:6,label:"메모"},{id:7,label:"영상첨부"},{id:8,label:"삽입",action:()=>{var E;return(E=a.value)==null?void 0:E.insertNewRow()},disabled:g.value.length===0},{id:9,label:"추가",action:()=>{var E;return(E=a.value)==null?void 0:E.addNewRow()}},{id:10,label:"삭제",action:()=>{var E;return(E=a.value)==null?void 0:E.deleteRow()},disabled:g.value.length===0},{id:11,label:"이동"},{id:12,label:"기사보기"},{id:13,label:"기사",action:()=>{n.value=!n.value}},{id:14,label:"영상보기"},{id:15,label:"S/S"},{id:16,label:"전송"},{id:17,label:"새로저장"},{id:18,label:"정보"},{id:19,label:"목록"},{id:20,label:"Excel"},{id:21,label:"상세"},{id:22,label:"닫기",action:()=>d("on-close")}]),$=F(()=>l.mode==="detail"?p:S.value),A=y("text-[14px]"),_=()=>{d("on-editing"),l.mode=l.mode==="detail"?"edit":"detail"},x=F(()=>l.mode==="detail"?"읽기 모드":"편집 모드"),m=y([]),v=Fe(),{fetchArticles:Y}=v,G=y(de("2025-01-08").format("YYYY-MM-DD")),w=async()=>{const E={startDate:G.value,endDate:G.value},H=await Y(E);H.success&&(m.value=H.data.content)},V=E=>{g.value=E};let L,X;const Z=y(),ee=async()=>{L.api.isDestroyed()||X.api.isDestroyed()||(Z.value=L.api.getRowDropZoneParams({onDragStop:E=>{var ce;X.api.applyTransaction({remove:E.nodes.map(W=>W.data)});const H=L.api.getRenderedNodes(),Q=[];E.nodes.forEach(W=>{H.forEach(me=>{W.data.id===me.data.id&&Q.push(me)})}),(ce=a.value)==null||ce.addArticleRow(Q)}}),X.api.addRowDropZone(Z.value))},ue=E=>{L=E},ge=E=>{X=E,X.api.removeRowDropZone(Z.value),ee()};return oe(()=>{w()}),(E,H)=>(c(),N(Me,null,{content:T(()=>[s("div",Po,[s("div",No,[s("div",null,[i(k,{"button-text":x.value,onClick:_},null,8,["button-text"])]),H[4]||(H[4]=s("div",{class:"flex gap-1 items-center border p-1"},[s("div",{class:"text-sm bg-green-600 text-white px-1"},"방송중"),s("div",null,"[HD]8시 뉴스 - 제1뉴스센터")],-1))]),s("div",null,[i(De,{"menu-items":$.value},null,8,["menu-items"])])]),s("div",To,[s("div",null,[i(eo,{"font-size":A.value,"onUpdate:fontSize":H[0]||(H[0]=Q=>A.value=Q),"model-value":e.cuesheetInfoData},null,8,["font-size","model-value"])])]),s("div",Eo,[i($o,{ref_key:"itemsRef",ref:a,"row-data":e.cuesheetItemListData,onCuesheetItemListApi:ue,onSelectedRow:V,onRefreshData:H[1]||(H[1]=()=>d("refresh-data"))},null,8,["row-data"]),r.value?(c(),N(Oe,{key:0,cuesheet:E.cuesheetInfoData?E.cuesheetInfoData:void 0,"history-data":E.cuesheetHistoryData,"page-info":U.value,onClose:H[2]||(H[2]=Q=>r.value=!1)},null,8,["cuesheet","history-data","page-info"])):q("",!0),q("",!0),n.value?(c(),N(lt,{key:2,onCuesheetArticleSearchListApi:ge,onClose:H[3]||(H[3]=Q=>n.value=!1)})):q("",!0)])]),_:1}))}});function Oo(o){return{sdate:o.sdate,edate:o.edate,programType:o.programType,brdcPgmId:o.brdcPgmId,brdcPgmNm:o.brdcPgmNm,deptCd:o.deptCd,cueStcd:o.cueStcd,searchWord:o.searchWord,chDivIds:o.chDivIds}}function Mo(o){return o&&typeof o=="object"&&"id"in o&&"brdcPgmNm"in o}function Ao(o,u,e){const d=ve(),{fetchCuesheet:l,fetchDetailCuesheet:r,createCuesheet:t,editCuesheet:n,lockCuesheet:a,unLockCuesheet:g,fetchCuesheetHistory:D}=d,R=x=>{var v;const m={isShow:!0,page:u.page.value,totalPages:x.totalPages,totalElements:x.totalElements,numberOfElements:x.numberOfElements,size:u.size.value};(v=e==null?void 0:e.onUpdatePageInfo)==null||v.call(e,m)},U=async()=>{var x;try{const m=o.value.searchProgram;let v;Mo(m)&&(v=Number(m.id));const Y={sdate:o.value.searchRangeDate[0],edate:o.value.searchRangeDate[1],chDivIds:o.value.searchChDivIds};o.value.searchProgramType&&(Y.programType=o.value.searchProgramType.toString()),v&&(Y.brdcPgmId=v);const G=Oo(Y),w=await l({...G,page:u.page.value-1,size:u.size.value,sort:u.sortColumns.value});w.success&&((x=e==null?void 0:e.onCuesheetListSuccess)==null||x.call(e,w.data),R(w.data))}catch(m){console.error("useCuesheetActions getCuesheetList Error",m)}};return{getCuesheetList:U,getCuesheet:async x=>{var m;try{const v=await r(x);v!=null&&v.success&&((m=e==null?void 0:e.onCuesheetSuccess)==null||m.call(e,v.data))}catch(v){console.error("useCuesheetActions getCuesheet Error",v)}},getPreCuesheet:async x=>{var m;try{const v=await r(x);v.success&&((m=e==null?void 0:e.onPreCuesheetSuccess)==null||m.call(e,v.data))}catch(v){console.error("useCuesheetActions getPreCuesheet Error",v)}},onCreateCuesheet:async x=>{var m;try{const v=await t(x);v!=null&&v.success&&(window.Notify.success({message:ie.cuesheet.success.create}),(m=e==null?void 0:e.onCuesheetCreateSuccess)==null||m.call(e,v.success))}catch(v){console.error("useCuesheetActions onCreateCuesheet Error",v)}},onEditCuesheet:async x=>{var m;try{const v=await n(x);v!=null&&v.success&&(window.Notify.success({message:ie.cuesheet.success.edit}),(m=e==null?void 0:e.onCuesheetEditSuccess)==null||m.call(e,v.success),await U())}catch(v){console.error("useCuesheetActions onEditCuesheet Error",v)}},unlockCuesheetItem:async x=>{try{const m=await g(x);if(m.success)return window.Notify.success({message:ie.cuesheet.success.unlock}),m}catch(m){window.Notify.error({message:ie.cuesheet.failed.unlock}),console.error("useCuesheetActions unlockCuesheetItem Error",m)}},getCuesheetHistory:async(x,m)=>{var v,Y;try{const G=x,w=(m==null?void 0:m.typeId)||"00";if(!G)return;const V={page:u.page.value-1,size:u.size.value,sort:u.sortColumns.value},L=await D(G,w,V);L!=null&&L.success&&((v=e==null?void 0:e.onCuesheetHistoryListSuccess)==null||v.call(e,L.data),(Y=e==null?void 0:e.onUpdateHistoryPageInfo)==null||Y.call(e,Qe(L.data,u)))}catch(G){console.error("useCuesheetActions getCuesheetHistory Error",G)}},lockCuesheetItem:async x=>{try{const m=await a(x);if(m!=null&&m.success)return m}catch(m){window.Notify.error({message:ie.cuesheet.failed.lock}),console.error("useCuesheetActions lockCuesheetItem Error",m)}}}}function Lo(o){const u=be(),{fetchCuesheetItems:e}=u;return{getCuesheetItemList:async l=>{var r;try{const t=await e(l);t.success&&((r=o==null?void 0:o.onCuesheetItemListSuccess)==null||r.call(o,t.data))}catch(t){console.error("useCuesheetItemActions getCuesheetItemList Error",t)}}}}function Le(){const{companyId:o}=Ge(),u={selectedRow:y([])},e={cuesheetListItem:y([]),cuesheetHistoryData:y(),cuesheetPreInfoData:y(void 0),cuesheetInfoData:y(void 0),cuesheetItemListData:y(void 0)},d={cuesheetListPagination:Ne(),cuesheetHistoryListPagination:Ne({initialSize:20})},l=y({searchRangeDate:[de("2025-01-01").format("YYYY-MM-DD"),de("2025-02-31").format("YYYY-MM-DD")],searchChDivIds:o,searchProgram:"",searchText:"",searchProgramType:""}),r={cueDivCd:"01",brdcPgmId:1,pgmAddTitle:"",cueVer:"",brdcDt:"",brdcStartTime:"",brdcEndTime:"",anc1Id:0,anc2Id:0,pd1Id:0,pd2Id:0,td1Id:0,td2Id:0,rmk:"",hdYn:"Y",newsCenterCd:"01",chDivId:1},t=y({...r}),n=y({mediaType:void 0,program:void 0}),a=F(()=>u.selectedRow.value.length>0),g=y("create");return{...u,...e,...d,initialFormData:r,formData:t,filterState:n,cuesheetSearchCondition:l,hasSelectedItems:a,infoModalMode:g}}function Vo(o,u,e){const d=r=>{u.setInfoModalMode&&u.setInfoModalMode(r),u.toggleModal("info")};return{menuItems:F(()=>[{id:1,label:"사전배정",action:()=>{u.onPreCuesheet(),u.toggleModal("preview")},disabled:o(le.PRE_ALLOCATION)},{id:2,label:"로그",action:u.onCuesheetHistory,disabled:o(le.HISTORY)},{id:3,label:"해제",action:u.onUnlock,disabled:o(le.EDITABLE)||(e==null?void 0:e.value[0].data.lckYn)==="N"},{id:4,label:"참조"},{id:5,label:"신규",action:()=>d("create")},{id:6,label:"수정",action:()=>d("edit"),disabled:o(le.EDIT)},{id:7,label:"삭제",disabled:o(le.DELETE)},{id:8,label:"닫기"}])}}function Ho(){const o=y({info:!1,history:!1,print:!1,copy:!1,menu:!1,preview:!1,detail:!1});return{modals:o,toggleModal:e=>{o.value[e]=!o.value[e]}}}function ko(o){return{menuItems:F(()=>[{id:1,label:"영상보기"},{id:2,label:"DVE"},{id:3,label:"S/S"},{id:4,label:"저장"},{id:5,label:"목록"},{id:6,label:"닫기",action:()=>o.toggleModal("preview")}])}}function jo(o){return{onSearch:async()=>{var r;try{await((r=o==null?void 0:o.onSearch)==null?void 0:r.call(o))}catch(t){console.error("useCuesheetSearchActions onSearch Error",t)}},onChangeRange:async r=>{try{await new Promise(t=>{var g;const[n,a]=r;(g=o==null?void 0:o.onUpdateSearchCondition)==null||g.call(o,{searchRangeDate:[n,a]}),t(null)})}catch(t){console.error("useCuesheetSearchActions onChangeRange Error",t)}},onChangeMediaType:async r=>{try{await new Promise(t=>{var n;console.log(r),(n=o==null?void 0:o.onUpdateSearchCondition)==null||n.call(o,{searchProgramType:r.id}),t(null)})}catch(t){console.error("useCuesheetSearchActions onChangeMediaType Error",t)}},onChangeProgram:async r=>{try{await new Promise(t=>{var n;(n=o==null?void 0:o.onUpdateSearchCondition)==null||n.call(o,{searchProgram:{id:r.id,brdcPgmNm:r.brdcPgmNm}}),t(null)})}catch(t){console.error("useCuesheetSearchActions onChangeProgram Error",t)}},onUpdateSearchCondition:o==null?void 0:o.onUpdateSearchCondition}}const zo={class:"flex flex-wrap items-start"},Uo={class:"flex items-center gap-2"},Wo=z({__name:"CuesheetHeader",props:{menuItems:{},isShowSearch:{type:Boolean,default:!0}},emits:["click:search","on-change-range","on-change-media-type","on-change-program"],setup(o,{emit:u}){const e=u,d=Le(),{filterState:l}=d,r={search:{onSearch:()=>{e("click:search")}},filter:{onSelectMediaType:t=>{l.value.mediaType=t,e("on-change-media-type",t)},onSelectProgram:t=>{l.value.program=t,e("on-change-program",t)},onChangeRange:t=>{if(t){const n=ot(t);n.length===2&&de(n[0]).isValid()&&de(n[1]).isValid()&&e("on-change-range",t)}}}};return(t,n)=>(c(),b("div",zo,[s("div",{class:B(["flex items-center w-[100vw] m-[-0.5rem] mb-0 px-2 py-1 min-h-[50px] bg-primary-gray-900 border-y border-primary-gray-surface-500 dark:bg-dark",t.isShowSearch?"justify-between":"justify-end"])},[K(s("div",Uo,[s("div",null,[i(qe,{clearable:!0,"text-input":!0,intent:"primary",onChange:r.filter.onChangeRange},null,8,["onChange"])]),s("div",null,[i(Je,{modelValue:h(l).mediaType,"onUpdate:modelValue":n[0]||(n[0]=a=>h(l).mediaType=a),class:"w-28",onOnSelected:r.filter.onSelectMediaType},null,8,["modelValue","onOnSelected"])]),s("div",null,[i(st,{modelValue:h(l).program,"onUpdate:modelValue":n[1]||(n[1]=a=>h(l).program=a),class:"w-32",label:"",onOnSelected:r.filter.onSelectProgram},null,8,["modelValue","onOnSelected"])]),s("div",null,[i(k,{icon:"magnifying-glass",type:"tertiary",onClick:r.search.onSearch},null,8,["onClick"])])],512),[[Xe,t.isShowSearch]]),s("div",null,[i(De,{"menu-items":t.menuItems},null,8,["menu-items"])])],2)]))}}),Yo=z({__name:"CuesheetList",props:{isLoading:{type:Boolean},rowData:{},pageInfo:{}},emits:["selected-rows","on-unlock","double-clicked-row","on-change-page"],setup(o,{emit:u}){const e=u,d=a=>rt(a.data.brdcStartTime,a.data.brdcDurtn),l=[I({headerName:"방송일자",field:"brdcDt",maxWidth:110,sortable:!0}),I({headerName:"요일",field:"week",maxWidth:60,cellStyle:a=>a.value==="토"?{color:"blue"}:a.value==="일"?{color:"red"}:null}),I({headerName:"프로명",field:"brdcPgmNm",flex:1}),I({headerName:"차수",field:"cueVer",maxWidth:60}),I({headerName:"기사",field:"artclCnt",maxWidth:60}),I({headerName:"방송시간",flex:1,valueGetter:d}),I({headerName:"제작시간",field:"makeTime",maxWidth:100}),I({headerName:"방송상태",field:"cueStCd",maxWidth:100,cellRenderer:a=>{if(!a.data.cueStCd)return;const{state:g,color:D}=at(a.value);return`<span class='${D}'>${g}</span>`}}),I({headerName:"편집자",field:"lckrNm",maxWidth:100,sortable:!0,cellRenderer:a=>a.data.lckYn==="Y"?a.data.lckrNm:"-"}),I({headerName:"비고",field:"rmk",flex:1}),I({headerName:"최종편집자",field:"updtrNm",maxWidth:100}),I({headerName:"뉴스센터",maxWidth:100,cellRenderer:a=>a.data.newsCenterCd==="TV1"?"제1뉴스센터":"제2뉴스센터"})],r=a=>{e("selected-rows",a)},t=a=>{e("double-clicked-row",a)},n=a=>{e("on-change-page",a)};return(a,g)=>(c(),N(we,{class:"text-green","column-defs":l,"row-data":a.rowData,"page-info":a.pageInfo,"is-loading":a.isLoading,"header-height":25,"row-selection":"single",onSelectedRows:r,onDoubleClickedRow:t,onOnChangePage:n},null,8,["row-data","page-info","is-loading"]))}}),Bo={class:"flex flex-grow overflow-y-hidden h-[calc(100vh-150px)] mt-2"},Ts=z({__name:"CuesheetView",setup(o){const{modals:u,toggleModal:e}=Ho(),d=ve(),{isLoading:l}=fe(d),{moveCueSheetDetail:r}=Ze(),{selectedRow:t,cuesheetListItem:n,cuesheetSearchCondition:a,cuesheetListPagination:g,cuesheetHistoryListPagination:D,cuesheetHistoryData:R,cuesheetPreInfoData:U,cuesheetInfoData:C,cuesheetItemListData:P,hasSelectedItems:p,infoModalMode:S}=Le(),{isActionDisabled:$}=et(p),{onChangePage:A,pageInfo:_}=g,{onChangePage:x,pageInfo:m}=D,{getCuesheetList:v,getCuesheet:Y,getPreCuesheet:G,onCreateCuesheet:w,onEditCuesheet:V,lockCuesheetItem:L,unlockCuesheetItem:X,getCuesheetHistory:Z}=Ao(a,g,{onCuesheetListSuccess:f=>{n.value=f.content},onCuesheetHistoryListSuccess:f=>{R.value=f.content.map(O=>({...O,cueSheetHistoryData:JSON.parse(O.cueSheetHistoryData)}))},onCuesheetSuccess:f=>{C.value=f,d.selectedCuesheetId=f.id},onPreCuesheetSuccess:f=>{U.value=f},onCuesheetCreateSuccess:f=>{f&&e("info")},onCuesheetEditSuccess:f=>{f&&e("info")}}),{getCuesheetItemList:ee}=Lo({onCuesheetItemListSuccess:f=>{P.value=f}}),{onSearch:ue,onChangeRange:ge,onChangeMediaType:E,onChangeProgram:H}=jo({onSearch:async()=>{try{await v()}catch(f){console.error("Failed to get cuesheet list",f)}},onUpdateSearchCondition:f=>{try{a.value={...a.value,...f},ue()}catch(O){console.error("CuesheetView onUpdateSearchCondition Error",O)}}}),{observerTarget:Q,setupObserver:ce}=tt({onIntersect:async()=>{await v()}}),W={navigation:{onMoveDetail:async()=>{const f=t.value[0].data.id;f&&(await Y(f),await ee({cueId:f}),e("menu"),e("detail"),await L(f))},onMoveEdit:async()=>{const f={cuesheetId:t.value[0].data.id,title:"",brdcStartTime:t.value[0].data.brdcStartTime,mode:"edit"};(await L(t.value[0].data.id)).success&&(e("menu"),r(f))}},row:{onSelect:async f=>{console.log(f),t.value=f},onDoubleClick:f=>{console.log("debug row....",f),e("menu")}},data:{onUnlock:async()=>{const f=t.value[0].data.id;await X(f)},onClickHistory:async()=>{await Z(42),e("history")},onHistoryTypeChange:async f=>{await Z(42,{typeId:f})},onEditCuesheet:async f=>{const O={...f},te=t.value[0].data.id;O.id=te,await V(O)},refreshItemData:async()=>{const f=d.selectedCuesheetId;f&&await ee({cueId:f})}},user:{onSelectUser:f=>{console.log(f)}},modal:{onEditingMode:async()=>{const f=t.value[0].data.id;await L(f)}}},{menuItems:me}=Vo($,{toggleModal:e,onPreCuesheet:async()=>{await G(t.value[0].data.id),await ee({cueId:t.value[0].data.id})},onCuesheetHistory:W.data.onClickHistory,onUnlock:W.data.onUnlock,setInfoModalMode:f=>{S.value=f}},t),{menuItems:Ve}=ko({toggleModal:e});return oe(()=>{ce()}),(f,O)=>(c(),b("div",{ref_key:"observerTarget",ref:Q},[s("div",null,[i(Wo,{"menu-items":h(me),"onClick:search":h(ue),onOnChangeRange:h(ge),onOnChangeMediaType:h(E),onOnChangeProgram:h(H)},null,8,["menu-items","onClick:search","onOnChangeRange","onOnChangeMediaType","onOnChangeProgram"]),s("div",Bo,[i(Yo,{"is-loading":h(l),"row-data":h(n),"page-info":h(_),onSelectedRows:W.row.onSelect,onOnUnlock:W.data.onUnlock,onDoubleClickedRow:W.row.onDoubleClick,onOnChangePage:h(A)},null,8,["is-loading","row-data","page-info","onSelectedRows","onOnUnlock","onDoubleClickedRow","onOnChangePage"])])]),h(u).info?(c(),N(h(Ke),{key:0,mode:h(S),cuesheet:h(t).length===1?h(t)[0].data:void 0,"is-loading":h(l),onOnCreate:h(w),onOnEdit:W.data.onEditCuesheet,onOnClose:O[0]||(O[0]=te=>h(e)("info"))},null,8,["mode","cuesheet","is-loading","onOnCreate","onOnEdit"])):q("",!0),h(u).history?(c(),N(h(Oe),{key:1,cuesheet:h(t).length===1?h(t)[0].data:void 0,"history-data":h(R),"page-info":h(m),onOnChangeType:W.data.onHistoryTypeChange,onOnChangePage:h(x),onOnClose:O[1]||(O[1]=te=>h(e)("history"))},null,8,["cuesheet","history-data","page-info","onOnChangeType","onOnChangePage"])):q("",!0),h(u).menu?(c(),N(h(ut),{key:2,onDetail:W.navigation.onMoveDetail,onEdit:W.navigation.onMoveEdit,onClose:O[2]||(O[2]=te=>h(e)("menu"))},null,8,["onDetail","onEdit"])):q("",!0),h(u).preview?(c(),N(h(Lt),{key:3,"menu-items":h(Ve),"cuesheet-pre-info-data":h(U),"cuesheet-pre-item-list-data":h(P),onClose:O[3]||(O[3]=te=>h(e)("preview"))},null,8,["menu-items","cuesheet-pre-info-data","cuesheet-pre-item-list-data"])):q("",!0),h(u).detail?(c(),N(h(Ro),{key:4,"cuesheet-info-data":h(C),"cuesheet-item-list-data":h(P),"cuesheet-history-data":h(R),onClose:O[4]||(O[4]=te=>h(e)("detail")),onOnClose:O[5]||(O[5]=te=>h(e)("detail")),onOnEditing:W.modal.onEditingMode,onRefreshData:W.data.refreshItemData},null,8,["cuesheet-info-data","cuesheet-item-list-data","cuesheet-history-data","onOnEditing","onRefreshData"])):q("",!0)],512))}});export{Ts as default};
