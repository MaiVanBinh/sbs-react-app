import{c as P}from"./use-plan-menu-omF6lTyZ.js";import{u as Y,b as j,c as G,d as L,_ as q}from"./ForeignNewsHeader.vue_vue_type_script_setup_true_lang-QE55xmn5.js";import{k as t,ah as K,aq as z,ap as H,d as k,ae as J,a as F,c as M,Y as m,G as s,w as g,a1 as S,j as w,as as Q,a2 as W,a4 as T,$ as X,h as A,K as O}from"./index-eLyz9_Ts.js";import"./journalist-QNhBHHjf.js";import"./organization-qjYuRO6g.js";import{_ as Z}from"./ConfirmModal.vue_vue_type_script_setup_true_lang-k_ZxaDhN.js";import{_ as $}from"./GDatePicker.vue_vue_type_style_index_0_lang-aP5TJiAZ.js";import{_ as D}from"./FormLabel.vue_vue_type_script_setup_true_lang-SB4ukE1P.js";import{_}from"./FormItem.vue_vue_type_script_setup_true_lang-ZXQ_7x89.js";import{_ as ee}from"./VDCEditor.vue_vue_type_script_setup_true_lang-IhnNo6sk.js";import{_ as oe}from"./ReferenceVideoModal.vue_vue_type_script_setup_true_lang-PAl24_pJ.js";import"./buttons-3hbXC8Cn.js";import"./index.esm-Hbr0u7mK.js";import"./GSingleSelect-7u8H0FdH.js";import"./vue-multiselect-Yz8FsF-E.js";import"./use-model-wrapper-XtiLc3Xd.js";import"./ContentHeaderButtons.vue_vue_type_script_setup_true_lang-Db8CUXqr.js";import"./use-date-GeeGTbYh.js";import"./file-Gx0JxWZZ.js";import"./file-division-code-x51qUgaH.js";import"./make-grid-column-aeLSdEws.js";import"./GVideoPlayer-1SUF8s3O.js";function se(e){const f=Y(),{createForeignNews:a}=f,c=t(),l=t();return{formRef:c,handleCreateForeignNews:n=>{l.value=n,e==null||e.onBeforeCreate()},createForeignNewsItem:async()=>{try{console.log(l,"debug...formData"),(await a(l.value)).success&&(window.Notify.success({message:K.foreignNews.success.create}),e==null||e.onCreateSuccess())}catch(n){console.error("Failed createForeignNewsItem",n)}}}}function re(){const e=t(),{moveForeignNewsList:f}=H(),{deleteTabBy:a,getActiveTab:c}=z();return{formRef:e,closedTabAndMovePage:()=>{a(c),f()},handleFormButton:async()=>{var d;if(e.value)try{await((d=e.value)==null?void 0:d.onSubmitForeignNews())}catch(n){console.error("Failed onSubmitForeignNews",n)}}}}const B=e=>({titl:(e==null?void 0:e.titl)??"",ctt:(e==null?void 0:e.ctt)??"",wrDtm:(e==null?void 0:e.wrDtm)??"",rcvDtm:(e==null?void 0:e.rcvDtm)??"",rcvStartTime:(e==null?void 0:e.rcvStartTime)??"",rcvEndTime:(e==null?void 0:e.rcvEndTime)??"",item:(e==null?void 0:e.item)||"",broad:(e==null?void 0:e.broad)||"",keyword:(e==null?void 0:e.keyword)||""}),te={class:"flex h-[calc(100vh-180px)] mt-4"},le={class:"w-[70%] flex border rounded-lg overflow-hidden"},ne={class:"h-full w-2/3 p-2 border-r"},me={class:"space-y-4"},ue={class:"mt-6"},de={class:"h-full w-1/3 p-4"},ae={class:"h-full flex flex-col items-center justify-center border-2 border-dashed rounded-lg bg-gray-50"},ce={class:"flex-1 border rounded-lg ml-4 p-4"},fe={class:"space-y-4"},ve={class:"flex gap-2"},pe={class:"flex items-center gap-2 w-full"},ge=k({__name:"ForeignNewsForm",props:{mode:{},formData:{}},emits:["on-submit"],setup(e,{expose:f,emit:a}){const c=e,l=a,v=t(c.mode==="create"?B():c.formData??B()),d=t({id:"0001",label:"북한"}),n=t({id:"APTN",label:"APTN"}),b=t(!1),u=t(!1),p=t(""),i=t(!1),U=t(""),R=t(""),y=t(J().format("YYYY-MM-DD")),h=t(""),N=t(""),{titl:V,titlError:E,handleSubmit:I}=j(),C={form:{onSubmit:I(async()=>{const x={...v.value,titl:V.value,ctt:U.value,wrDtm:R.value,rcvDtm:y.value,rcvStartTime:h.value,rcvEndTime:N.value,item:d.value.id,broad:u.value?p.value:n.value.id,keyword:v.value.keyword};l("on-submit",x)})},toggle:{onOtherCheck:()=>{u.value=!u.value}}};return f({onSubmitForeignNews:C.form.onSubmit}),(x,o)=>(F(),M("div",te,[m("div",le,[m("div",ne,[m("div",me,[s(_,{label:"제목",class:"flex items-center"},{default:g(()=>[s(S,{modelValue:w(V),"onUpdate:modelValue":o[0]||(o[0]=r=>Q(V)?V.value=r:null),class:"flex-1",intent:"primary","error-msg":w(E)},null,8,["modelValue","error-msg"])]),_:1}),s(_,{label:"아이템",class:"flex items-center"},{default:g(()=>[s(G,{modelValue:d.value,"onUpdate:modelValue":o[1]||(o[1]=r=>d.value=r),readonly:""},null,8,["modelValue"])]),_:1})]),m("div",ue,[s(ee,{content:""})])]),m("div",de,[m("div",ae,[o[10]||(o[10]=m("span",{class:"text-gray-500 mb-4"},"기사와 연결할 영상을 선택해 주세요.",-1)),s(W,{"button-text":"영상선택",class:"w-28",intent:"primary",onClick:o[2]||(o[2]=r=>i.value=!0)})])])]),m("div",ce,[s(D,{label:"상세정보",class:"mb-4"}),m("div",fe,[s(_,{label:"작성일"},{default:g(()=>[s($,{modelValue:y.value,"onUpdate:modelValue":o[3]||(o[3]=r=>y.value=r),class:"w-full",intent:"primary"},null,8,["modelValue"])]),_:1}),s(_,{label:"수신일"},{default:g(()=>[m("div",ve,[s($,{intent:"primary"}),s(T,{modelValue:h.value,"onUpdate:modelValue":o[4]||(o[4]=r=>h.value=r),"mask-format":"##:##",placeholder:"00:00",intent:"primary"},null,8,["modelValue"]),s(T,{modelValue:N.value,"onUpdate:modelValue":o[5]||(o[5]=r=>N.value=r),"mask-format":"##:##",placeholder:"00:00",intent:"primary"},null,8,["modelValue"])])]),_:1}),s(_,{label:"방송사"},{default:g(()=>[m("div",pe,[s(L,{modelValue:n.value,"onUpdate:modelValue":o[6]||(o[6]=r=>n.value=r),disabled:u.value,class:"w-[7rem]"},null,8,["modelValue","disabled"]),s(X,{modelValue:b.value,"onUpdate:modelValue":o[7]||(o[7]=r=>b.value=r),checked:u.value,label:"이외",onChange:C.toggle.onOtherCheck},null,8,["modelValue","checked","onChange"]),s(S,{modelValue:p.value,"onUpdate:modelValue":o[8]||(o[8]=r=>p.value=r),disabled:!u.value,intent:"primary",class:"flex-grow"},null,8,["modelValue","disabled"])])]),_:1})])]),i.value?(F(),A(oe,{key:0,onClose:o[9]||(o[9]=r=>i.value=!1)})):O("",!0)]))}}),Ie=k({__name:"ForeignNewsCreateView",setup(e){const{formRef:f,closedTabAndMovePage:a,handleFormButton:c}=re(),l=t({submit:!1}),{handleCreateForeignNews:v,createForeignNewsItem:d}=se({onBeforeCreate:()=>{l.value.submit=!0},onCreateSuccess:()=>{l.value.submit=!1,a()}}),n=P({actionLabel:"저장",onAction:c,onClose:a}),b=u=>{l.value[u]=!l.value[u]};return(u,p)=>(F(),M("div",null,[s(q,{"menu-items":w(n),"is-show-search":!1},null,8,["menu-items"]),s(ge,{ref_key:"formRef",ref:f,mode:"create",onOnSubmit:w(v)},null,8,["onOnSubmit"]),l.value.submit?(F(),A(Z,{key:0,text:"북한/외신 저장하시겠습니까?",onOnSubmit:w(d),onClose:p[0]||(p[0]=i=>b("submit"))},null,8,["onOnSubmit"])):O("",!0)]))}});export{Ie as default};
