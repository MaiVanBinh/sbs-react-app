import{d as z,aP as R,k as v,l as I,o as j,a as D,c as F,Y as b,G as g,Q as $,a5 as L,eC as T,bQ as M,af as U,j as G,a2 as P,u as Y,aq as N,V as K,h as q,K as E,w as H,F as J}from"./index-eLyz9_Ts.js";import{_ as W}from"./ContentHeaderButtons.vue_vue_type_script_setup_true_lang-Db8CUXqr.js";import{_ as X}from"./ConfirmModal.vue_vue_type_script_setup_true_lang-k_ZxaDhN.js";import{_ as Q}from"./ModalButton.vue_vue_type_script_setup_true_lang-WIw8hxFk.js";import{_ as Z}from"./ProgramSelect.vue_vue_type_script_setup_true_lang-UHoCrnxw.js";import{G as A}from"./GSingleSelect-7u8H0FdH.js";import{u as ee}from"./organization-qjYuRO6g.js";const te={class:"flex gap-x-1"},ae=z({__name:"DepartmentTeamSelect",props:{modelValue:{default:""},defaultOrg:{default:()=>({orgDivCd:"",orgCd:""})},placeholder:{default:"조직 선택"},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},selectLabel:{default:"선택"},deselectLabel:{default:"취소"},allowEmpty:{type:Boolean,default:!0},searchable:{type:Boolean,default:!1},required:{type:Boolean,default:!1},width:{default:"w-28"},customClass:{default:""}},emits:["update:modelValue","on-selected"],setup(O,{emit:x}){const _=O,p=x,n=ee(),{fetchOrganizations:a}=n,{organizations:d}=R(n),y=v(!1),m=v(null),C=t=>{m.value=t},e=()=>{m.value=null},u=v(),f=v(),k=()=>{var h,S;let t="",o="",i="";f.value&&(i=f.value.useDeptCd),u.value&&(t="D",o=u.value.orgCd);const l={departmentId:(h=u.value)==null?void 0:h.orgId,teamId:(S=f.value)==null?void 0:S.deptId,orgDivCd:t,orgCd:o,useDeptCd:i};p("update:modelValue",JSON.stringify(l)),p("on-selected",l)},r=I(()=>{if(!d.value)return[];const t=d.value.find(o=>{var i,l;return o.orgCd===((i=_.defaultOrg)==null?void 0:i.orgCd)&&o.orgDivCd===((l=_.defaultOrg)==null?void 0:l.orgDivCd)});return t?t==null?void 0:t.children:[]}),s=I(()=>{if(!r.value)return[];const t=r.value[0]||[];return(t==null?void 0:t.children)||[]}),c=I(()=>{if(!u.value||!s.value)return[];const t=s.value.find(o=>{var i;return o.orgId===((i=u.value)==null?void 0:i.orgId)});return(t==null?void 0:t.departments)||[]}),V=t=>{u.value=t,f.value=void 0,k()},w=t=>{f.value=t,k()},B=async()=>{try{y.value=!0,await a({delYn:"N",newsOrgYn:""})}catch(t){console.error("Failed to fetch organizations:",t)}finally{y.value=!1}};return j(()=>{B()}),(t,o)=>(D(),F("div",{class:$(t.width)},[b("div",te,[g(A,{modelValue:u.value,"onUpdate:modelValue":[o[0]||(o[0]=i=>u.value=i),V],class:$(t.customClass),options:s.value,"track-by":"orgId","item-label":"orgNm",placeholder:"부서 선택",disabled:t.disabled||t.readonly,"close-on-select":!0,open:m.value==="department",onOpen:o[1]||(o[1]=()=>C("department")),onClose:e},null,8,["modelValue","class","options","disabled","open"]),g(A,{modelValue:f.value,"onUpdate:modelValue":[o[2]||(o[2]=i=>f.value=i),w],class:$(t.customClass),options:c.value,"track-by":"deptId","item-label":"deptNm",placeholder:"팀 선택",disabled:t.disabled||t.readonly,"close-on-select":!0,open:m.value==="team",onOpen:o[3]||(o[3]=()=>C("team")),onClose:e},null,8,["modelValue","class","options","disabled","open"])])],2))}}),oe={class:"flex items-center gap-x-2"},ne={class:"relative pr-1 mr-1.5 after:absolute after:right-[-4px] after:top-[5px] after:bottom-[5px] after:w-px after:bg-[#6B7280]"},le={class:"flex items-center h-full relative pr-1 mr-1 after:absolute after:right-[-4px] after:top-[5px] after:bottom-[5px] after:w-px after:bg-[#6B7280]"},se={class:"flex items-center h-full relative pr-1 mr-1 after:absolute after:right-[-4px] after:top-[5px] after:bottom-[5px] after:w-px after:bg-[#6B7280]"},re={class:"flex items-center h-full"},ie=z({__name:"CuesheetScrollSearch",emits:["click:search"],setup(O,{expose:x,emit:_}){const p=_,{t:n}=L(),a=[{id:null,label:"전체"},{id:"apprv_typ_000",label:"작성중"},{id:"apprv_typ_001",label:"데스킹 요청"},{id:"apprv_typ_002",label:"2차 진행중"},{id:"apprv_typ_003",label:"3차 진행중"},{id:"apprv_typ_004",label:"최종"},{id:"apprv_typ_005",label:"승인"}],d=v([T,M]),y=v(),m=v(a[0]),C=v(),e=v(),u=r=>{C.value=r==null?void 0:r.orgCd,e.value=r==null?void 0:r.teamId},f=()=>{d.value=[T,M],m.value=a[0],C.value=null,e.value=null,y.value=null},k=()=>{var s,c;const r={startDate:d.value?d.value[0]:T,endDate:d.value?d.value[1]:M,apprvTypCd:(s=m.value)==null?void 0:s.id,orgCd:C.value,deptId:e.value,brdcPgmId:(c=y.value)==null?void 0:c.id};p("click:search",r)};return x({resetFields:f}),(r,s)=>(D(),F("div",oe,[b("div",ne,[g(U,{modelValue:d.value,"onUpdate:modelValue":s[0]||(s[0]=c=>d.value=c),intent:"primary",clearable:!0,"text-input":!0,width:"w-[211px]"},null,8,["modelValue"])]),b("div",le,[g(A,{modelValue:m.value,"onUpdate:modelValue":s[1]||(s[1]=c=>m.value=c),"track-by":"id","item-label":"label",options:a,intent:"primary",class:"w-[100px]"},null,8,["modelValue"])]),b("div",se,[g(ae,{"default-org":{orgDivCd:"S",orgCd:"K8AA01"},width:"w-full","custom-class":"short-multiselect w-[110px]",label:"",placeholder:"",onOnSelected:u})]),b("div",re,[g(Z,{modelValue:y.value,"onUpdate:modelValue":s[2]||(s[2]=c=>y.value=c),label:"",class:"short-multiselect w-[110px]",placeholder:""},null,8,["modelValue"])]),b("div",null,[g(P,{type:"tertiary",class:"min-w-[80px] !py-0.5 !px-4","button-text":G(n)("Community.검   색"),onClick:k},null,8,["button-text"])])]))}}),de={class:"border-t border-primary-gray-surface-500 flex items-center justify-between m-[-0.5rem] mb-0 px-2 py-2 bg-primary-gray-900 border-b dark:bg-dark"},ue={class:"ml-auto"},ce={class:"px-11 h-[50px] border-t border-primary-gray-surface flex items-center justify-center"},pe={class:"flex items-center justify-center gap-x-2 w-full"},he=z({__name:"CuesheetScrollHeader",props:{title:{default:""},isEditAndCreate:{type:Boolean,default:!1},currentId:{default:null},showRequestDesking:{type:Boolean,default:!1},showApprvDesking:{type:Boolean,default:!1},showCancelDesking:{type:Boolean,default:!1}},emits:["on-create","on-save","on-edit","on-delete","on-delete-desking","on-print","on-post","on-close","on-desking-request","on-desking-approval","on-transmit","on-search"],setup(O,{expose:x,emit:_}){const p=O,n=_,{t:a}=L(),d=Y(),{deleteTab:y}=N(),{getTabs:m}=R(N()),C=v(),e=K({isOpen:!1,title:"",content:"",type:"confirm",intent:"",icon:"customQuestionMark"}),u=()=>{p.currentId&&(e.isOpen=!0,e.title=a("Community.확인"),e.content=a("Community.자료를 삭제하시겠습니까?"),e.intent="delete",e.type="confirm",e.icon="customQuestionMark")},f=()=>{p.currentId&&(e.isOpen=!0,e.title=a("Community.확인"),e.content=a("Cuesheet.데스킹_취소_요청_진행"),e.intent="delete-desking",e.type="confirm",e.icon="customQuestionMark")},k=()=>{p.currentId&&(e.isOpen=!0,e.title=a("Community.확인"),e.content=a("Cuesheet.민방으로_전송하시겠습니까"),e.intent="transmit",e.type="confirm",e.icon="customQuestionMark")},r=()=>{n("on-delete")},s=()=>{n("on-delete-desking")},c=()=>{n("on-transmit")},V=()=>{switch(e.intent){case"delete":r();break;case"delete-desking":s();break;case"transmit":c();break}e.isOpen=!1},w=()=>{const l=m.value.filter(h=>h.path===d.path);l.length&&y(l[0])},B=I(()=>[{id:1,label:a("Community.신규"),action:()=>n("on-create")},{id:2,label:a("Community.교정"),action:()=>n("on-edit")},{id:3,label:a("Cuesheet.데스킹_요청"),action:()=>n("on-desking-request"),hidden:!p.showRequestDesking},{id:4,label:a("Cuesheet.데스킹_취소"),action:f,hidden:!p.showCancelDesking},{id:5,label:a("Cuesheet.데스킹_승인"),action:()=>n("on-desking-approval"),hidden:!p.showApprvDesking},{id:6,label:a("Community.삭제"),action:u},{id:7,label:a("Cuesheet.민방_전송"),action:k},{id:8,label:a("Community.인쇄"),selectList:[a("Community.기본"),a("Community.목록")],action:()=>n("on-print")},{id:9,label:"Post",action:()=>n("on-post")},{id:10,label:a("Community.닫기"),action:w}]),t=[{id:1,label:"저장",action:()=>n("on-save")},{id:2,label:"닫기",action:w}],o=async l=>{n("on-search",l)};return x({onClose:w,resetFields:()=>{var l;(l=C.value)==null||l.resetFields()}}),(l,h)=>(D(),F(J,null,[b("div",de,[l.isEditAndCreate?E("",!0):(D(),q(ie,{key:0,ref_key:"searchRef",ref:C,"onClick:search":o},null,512)),b("div",ue,[g(W,{"menu-items":l.isEditAndCreate?t:B.value},null,8,["menu-items"])])]),e.isOpen?(D(),q(X,{key:0,"use-slot":"",intent:"secondary",text:e.content,type:e.type,title:e.title,icon:e.icon,onOnSubmit:V,onClose:h[1]||(h[1]=S=>e.isOpen=!1)},{bottom:H(()=>[b("div",ce,[b("div",pe,[g(Q,{text:"예",icon:"check",onClick:V}),g(Q,{type:"warning",text:"아니요",icon:"xMark",onClick:h[0]||(h[0]=S=>e.isOpen=!1)})])])]),_:1},8,["text","type","title","icon"])):E("",!0)],64))}});export{he as _};
