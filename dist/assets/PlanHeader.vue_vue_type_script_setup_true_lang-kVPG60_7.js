import{c as $,a as S,u as x,b as y}from"./index.esm-Hbr0u7mK.js";import{d as V,k as g,ae as v,a as h,h as C,w as f,X as I,Y as u,G as s,af as M,Q as D,c as k,C as B,a1 as F,j as Y,F as L,a2 as b,a3 as P,aj as U,au as E,$ as N,K as j}from"./index-eLyz9_Ts.js";import{_ as O}from"./GDatePicker.vue_vue_type_style_index_0_lang-aP5TJiAZ.js";import{_ as q}from"./OrganizationSelect.vue_vue_type_script_setup_true_lang-BNuugYEX.js";import{_ as A}from"./ContentHeaderButtons.vue_vue_type_script_setup_true_lang-Db8CUXqr.js";import{_}from"./FormItem.vue_vue_type_script_setup_true_lang-ZXQ_7x89.js";const G=$({titl:S().required("제목을 입력해주세요."),aggBasisCd:S().required("발제근거를 선택해주세요.")});function ae(){const{handleSubmit:p}=x({validationSchema:G,validateOnMount:!1}),{value:m,errorMessage:n}=y("titl",void 0,{validateOnValueUpdate:!1}),{value:r,errorMessage:e}=y("aggBasisCd",void 0,{validateOnValueUpdate:!1});return{titl:m,titlError:n,aggBasisCd:r,aggBasisCdError:e,handleSubmit:p}}const H={FIELDS:[{label:"제목",field:"titl"},{label:"기획자",field:"planUserNm"},{label:"내용",field:"serachValue"},{label:"심층화요소",field:"prdCmpnt"},{label:"제작구성요소",field:"prdCmpnt"},{label:"데스크의견",field:"prdCmpnt"}]},R={class:"mt-2"},T=V({__name:"PlanDetailSearchModal",props:{initialValue:{}},emits:["close","search"],setup(p,{emit:m}){const n=p,r=m,e=g({startDate:v().format("YYYY-MM-DD"),endDate:v().format("YYYY-MM-DD"),...n.initialValue}),i={formItem:"w-full mb-2"},d=l=>{if(l&&l.length===2){const[o,c]=l;v(o).isValid()&&v(c).isValid()&&(e.value.startDate=o,e.value.endDate=c)}},a=(l,o)=>{e.value={...e.value,[l]:o}},t=()=>{r("search",e.value),r("close")};return(l,o)=>(h(),C(P,{"modal-class":"w-[45vw]","content-class":"h-full",onClose:o[0]||(o[0]=c=>r("close"))},{title:f(()=>o[1]||(o[1]=[I("상세검색")])),content:f(()=>[u("div",null,[s(_,{label:"기간"},{default:f(()=>[s(M,{"model-value":[e.value.startDate,e.value.endDate],clearable:!0,class:D(i.formItem),onChange:d},null,8,["model-value","class"])]),_:1}),(h(!0),k(L,null,B(Y(H).FIELDS,c=>(h(),C(_,{key:c.field,label:c.label},{default:f(()=>[s(F,{class:D(i.formItem),"model-value":e.value[c.field],"onUpdate:modelValue":w=>a(c.field,w)},null,8,["class","model-value","onUpdate:modelValue"])]),_:2},1032,["label"]))),128)),s(_,{label:"부서"})])]),bottom:f(()=>[u("div",R,[s(b,{"button-text":"검색",class:"w-full rounded-none",onClick:t})])]),_:1}))}}),z={class:"flex items-center gap-2"},K={class:"flex items-center gap-x-1"},le=V({__name:"PlanHeader",props:{menuItems:{},isShowSearch:{type:Boolean,default:!0},selectedId:{default:0}},emits:["click:search","update:detail-search-value","on-change-date","on-change-department","on-toggle-delete-plan-list"],setup(p,{emit:m}){const n=m,r=g(!1),e=g(!1),i=g(!1),d={search:{onSearch:()=>{n("click:search")},onDetailSearch:a=>{n("update:detail-search-value",a),i.value=!1},onDetailSearchModal:()=>{i.value=!i.value}},filter:{onChangeDate:a=>{n("on-change-date",a)},onChangeDepartment:a=>{const t=a.departmentId,l=a.teamId;(t!==void 0||l!==void 0)&&n("on-change-department",t,l)}},toggle:{onDeletePlanList:()=>{e.value=!e.value,n("on-toggle-delete-plan-list",e.value)}}};return(a,t)=>(h(),k("div",{class:D(["flex items-center m-[-0.5rem] mb-0 px-2 py-1 min-h-[50px] bg-primary-gray-900 border-y border-primary-gray-surface-500 dark:bg-dark",a.isShowSearch?"justify-between":"justify-end"])},[U(u("div",z,[s(O,{id:"date",intent:"primary",class:"w-[9rem]","onUpdate:modelValue":d.filter.onChangeDate},null,8,["onUpdate:modelValue"]),t[2]||(t[2]=u("div",{class:"w-px h-4 bg-gray-400"},null,-1)),s(q,{"hide-first-depth":"","hide-second-depth":"","is-news-room":"",onOnSelected:d.filter.onChangeDepartment},null,8,["onOnSelected"]),u("div",K,[s(b,{icon:"magnifying-glass",type:"tertiary",onClick:d.search.onSearch},null,8,["onClick"]),s(b,{"button-text":"상세검색",type:"tertiary",onClick:d.search.onDetailSearch},null,8,["onClick"]),s(N,{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=l=>r.value=l),label:"삭제자료",checked:e.value,onChange:d.toggle.onDeletePlanList},null,8,["modelValue","checked","onChange"])])],512),[[E,a.isShowSearch]]),u("div",null,[s(A,{"menu-items":a.menuItems},null,8,["menu-items"])]),i.value?(h(),C(T,{key:0,onSearch:d.search.onDetailSearch,onClose:t[1]||(t[1]=l=>i.value=!1)},null,8,["onSearch"])):j("",!0)],2))}});export{le as _,ae as u};
