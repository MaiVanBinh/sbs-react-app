import{d as $,a as M,h as p,w as B,X as b,Y as N,G as C,a2 as R,a3 as k,ae as E,ah as V,l as P,k as Y,B as ee,o as te,c as oe,j as s,as as ne,K as w,ap as re}from"./index-eLyz9_Ts.js";import{b as O,a as ie}from"./journalist-QNhBHHjf.js";import"./organization-qjYuRO6g.js";import{w as ae,b as se}from"./pagination-_g_gc7Ms.js";import{B as T}from"./buttons-3hbXC8Cn.js";import{u as ge}from"./use-pagination-JgK9yJDA.js";import{u as me}from"./use-intersection-observer-N6Mx7i0c.js";import{u as de}from"./use-button-actions-XDAYYO3a.js";import{_ as ue}from"./StrategyMeetingHeader.vue_vue_type_script_setup_true_lang-6-ome72p.js";import{c as y}from"./make-grid-column-aeLSdEws.js";import{_ as Se}from"./BaseList.vue_vue_type_script_setup_true_lang-aJzIAVm-.js";import"./vue-multiselect-Yz8FsF-E.js";import"./GSingleSelect-7u8H0FdH.js";import"./sam-tw0uWIQ_.js";import"./purify.es-OZOo_0xz.js";import"./spell-check-OnBbfX8h.js";/* empty css                                                                  */import"./GDatePicker.vue_vue_type_style_index_0_lang-aP5TJiAZ.js";import"./article-type.code-5cb8riL1.js";import"./program-omP_c4K3.js";import{_ as W}from"./ConfirmModal.vue_vue_type_script_setup_true_lang-k_ZxaDhN.js";import{_ as fe}from"./StrategyPlanningFormModal.vue_vue_type_script_setup_true_lang-ntoTljTI.js";import"./code-mapper-C6rl9hti.js";/* empty css                                                                    *//* empty css                                                                        */import"./tag-Q73uuSte.js";import"./category-zIRntbmZ.js";import"./department-wnuBQoCo.js";import{_ as ye}from"./CuesheetInfoModal.vue_vue_type_script_setup_true_lang-QKULMJcg.js";import"./GEditor.vue_vue_type_style_index_0_lang-FifEywK1.js";import"./file-Gx0JxWZZ.js";import"./GVideoPlayer-1SUF8s3O.js";import"./main-sHItgwS4.js";import"./vue-resizable.umd.min-blE9hPz6.js";import"./ContentHeaderButtons.vue_vue_type_script_setup_true_lang-Db8CUXqr.js";import"./format.util-TjqX3dGB.js";import"./use-model-wrapper-XtiLc3Xd.js";import"./use-date-GeeGTbYh.js";import"./FormItem.vue_vue_type_script_setup_true_lang-ZXQ_7x89.js";import"./ProgramSelect.vue_vue_type_script_setup_true_lang-UHoCrnxw.js";import"./UserSearchModal.vue_vue_type_script_setup_true_lang-iHw_FmsN.js";import"./OrganizationSelect.vue_vue_type_script_setup_true_lang-BNuugYEX.js";import"./vue.runtime.esm-bundler-3P3R-Xon.js";const Me={class:"flex justify-center gap-x-2 border-t-2 py-2"},pe=$({__name:"StrategyPlanningMenuModal",emits:["detail","edit","close"],setup(o,{emit:i}){const e=i;return(n,t)=>(M(),p(k,{"modal-class":"w-1/3",onClose:t[3]||(t[3]=()=>e("close"))},{title:B(()=>t[4]||(t[4]=[b("전략기획")])),content:B(()=>[t[5]||(t[5]=N("div",{class:"text-center p-4"},"편집 가능한 전략기획입니다.",-1)),N("div",Me,[C(R,{"button-text":"조회",onClick:t[0]||(t[0]=()=>e("detail"))}),C(R,{"button-text":"편집",onClick:t[1]||(t[1]=()=>e("edit"))}),C(R,{"button-text":"취소",onClick:t[2]||(t[2]=()=>e("close"))})])]),_:1}))}});function le(o){return{startDate:o.startDate,endDate:o.endDate}}function he(o,i,e){const n=O(),{fetchStrategyMeetings:t,fetchStrategyMeeting:d,createStrategyMeeting:m,updateStrategyMeeting:l,deleteStrategyMeeting:I}=n,h=async()=>{var u,g;try{const a=ae.default(le({startDate:o.value.startDate,endDate:o.value.endDate}),i),f=await t(a);f!=null&&f.success&&((u=e==null?void 0:e.onListSuccess)==null||u.call(e,f.data),(g=e==null?void 0:e.onUpdatePageInfo)==null||g.call(e,se(f.data,i)))}catch(a){console.error("useStrategyMeetingActions getStrategyMeetingList Error",a)}};return{getStrategyMeetingList:h,getStrategyMeeting:async()=>{var u;try{const g=n.selectStrategyMeetingId;if(!g)return;const a=await d(g);a!=null&&a.success&&((u=e==null?void 0:e.onDetailSuccess)==null||u.call(e,a.data))}catch(g){console.error("useStrategyMeetingActions getStrategyMeeting Error",g)}},newStrategyMeeting:async u=>{var g;try{const a={...u};a.mtDtm=E(a.mtDtm).format("YYYY-MM-DD[T]00:00:00");const f=await m(a);f.success&&(window.Notify.success({message:V.strategyMeeting.create}),await h(),(g=e==null?void 0:e.onCreateSuccess)==null||g.call(e,f.success))}catch(a){console.error("useStrategyMeetingActions createStrategyMeeting Error",a)}},editStrategyMeeting:async u=>{var g;try{const a={...u};a.mtDtm=E(a.mtDtm).format("YYYY-MM-DD[T]00:00:00");const f=await l(a);f.success&&(window.Notify.success({message:V.strategyMeeting.update}),await h(),(g=e==null?void 0:e.onUpdateSuccess)==null||g.call(e,f.success))}catch(a){console.error("useStrategyMeetingActions editStrategyMeeting Error",a)}},removeStrategyMeeting:async()=>{var u;try{const g=n.selectStrategyMeetingId;if(!g)return;const a=await I(g);a!=null&&a.success&&(window.Notify.success({message:V.strategyMeeting.delete}),await h(),(u=e==null?void 0:e.onRemoveSuccess)==null||u.call(e,a.success))}catch(g){console.error("useStrategyMeetingActions deleteStrategyMeeting Error",g)}}}}function De(o,i){return{menuItems:P(()=>[{id:1,label:"해제",action:()=>i.toggleModal("editable"),disabled:o(T.EDITABLE)},{id:2,label:"신규",action:()=>{var n;(n=i.resetModalData)==null||n.call(i),i.toggleModal("form")}},{id:3,label:"수정",action:()=>{var n;(n=i.getStrategyMeeting)==null||n.call(i),i.toggleModal("form")},disabled:o(T.EDIT)},{id:4,label:"전송",action:()=>{var n;(n=i.getStrategyMeeting)==null||n.call(i),i.toggleModal("cuesheetTransfer")},disabled:o(T.TRANSFER)},{id:5,label:"삭제",action:()=>i.toggleModal("delete"),disabled:o(T.DELETE)},{id:6,label:"닫기"}])}}function ce(){const o=Y({editable:!1,form:!1,menu:!1,delete:!1,cuesheetTransfer:!1});return{modals:o,toggleModal:e=>{o.value[e]=!o.value[e]}}}function ve(o){return{onSearch:async()=>{var n;try{await((n=o==null?void 0:o.onSearch)==null?void 0:n.call(o))}catch(t){console.error("useStrategyMeetingSearchActions onSearch Error",t)}},onChangeRange:async n=>{try{await new Promise(t=>{var l;const[d,m]=n;d&&m&&((l=o==null?void 0:o.onUpdateSearchCondition)==null||l.call(o,{startDate:d,endDate:m})),t(null)})}catch(t){console.error("useStrategyMeetingSearchActions onChangeRange Error",t)}}}}function we(){const o=O(),i=Y([]),e={mtDtm:E().format("YYYY-MM-DD"),titl:"",ord:"",rmk:""},n=Y({...e}),t=Y({startDate:E().format("YYYY-MM-DD"),endDate:E().format("YYYY-MM-DD")}),d=P(()=>Number(o.selectStrategyMeetingId)>0);return{strategyMeetingListData:i,initialModalData:e,modalData:n,strategyMeetingSearchCondition:t,hasSelectedItems:d}}const Ce=$({__name:"StrategyMeetingList",props:{rowData:{},pageInfo:{}},setup(o){const i=[y({headerName:"회의일자",field:"mtDtm",maxWidth:110,valueGetter:e=>{var n,t;return((t=(n=e.data)==null?void 0:n.mtDtm)==null?void 0:t.split("T")[0])??""}}),y({headerName:"요일",field:"week",maxWidth:80}),y({headerName:"회의시간",field:"meetingTime",maxWidth:100,valueGetter:e=>{var t,d;const n=(d=(t=e.data)==null?void 0:t.mtDtm)==null?void 0:d.split("T")[1];return n?n.split(".")[0]:""}}),y({headerName:"회의명",field:"titl",minWidth:200,flex:1}),y({headerName:"차수",field:"ord",maxWidth:60}),y({headerName:"편집자",field:"updtrNm",maxWidth:80}),y({headerName:"비고",field:"rmk",maxWidth:100}),y({headerName:"최종편집자",field:"updtrNm",maxWidth:100})];return(e,n)=>(M(),p(Se,ee({"column-defs":i,"row-data":e.rowData,"page-info":e.pageInfo},e.$attrs),null,16,["row-data","page-info"]))}}),Ee={class:"h-full w-full mt-2"},yt=$({__name:"StrategyMeetingView",setup(o){const{moveDetailStrategyMeeting:i,moveEditStrategyMeeting:e}=re(),n=ie(),t=O(),{modals:d,toggleModal:m}=ce(),l=we(),{strategyMeetingListData:I,initialModalData:h,modalData:D,strategyMeetingSearchCondition:_,hasSelectedItems:U}=l,{isActionDisabled:A}=de(U),u=ge(),{pageInfo:g,onChangePage:a,setPageChangeCallback:f}=u,{getStrategyMeetingList:x,getStrategyMeeting:j,newStrategyMeeting:G,editStrategyMeeting:F,removeStrategyMeeting:K}=he(_,u,{onListSuccess:r=>{I.value=r.content},onDetailSuccess:r=>{D.value=r},onCreateSuccess:r=>{r&&m("form")},onUpdateSuccess:r=>{r&&m("form")},onRemoveSuccess:r=>{r&&m("delete")},onUpdatePageInfo:r=>{g.value=r}});f(async()=>{await x()});const{observerTarget:X,setupObserver:q}=me({onIntersect:async()=>{await x()}}),{onSearch:L,onChangeRange:z}=ve({onSearch:async()=>{try{await x()}catch(r){console.error("StrategyMeetingView onSearch Error",r)}},onUpdateSearchCondition:r=>{try{_.value={..._.value,...r},L()}catch(S){console.error("StrategyMeetingView onUpdateSearchCondition Error",S)}}}),c={navigation:{onMoveDetail:()=>{const r=t.selectStrategyMeetingId;r&&(i({strategyMeetingId:r}),m("menu"))},onMoveEdit:()=>{const r=t.selectStrategyMeetingId;r&&(e({strategyMeetingId:r}),m("menu"))}},data:{onEditable:async()=>{try{console.log("해제 해제 해제")}catch(r){console.log("Failed StrategyMeeting Editable",r)}},onUpdateSearch:async r=>{console.log("searchValue::::",r),await x()}},row:{onSelect:r=>{r[0]&&t.setStrategyMeetingId(r[0].data.id)},onDobleClick:()=>{m("menu")}}},H=()=>{D.value={...h}},{menuItems:J}=De(A,{toggleModal:m,resetModalData:H,getStrategyMeeting:j});te(()=>{q(),n.setShortKey()});const Q=P(()=>`전략회의 내용이 편집상태입니다.
해제처리 하시겠습니까?`),Z=P(()=>`작성중인 전략회의가 존재합니다. 
 전략회의 삭제 시 모든 아이템이 삭제됩니다. 
 그래도 삭제 하시겠습니까?`);return(r,S)=>(M(),oe("div",{ref_key:"observerTarget",ref:X},[C(ue,{"menu-items":s(J),"onClick:search":s(L),"onUpdate:searchValue":c.data.onUpdateSearch,onOnChangeRange:s(z)},null,8,["menu-items","onClick:search","onUpdate:searchValue","onOnChangeRange"]),N("div",Ee,[C(Ce,{"row-data":s(I),"page-info":s(g),onOnRowSelect:c.row.onSelect,onDoubleClickedRow:c.row.onDobleClick,onOnChangePage:s(a)},null,8,["row-data","page-info","onOnRowSelect","onDoubleClickedRow","onOnChangePage"])]),N("div",null,[s(d).form?(M(),p(s(fe),{key:0,modelValue:s(D),"onUpdate:modelValue":[S[0]||(S[0]=v=>ne(D)?D.value=v:null),s(F)],"onSave:modelValue":s(G),onClose:S[1]||(S[1]=v=>s(m)("form"))},null,8,["modelValue","onSave:modelValue","onUpdate:modelValue"])):w("",!0),s(d).menu?(M(),p(s(pe),{key:1,onDetail:c.navigation.onMoveDetail,onEdit:c.navigation.onMoveEdit,onClose:S[2]||(S[2]=v=>s(m)("menu"))},null,8,["onDetail","onEdit"])):w("",!0),s(d).editable?(M(),p(s(W),{key:2,text:Q.value,onOnSubmit:c.data.onEditable,onClose:S[3]||(S[3]=v=>s(m)("editable"))},null,8,["text","onOnSubmit"])):w("",!0),s(d).delete?(M(),p(s(W),{key:3,text:Z.value,onOnSubmit:s(K),onClose:S[4]||(S[4]=v=>s(m)("delete"))},null,8,["text","onOnSubmit"])):w("",!0),s(d).cuesheetTransfer?(M(),p(s(ye),{key:4,onClose:S[5]||(S[5]=v=>s(m)("cuesheetTransfer"))})):w("",!0)])],512))}});export{yt as default};
