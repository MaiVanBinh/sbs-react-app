import{l as x,d as C,k as D,a as p,c as y,Y as r,K as f,aj as v,at as w,L as $,G as g,w as B,X as N,a2 as b,Q as h,a7 as S,ai as L,a0 as c,h as k,F as T,C as R}from"./index-eLyz9_Ts.js";function Z(t){const{commentData:a,transformer:n,actions:d}=t,e=x(()=>{var s;return`코멘트 (${((s=a.value)==null?void 0:s.length)??0})개`}),o=x(()=>{const s=a.value;return s?s.map(m=>n.toBaseComment(m)):[]});return{commentCount:e,transformedComments:o,handleSubmit:(s,m)=>{d.onSubmitComment(s,m)},handleRemove:s=>{d.onRemoveComment(s)},handleComment:(s,m)=>{d.onToggleReaction(s,m)}}}const ee={toBaseComment(t){var a;return{id:t.cmntId,content:t.cmntCtt,parentId:t.hrnkCmntId,depth:t.cmntDepth,author:{name:t.inputrNm,department:t.inputrDeptNm},createdAt:t.inputDtm,updatedAt:t.updtDtm,children:((a=t.children)==null?void 0:a.map(n=>this.toBaseComment(n)))||[],likes:t.countLikes,dislikes:t.countDislikes,isLiked:t.likeToggle,isDisliked:t.dislikeToggle}}},te={toBaseComment(t){var a;return{id:t.reqGrphId,content:t.cmntCtt,parentId:t.hrnkCmntId,depth:t.cmntDepth,author:{name:t.inputrNm,department:t.inputrDeptNm},createdAt:t.inputDtm,updatedAt:t.updtDtm,children:((a=t.children)==null?void 0:a.map(n=>this.toBaseComment(n)))||[],likes:t.countLikes,dislikes:t.countDislikes,isLiked:t.likeToggle,isDisliked:t.dislikeToggle}}},V={key:0,class:"flex items-center gap-2 text-sm mb-2"},A={class:"flex gap-2"},_=C({__name:"CommentRegist",props:{isReply:{type:Boolean,default:!1},parentId:{default:void 0}},emits:["submit"],setup(t,{emit:a}){const n=t,d=a,e=D(""),o=()=>{e.value.trim()&&(d("submit",e.value,n.parentId),e.value="")};return(u,i)=>(p(),y("div",{class:h(["p-3",{"border-b":!u.isReply},{"mt-3 pl-4 border-l-2 border-primary":u.isReply}])},[u.isReply?f("",!0):(p(),y("div",V,i[1]||(i[1]=[r("span",{class:"font-medium"},"홍길동",-1),r("span",{class:"text-gray-500"},"(보도기술팀)",-1)]))),i[3]||(i[3]=r("label",{for:"comment"},null,-1)),r("div",A,[v(r("input",{"onUpdate:modelValue":i[0]||(i[0]=l=>e.value=l),type:"text",placeholder:"댓글을 입력하세요",class:"flex-1 px-3 py-1.5 text-sm border rounded bg-gray-50 focus:outline-none focus:border-primary transition-colors",onKeyup:$(o,["enter"])},null,544),[[w,e.value]]),g(b,{type:"button",class:"px-3 py-1.5 text-sm bg-primary text-white rounded hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!e.value.trim(),onClick:o},{default:B(()=>i[2]||(i[2]=[N(" 등록 ")])),_:1},8,["disabled"])])],2))}}),F={class:"p-3 border-b last:border-b-0 hover:bg-gray-50/50"},K={class:"flex items-center gap-2 text-sm mb-1"},U={class:"font-medium"},j={class:"text-gray-500"},q={class:"text-gray-400"},G={class:"text-sm text-gray-700 mb-2"},M={class:"flex items-center justify-between text-sm"},z={class:"flex items-center gap-2"},E={class:"flex items-center"},P={class:"text-sm text-gray-500 ml-1"},Q={class:"flex items-center"},X={class:"text-sm text-gray-500 ml-1"},Y={class:"flex items-center gap-2"},H=C({name:"CommentItem",__name:"CommentItem",props:{comment:{},replyToId:{}},emits:["toggle-reply","submit","remove","toggle-reaction"],setup(t,{emit:a}){const n=a,d=e=>e.depth===2?Number(e.parentId):e.id;return(e,o)=>{var l;const u=S("comment-item",!0),i=L("tooltip");return p(),y("div",{class:h(["pl-4 border-l-2",e.comment.depth===0?"border-primary":"border-gray-300"])},[r("div",F,[r("div",K,[r("span",U,c(e.comment.author.name),1),r("span",j,"("+c(e.comment.author.department)+")",1),r("span",q,c(e.comment.createdAt),1)]),r("p",G,c(e.comment.content),1),r("div",M,[r("div",z,[r("div",E,[v(g(b,{icon:"handThumbUpFill",class:h(["transition-colors",e.comment.isLiked?"text-primary-400 hover:text-primary-600":"text-gray-500 hover:text-primary-500"]),type:"text",onClick:o[0]||(o[0]=s=>n("toggle-reaction",e.comment.id,!0))},null,8,["class"]),[[i,"좋아요"]]),r("span",P,c(e.comment.likes),1)]),r("div",Q,[v(g(b,{icon:"handThumbDownFill",class:h(["transition-colors",e.comment.isDisliked?"text-red-500 hover:text-red-600":"text-gray-500 hover:text-red-500"]),type:"text",onClick:o[1]||(o[1]=s=>n("toggle-reaction",e.comment.id,!1))},null,8,["class"]),[[i,"싫어요"]]),r("span",X,c(e.comment.dislikes),1)])]),r("div",Y,[v(g(b,{icon:"arrowUturnLeft",class:"text-gray-500 hover:text-primary transition-colors",type:"text",onClick:o[2]||(o[2]=s=>n("toggle-reply",d(e.comment)))},null,512),[[i,"답글"]]),v(g(b,{icon:"xMark",class:"text-gray-500 hover:text-red-500 transition-colors",type:"text",onClick:o[3]||(o[3]=s=>n("remove",e.comment.id))},null,512),[[i,"삭제"]])])])]),e.replyToId===e.comment.id?(p(),k(_,{key:0,"is-reply":"","parent-id":e.comment.id,onSubmit:o[4]||(o[4]=s=>n("submit",s,d(e.comment)))},null,8,["parent-id"])):f("",!0),(l=e.comment.children)!=null&&l.length?(p(!0),y(T,{key:1},R(e.comment.children,s=>(p(),k(u,{key:s.id,comment:s,"reply-to-id":e.replyToId,onToggleReply:o[5]||(o[5]=m=>n("toggle-reply",m)),onSubmit:o[6]||(o[6]=(m,I)=>n("submit",m,I)),onRemove:o[7]||(o[7]=m=>n("remove",m))},null,8,["comment","reply-to-id"]))),128)):f("",!0)],2)}}}),J={class:"border rounded-lg bg-white"},O={class:"max-h-[calc(100vh-360px)] overflow-y-auto"},se=C({__name:"CommentV2",props:{commentData:{default:()=>[]},transformer:{}},emits:["submit","remove","toggle-reaction"],setup(t,{emit:a}){const n=a,d=D(null),e=l=>{d.value=d.value===l?null:l},o=(l,s)=>{n("submit",l,s),s&&(d.value=null)},u=l=>{n("remove",l)},i=(l,s)=>{n("toggle-reaction",l,s)};return(l,s)=>(p(),y("div",J,[g(_,{onSubmit:o}),r("div",O,[(p(!0),y(T,null,R(l.commentData,m=>(p(),k(H,{key:m.id,comment:m,"reply-to-id":d.value,onToggleReply:e,onSubmit:o,onRemove:u,onToggleReaction:i},null,8,["comment","reply-to-id"]))),128))])]))}});export{se as _,ee as a,te as r,Z as u};
