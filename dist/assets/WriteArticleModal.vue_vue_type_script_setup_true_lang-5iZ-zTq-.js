import{d as F,l as g,a5 as j,t as N,o as H,a as C,c as w,Y as l,G as n,a6 as O,a0 as p,j as t,a1 as x,ac as q,aa as J,aD as X,k as tt,V as et,w as I,a3 as at,h as st,K as L,F as lt,a_ as it,a$ as rt,aZ as ot}from"./index-eLyz9_Ts.js";import{_ as nt}from"./ContentHeaderButtons.vue_vue_type_script_setup_true_lang-Db8CUXqr.js";import{_ as E}from"./GDatePicker.vue_vue_type_style_index_0_lang-aP5TJiAZ.js";import{u as ct}from"./use-model-wrapper-XtiLc3Xd.js";import{_ as mt}from"./ProgramSelect.vue_vue_type_script_setup_true_lang-UHoCrnxw.js";import{u as dt}from"./program-omP_c4K3.js";import{G as pt}from"./GSingleSelect-7u8H0FdH.js";import{a as G,A as P}from"./article-enum-fGfmFGng.js";import{b as T}from"./time-formatter-ySAnBDjB.js";import{_ as ut}from"./ArticleFormatSelect.vue_vue_type_script_setup_true_lang-0vSziBpo.js";import{_ as vt}from"./ArticleTypeSelect.vue_vue_type_script_setup_true_lang-Kp5wzGNr.js";import{_ as ft}from"./VDCEditor.vue_vue_type_script_setup_true_lang-IhnNo6sk.js";import{_ as xt}from"./ConfirmModal.vue_vue_type_script_setup_true_lang-k_ZxaDhN.js";import{_ as U}from"./ModalButton.vue_vue_type_script_setup_true_lang-WIw8hxFk.js";import{A as R}from"./article-type.code-5cb8riL1.js";import"./journalist-QNhBHHjf.js";import"./organization-qjYuRO6g.js";import{g as yt}from"./edtior.helper-P5juSeN5.js";const _t={class:"text-primary-gray-40 dark:text-white mt-2 space-y-3"},gt={class:"flex items-center justify-start mb-4 gap-2"},Dt={class:"font-bold"},Ct={class:"flex items-center gap-2"},ht={class:"w-[84px] text-right shrink-0"},bt={class:"flex items-center gap-2"},wt={class:"w-[84px] text-right shrink-0"},Tt={class:"flex items-center gap-2"},Vt={class:"w-[84px] text-right shrink-0"},kt={class:"flex items-center gap-2"},St={class:"w-[84px] text-right shrink-0"},At={class:"flex items-center gap-2"},Mt={class:"w-[84px] text-right shrink-0"},$t={class:"flex items-center gap-2"},It={class:"flex items-center gap-2"},Lt={class:"w-[84px] text-right shrink-0"},Pt={class:"flex items-center gap-2"},Ut={class:"w-[54px] text-right shrink-0"},Nt={class:"flex items-center gap-2"},Bt={class:"w-[84px] text-right shrink-0"},Ot={class:"flex items-center gap-2"},Et={class:"w-[84px] text-right shrink-0"},Rt={class:"flex items-center gap-2"},Ft={class:"w-[84px] text-right shrink-0"},jt={class:"flex items-center gap-2"},Ht={class:"w-[84px] text-right shrink-0"},Gt=F({__name:"ModalArticleInfo",props:{dataDetail:{}},emits:["update:dataDetail"],setup(V,{emit:k}){const u=V,y=k,S=dt(),h=g(()=>S.programs),e=ct(u,y,"dataDetail"),b=G.divisionCode,A=g(()=>e.value.artclDivCd==="div_001"),o=new Date().toISOString(),m=g(()=>e.value.artclDivDtm?T(e.value.artclDivDtm):""),M=g(()=>e.value.artclDivDtm?T(e.value.artclDivDtm):""),{t:d}=j();N(()=>{var v;return(v=e.value.program)==null?void 0:v.id},()=>{const v=h.value.find(i=>{var r;return i.id===((r=e.value.program)==null?void 0:r.id)});e.value.program=v},{immediate:!0,deep:!0});const $=v=>{e.value.artclDivDtm=v};return H(()=>{e.value.artclDivDtm=m.value,e.value.artclDivDtm=M.value}),(v,i)=>(C(),w("div",_t,[l("div",gt,[n(O,{icon:"custom-chevron",size:"w-[17px] h-[17px]"}),l("p",Dt,p(t(d)("PersonalArticle.상세정보")),1)]),l("div",Ct,[l("p",ht,p(t(d)("PersonalArticle.작성자")),1),n(x,{modelValue:t(e).inputrNm,"onUpdate:modelValue":i[0]||(i[0]=r=>t(e).inputrNm=r),readonly:"",intent:"primary"},null,8,["modelValue"]),n(x,{modelValue:t(e).deptNm,"onUpdate:modelValue":i[1]||(i[1]=r=>t(e).deptNm=r),readonly:"",intent:"primary"},null,8,["modelValue"]),n(O,{icon:"two-person",size:"w-10 h-6 bg-primary px-2 rounded-sm"})]),l("div",bt,[l("p",wt,p(t(d)("PrivateBroadcasting.참고사항")),1),n(x,{modelValue:t(e).remark,"onUpdate:modelValue":i[2]||(i[2]=r=>t(e).remark=r),intent:"primary",class:"w-full"},null,8,["modelValue"])]),l("div",Tt,[l("p",Vt,p(t(d)("PersonalArticle.형식")),1),n(vt,{modelValue:t(e).type,"onUpdate:modelValue":i[3]||(i[3]=r=>t(e).type=r),"preselect-first":!0,class:"w-[149px] short-multiselect"},null,8,["modelValue"]),n(ut,{modelValue:t(e).format,"onUpdate:modelValue":i[4]||(i[4]=r=>t(e).format=r),"preselect-first":!0,class:"w-[139px]","custom-class":"short-multiselect"},null,8,["modelValue"])]),l("div",kt,[l("p",St,p(t(d)("PersonalArticle.프로그램")),1),n(mt,{modelValue:t(e).program,"onUpdate:modelValue":i[5]||(i[5]=r=>t(e).program=r),label:"",class:"short-multiselect w-full",options:h.value},null,8,["modelValue","options"])]),l("div",At,[l("p",Mt,p(t(d)("PersonalArticle.방송예정일")),1),n(E,{modelValue:t(e).brdcSchdDtm,"onUpdate:modelValue":i[6]||(i[6]=r=>t(e).brdcSchdDtm=r),class:"w-full",intent:"primary"},null,8,["modelValue"])]),l("div",$t,[l("div",It,[l("p",Lt,p(t(d)("PersonalArticle.앵커맨트")),1),n(x,{modelValue:t(e).artclCttTimeLabel,"onUpdate:modelValue":i[7]||(i[7]=r=>t(e).artclCttTimeLabel=r),readonly:"",intent:"primary",class:"w-20"},null,8,["modelValue"])]),l("div",Pt,[l("p",Ut,p(t(d)("PersonalArticle.기사맨트")),1),n(x,{modelValue:t(e).ancMentCttTimeLabel,"onUpdate:modelValue":i[8]||(i[8]=r=>t(e).ancMentCttTimeLabel=r),readonly:"",intent:"primary",class:"w-20"},null,8,["modelValue"])])]),l("div",Nt,[l("p",Bt,p(t(d)("PersonalArticle.전체맨트")),1),n(x,{modelValue:t(e).ancMentCttTimeLabel,"onUpdate:modelValue":i[9]||(i[9]=r=>t(e).ancMentCttTimeLabel=r),readonly:"",intent:"primary",class:"w-20"},null,8,["modelValue"])]),l("div",Ot,[l("p",Et,p(t(d)("PersonalArticle.설정")),1),n(pt,{modelValue:t(e).artclDiv,"onUpdate:modelValue":i[10]||(i[10]=r=>t(e).artclDiv=r),"track-by":"id","item-label":"label",options:t(b),intent:"primary",class:"w-full"},null,8,["modelValue","options"])]),l("div",Rt,[l("p",Ft,p(t(d)("PrivateBroadcasting.엠바고  일시")),1),n(E,{modelValue:t(e).artclDivDtm,"onUpdate:modelValue":[i[11]||(i[11]=r=>t(e).artclDivDtm=r),$],class:"w-full",intent:"primary",format:"yyyy-MM-dd HH:mm:ss","enable-time-picker":"","enable-seconds":"","min-date":A.value?null:t(o),"model-type":"yyyy-MM-dd HH:mm:ss"},null,8,["modelValue","min-date"])]),l("div",jt,[l("p",Ht,p(t(d)("PrivateBroadcasting.엠바고 사유")),1),n(x,{modelValue:t(e).artclDivReas,"onUpdate:modelValue":i[12]||(i[12]=r=>t(e).artclDivReas=r),intent:"primary",class:"w-full"},null,8,["modelValue"])])]))}}),zt={class:"flex gap-1.5 items-center font-inter"},Kt={class:"flex items-center justify-between px-2.5 py-3"},Wt={class:"ml-auto"},Yt={class:"flex justify-between flex-grow overflow-y-hidden flex-wrap border-t border-primary-gray-20"},Qt={class:"flex flex-col w-[70%] p-2.5 border-r-2 border-primary-gray-20"},Zt={class:"flex items-center gap-2"},qt={class:"mt-4 flex-grow overflow-y-auto"},Jt={class:"flex flex-col w-[29.5%] p-2.5"},Xt={class:"px-11 h-[50px] border-t border-primary-gray-surface flex items-center justify-center"},te={key:0,class:"flex items-center justify-center gap-x-2 p-2 w-full"},ee={key:1,class:"flex items-center justify-center gap-x-2 w-full"},he=F({__name:"WriteArticleModal",props:{targetType:{},dataDetail:{},reportId:{}},emits:["on-close","on-refresh"],setup(V,{emit:k}){const u=V,y=k,{speed:S}=q(),{getUserInfo:h}=J(),e=g(()=>h),b=X(),A=G.divisionCode,{t:_}=j(),o=tt({artclTitl:u.dataDetail.titl??"",artclCtt:u.dataDetail.ctt??"",artclTypCd:R.STRAIGHT.id,artclDivCd:"",ancMentCtt:"",artclCttTime:0,ancMentCttTime:0,articleAttachmentFileCreateDtoList:[],inputrNm:"",program:void 0,format:void 0,type:R.STRAIGHT,artclDiv:A[0],artclCttTimeLabel:"00:00",ancMentCttTimeLabel:"00:00",brdcSchdDtm:"",remark:"",artclDivReas:"",reportId:u.reportId??0}),m=et({isOpen:!1,title:"확인",content:"삭제 하시겠습니까?",type:"confirm",case:"confirm",icon:"customQuestionMark"}),M=g(()=>{var a,s;return yt((a=o.value.format)==null?void 0:a.id,(s=o.value.type)==null?void 0:s.id)}),d=()=>{m.isOpen=!0},$=()=>{},v=[{id:7,label:_("PrivateBroadcasting.저장"),action:d},{id:8,label:_("PrivateBroadcasting.닫기"),action:$}],i=g(()=>{const a=o.value.artclCtt||"",s=it(S,rt([a])),c=Math.floor(s/60),f=s%60;return{label:`${c}:${f}`,value:s}}),r=a=>{o.value.artclCtt=a},z=async a=>{const s=await b.article.basic.create(a);s!=null&&s.success?(window.Notify.success({message:"Success"}),y("on-close"),y("on-refresh")):window.Notify.error({message:s.msg})},K=async a=>{const s=await b.cuesheet.personalArticle.create(a);s!=null&&s.success?(window.Notify.success({message:"Success"}),y("on-close"),y("on-refresh")):window.Notify.error({message:s.msg})},B=()=>{var a;return((a=o.value.format)==null?void 0:a.id)==="format_001"?ot(o.value.artclCtt||""):[]},W=a=>{const{program:s,type:c,format:f,artclDiv:D,artclCttTimeLabel:ae,ancMentCttTimeLabel:se,...Z}=a;return{...Z,articleCaps:B(),brdcPgmId:Number(s==null?void 0:s.id),artclTypCd:c==null?void 0:c.id,artclFormatCd:f==null?void 0:f.id,artclDivCd:D==null?void 0:D.id,rptrId:e.value.id,brdcSchdDtm:a.brdcSchdDtm?T(a.brdcSchdDtm):void 0,appDivCd:"w",artclClass:"class_001",reportId:u.reportId??0}},Y=a=>{var s,c,f,D;return{title:a.artclTitl,reporterMentContent:a.artclCtt,reporterMentContentTime:a.ancMentCttTime,anchorMentContent:"",anchorMentContentTime:a.artclCttTime,articleTypeCode:(s=a.type)==null?void 0:s.id,articleDivisionCode:(c=a.artclDiv)==null?void 0:c.id,articleDivisionDateTime:a.artclDivDtm?T(a.artclDivDtm):void 0,reason:a.remark,artclDivReas:a.artclDivReas,isCapFinish:!1,programId:Number((f=a.program)==null?void 0:f.id),reporterId:e.value.id,applicationDivisionCode:"web",articleExtraTime:0,priority:0,reportId:u.reportId??0,capList:B(),attachmentFileIdList:[],brdcSchdDtm:a.brdcSchdDtm?`${a.brdcSchdDtm} 00:00:00`:void 0,artclFormatCd:(D=a.format)==null?void 0:D.id}},Q=async()=>{m.isOpen=!1,u.targetType===P.PUBLIC_ARTICLE&&await z(W(o.value)),u.targetType===P.PERSONAL_ARTICLE&&await K(Y(o.value))};return N(()=>u.dataDetail,a=>{o.value.artclTitl=a.titl??"",o.value.artclCtt=a.ctt??""}),N(()=>i.value,a=>{o.value.artclCttTime=a.value,o.value.artclCttTimeLabel=a.label,o.value.ancMentCttTime=a.value,o.value.ancMentCttTimeLabel=a.label}),H(()=>{o.value.inputrNm=e.value.userNm,o.value.deptNm=e.value.deptNm}),(a,s)=>(C(),w(lt,null,[n(at,{"modal-class":"w-[1394px] h-[904px] !rounded-t-sm !rounded-b-none text-xs",intent:"primary","content-class":"!p-0 absolute inset-x-0 top-[41px] bottom-0 !mb-0",onClose:s[2]||(s[2]=c=>y("on-close"))},{title:I(()=>[l("div",zt,p(a.targetType===t(P).PUBLIC_ARTICLE?t(_)("PrivateBroadcasting.공용 기사작성"):t(_)("PrivateBroadcasting.개인 기사작성")),1)]),content:I(()=>[l("div",Kt,[l("div",Wt,[n(nt,{"menu-items":v,"custom-class-text":"md:!text-xs","custom-arrow-class":"w-4 h-4 ml-[-14px] mr-[6px]"})])]),l("div",Yt,[l("div",Qt,[l("div",Zt,[s[6]||(s[6]=l("p",{class:"text-primary-gray-40 font-inter text-sm font-normal"},"제목",-1)),n(x,{id:"article_title_input",modelValue:o.value.artclTitl,"onUpdate:modelValue":s[0]||(s[0]=c=>o.value.artclTitl=c),name:"title",placeholder:"제목을 입력하세요.","error-placeholder":"",class:"w-full",intent:"primary"},null,8,["modelValue"])]),l("div",qt,[n(ft,{content:o.value.artclCtt,"editor-class":"h-full",output:"html",mode:M.value,"onUpdate:content":r},null,8,["content","mode"])])]),l("div",Jt,[l("div",null,[n(Gt,{"data-detail":o.value,"onUpdate:dataDetail":s[1]||(s[1]=c=>o.value=c),mode:"create"},null,8,["data-detail"])])])])]),_:1}),m.isOpen?(C(),st(xt,{key:0,"use-slot":"",intent:"secondary",text:m.content,type:m.type,title:m.title,icon:m.icon,onClose:s[5]||(s[5]=c=>m.isOpen=!1)},{bottom:I(()=>[l("div",Xt,[m.type==="basic"?(C(),w("div",te,[n(U,{text:"OK",icon:"check",onClick:s[3]||(s[3]=c=>m.isOpen=!1)})])):L("",!0),m.type==="confirm"?(C(),w("div",ee,[n(U,{text:t(_)("Community.예"),icon:"check",onClick:Q},null,8,["text"]),n(U,{type:"warning",text:t(_)("Community.아니요"),icon:"xMark",onClick:s[4]||(s[4]=c=>m.isOpen=!1)},null,8,["text"])])):L("",!0)])]),_:1},8,["text","type","title","icon"])):L("",!0)],64))}});export{he as _};
