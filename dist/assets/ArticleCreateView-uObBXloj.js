import"./journalist-QNhBHHjf.js";import{d as x,a as p,h as u,w as d,X as R,Y as a,G as s,a2 as N,a3 as w,k as T,l as B,a7 as z,K as y,ao as Q,aZ as W,a_ as h,a$ as tt,ae as et,ac as ot,aq as rt,c as at,j as e,as as g,ah as it,ap as lt}from"./index-eLyz9_Ts.js";import"./organization-qjYuRO6g.js";import{u as nt}from"./use-article-create-state-g4FA6KyB.js";import{F as st}from"./file-division-code-x51qUgaH.js";import{u as mt}from"./use-article-modals-Q7kcwEpc.js";import{_ as dt}from"./ArticleHeader.vue_vue_type_script_setup_true_lang-yXyrXb9T.js";import{_ as pt,a as ut}from"./ArticleTabPanel.vue_vue_type_script_setup_true_lang-AIjmoLGW.js";import"./vue-multiselect-Yz8FsF-E.js";import"./GSingleSelect-7u8H0FdH.js";import"./sam-tw0uWIQ_.js";import"./purify.es-OZOo_0xz.js";import"./spell-check-OnBbfX8h.js";/* empty css                                                                  */import{G as ct}from"./GTextarea-5GIFD2Mo.js";import{_ as vt}from"./FormItem.vue_vue_type_script_setup_true_lang-ZXQ_7x89.js";import"./GDatePicker.vue_vue_type_style_index_0_lang-aP5TJiAZ.js";import"./article-type.code-5cb8riL1.js";import"./program-omP_c4K3.js";import"./code-mapper-C6rl9hti.js";/* empty css                                                                    *//* empty css                                                                        */import"./tag-Q73uuSte.js";import"./category-zIRntbmZ.js";import"./department-wnuBQoCo.js";import{_ as ft}from"./ArticleFileTabPanel.vue_vue_type_script_setup_true_lang-Yk1q8ET1.js";import{_ as j}from"./GEditor.vue_vue_type_script_setup_true_lang-a2qGOvtc.js";import"./GEditor.vue_vue_type_style_index_0_lang-FifEywK1.js";import{_ as Ct}from"./FormLabel.vue_vue_type_script_setup_true_lang-SB4ukE1P.js";import{_ as gt}from"./FileDropzone.vue_vue_type_script_setup_true_lang-SVeHifZw.js";import{u as yt}from"./file-Gx0JxWZZ.js";import"./GVideoPlayer-1SUF8s3O.js";import"./main-sHItgwS4.js";import{_ as bt}from"./VideoCoverageCreateModal.vue_vue_type_script_setup_true_lang-tGy_Chpl.js";import{_ as _t}from"./PostModal.vue_vue_type_script_setup_true_lang-ywCBp_X3.js";import"./use-pagination-JgK9yJDA.js";import"./ContentHeaderButtons.vue_vue_type_script_setup_true_lang-Db8CUXqr.js";import"./use-model-wrapper-XtiLc3Xd.js";import"./OrganizationSelect.vue_vue_type_script_setup_true_lang-BNuugYEX.js";import"./ArticleTypeSelect.vue_vue_type_script_setup_true_lang-Kp5wzGNr.js";import"./ProgramSelect.vue_vue_type_script_setup_true_lang-UHoCrnxw.js";import"./CuesheetPrompter-o2cqkH-a.js";import"./cuesheet-item-code-_LsFMWbX.js";import"./ArticleFormatSelect.vue_vue_type_script_setup_true_lang-0vSziBpo.js";import"./VDCEditor.vue_vue_type_script_setup_true_lang-IhnNo6sk.js";import"./edtior.helper-P5juSeN5.js";import"./SpellCheckerModal.vue_vue_type_script_setup_true_lang-Vt6XDlm8.js";import"./GMovableModal.vue_vue_type_script_setup_true_lang-elQvXjL0.js";import"./PageLoader.vue_vue_type_script_setup_true_lang-ZvbvX14z.js";import"./GNoData.vue_vue_type_script_setup_true_lang-rWUb5JCO.js";import"./GDateTimePicker-bSYwb_xW.js";import"./use-date-GeeGTbYh.js";import"./ArticleDivisionSelect.vue_vue_type_script_setup_true_lang-Ln9_DwnO.js";import"./UserSearchModal.vue_vue_type_script_setup_true_lang-iHw_FmsN.js";import"./make-grid-column-aeLSdEws.js";import"./PermissionSettingModal.vue_vue_type_script_setup_true_lang-Cz5aOmSI.js";import"./FileListView.vue_vue_type_script_setup_true_lang-A40KFqZZ.js";import"./vue.runtime.esm-bundler-3P3R-Xon.js";import"./vue-resizable.umd.min-blE9hPz6.js";const $t={class:"w-full"},It={class:"flex items-center justify-center gap-2 mb-2"},Nt=x({__name:"ConfigInputModal",setup(r){return(n,m)=>(p(),u(w,{"modal-class":"w-1/3"},{title:d(()=>m[0]||(m[0]=[R(" 구성안 입력 ")])),content:d(()=>[a("div",null,[s(vt,{label:"구성안"},{default:d(()=>[a("div",$t,[s(ct,{rows:15})])]),_:1})])]),bottom:d(()=>[a("div",It,[s(N,{"button-text":"확인"}),s(N,{"button-text":"취소",type:"warning"})])]),_:1}))}}),Dt={class:"border border-gray-200 rounded-sm p-2 mt-2"},xt={class:"border border-gray-200 rounded-sm p-2 mt-2"},Mt={class:"flex justify-center gap-x-2 my-4"},Tt=x({__name:"CgRequestCreateModal",setup(r){const n=T([]),m=T(!0),C=T(!1),b=async c=>{if(!c)return[];console.log("debug logic...",c)},i=B(()=>[{id:1,name:"요청내용",isShow:m},{id:2,name:"기사내용",isShow:C}].filter(c=>c.isShow));return(c,l)=>{const v=z("tab-panel");return p(),u(w,{"modal-class":"w-1/2","content-class":"h-full"},{title:d(()=>l[3]||(l[3]=[R("CG의뢰")])),content:d(()=>[a("div",null,[a("div",Dt,[s(Ct,{icon:"chevronRight",label:"첨부파일"}),s(gt,{"file-data":n.value,"onUpdate:fileData":l[0]||(l[0]=_=>n.value=_),mode:"create",onOnUploadFile:b},null,8,["file-data"])]),a("div",xt,[s(Q,{tabs:i.value,class:"mt-2"},{default:d(()=>[m.value?(p(),u(v,{key:0,unmount:!0},{default:d(()=>[s(j)]),_:1})):y("",!0),C.value?(p(),u(v,{key:1,unmount:!0},{default:d(()=>l[4]||(l[4]=[a("div",null,"기사내용 공간",-1)])),_:1})):y("",!0)]),_:1},8,["tabs"])])])]),bottom:d(()=>[a("div",Mt,[s(N,{"button-text":"확인",onClick:l[1]||(l[1]=_=>console.log("confirm"))}),s(N,{"button-text":"취소",type:"secondary",onClick:l[2]||(l[2]=_=>console.log("cancel"))})])]),_:1})}}}),wt={class:"flex justify-center gap-x-2 my-4"},Ft=x({__name:"EditingRequestCreateModal",emits:["close"],setup(r,{emit:n}){const m=n,C=()=>{m("close")};return(b,i)=>(p(),u(w,{"modal-class":"","content-class":"xl:px-0",onClose:C},{title:d(()=>i[2]||(i[2]=[a("span",null,"영상편집의뢰",-1)])),content:d(()=>i[3]||(i[3]=[a("div",null,null,-1)])),bottom:d(()=>[a("div",wt,[s(N,{"button-text":"확인",onClick:i[0]||(i[0]=c=>console.log("confirm"))}),s(N,{"button-text":"취소",type:"secondary",onClick:i[1]||(i[1]=c=>console.log("cancel"))})])]),_:1}))}}),At=x({__name:"AudioModal",emits:["close"],setup(r,{emit:n}){const m=n,C=()=>{m("close")};return(b,i)=>(p(),u(w,{"content-class":"w-1/2","modal-class":"h-full",onClose:C},{title:d(()=>i[0]||(i[0]=[a("span",null,"오디오",-1)])),content:d(()=>[a("div",null,[a("div",null,[i[1]||(i[1]=a("div",null,"제목",-1)),a("div",null,[s(j)])]),i[2]||(i[2]=a("div",null,[a("div",null,"graph"),a("div",null,"select1"),a("div",null,"select2"),a("div",null,"controller"),a("div",null,"text?")],-1))])]),_:1}))}});function St(r){const n={cgCreate:()=>r.toggleModal("cgCreate"),videoCoverageCreate:()=>r.toggleModal("videoCoverageCreate"),editingCreate:()=>r.toggleModal("editingCreate"),audioCreate:()=>r.toggleModal("audioCreate"),superInput:()=>r.toggleModal("superInput"),post:()=>r.toggleModal("post"),permission:()=>r.toggleModal("permission"),config:()=>r.toggleModal("config")};return{createMenuItems:B(()=>[{id:1,label:"CG의뢰",action:n.cgCreate},{id:2,label:"취재의뢰",action:n.videoCoverageCreate},{id:3,label:"편집의뢰",action:n.editingCreate},{id:4,label:"오디오",action:n.audioCreate},{id:5,label:"수퍼작성",action:n.superInput},{id:6,label:"수퍼제작"},{id:7,label:"Post",action:n.post},{id:8,label:"저장",action:r.onCreate},{id:9,label:"데스킹요청"},{id:10,label:"구성안",action:n.config},{id:11,label:"닫기",action:r.close}])}}function kt(r,n,m){return{createParams:b=>{const i=W(b),c=r.articleFileIds.value.map(l=>({fileId:l}));return{planId:0,artclOrd:0,orgArtclId:"",brdcPgmId:r.articleDetailItem.program.id,brdcPgmNm:"",userGroupId:r.userGroupId.value,userGroupNm:r.userGroupNm.value,artclTypCd:String(r.articleType.value.id),rptrId:1,rptrNm:"administrator",artclTitl:r.articleTitle.value,artclCtt:b,artclCttTime:h(n,tt(r.articleEditorState.value.reporterTextArray)),ancMentCtt:`${JSON.stringify(r.articleEditorState.value.anchorTextArray)}`,ancMentCttTime:0,lckYn:"N",lckrId:"",lckDtm:"",deptId:1,deptNm:"",brdcSchdDtm:et(r.brdcSchdDtm.value).startOf("day").format("YYYY-MM-DD HH:mm:ss"),artclTypCdNm:r.articleType.value.name,artclDivCd:"div_0001",artclDivDtm:"2024-12-09 12:00:00",artclCateId:"",artclCateNm:"",artclClass:"class_001",apprvTypCd:"apprv_typ_000",prdDivCd:"",memo:"",brdcCnt:"",attcFileYn:"N",notiYn:"N",urgYn:"N",delYn:"N",disYn:"N",priority:"",capFnshYn:"N",capFnshDtm:"",apprvTypDtm:"",artclExtTime:0,chDivId:1,chDivNm:"SBS",chDivCd:"SBS",userGrpId:"",apprvrId:"",srcDivCd:"",inputrId:1,inputrNm:"administrator",updtrId:1,orgInputrNm:"administrator",orgRptrNm:"administrator",orgChNm:"SBS",orgChDivId:1,appDivCd:"NRS",inputDtm:m,updtDtm:m,coveragePlanId:"",articleCaps:i,tagIdList:[],articleLinkCreateDtoList:[],articleAttachementFileCreateDtoList:c,artclFormatCd:String(r.articleFormat.value.id)}}}}const Ut={class:"flex justify-between overflow-y-hidden gap-2"},Yt={class:"mt-2 flex flex-col w-[69.5%] p-2.5 border rounded-md h-[calc(100vh-150px)]"},Gt={class:"w-[30%]"},Le=x({__name:"ArticleCreateView",setup(r){const{createArticle:n,speed:m}=ot(),{fileUpload:C}=yt(),{deleteTabBy:b,getActiveTab:i}=rt(),{moveArticleList:c}=lt(),{modals:l,toggleModal:v}=mt(),_=nt(),{createdArticleId:L,articleTitle:F,ancMentCttTime:A,articleTimeMs:S,reportTimeMs:k,articleType:U,articleFormat:Y,articleEditorState:G,articleDetailItem:E,startOfToday:V,articleFile:D,articleFileIds:O,userGroupId:q,userGroupNm:H}=_,P=T(""),{createParams:J}=kt(_,m,V.value),M={navigation:{onClose:()=>{b(i),c()}},data:{onAttachementFile:async()=>{try{if(!D.value)return[];const t=Array.from(D.value).map($=>{const I=new FormData;return I.append("file",$,$.name),I.append("fileName",$.name),I.append("fileDivisionCode",st.MyArticle.id.toString()),I.append("publicYn","Y"),console.log("File being uploaded:",$),I.forEach((X,Z)=>{console.log(`${Z}:`,X)}),C(I)}),o=await Promise.all(t);O.value=o.map($=>$.data.id)}catch(f){console.error("ArticleCreateView onAttachementFile Error",f)}},onCreate:async()=>{try{await M.data.onAttachementFile();const f=J(P.value);console.log("deubg create params::::",f);const t=await n(f);t.success&&(window.Notify.success({message:it.article.success.create}),L.value=t.data.id,M.navigation.onClose())}catch(f){console.error("ArticleCreateView onCreate Error",f)}}},modal:{onSelect:f=>{q.value=`[${f.map(t=>String(t.userId)).join(";")};]`,H.value=`[${f.map(t=>String(t.userNm)).join("#13")}#13]`}}},{createMenuItems:K}=St({toggleModal:v,onCreate:M.data.onCreate,close:M.navigation.onClose});return(f,t)=>(p(),at("div",null,[s(dt,{"menu-items":e(K),"is-show-search":!1},null,8,["menu-items"]),a("div",Ut,[a("div",Yt,[s(pt,{ref:"articleFormRef",content:P.value,"onUpdate:content":t[0]||(t[0]=o=>P.value=o),"article-type":e(U),"onUpdate:articleType":t[1]||(t[1]=o=>g(U)?U.value=o:null),"article-format":e(Y),"onUpdate:articleFormat":t[2]||(t[2]=o=>g(Y)?Y.value=o:null),title:e(F),"onUpdate:title":t[3]||(t[3]=o=>g(F)?F.value=o:null),"anc-ment-ctt-time":e(A),"onUpdate:ancMentCttTime":t[4]||(t[4]=o=>g(A)?A.value=o:null),"article-time":e(S),"onUpdate:articleTime":t[5]||(t[5]=o=>g(S)?S.value=o:null),"report-time":e(k),"onUpdate:reportTime":t[6]||(t[6]=o=>g(k)?k.value=o:null),"article-editor-state":e(G),"onUpdate:articleEditorState":t[7]||(t[7]=o=>g(G)?G.value=o:null),mode:"create"},null,8,["content","article-type","article-format","title","anc-ment-ctt-time","article-time","report-time","article-editor-state"])]),a("div",Gt,[s(ut,{"article-detail-info-data":e(E),"onUpdate:articleDetailInfoData":t[8]||(t[8]=o=>g(E)?E.value=o:null),"article-file-data":e(D),"onUpdate:articleFileData":t[9]||(t[9]=o=>g(D)?D.value=o:null),mode:"create"},null,8,["article-detail-info-data","article-file-data"])]),a("div",null,[e(l).cgCreate?(p(),u(e(Tt),{key:0,onClose:t[10]||(t[10]=o=>e(v)("cgCreate"))})):y("",!0),e(l).videoCoverageCreate?(p(),u(e(bt),{key:1,onClose:t[11]||(t[11]=o=>e(v)("videoCoverageCreate"))})):y("",!0),e(l).editingCreate?(p(),u(e(Ft),{key:2,onClose:t[12]||(t[12]=o=>e(v)("editingCreate"))})):y("",!0),e(l).audioCreate?(p(),u(e(At),{key:3,onClose:t[13]||(t[13]=o=>e(v)("audioCreate"))})):y("",!0),e(l).superInput?(p(),u(e(ft),{key:4,onClose:t[14]||(t[14]=o=>e(v)("superInput"))})):y("",!0),e(l).post?(p(),u(e(_t),{key:5,onClose:t[15]||(t[15]=o=>e(v)("post"))})):y("",!0),e(l).config?(p(),u(e(Nt),{key:6,onClose:t[16]||(t[16]=o=>e(v)("config"))})):y("",!0)])])]))}});export{Le as default};
