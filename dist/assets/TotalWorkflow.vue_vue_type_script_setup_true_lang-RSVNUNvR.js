import{aO as D,aD as l,d as R,k as W,ac as $,l as F,t as G,o as z,a as t,c as d,G as K,h,Y as c,F as N,C as q,Q as p,a0 as g,K as I}from"./index-eLyz9_Ts.js";import{_ as y}from"./GNoData.vue_vue_type_script_setup_true_lang-rWUb5JCO.js";import{_ as Q}from"./PageLoader.vue_vue_type_script_setup_true_lang-ZvbvX14z.js";import{u as Y}from"./coverage-plan-nI7mLZOB.js";const H=D("coverage-schedule",{actions:{async fetchCoverageSchedules(r){try{return await l().coverageSchedule.basic.findAll(r)}catch(e){console.error("store : fetchCoverageSchedules() Error ",e)}},async fetchCoverageSchedule(r){try{return await l().coverageSchedule.basic.findOne(r)}catch(e){console.error("store: fetchCoverageSchedule() Error ",e)}},async createCoverageSchedule(r){try{return await l().coverageSchedule.basic.create(r)}catch(e){console.error("store: createCoverageSchedule() Error",e)}},async updateCoverageSchedule(r,e){try{return await l().coverageSchedule.basic.update(r,e)}catch(o){console.error("store: updateCoverageSchedule() Error ",o)}},async deleteCoverageSchedule(r){try{return await l().coverageSchedule.basic.delete(r)}catch(e){console.error("store: deleteCoverageSchedule() Error",e)}},async copyCoverageSchedule(r,e){try{return await l().coverageSchedule.basic.copy(r,e)}catch(o){console.error("store: copyCoverageSchedule() Error",o)}},async assignVideoReporter(r,e){try{return await l().coverageSchedule.basic.assign(r,e)}catch(o){console.error("store: copyCoverageSchedule() Error",o)}},async fetchCoverageScheduleIngestRequest(r){try{return await l().coverageSchedule.basic.findAllIngestRequest(r)}catch(e){console.error("store : fetchCoverageScheduleIngestRequest() Error ",e)}},async fetchCoverageScheduleIngestMedia(r){try{return await l().coverageSchedule.basic.findAllIngestMedia(r)}catch(e){console.error("store : fetchCoverageScheduleIngestMedia() Error ",e)}},async fetchCoverageScheduleWorkflow(r){try{return await l().coverageSchedule.basic.findCoverageWorkflow(r)}catch(e){console.error("store : fetchCoverageScheduleIngestMedia() Error ",e)}}}}),J={class:"space-y-2 h-full"},U={key:0},X={key:2,class:"flex text-xs flex-col h-full space-y-2 dark:text-white"},Z={class:"py-1 flex flex-col min-h-[20%]"},ee={class:"py-1 flex flex-col"},re={class:"py-1 flex flex-col"},ce=R({__name:"TotalWorkflow",props:{id:{},type:{}},setup(r){const e=r,o=W(!1),v=l(),M=$(),{fetchCoverageScheduleWorkflow:T}=H(),{fetchCoverageWorkflow:O}=Y(),{fetchWorkflow:V}=M,s=W({articleList:[],coveragePlan:{},coverageScheduleList:[]}),j=F(()=>!Object.keys(s.value).length||Object.values(s.value).filter(a=>!a||!(a!=null&&a.length)).length===Object.keys(s.value).length),B=()=>{s.value={articleList:[],coveragePlan:{},coverageScheduleList:[]}},b=async()=>{try{o.value=!0,B();const a=await{article:()=>V(Number(e.id)),coverageSchedule:()=>T(e.id),coveragePlan:()=>O(e.id),requestVideo:()=>v.request.video.findWorkflow(e.id),requestGraphic:()=>v.request.graphic.findWorkflow(Number(e.id))}[e.type]();a.success&&(s.value=a.data)}catch(u){console.error("ArticleActionLog getArticleLog Error ",u)}finally{o.value=!1}},i=u=>({"apprv_typ_001,apprv_typ_002":["bg-green-500","border-l-green-400"],apprv_typ_000:["bg-blue-400","border-l-blue-400"],apprv_typ_001:["bg-yellow-500","border-l-yellow-400"],apprv_typ_002:["bg-primary","border-l-primary-400"],reject:["bg-red-500","border-l-red-400"],pending:["bg-blue-400","border-l-blue-400"],approve:["bg-green-500","border-l-green-400"]})[u];return G(()=>e.id,()=>b()),z(()=>{b()}),(u,a)=>{var m,S,k,L,x,C,w,A,_,E,P;return t(),d("div",J,[o.value?(t(),d("div",U,[K(Q)])):j.value?(t(),h(y,{key:1})):(t(),d("div",X,[c("div",Z,[a[0]||(a[0]=c("p",{class:"text-sm mb-2"},"기사 이력",-1)),(t(!0),d(N,null,q(s.value.articleList,(n,f)=>(t(),d("div",{key:`article-${f}`,class:p(["dark:text-dark-gray-200 flex items-center space-x-5 border dark:border-dark-border border-l-4 rounded-e-lg dark:bg-dark p-2 border-gray-300 overflow-x-auto scrollbar-hide",[i(n.approveTypeCode)[1]]])},[c("div",{class:p(["flex-none rounded-lg text-center px-2 py-1.5 w-28 text-white select-none",[i(n.approveTypeCode)[0]]])},g(n.approveTypeCodeName),3),c("div",null,g(n.title),1)],2))),128)),!((m=s.value)!=null&&m.articleList)||!((k=(S=s.value)==null?void 0:S.articleList)!=null&&k.length)?(t(),h(y,{key:0})):I("",!0)]),c("div",ee,[a[1]||(a[1]=c("p",{class:"text-sm mb-2"},"취재계획 이력",-1)),(L=s.value)!=null&&L.coveragePlan?(t(),d("div",{key:1,class:p(["dark:text-dark-gray-200 flex items-center space-x-5 border dark:border-dark-border border-l-4 rounded-e-lg dark:bg-dark p-2 border-gray-300 overflow-x-auto scrollbar-hide",[i((x=s.value)==null?void 0:x.coveragePlan.statusCode)[1]]])},[c("div",{class:p(["flex-none rounded-lg text-center px-2 py-1.5 w-28 text-white select-none",[i((C=s.value)==null?void 0:C.coveragePlan.statusCode)[0]]])},g((w=s.value)==null?void 0:w.coveragePlan.statusCodeName),3),c("div",null,g((A=s.value)==null?void 0:A.coveragePlan.title),1)],2)):(t(),h(y,{key:0}))]),c("div",re,[a[2]||(a[2]=c("p",{class:"text-sm mb-2"},"취재일정 이력",-1)),(t(!0),d(N,null,q((_=s.value)==null?void 0:_.coverageScheduleList,(n,f)=>(t(),d("div",{key:`coverageScheduleList-${f}`,class:p(["dark:text-dark-gray-200 flex items-center space-x-5 border dark:border-dark-border border-l-4 rounded-e-lg dark:bg-dark p-2 border-gray-300 overflow-x-auto scrollbar-hide",[i(n.statusCode)[1]]])},[c("div",{class:p(["flex-none rounded-lg text-center px-2 py-1.5 w-28 text-white select-none",[i(n.statusCode)[0]]])},g(n.statusCodeName),3),c("div",null,g(n.title),1)],2))),128)),!((E=s.value)!=null&&E.coverageScheduleList)||!((P=s.value)!=null&&P.coverageScheduleList.length)?(t(),h(y,{key:0})):I("",!0)])]))])}}});export{ce as _,H as u};
