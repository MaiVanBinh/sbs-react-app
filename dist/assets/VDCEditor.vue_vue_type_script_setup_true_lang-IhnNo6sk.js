import{d as D,e3 as b,e4 as S,k as B,e5 as r,l as h,t as E,a as u,c as U,h as p,j as a,Q as c,e6 as g,K as k,e7 as w}from"./index-eLyz9_Ts.js";import{u as I}from"./file-Gx0JxWZZ.js";import{F}from"./file-division-code-x51qUgaH.js";const N={class:"h-full custom-vdc-editor"},T=D({__name:"VDCEditor",props:{content:{default:""},extensions:{default:()=>[]},disabled:{type:Boolean,default:!1},output:{default:"html"},editorClass:{default:""},spellCheck:{type:Boolean,default:!0},customClass:{default:""},intent:{default:""},mode:{default:"editor"},fontSizeDefault:{default:14},excludeExtensions:{default:()=>({[b.PAINTER]:!0,[b.CLEAR]:!0})}},emits:["update:content"],setup(C,{emit:v}){const e=C,i=v,{fileUpload:x}=I(),d=S(),l=B(e.content||""),y=async o=>{const t={fileName:o.name,publicYn:"Y",fileDivisionCode:F.Board.id,file:o};try{const s=await x(t);return s.success?`http://192.168.1.11:9000/api/files/${s.data.fileUrl}`:""}catch(s){return console.log("Fail to add file",s),""}},z=r.SpellcheckerExtension.configure({proofreader:new r.Proofreader({api:"spell-checker?resultType=JSON",limit:1e4,transfer(o){if(!o.data)return[];const{wrongWordResponseDto:t}=o.data;return t==null?void 0:t.map(n=>({errorText:{startIndex:n.startIndex,length:n.endIndex-n.startIndex,wrongWord:n.wrongWord},spellData:n}))}}),uiStrings:{noSuggestions:"No suggestions found"}}),f=h(()=>{if(e.extensions.length>0)return e.extensions;const o=[r.BaseKit.configure({placeholder:{showOnlyCurrent:!0},characterCount:{limit:5e4},mode:e.mode,excludes:e.excludeExtensions}),r.ImageUpload.configure({upload:t=>y(t)})];return e.spellCheck&&o.unshift(z),o}),m=h(()=>{switch(e.intent){case"primary":return"vdc-primary";default:return""}});return E(()=>e.content,()=>{l.value=e.content||""}),(o,t)=>(u(),U("div",N,[e.mode==="report"?(u(),p(a(g),{key:0,modelValue:l.value,"onUpdate:modelValue":[t[0]||(t[0]=s=>l.value=s),t[1]||(t[1]=s=>i("update:content",s))],extensions:f.value,output:e.output,"editor-class":[e.editorClass,"h-full",a(d)==="dark"?"dark":"light"],dark:a(d)==="dark","hide-toolbar":o.disabled,mode:e.mode,disabled:o.disabled,class:c([o.customClass,m.value]),"font-size-default":e.fontSizeDefault},null,8,["modelValue","extensions","output","editor-class","dark","hide-toolbar","mode","disabled","class","font-size-default"])):k("",!0),e.mode==="straight"?(u(),p(a(g),{key:1,modelValue:l.value,"onUpdate:modelValue":[t[2]||(t[2]=s=>l.value=s),t[3]||(t[3]=s=>i("update:content",s))],extensions:f.value,output:e.output,"editor-class":[e.editorClass,"h-full",a(d)==="dark"?"dark":"light"],dark:a(d)==="dark","hide-toolbar":o.disabled,mode:e.mode,disabled:o.disabled,class:c([o.customClass,m.value]),"font-size-default":e.fontSizeDefault},null,8,["modelValue","extensions","output","editor-class","dark","hide-toolbar","mode","disabled","class","font-size-default"])):k("",!0),e.mode==="editor"?(u(),p(a(w),{key:2,modelValue:l.value,"onUpdate:modelValue":[t[4]||(t[4]=s=>l.value=s),t[5]||(t[5]=s=>i("update:content",s))],extensions:f.value,output:e.output,"editor-class":[e.editorClass,"h-full",a(d)==="dark"?"dark":"light"],dark:a(d)==="dark","hide-toolbar":o.disabled,mode:e.mode,disabled:o.disabled,class:c([o.customClass,m.value]),"font-size-default":e.fontSizeDefault},null,8,["modelValue","extensions","output","editor-class","dark","hide-toolbar","mode","disabled","class","font-size-default"])):k("",!0)]))}});export{T as _};
