import{d as $,a as k,h as Y,al as q,am as X,ew as F,a5 as U,k as i,l as S,w as x,a0 as b,Y as r,a1 as W,j as f,L as A,G as d,a2 as _,X as O,a3 as J,ad as Q,o as Z,ai as ee,c as ae,aj as N,aG as te,K as oe,ah as D}from"./index-eLyz9_Ts.js";import{u as se}from"./use-date-GeeGTbYh.js";import{r as ne}from"./use-render-component-K20sHqiA.js";import{u as le}from"./category-zIRntbmZ.js";const re=$({__name:"CategoryList",props:{isLoading:{type:Boolean},rowData:{},pageInfo:{}},emits:["selected-rows","double-clicked-row","on-change-page","on-toggle-use","on-draggable"],setup(M,{emit:l}){const o=l,{formatDate:p}=se(),c=e=>{const s=document.createElement("div");s.className="h-full";const m={onToggle:n=>{o("on-toggle-use",{category:e.data,useYn:n})},modelValue:e.data.useYn==="Y"};return ne(F,m,s)},y=[{headerName:"",field:"drag",sortable:!1,maxWidth:40,rowDrag:!0},{headerName:"순번",filter:!1,minWidth:60,maxWidth:60,valueGetter:"node.rowIndex",cellRenderer:e=>X(e)},{headerName:"카테고리명",field:"cateNm",filter:!1,minWidth:260},{headerName:"생성자",field:"inputrNm",filter:!1,minWidth:160},{headerName:"수정자",field:"updtrNm",filter:!1,minWidth:160},{headerName:"수정일시",field:"updtDtm",filter:!1,minWidth:260,valueGetter:e=>p(e.data.updtDtm,"YYYY-MM-DD HH:mm:ss")},{headerName:"사용여부",field:"useYn",filter:!1,minWidth:150,cellRenderer:e=>c(e)}],u=e=>{o("selected-rows",e)},h=e=>{o("double-clicked-row",e)},C=e=>{o("on-change-page",e)},w=e=>{o("on-draggable",e)};return(e,s)=>(k(),Y(q,{class:"w-full h-full flex flex-col","column-defs":y,"row-data":e.rowData,"is-loading":e.isLoading,filter:!1,sortable:!1,"page-info":e.pageInfo,"suppress-movable":!1,"row-selection":"single","row-drag-managed":!0,onSelectedRows:u,onOnRowDragEnd:w,onDoubleClickedRow:h,onOnChangePage:C},null,8,["row-data","is-loading","page-info"]))}}),ce={class:""},ie={class:"px-2 py-4 space-y-6"},de={class:"space-y-2 text-sm"},ue={class:"space-x-3 flex items-center justify-end"},me=$({__name:"CategoryInfoModal",props:{mode:{default:"create"},categoryItem:{default:""}},emits:["on-create","on-edit","close"],setup(M,{emit:l}){const o=M,p=l,{t:c}=U(),y=i(!1),u=i(o.mode==="create"?"":o.categoryItem.cateNm),h=()=>{p("close")},C=async()=>{try{y.value=!0;const s={cateNm:u.value.trim()};o.mode==="create"?p("on-create",s):p("on-edit",s)}catch(s){console.error("CategoryInfoModal onSubmit() Error",s)}finally{y.value=!1}},w=S(()=>o.mode==="create"?c("Modal.Category.CreateModal.카테고리_추가"):c("Modal.Category.EditModal.카테고리_수정")),e=S(()=>o.mode==="create"?c("Modal.Category.CreateModal.추가"):c("Modal.Category.EditModal.수정"));return(s,m)=>(k(),Y(J,{"modal-class":"sm:w-1/2 2xl:w-[25vw]",onClose:h},{title:x(()=>[r("span",ce,b(w.value),1)]),content:x(()=>[r("div",ie,[r("div",de,[d(W,{modelValue:u.value,"onUpdate:modelValue":m[0]||(m[0]=n=>u.value=n),required:!0,label:f(c)("Modal.Category.CreateModal.카테고리_명"),onKeyup:A(C,["enter"])},null,8,["modelValue","label"])]),r("div",ue,[d(_,{type:"secondary",onClick:m[1]||(m[1]=n=>s.$emit("close"))},{default:x(()=>[O(b(f(c)("Modal.User.CreateModal.취소")),1)]),_:1}),d(_,{loading:y.value,disabled:!u.value.trim(),onClick:C},{default:x(()=>[O(b(e.value),1)]),_:1},8,["loading","disabled"])])])]),_:1}))}}),ge={class:"h-full"},fe={class:"flex justify-between"},pe={class:"flex items-center space-x-2"},ye={class:"space-x-2 w-[210px]"},we={class:"text-xl dark:text-dark-gray-200"},Ce={class:"text-xl text-gray-500"},ve={class:"space-x-1.5"},_e={class:"flex flex-col h-full"},De=$({__name:"AdminCategoryView",setup(M){const{t:l}=U(),o=i(!1),p=le(),{fetchCategories:c,createCategory:y,updateCategory:u,deleteCategory:h,updateOrderCategory:C}=p,w=i(""),e=i([]),s=i(!1),m=i("create"),n=i(),T=i(Q.sm),B=i({isShow:!1,page:1,totalElements:1,totalPages:1,numberOfElements:1,size:T.value}),g=async()=>{try{o.value=!0;const a={cateNm:w.value},t=await c(a);t.success&&(e.value=t.data)}catch(a){console.error("AdminCategoryView: getCategory Error",a)}finally{o.value=!1}},I=a=>{m.value=a,s.value=!0},V=()=>{s.value=!1},G=async a=>{try{(await y(a)).success&&(window.Notify.success({message:D.category.create}),await g(),V())}catch(t){console.error("AdminCategoryView: onCreateCategory() Error",t)}},L=async a=>{try{(await u(n.value.cateId,a)).success&&(window.Notify.success({message:D.category.edit}),await g(),V())}catch(t){console.error("AdminCategoryView: onEditCategory() Error",t)}},j=async()=>{try{(await h(n.value.cateId)).success&&(window.Notify.success({message:D.category.delete}),await g())}catch(a){console.error("AdminCategoryView: onDelete() Error",a)}},K=a=>{n.value=a[0].data},z=a=>{n.value=a.data,I("edit")},P=async a=>{try{const t={useYn:a.useYn?"Y":"N"};(await u(a.category.cateId,t)).success&&(window.Notify.success({message:D.category.edit}),await g())}catch(t){console.error("AdminUserView: onChangeUseYn() Error ",t)}},H=async a=>{const t={cateOrd:a.node.rowIndex};await C(a.node.data.cateId,t)&&await g()};return Z(()=>{g()}),(a,t)=>{var R;const v=ee("tooltip");return k(),ae("div",ge,[r("div",fe,[r("div",pe,[r("div",ye,[r("span",we,b(f(l)("Category.분야")),1),r("span",Ce,b(f(l)("Category.카테고리수",{category:e.value.length})),1)]),d(W,{modelValue:w.value,"onUpdate:modelValue":t[0]||(t[0]=E=>w.value=E),width:"w-96",placeholder:f(l)("Category.카테고리명으로_검색하세요"),onKeyup:A(g,["enter"])},null,8,["modelValue","placeholder"]),d(_,{icon:"magnifying-glass",onClick:g})]),r("div",ve,[N(d(_,{icon:"arrow-path",onClick:g},null,512),[[v,f(l)("Category.새로고침")]]),N(d(_,{icon:"plus",disabled:o.value,onClick:t[1]||(t[1]=E=>I("create"))},null,8,["disabled"]),[[v,f(l)("Category.추가")]]),N(d(_,{icon:"pencil",disabled:o.value||!n.value,onClick:t[2]||(t[2]=E=>I("edit"))},null,8,["disabled"]),[[v,f(l)("Category.수정")]]),N(d(te,{disabled:o.value||!n.value,title:(R=n.value)==null?void 0:R.cateNm,onOnConfirm:j},null,8,["disabled","title"]),[[v,f(l)("Category.삭제")]])])]),r("div",_e,[d(re,{"is-loading":o.value,"row-data":e.value,"page-info":B.value,onSelectedRows:K,onDoubleClickedRow:z,onOnDraggable:H,onOnToggleUse:P},null,8,["is-loading","row-data","page-info"])]),s.value?(k(),Y(me,{key:0,mode:m.value,"category-item":n.value,onOnCreate:G,onOnEdit:L,onClose:V},null,8,["mode","category-item"])):oe("",!0)])}}});export{De as default};
