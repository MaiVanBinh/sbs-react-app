import{g as G,M as ne}from"./splitpanes.es-dEoJOrhT.js";import{ah as j,l as B,k as E,d as J,a as h,c as C,G as _,a6 as ae,h as v,B as re,am as se,N as ie,cB as O,eD as A,al as ue,F as le,C as de,Y as I,a0 as x,Q as R,j as i,aJ as ce,w as S,K as T,an as H,ao as me,o as he,ap as pe}from"./index-eLyz9_Ts.js";import{e as q}from"./journalist-QNhBHHjf.js";import"./organization-qjYuRO6g.js";import{w as fe}from"./pagination-_g_gc7Ms.js";import{J as D,u as ge,_ as _e}from"./JournalistHeader.vue_vue_type_script_setup_true_lang-49dK_3bg.js";import{B as Y}from"./buttons-3hbXC8Cn.js";import{u as ye}from"./use-intersection-observer-N6Mx7i0c.js";import"./vue-multiselect-Yz8FsF-E.js";import"./GSingleSelect-7u8H0FdH.js";import"./sam-tw0uWIQ_.js";import"./purify.es-OZOo_0xz.js";import"./spell-check-OnBbfX8h.js";/* empty css                                                                  */import"./GDatePicker.vue_vue_type_style_index_0_lang-aP5TJiAZ.js";import"./article-type.code-5cb8riL1.js";import"./program-omP_c4K3.js";import{_ as ve}from"./ConfirmModal.vue_vue_type_script_setup_true_lang-k_ZxaDhN.js";import"./code-mapper-C6rl9hti.js";/* empty css                                                                    *//* empty css                                                                        */import"./tag-Q73uuSte.js";import"./category-zIRntbmZ.js";import"./department-wnuBQoCo.js";import"./GEditor.vue_vue_type_style_index_0_lang-FifEywK1.js";import"./file-Gx0JxWZZ.js";import"./GVideoPlayer-1SUF8s3O.js";import"./main-sHItgwS4.js";import"./vue-resizable.umd.min-blE9hPz6.js";import{u as we}from"./use-pagination-JgK9yJDA.js";import{u as De}from"./use-button-actions-XDAYYO3a.js";import{c as f}from"./make-grid-column-aeLSdEws.js";import{_ as Ie}from"./BaseList.vue_vue_type_script_setup_true_lang-aJzIAVm-.js";import"./ContentHeaderButtons.vue_vue_type_script_setup_true_lang-Db8CUXqr.js";import"./index.esm-Hbr0u7mK.js";import"./use-model-wrapper-XtiLc3Xd.js";import"./use-date-GeeGTbYh.js";import"./vue.runtime.esm-bundler-3P3R-Xon.js";function Se(e){const r={searchValue:e.searchValue,startDate:e.startDate,endDate:e.endDate,chDivIds:e.chDivIds};return e.kind!==void 0&&e.kind!==null&&(r.kind=e.kind),{...r}}function Je(e,r,n){const a=q(),{fetchJournalists:t,fetchJournalist:c,deleteJournalist:d,fetchJournalistHistorys:u,lockJournalist:g,unLockJournalist:s}=a,y=async()=>{try{const p=fe.default(Se({startDate:e.value.startDate,endDate:e.value.endDate,searchValue:e.value.searchValue,chDivIds:e.value.chDivIds,kind:e.value.kind}),r),o=await t(p);o!=null&&o.success&&(n==null||n.onListSuccess(o.data))}catch(p){console.error("useJournalistActions getJournalists Error",p)}};return{getJournalists:y,getJournalistItem:async p=>{try{const o=await c(p);o!=null&&o.success&&(n==null||n.onDetailSuccess(o.data))}catch(o){console.error("useJournalistActions getJournalistDetail Error",o)}},deleteJournalistItem:async p=>{try{const o=await d(p);if(o.success)return window.Notify.success({message:j.journalist.success.delete}),await y(),o.success}catch(o){window.Notify.error({message:j.journalist.failed.delete}),console.error("useJournalistActions deleteJournalistItem Error",o)}},getJournalistHistoryList:async p=>{try{const o=await u(p);o!=null&&o.success&&(n==null||n.onHistoryListSuccess(o.data))}catch(o){console.error("useJournalistActions getJournalistHistory Error",o)}},onLockToggle:async(p,o)=>{try{let m;return o==="N"?(m=await g(p),m!=null&&m.success&&(window.Notify.success({message:j.journalist.success.lock}),await y())):(m=await s(p),m!=null&&m.success&&(window.Notify.success({message:j.journalist.success.unlock}),await y())),(m==null?void 0:m.success)||!1}catch(m){console.error("useJournalistActions onLockToggle Error",m),o==="N"?window.Notify.error({message:j.journalist.failed.lock}):window.Notify.error({message:j.journalist.failed.unlock})}}}}function Ne(e,r){return{menuItems:B(()=>[{id:1,label:"신규",action:r.moveNewJournalist},{id:2,label:"교정",action:r.moveEditJournalist,disabled:e(Y.EDIT)},{id:3,label:"개인"},{id:4,label:"민방 전송"},{id:5,label:"삭제",action:()=>r.toggleModal("delete"),disabled:e(Y.DELETE)},{id:6,label:"인쇄"},{id:7,label:"닫기"}])}}function je(){const e=E({delete:!1});return{modals:e,toggleModal:n=>{e.value[n]=!e.value[n]}}}function Te(e){const r=E(!1);return{onSearch:async()=>{var d;try{await((d=e==null?void 0:e.onSearch)==null?void 0:d.call(e))}catch(u){console.error("useJournalistSearchActions onSearch Error",u)}},onChangeDate:async d=>{try{await new Promise(u=>{var g;(g=e==null?void 0:e.onUpdateSearchCondition)==null||g.call(e,{startDate:d,endDate:d}),u(null)})}catch(u){console.error("useJournalistSearchActions onChangeDate Error",u)}},onChangeKind:async d=>{var u;try{await new Promise(g=>{var s;(s=e==null?void 0:e.onUpdateSearchCondition)==null||s.call(e,{kind:d}),g(null)}),await((u=e==null?void 0:e.onSearch)==null?void 0:u.call(e))}catch(g){console.error("useJournalistSearchActions onChangeKind Error",g)}},onToggleDeletedList:async d=>{try{r.value=d}catch(u){console.error("useJournalistSearchActions onToggleDeletedList Error",u)}},onUpdateSearchCondition:e==null?void 0:e.onUpdateSearchCondition}}const Ce=J({__name:"CustomAuthorityIcon",props:{params:{type:Object,required:!0}},setup(e){const r=e;return(n,a)=>(h(),C("div",null,[_(ae,{icon:r.params.data.accessUserDeptId?"users":""},null,8,["icon"])]))}}),Ee=J({__name:"Journalists",props:{isLoading:{type:Boolean},rowData:{},customColumn:{default:void 0},pageInfo:{}},setup(e){const r=[f({headerName:"",minWidth:50,cellRenderer:Ce}),f({headerName:"NO",minWidth:80,valueGetter:"node.rowIndex",cellRenderer:a=>se(a)}),f({headerName:"종류",field:"kind",minWidth:100,valueFormatter:a=>{const t=Object.values(D).find(c=>c.id===a.value);return(t==null?void 0:t.name)||a.value}}),f({headerName:"제목",minWidth:200,field:"journBbTitl"}),f({headerName:"부서",minWidth:120,field:"inputrDeptNm"}),f({headerName:"작성자",minWidth:120,field:"inputrNm"}),f({headerName:"전송",minWidth:100}),f({headerName:"수정",minWidth:80}),f({headerName:"공개",minWidth:80,cellRenderer:a=>`<span>${a.value==="Y"?"공개":"비공개"}</span>`})],n=a=>{var t;return((t=a.data)==null?void 0:t.openYn)==="Y"?"bg-green-100":""};return(a,t)=>(h(),v(Ie,re({"column-defs":r,"row-data":a.rowData,"page-info":a.pageInfo,"get-row-class":n},a.$attrs),null,16,["row-data","page-info"]))}}),Le=J({__name:"JournalistDetailInfo",props:{journalistItemData:{}},setup(e){const r=e,n={[D.NEWS_SOURCE.id]:O(()=>A(()=>import("./NewsSourceDetail-DEeZvwIL.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),[D.SITUATION_BOARD.id]:O(()=>A(()=>import("./SituationBoardDetail-3OW5UnCO.js"),__vite__mapDeps([9,1,2,3,6]))),[D.WORKING_BOARD.id]:O(()=>A(()=>import("./WorkingBoardDetail-IOijuBna.js"),__vite__mapDeps([10,1,2,3,6]))),[D.MEDIA_INFORMATION.id]:O(()=>A(()=>import("./MediaInformationDetail-KzlxMd4U.js"),__vite__mapDeps([11,1,2,3,6]))),[D.SPORTS_SCHEDULE.id]:O(()=>A(()=>import("./SportsScheduleDetail-NpzCl4Gx.js"),__vite__mapDeps([12,1,13,14,2,3,15,6])))},a=B(()=>{var c;const t=((c=r.journalistItemData)==null?void 0:c.kind)||D.NEWS_SOURCE.id;return n[t]||n[D.NEWS_SOURCE.id]});return(t,c)=>(h(),v(ie(a.value),{"journalist-item-data":t.journalistItemData},null,8,["journalist-item-data"]))}}),Oe=J({__name:"JournalistAttchedFile",props:{attchedFileData:{}},setup(e){const r=[f({headerName:"NO"}),f({headerName:"제목"}),f({headerName:"날짜"}),f({headerName:""})];return(n,a)=>(h(),v(ue,{"row-data":n.attchedFileData,"column-defs":r},null,8,["row-data"]))}}),Ae={class:"w-full bg-white shadow-md rounded-lg overflow-hidden"},xe={class:"text-gray-600 text-sm"},Re={class:"text-gray-600 text-sm font-medium"},Pe={class:"text-gray-500 text-xs"},He={class:"text-gray-500 text-xs"},Be=J({__name:"JournalistHistory",props:{historyData:{}},setup(e){const r={수정:"bg-yellow-100 text-yellow-800",등록:"bg-green-100 text-green-800",취소:"bg-red-100 text-red-800"};return(n,a)=>(h(),C("div",Ae,[(h(!0),C(le,null,de(n.historyData,(t,c)=>(h(),C("div",{key:c,class:"grid grid-cols-5 items-center text-center p-3 border-b border-gray-300"},[I("span",{class:R(["px-2 py-1 text-xs font-medium rounded-md",r[t.typ]])},x(t.typ),3),I("span",xe,x(t.deptNm),1),I("span",Re,x(t.userNm),1),I("span",Pe,x(i(ce)(t.inputDtm)),1),I("span",He,x(t.ip),1)]))),128))]))}}),Ve={class:"w-full h-full p-0.5 bg-white dark:bg-dark-grid rounded-md"},Ue=J({__name:"JournalistTabPanel",props:{journalistItemData:{},journalistHistoryData:{},journalistAttchedFileData:{}},emits:["on-load-history"],setup(e,{emit:r}){const n=e,a=r,t=E({detailInfo:!0,attachedFile:!0,history:!0,comment:!0}),c=E(0),d=B(()=>"flex flex-col h-full border border-md p-2"),u=B(()=>[{id:1,name:"상세정보",isShow:t.value.detailInfo},{id:2,name:"첨부파일",isShow:t.value.attachedFile},{id:3,name:"이력",isShow:t.value.history},{id:4,name:"코멘트",isShow:t.value.comment}]),g=async s=>{var N;switch(c.value=s,u.value[s].id){case 3:(N=n.journalistHistoryData)!=null&&N.length||a("on-load-history");break}};return(s,y)=>(h(),C("div",Ve,[_(me,{tabs:u.value,"is-compact-mode":!0,"is-plain-text-mode":!0,onChange:g},{default:S(()=>[t.value.detailInfo?(h(),v(i(H),{key:0,unmount:!1,class:R(d.value)},{default:S(()=>[s.journalistItemData?(h(),v(Le,{key:0,"journalist-item-data":s.journalistItemData},null,8,["journalist-item-data"])):T("",!0)]),_:1},8,["class"])):T("",!0),t.value.attachedFile?(h(),v(i(H),{key:1,unmount:!1,class:R(d.value)},{default:S(()=>[_(Oe,{"attched-file-data":s.journalistAttchedFileData},null,8,["attched-file-data"])]),_:1},8,["class"])):T("",!0),t.value.history?(h(),v(i(H),{key:2,unmount:!1,class:R(d.value)},{default:S(()=>[_(Be,{"history-data":s.journalistHistoryData},null,8,["history-data"])]),_:1},8,["class"])):T("",!0),t.value.comment?(h(),v(i(H),{key:3,unmount:!1,class:R(d.value)},null,8,["class"])):T("",!0)]),_:1},8,["tabs"])]))}}),$e={class:"flex flex-grow overflow-y-hidden h-[calc(100vh-150px)]"},Nt=J({__name:"JournalistView",setup(e){const{moveNewJournalist:r,moveEditJournalist:n}=pe(),a=q(),t=E(),c=E(!1),{modals:d,toggleModal:u}=je(),g=ge(),{selectedRowId:s,journalistsData:y,journalistItemData:N,journalistHistoryData:V,journalistSearchCondition:P,hasSelectedItems:$}=g,{isActionDisabled:p}=De($),o=we(),{pageInfo:m}=o,{getJournalists:F,getJournalistItem:W,deleteJournalistItem:z,getJournalistHistoryList:Q,onLockToggle:X}=Je(P,o,{onListSuccess:l=>{y.value=l.content},onDetailSuccess:l=>{N.value=l},onHistoryListSuccess:l=>{V.value=l}}),{onSearch:M,onChangeDate:Z,onChangeKind:b,onToggleDeletedList:k}=Te({onSearch:async()=>{try{await F()}catch(l){console.error("Failed to get journalist list",l)}},onUpdateSearchCondition:l=>{try{P.value={...P.value,...l},M()}catch(w){console.error("JournalistView onUpdateSearchCondition Error",w)}}}),{observerTarget:ee,setupObserver:te}=ye({onIntersect:async()=>{await F(),s.value&&await W(s.value)}}),L={navigation:{onNavigateToEdit:()=>{a.journalistId&&n(a.journalistId)}},row:{onSelect:async l=>{var U,K;s.value=l[0].data.journBbId;const w=(U=l[0])==null?void 0:U.data.journBbId;a.journalistId=(K=l[0])==null?void 0:K.data.journBbId,await W(w)},onToggleLock:async({journBbId:l,lckYn:w})=>{await X(l,w)}},data:{onDelete:async()=>{try{if(!s)return;await z(s.value)&&u("delete")}catch(l){console.error("JournalistView onDelete Error",l)}}},tab:{onLoadHistory:async()=>{s.value&&await Q(s.value)}}},{menuItems:oe}=Ne(p,{moveNewJournalist:r,moveEditJournalist:L.navigation.onNavigateToEdit,toggleModal:u});return he(()=>{te()}),(l,w)=>(h(),C("div",{ref_key:"observerTarget",ref:ee},[I("div",null,[_(_e,{"menu-items":i(oe),"onClick:search":i(M),onOnChangeDate:i(Z),onOnChangeKind:i(b),onOnToggleDeleteJournalistList:i(k)},null,8,["menu-items","onClick:search","onOnChangeDate","onOnChangeKind","onOnToggleDeleteJournalistList"]),I("div",$e,[_(i(ne),{class:"default-theme"},{default:S(()=>[_(i(G),null,{default:S(()=>[_(Ee,{"is-loading":c.value,"row-data":i(y),"page-info":i(m),"custom-column":t.value,onOnRowSelect:L.row.onSelect,onToggleLock:L.row.onToggleLock},null,8,["is-loading","row-data","page-info","custom-column","onOnRowSelect","onToggleLock"])]),_:1}),_(i(G),null,{default:S(()=>[_(Ue,{"journalist-item-data":i(N),"journalist-history-data":i(V),"journalist-attched-file-data":[],onOnLoadHistory:L.tab.onLoadHistory},null,8,["journalist-item-data","journalist-history-data","onOnLoadHistory"])]),_:1})]),_:1})])]),i(d).delete?(h(),v(i(ve),{key:0,text:"삭제하시겠습니까?",onOnSubmit:L.data.onDelete,onClose:w[0]||(w[0]=U=>i(u)("delete"))},null,8,["onOnSubmit"])):T("",!0)],512))}});export{Nt as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/NewsSourceDetail-DEeZvwIL.js","assets/format.util-TjqX3dGB.js","assets/index-eLyz9_Ts.js","assets/index-2FptBV14.css","assets/GTextarea-5GIFD2Mo.js","assets/GTextarea-FNkDDKzp.css","assets/IconLabel.vue_vue_type_script_setup_true_lang-1rGRsbjZ.js","assets/FormLabel.vue_vue_type_script_setup_true_lang-SB4ukE1P.js","assets/FormItem.vue_vue_type_script_setup_true_lang-ZXQ_7x89.js","assets/SituationBoardDetail-3OW5UnCO.js","assets/WorkingBoardDetail-IOijuBna.js","assets/MediaInformationDetail-KzlxMd4U.js","assets/SportsScheduleDetail-NpzCl4Gx.js","assets/make-grid-column-aeLSdEws.js","assets/journalist-QNhBHHjf.js","assets/organization-qjYuRO6g.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}