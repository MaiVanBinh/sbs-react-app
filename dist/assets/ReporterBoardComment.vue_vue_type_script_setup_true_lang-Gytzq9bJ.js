import{d as N,a5 as V,a as C,h as $,w as I,j as p,a0 as h,X as T,Y as e,ez as L,G as c,a1 as D,$ as j,a2 as M,a3 as Q,k as x,bQ as O,c as A,af as q,a6 as H,K as U,F as G,u as X,aq as Y,aP as J,V as W,aD as Z,aa as ee,o as te,t as se,ah as K}from"./index-eLyz9_Ts.js";import{_ as ne}from"./ContentHeaderButtons.vue_vue_type_script_setup_true_lang-Db8CUXqr.js";import{_ as oe}from"./ConfirmModal.vue_vue_type_script_setup_true_lang-k_ZxaDhN.js";import{_ as F}from"./ModalButton.vue_vue_type_script_setup_true_lang-WIw8hxFk.js";import{_ as z}from"./GDatePicker.vue_vue_type_style_index_0_lang-aP5TJiAZ.js";import{_ as ie}from"./Comment.vue_vue_type_script_setup_true_lang-4b5dYawy.js";const ae={class:"pt-2.5 pr-4.5 pl-1"},re={class:"grid grid-cols-24 gap-2 mb-5"},le={class:"col-span-4"},ce={class:"text-xs text-right flex items-center justify-end h-full"},de={class:"col-span-9"},me={class:"col-span-9"},ue={class:"grid grid-cols-24 gap-2 mb-1"},pe={class:"col-span-4"},fe={class:"text-xs text-right flex items-center justify-end h-full"},_e={class:"col-span-19"},ye={class:"grid grid-cols-24 gap-2 mb-5"},he={class:"col-span-8"},ve={class:"col-span-4 h-full flex items-center"},Ce={class:"col-span-8"},xe={class:"col-span-4 h-full flex items-center"},ke={class:"grid grid-cols-24 gap-2 mb-5"},be={class:"col-span-4"},ge={class:"text-xs text-right flex items-center justify-end h-full"},Ie={class:"col-span-19"},we={class:"grid grid-cols-24 gap-2 mb-5"},De={class:"col-span-4"},Le={class:"text-xs text-right flex items-center justify-end h-full"},$e={class:"col-span-19"},Ne={class:"grid grid-cols-24 gap-2"},Be={class:"col-span-4"},Se={class:"text-xs text-right flex items-center justify-end h-full"},Re={class:"col-span-19"},Oe={class:"sm:p-4 px-2 sm:px-4 md:px-6 xl:px-8 flex items-center justify-end gap-2"},Ee=N({__name:"ReporterBoardSearchModal",emits:["on-close"],setup(u,{emit:m}){const t=m,{t:s}=V();return(l,n)=>(C(),$(Q,{"modal-class":"w-96 rounded-none h-[350px] ","content-class":"!px-2 !py-1 text-sm !mb-0","title-class":"!rounded-t-none !text-base",intent:"primary",onClose:n[0]||(n[0]=d=>t("on-close"))},{title:I(()=>[T(h(p(s)("Community.기자실 상세검색")),1)]),content:I(()=>[e("div",ae,[e("div",re,[e("div",le,[e("p",ce,h(p(s)("Community.일자")),1)]),e("div",de,[c(z,{"model-value":p(L),intent:"primary",class:"space-y-0"},null,8,["model-value"])]),n[1]||(n[1]=e("div",{class:"col-span-1 flex items-center justify-center"},[e("p",{class:"text-xs font-semibold"},"~")],-1)),e("div",me,[c(z,{intent:"primary",class:"space-y-0"})])]),e("div",ue,[e("div",pe,[e("p",fe,h(p(s)("Community.검색어")),1)]),e("div",_e,[c(D,{class:"col-span-9",intent:"primary"})])]),e("div",ye,[n[2]||(n[2]=e("div",{class:"col-span-4"},[e("p",{class:"text-xs text-right flex items-center justify-end h-full"})],-1)),e("div",he,[e("div",ve,[c(j,{name:"checkbox-a",label:p(s)("Community.모든단어포함"),"custom-class-input":"!w-4 !h-4"},null,8,["label"])])]),e("div",Ce,[e("div",xe,[c(j,{name:"checkbox-b",label:p(s)("Community.일부단어포함"),"custom-class-input":"!w-4 !h-4"},null,8,["label"])])])]),e("div",ke,[e("div",be,[e("p",ge,h(p(s)("Community.작성자")),1)]),e("div",Ie,[c(D,{class:"col-span-9",intent:"primary"})])]),e("div",we,[e("div",De,[e("p",Le,h(p(s)("Community.제목")),1)]),e("div",$e,[c(D,{class:"col-span-9",intent:"primary"})])]),e("div",Ne,[e("div",Be,[e("p",Se,h(p(s)("Community.내용")),1)]),e("div",Re,[c(D,{class:"col-span-9",intent:"primary"})])])])]),bottom:I(()=>[e("div",Oe,[c(M,{class:"w-20"},{default:I(()=>[T(h(p(s)("Community.검색")),1)]),_:1})])]),_:1}))}}),Te={class:"flex items-center gap-x-2"},je={class:"flex items-center h-full"},Me=N({__name:"ReporterBoardSearch",emits:["click:search"],setup(u,{expose:m,emit:t}){const s=t,{t:l}=V(),n=x(!1),d=x([L,O]),_=x(!1),k=()=>{_.value=!1,d.value=[L,O]},b=()=>{const a={delYn:_.value?"Y":"N",startDate:d.value?d.value[0]:L,endDate:d.value?d.value[1]:O};s("click:search",a)};return m({resetFields:k}),(a,f)=>(C(),A(G,null,[e("div",Te,[e("div",null,[c(q,{modelValue:d.value,"onUpdate:modelValue":f[0]||(f[0]=y=>d.value=y),intent:"primary",clearable:!0,"text-input":!0,width:"w-[211px]",class:"py-1"},null,8,["modelValue"])]),e("div",je,[c(j,{modelValue:_.value,"onUpdate:modelValue":f[1]||(f[1]=y=>_.value=y),name:"isDelete",label:p(l)("Community.삭제자료"),"custom-class-input":"!w-5 !h-5","custom-class-label":"mt-1"},null,8,["modelValue","label"])]),e("div",null,[c(M,{type:"tertiary",class:"min-w-[80px] !py-0.5 !px-4","button-text":p(l)("Community.검   색"),onClick:b},null,8,["button-text"])]),e("div",null,[c(M,{type:"tertiary",class:"min-w-[80px] !py-0.5 !px-4",onClick:f[2]||(f[2]=y=>n.value=!0)},{default:I(()=>[c(H,{icon:"custom-plus",size:"w-3 h-3",class:"mr-2"}),T(" "+h(p(l)("Community.상   세")),1)]),_:1})])]),n.value?(C(),$(Ee,{key:0,onOnClose:f[3]||(f[3]=y=>n.value=!1)})):U("",!0)],64))}}),Ue={class:"border-t border-primary-gray-surface-500 flex items-center justify-between m-[-0.5rem] mb-0 px-2 py-1 min-h-[50px] bg-primary-gray-900 border-b dark:bg-dark"},Ve={class:"ml-auto"},Ae={class:"px-11 h-[50px] border-t border-primary-gray-surface flex items-center justify-center"},Ye={class:"flex items-center justify-center gap-x-2 w-full"},Xe=N({__name:"ReporterBoardHeader",props:{title:{default:""},isEditAndCreate:{type:Boolean,default:!1},currentId:{default:null}},emits:["on-create","on-save","on-edit","on-delete","on-print","on-post","on-close","on-search"],setup(u,{expose:m,emit:t}){const s=u,l=t,{t:n}=V(),d=X(),{deleteTab:_}=Y(),{getTabs:k}=J(Y()),b=x(),a=W({isOpen:!1,title:"",content:"",type:"confirm",intent:"",icon:"customQuestionMark"}),f=()=>{s.currentId&&(a.isOpen=!0,a.title=n("Community.확인"),a.content=n("Community.자료를 삭제하시겠습니까?"),a.intent="delete",a.type="confirm",a.icon="customQuestionMark")},y=()=>{l("on-delete")},g=()=>{switch(a.intent){case"delete":y();break}a.isOpen=!1},w=()=>{const i=k.value.filter(v=>v.path===d.path);i.length&&_(i[0])},B=[{id:1,label:n("Community.신규"),action:()=>l("on-create")},{id:2,label:n("Community.교정"),action:()=>l("on-edit")},{id:3,label:n("Community.삭제"),action:f},{id:4,label:n("Community.인쇄"),selectList:[n("Community.기본"),n("Community.목록")],action:()=>l("on-print")},{id:5,label:"Post",action:()=>l("on-post")},{id:6,label:n("Community.닫기"),action:w}],S=[{id:1,label:"저장",action:()=>l("on-save")},{id:2,label:"닫기",action:w}],o=async i=>{l("on-search",i)};return m({onClose:w,resetFields:()=>{var i;(i=b.value)==null||i.resetFields()}}),(i,v)=>(C(),A(G,null,[e("div",Ue,[i.isEditAndCreate?U("",!0):(C(),$(Me,{key:0,ref_key:"searchRef",ref:b,"onClick:search":o},null,512)),e("div",Ve,[c(ne,{"menu-items":i.isEditAndCreate?S:B},null,8,["menu-items"])])]),a.isOpen?(C(),$(oe,{key:0,"use-slot":"",intent:"secondary",text:a.content,type:a.type,title:a.title,icon:a.icon,onOnSubmit:g,onClose:v[1]||(v[1]=R=>a.isOpen=!1)},{bottom:I(()=>[e("div",Ae,[e("div",Ye,[c(F,{text:"예",icon:"check",onClick:g}),c(F,{type:"warning",text:"아니요",icon:"xMark",onClick:v[0]||(v[0]=R=>a.isOpen=!1)})])])]),_:1},8,["text","type","title","icon"])):U("",!0)],64))}}),Ke=(u,m)=>u?!0:m?!1:null,P=(u,m)=>u.map(t=>({content:t.cmntCtt,createUserId:t.displayInputrName,parentCommentId:t.hrnkCmntId,id:t.cmntId,noticeId:m,inputDateTime:t.inputDtm,inputUserName:t.displayInputrName,inputUserDeptName:"",likeCount:t.likeCnt,dislikeCount:t.dislikeCnt,isLiked:t.rdrLike,isDisliked:t.rdrDislike,isDeleted:t.delYn==="Y",updateDateTime:t.updtDtm,deleteYn:t.delYn,parentId:t.hrnkCmntId,depth:t.cmntDepth,childComments:P(t.children,m),isReplying:!1,isEditing:!1,unlikeCount:t.dislikeCnt,userLikeStatus:Ke(t.rdrLike,t.rdrDislike),rdrLike:t.rdrLike,rdrDislike:t.rdrDislike})),Fe=(u,m)=>({rptrBbId:m,hrnkCmntId:u.parentCommentId,cmntCtt:u.content,displayInputrNm:u.createUserId}),E={LIKE:0,DISLIKE:1,NONE:-1},Je=N({__name:"ReporterBoardComment",props:{commentList:{},currentId:{},isLoadingComments:{type:Boolean},commentCount:{}},emits:["on-refresh"],setup(u,{emit:m}){const t=m,s=u,l=Z(),{getChDivId:n}=ee(),d=x(!1),_=x([]),k=x([]),b=async o=>{if(!s.currentId)return;(await l.community.reporterBoard.createComment(s.currentId,Fe(o,s.currentId))).success&&(t("on-refresh"),window.Notify.success({message:K.communityReporterBoard.createComment}))},a=async()=>{t("on-refresh")},f=async o=>{if(!s.currentId)return;(await l.community.reporterBoard.deleteComment(s.currentId,o)).success&&(t("on-refresh"),window.Notify.success({message:K.communityReporterBoard.deleteComment}))},y=async o=>{if(!s.currentId)return;d.value=!0;const r=await l.community.reporterBoard.reactComment(s.currentId,o,E.NONE);r!=null&&r.success&&t("on-refresh"),d.value=!1},g=async(o,r)=>{if(!s.currentId)return;d.value=!0;const i=await l.community.reporterBoard.reactComment(s.currentId,o,r==="like"?E.LIKE:E.DISLIKE);i!=null&&i.success&&t("on-refresh"),d.value=!1},w=async(o,r,i,v,R)=>{if(!(s.isLoadingComments||d.value)){if(i){if(r){await y(o);return}await g(o,"dislike");return}if(R){if(!r){await y(o);return}await g(o,"like");return}await g(o,r?"like":"dislike")}},B=async o=>{const r=_.value.find(i=>i.id===o);r&&(r.isReplying=!0)},S=async()=>{const o={chDivId:n,useYn:"Y",delYn:"N",size:1e4},r=await l.community.reporterBoard.getUsers(o);r.success&&(k.value=r.data.content.map(i=>({id:i.id,name:i.userNm})))};return te(async()=>{await S()}),se(()=>[s.commentList,s.currentId],()=>{if(!s.currentId){_.value=[];return}_.value=P(s.commentList??[],s.currentId)},{immediate:!0}),(o,r)=>(C(),A("div",null,[c(ie,{"parent-id":o.currentId,"user-list":k.value,"comment-list":_.value,"comment-count":o.commentCount,onOnSubmit:b,onOnRefresh:a,onOnDelete:f,onOnLikeComment:w,onOnReply:B},null,8,["parent-id","user-list","comment-list","comment-count"])]))}});export{Je as _,Xe as a,P as c};
