import{d as $,a as y,c as b,Y as s,a5 as S,u as Y,bR as tt,a0 as C,j as o,G as i,k as V,t as et,a6 as at,a1 as M,w as D,X as st,a2 as ot,aD as A,o as Z,F as nt,az as it,bQ as rt,ab as lt,aa as ct,l as O,V as dt,an as T,h as P,ao as ut,K as U,ah as j,ap as mt}from"./index-eLyz9_Ts.js";import{_ as pt}from"./ListAttachment.vue_vue_type_script_setup_true_lang-0WeCQZi2.js";import{_ as ft}from"./ContentHeaderButtons.vue_vue_type_script_setup_true_lang-Db8CUXqr.js";import{_ as vt}from"./GDatePicker.vue_vue_type_style_index_0_lang-aP5TJiAZ.js";import{u as E}from"./use-model-wrapper-XtiLc3Xd.js";import{b as G}from"./board-enum-vaB9eTnG.js";import{G as _t}from"./GSingleSelect-7u8H0FdH.js";import{_ as yt}from"./AttachFile.vue_vue_type_script_setup_true_lang-4bXpMLKb.js";import{_ as xt}from"./ConfirmModal.vue_vue_type_script_setup_true_lang-k_ZxaDhN.js";import{_ as I}from"./ModalButton.vue_vue_type_script_setup_true_lang-WIw8hxFk.js";import{F as gt}from"./file-division-code-x51qUgaH.js";import{u as wt}from"./file-Gx0JxWZZ.js";import{_ as ht}from"./VDCEditor.vue_vue_type_script_setup_true_lang-IhnNo6sk.js";const bt={width:"19",height:"19",viewBox:"0 0 19 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ct=$({__name:"TitleIcon",props:{color:{}},setup(g){return(d,r)=>(y(),b("svg",bt,r[0]||(r[0]=[s("path",{d:"M14.5 7.24023C14.2167 7.24023 13.9792 7.1444 13.7875 6.95273C13.5958 6.76107 13.5 6.52357 13.5 6.24023V2.24023C13.5 1.9569 13.5958 1.7194 13.7875 1.52773C13.9792 1.33607 14.2167 1.24023 14.5 1.24023H17.5C17.7833 1.24023 18.0208 1.33607 18.2125 1.52773C18.4042 1.7194 18.5 1.9569 18.5 2.24023V3.24023H17V2.74023H15V5.74023H17V5.24023H18.5V6.24023C18.5 6.52357 18.4042 6.76107 18.2125 6.95273C18.0208 7.1444 17.7833 7.24023 17.5 7.24023H14.5ZM7 7.24023V1.24023H11C11.2833 1.24023 11.5208 1.33607 11.7125 1.52773C11.9042 1.7194 12 1.9569 12 2.24023V3.24023C12 3.52357 11.9042 3.76107 11.7125 3.95273C11.5208 4.1444 11.2833 4.24023 11 4.24023C11.2833 4.24023 11.5208 4.33607 11.7125 4.52773C11.9042 4.7194 12 4.9569 12 5.24023V6.24023C12 6.52357 11.9042 6.76107 11.7125 6.95273C11.5208 7.1444 11.2833 7.24023 11 7.24023H7ZM8.5 3.49023H10.5V2.74023H8.5V3.49023ZM8.5 5.74023H10.5V4.99023H8.5V5.74023ZM0.5 7.24023V2.24023C0.5 1.9569 0.595833 1.7194 0.7875 1.52773C0.979167 1.33607 1.21667 1.24023 1.5 1.24023H4.5C4.78333 1.24023 5.02083 1.33607 5.2125 1.52773C5.40417 1.7194 5.5 1.9569 5.5 2.24023V7.24023H4V5.74023H2V7.24023H0.5ZM2 4.24023H4V2.74023H2V4.24023Z",fill:"#2977D9"},null,-1),s("path",{d:"M7.76406 17.7579L3.72656 13.7204L4.73594 12.7111L7.76406 15.7392L14.263 9.24023L15.2724 10.2496L7.76406 17.7579Z",fill:"#2977D9"},null,-1)])))}}),Vt={class:"border-t flex items-center justify-between m-[-0.5rem] mb-0 px-2 py-1 min-h-[50px] bg-primary-gray-900 border-b border-primary-gray-surface-500 dark:bg-dark"},kt={class:"font-medium font-roboto text-primary-black-500 text-sm"},$t={class:"ml-auto"},Bt=$({__name:"PrivateBroadcastingCreateHeader",emits:["on-save","on-close"],setup(g,{emit:d}){const r=d,{t:_}=S(),l=Y(),{onClose:u}=tt(l),x=[{id:1,label:_("PersonalArticle.저장"),action:()=>r("on-save")},{id:2,label:_("PersonalArticle.닫기"),action:u}];return(m,w)=>(y(),b("div",Vt,[s("p",kt,C(o(_)("PrivateBroadcasting.민방 작성")),1),s("div",$t,[i(ft,{"menu-items":x,"custom-class-text":"md:!text-xs"})])]))}}),Dt={class:"text-primary-gray-40 dark:text-white mt-2 space-y-2 font-bold"},Nt={class:"flex items-center justify-start mb-4 gap-6"},Ht={class:"font-normal"},Mt={class:"flex items-center gap-2"},Pt={class:"w-[80px] text-right shrink-0"},Ut={class:"flex items-center gap-2"},It={class:"w-[80px] text-right shrink-0"},St={class:"flex items-center gap-2"},Lt={class:"w-[80px] text-right shrink-0"},Ft={class:"flex items-center gap-2"},Ot={class:"w-[80px] text-right shrink-0 pt-1.5"},Tt={class:"flex gap-2 pt-2"},jt={class:"flex-grow"},Yt=$({__name:"PrivateBroadcastingInfo",props:{dataDetail:{}},emits:["update:dataDetail"],setup(g,{emit:d}){const{t:r}=S(),_=g,l=d,u=G.categoryCode.filter(c=>c.code!==null),x=V(u[0]),m=E(_,l,"dataDetail"),w=c=>{m.value.categoryCode.code=c.code};return et(()=>_.dataDetail.categoryCode,c=>{x.value=c}),(c,e)=>(y(),b("div",Dt,[s("div",Nt,[i(at,{icon:"custom-chevron",size:"w-[17px] h-[17px]"}),s("p",Ht,C(o(r)("PrivateBroadcasting.상세정보")),1)]),s("div",Mt,[s("p",Pt,C(o(r)("PrivateBroadcasting.종류")),1),i(_t,{modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=f=>x.value=f),intent:"primary","track-by":"code","item-label":"description",options:o(u),"allow-empty":!1,class:"w-full !min-h-[25px]","custom-class":"font-normal","onSelect:value":w},null,8,["modelValue","options"])]),s("div",Ut,[s("p",It,C(o(r)("PrivateBroadcasting.작성자")),1),i(M,{modelValue:o(m).userNm,"onUpdate:modelValue":e[1]||(e[1]=f=>o(m).userNm=f),intent:"primary",class:"w-full font-normal","custom-input-class":"font-roboto",readonly:""},null,8,["modelValue"]),i(M,{modelValue:o(m).deptNm,"onUpdate:modelValue":e[2]||(e[2]=f=>o(m).deptNm=f),intent:"primary",class:"w-full font-normal","custom-input-class":"font-roboto",readonly:""},null,8,["modelValue"])]),s("div",St,[s("p",Lt,C(o(r)("PrivateBroadcasting.작성")),1),i(M,{modelValue:o(m).commYn,"onUpdate:modelValue":e[3]||(e[3]=f=>o(m).commYn=f),intent:"primary",class:"w-full font-normal","custom-input-class":"font-roboto",readonly:""},null,8,["modelValue"])]),s("div",Ft,[s("p",Ot,C(o(r)("PrivateBroadcasting.작성일")),1),i(vt,{modelValue:o(m).wrDtm,"onUpdate:modelValue":e[4]||(e[4]=f=>o(m).wrDtm=f),class:"w-[150px] mt-[-5px]","custom-input-class":"h-[27px] font-normal text-sm",intent:"primary"},null,8,["modelValue"])]),s("div",Tt,[e[5]||(e[5]=s("p",{class:"w-[80px]"},null,-1)),s("div",jt,[i(ot,{class:"!bg-dark-secondary text-white text-sm font-bold hover:!bg-primary h-[29px] w-[89px] !rounded-[6px]"},{default:D(()=>[st(C(o(r)("PrivateBroadcasting.권한설정")),1)]),_:1})])])]))}}),At={type:"button",class:"border border-primary-gray-30 bg-primary-gray-90 flex items-center justify-center w-[25px] h-[25px] cursor-pointer transition hover:opacity-70"},Zt=$({__name:"GTitleButton",setup(g){return(d,r)=>(y(),b("button",At,[i(o(Ct))]))}}),Et={class:"flex gap-2"},Gt=["innerHTML"],Rt=$({__name:"PrivateBroadcastingForm",props:{dataDetail:{}},emits:["on-change-title","on-change-content"],setup(g,{emit:d}){const r=d,_=g,l=V(),u=E(_,r,"dataDetail"),x=A(),m=V(),w=V(),c=(k,v)=>{const H=k.split(" ").map(a=>v.includes(a)?`<span class="wrong-text">${a}</span>`:a).join(" ");l.value=H},e=async()=>{const k={value:u.value.titl},v=await x.spellChecker.basic.spellChecker(k);v!=null&&v.message?window.Notify.success({message:v.message}):(window.Notify.success({message:"잘못된 단어"}),m.value=v.data.wrongWordResponseDto.map(h=>h.wrongWord),c(u.value.titl,m.value))},f=()=>{u.value.titl=w.value.innerText};return Z(()=>{setTimeout(()=>{l.value=u.value.titl},300)}),(k,v)=>(y(),b(nt,null,[s("div",Et,[s("div",{ref_key:"titleRef",ref:w,class:"border border-primary-gray-30 w-[800px] h-[25px] px-2 py-[3px] overflow-x-auto outline-none text-primary-gray-999 font-roboto dark:text-white",contenteditable:"",onInput:f,innerHTML:l.value},null,40,Gt),i(Zt,{onClick:e})]),i(ht,{content:o(u).ctt,"editor-class":"h-full","onUpdate:content":v[0]||(v[0]=h=>o(u).ctt=h)},null,8,["content"])],64))}}),Wt=it(Rt,[["__scopeId","data-v-220ceb1b"]]),Qt={class:"dark:text-white text-xs"},zt={class:"flex h-[calc(100%-124px)] overflow-y-hidden pt-2 gap-2"},Kt={class:"space-y-4 flex flex-col flex-grow h-full p-2 border border-primary-gray-999 rounded-[4px]"},Xt={class:"flex flex-col h-full w-[395px] shrink-0 py-2 px-1 border border-primary-gray-999 rounded-[4px]"},qt={class:"px-11 h-[50px] border-t border-primary-gray-surface flex items-center justify-center"},Jt={key:0,class:"flex items-center justify-center gap-x-2 p-2 w-full"},te={key:1,class:"flex items-center justify-center gap-x-2 w-full"},fe=$({__name:"PrivateBroadcastingCreateAndEdit",props:{id:{}},setup(g){const d=g,r=Y(),{moveListPrivateBroadcasting:_}=mt(),{t:l}=S(),u=A(),{fileUpload:x}=wt(),m=[{id:1,name:l("Community.상세정보")},{id:2,name:l("Community.첨부파일")}],w=V(!1),c=V([]),e=V({titl:"",ctt:"",wrDtm:rt,categoryCode:{code:G.categoryCode[1].code}}),{userMngId:f}=lt(),{getUserInfo:k,fetchUser:v}=ct(),h=O(()=>k),H=async()=>{const n=await v(f);return n!=null&&n.success?n.data:!1},a=dt({isOpen:!1,title:"확인",content:"삭제 하시겠습니까?",type:"confirm",case:"confirm",icon:"customQuestionMark"}),B=O(()=>!!d.id),R=()=>{a.isOpen=!0,a.title="확인",a.content=B.value?`${l("Community.내용이 변경되었습니다")}.
${l("Community.저장하시겠습니까?")}`:l("Community.저장하시겠습니까?"),a.type="confirm",a.case=B.value?"edit":"create",a.icon="customQuestionMark"},W=()=>{a.isOpen=!0,a.title="Information",a.content=l("Community.제목을 입력하여 주세요"),a.type="basic",a.case="check-title",a.icon="customInfo"},L=async n=>{if(n)try{const t=await u.cuesheet.privateBroadcasting.findOne(n);t!=null&&t.success&&(e.value={...e.value,...t.data},e.value.userNm=t.data.inputrNm,e.value.deptNm=t.data.inputDeptNm,t.data.attcFiles.length&&(w.value=!0,c.value=t.data.attcFiles))}catch(t){console.log(t)}},Q=async()=>{var p;if(!c.value.length)return[];const n=(p=c==null?void 0:c.value)==null?void 0:p.map(async N=>{if(N.type){const J={fileName:N.name,fileDivisionCode:gt.MyArticle.id,publicYn:"Y",file:N},F=await x(J);if(F.success)return F.data.id}else return N.id});return await Promise.all(n)},z=async(n,t)=>{const p=await u.cuesheet.privateBroadcasting.update(n,t);p!=null&&p.success?(window.Notify.success({message:j.privateBroadcasting.update}),_(r,"Edit")):window.Notify.error({message:p.msg})},K=async n=>{const t=await u.cuesheet.privateBroadcasting.create(n);t!=null&&t.success?(window.Notify.success({message:j.privateBroadcasting.create}),_(r)):window.Notify.error({message:t.msg})},X=()=>{if(e.value.titl===""){W();return}R()},q=async()=>{var t;a.isOpen=!1;const n={titl:e.value.titl,ctt:e.value.ctt,wrDtm:e.value.wrDtm,accessUserDeptId:[h.value.userId],accessUserDeptNm:["def","abc"],commBrdcBbCateCd:(t=e.value.categoryCode)==null?void 0:t.code,attcFileIds:await Q()};if(B.value&&d.id){await z(d.id,n),await L(d.id);return}await K(n)};return Z(async()=>{const n=await H();if(e.value.commYn=(n==null?void 0:n.commYn)==="Y"?"지역민방":"SBS",B.value&&d.id){await L(d.id);return}e.value.userNm=h.value.userNm,e.value.deptNm=h.value.deptNm}),(n,t)=>(y(),b("div",Qt,[i(Bt,{id:d.id,"is-edit":B.value,onOnSave:X},null,8,["id","is-edit"]),s("div",zt,[s("div",Kt,[i(Wt,{"data-detail":e.value,"onUpdate:dataDetail":t[0]||(t[0]=p=>e.value=p)},null,8,["data-detail"])]),s("div",Xt,[s("div",null,[i(ut,{"is-plain-text-mode":!0,"overflow-class":!0,tabs:m,"is-compact-mode":!0,class:"justify-center space-y-4"},{default:D(()=>[i(o(T),null,{default:D(()=>[i(Yt,{"data-detail":e.value,"onUpdate:dataDetail":t[1]||(t[1]=p=>e.value=p)},null,8,["data-detail"])]),_:1}),i(o(T),null,{default:D(()=>[w.value?(y(),P(pt,{key:0,"attachment-list":c.value,"custom-class":"min-h-[135px] !space-y-1 text-[11px] text-primary-gray-40","custom-text":"font-roboto","custom-download":"!w-[30px] !pr-2","show-order":!1,"show-date":!1},null,8,["attachment-list"])):(y(),P(yt,{key:1,"custom-class-area":"!min-h-[129px]",class:"text-[10px]","file-list":c.value},null,8,["file-list"]))]),_:1})]),_:1})])])]),a.isOpen?(y(),P(xt,{key:0,"use-slot":"",intent:"secondary",text:a.content,type:a.type,title:a.title,icon:a.icon,onClose:t[4]||(t[4]=p=>a.isOpen=!1)},{bottom:D(()=>[s("div",qt,[a.type==="basic"?(y(),b("div",Jt,[i(I,{text:"OK",icon:"check",onClick:t[2]||(t[2]=p=>a.isOpen=!1)})])):U("",!0),a.type==="confirm"?(y(),b("div",te,[i(I,{text:o(l)("Community.예"),icon:"check",onClick:q},null,8,["text"]),i(I,{type:"warning",text:o(l)("Community.아니요"),icon:"xMark",onClick:t[3]||(t[3]=p=>a.isOpen=!1)},null,8,["text"])])):U("",!0)])]),_:1},8,["text","type","title","icon"])):U("",!0)]))}});export{fe as _};
