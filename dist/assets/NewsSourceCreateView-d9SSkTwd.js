import{_ as B,c as k}from"./NewsSourceHeader.vue_vue_type_script_setup_true_lang-7Ke_zHhg.js";import{k as S,aq as E,ap as I,ah as P,d as y,a as f,h as w,w as t,X as O,af as A,G as o,a1 as i,Y as c,a2 as V,a3 as R,c as g,a0 as G,K as N,l as j,a7 as q,ao as L,j as b,as as K,a4 as $}from"./index-eLyz9_Ts.js";import"./journalist-QNhBHHjf.js";import"./organization-qjYuRO6g.js";import{u as X}from"./news-source-d-EIoPzs.js";import{c as z,a as F,u as H,b as M}from"./index.esm-Hbr0u7mK.js";import{G as J}from"./GTextarea-5GIFD2Mo.js";import{_ as u}from"./FormItem.vue_vue_type_script_setup_true_lang-ZXQ_7x89.js";import{_ as Q}from"./OpenTypeSelect.vue_vue_type_script_setup_true_lang-iyP-3dNY.js";import{_ as W}from"./PermissionSettingModal.vue_vue_type_script_setup_true_lang-Cz5aOmSI.js";import{_ as Z}from"./ConfirmModal.vue_vue_type_script_setup_true_lang-k_ZxaDhN.js";import"./buttons-3hbXC8Cn.js";import"./ContentHeaderButtons.vue_vue_type_script_setup_true_lang-Db8CUXqr.js";/* empty css                                                                  */import"./GSingleSelect-7u8H0FdH.js";import"./vue-multiselect-Yz8FsF-E.js";import"./use-model-wrapper-XtiLc3Xd.js";import"./FormLabel.vue_vue_type_script_setup_true_lang-SB4ukE1P.js";import"./OrganizationSelect.vue_vue_type_script_setup_true_lang-BNuugYEX.js";function D(){const e=S(),{moveNewsSourceList:l}=I(),{deleteTabBy:a,getActiveTab:s}=E();return{formRef:e,closedTabAndMovePage:()=>{a(s),l()},handleFormButton:async()=>{var d;if(e.value)try{await((d=e.value)==null?void 0:d.onSubmitNewsSource())}catch(m){console.error("Failed onSubmitNewsSource",m)}}}}function ee(e){const l=X(),{createNewsSource:a}=l,s=S(),r=S();return{formRef:s,handleCreateNewsSource:m=>{r.value=m,e==null||e.onBeforeCreate()},createNewsSourceItem:async()=>{try{console.log("actions..",r.value),(await a(r.value)).success&&(window.Notify.success({message:P.newsSource.success.create}),e==null||e.onCreateSuccess())}catch(m){console.error("Failed NewsSource Create",m)}}}}const oe=z({providerName:F().required("이름을 입력해주세요."),openYn:F().required("공개여부를 선택해주세요.")});function se(){const{handleSubmit:e}=H({validationSchema:oe,validateOnMount:!1}),{value:l,errorMessage:a}=M("providerName",void 0,{validateOnValueUpdate:!1}),{value:s,errorMessage:r}=M("openYn",void 0,{validateOnValueUpdate:!1});return{providerName:l,providerNameError:a,openYn:s,openYnError:r,handleSubmit:e}}const T=e=>({providerName:(e==null?void 0:e.providerName)??"",companyName:(e==null?void 0:e.companyName)??"",phoneNumber:(e==null?void 0:e.phoneNumber)??"",phoneNumber2:(e==null?void 0:e.phoneNumber2)??"",expertDivision:(e==null?void 0:e.expertDivision)??"",memo:(e==null?void 0:e.memo)??"",openYn:(e==null?void 0:e.openYn)??""}),re=e=>({publishDivisionCode:"all",providerName:e.providerName,companyName:e.companyName,phoneNumber:e.phoneNumber,memo:e.memo,openYn:e.openYn}),ne={class:"flex justify-center my-2"},te=y({__name:"NewsSourceSearchModal",emits:["close"],setup(e,{emit:l}){const a=l,s=()=>{a("close")};return(r,n)=>(f(),w(R,{"modal-calss":"w-1/3",onClose:s},{title:t(()=>n[0]||(n[0]=[O("취재원 상세검색")])),content:t(()=>[c("div",null,[o(u,{label:"일자"},{default:t(()=>[o(A)]),_:1}),o(u,{label:"검색어"},{default:t(()=>[o(i)]),_:1}),o(u,{label:"이름"},{default:t(()=>[o(i)]),_:1}),o(u,{label:"전문가구분"}),o(u,{label:"소속"},{default:t(()=>[o(i)]),_:1}),o(u,{label:"핸드폰1"},{default:t(()=>[o(i)]),_:1}),o(u,{label:"핸드폰2"},{default:t(()=>[o(i)]),_:1}),o(u,{label:"비고"},{default:t(()=>[o(i)]),_:1})])]),bottom:t(()=>[c("div",ne,[o(V,{"button-text":"검색"})])]),_:1}))}}),ae={class:"p-2 space-y-2"},le={class:"flex flex-col w-full"},ue={key:0,class:"text-error text-xs mt-1"},me={class:"flex justify-center"},U="primary",ce=y({__name:"NewsSourceCreateDetailInfo",props:{openYn:{},openYnError:{}},emits:["update:openYn"],setup(e,{emit:l}){const a=l,s=S({newsSourceSearch:!1,permission:!1}),r={modal:{toggleNewsSourceSearchModal:()=>{s.value.newsSourceSearch=!s.value.newsSourceSearch},togglePermissionModal:()=>{s.value.permission=!s.value.permission}},openType:{onChange:n=>{a("update:openYn",n)}}};return(n,d)=>(f(),g("div",null,[c("div",ae,[o(u,{label:"작성자"},{default:t(()=>[o(i,{intent:U,disabled:""}),o(i,{intent:U,disabled:""}),o(V,{"button-text":"상세검색",onClick:r.modal.toggleNewsSourceSearchModal},null,8,["onClick"])]),_:1}),o(u,{label:"공개여부"},{default:t(()=>[c("div",le,[o(Q,{"model-value":n.openYn,class:"w-full","onUpdate:modelValue":r.openType.onChange},null,8,["model-value","onUpdate:modelValue"]),n.openYnError?(f(),g("span",ue,G(n.openYnError),1)):N("",!0)])]),_:1})]),c("div",me,[o(V,{"button-text":"권한설정",onClick:r.modal.togglePermissionModal},null,8,["onClick"])]),s.value.newsSourceSearch?(f(),w(te,{key:0,onClose:r.modal.toggleNewsSourceSearchModal},null,8,["onClose"])):N("",!0),s.value.permission?(f(),w(W,{key:1,onClose:r.modal.togglePermissionModal},null,8,["onClose"])):N("",!0)]))}}),de={class:"w-full h-full p-0.5 bg-white dark:bg-dark-grid rounded-md"},pe=y({__name:"NewsSourceCreateTabPanel",props:{newsSourceData:{},openYn:{},openYnError:{}},emits:["update:openYn"],setup(e,{emit:l}){const a=l,s=S({detailInfo:!0,attachmentFile:!0}),r=j(()=>[{id:1,name:"상세정보",isShow:s.value.detailInfo},{id:2,name:"첨부파일",isShow:s.value.attachmentFile}]);return(n,d)=>{const m=q("tab-panel");return f(),g("div",de,[o(L,{tabs:r.value,"is-plain-text-mode":!0,"is-compact-mode":!0},{default:t(()=>[s.value.detailInfo?(f(),w(m,{key:0,unmount:!1,class:"pt-2"},{default:t(()=>[o(ce,{class:"mt-2","open-yn":n.openYn,"open-yn-error":n.openYnError,"onUpdate:openYn":d[0]||(d[0]=C=>a("update:openYn",C))},null,8,["open-yn","open-yn-error"])]),_:1})):N("",!0),s.value.attachmentFile?(f(),w(m,{key:1,unmount:!1,class:"pt-2"})):N("",!0)]),_:1},8,["tabs"])])}}}),ie={class:"flex h-[calc(100vh-160px)]"},fe={class:"flex flex-col w-[70%] border p-2"},_e={class:"flex flex-col gap-y-2"},ve={class:"grid grid-cols-2 gap-1"},be={class:"grid grid-cols-2 gap-1"},Se={class:"grid grid-cols-2 gap-1"},Ne={class:"bg-gray-200 p-2 mt-2 rounded-md"},we={class:"w-[30%] border p-2"},he=y({__name:"NewsSourceForm",props:{mode:{},formData:{}},emits:["on-submit-news-source"],setup(e,{expose:l,emit:a}){const s=e,r=a,{providerName:n,providerNameError:d,openYn:m,openYnError:C,handleSubmit:Y}=se(),p=S(s.mode==="create"?T():s.formData??T()),x={form:{onSubmit:Y(async()=>{const h=re({...p.value,providerName:n.value});r("on-submit-news-source",h)})},detail:{onUpdateOpenYn:h=>{m.value=h,p.value.openYn=h}}};return l({onSubmitNewsSource:x.form.onSubmit}),(h,_)=>(f(),g("div",ie,[c("div",fe,[c("div",_e,[c("div",ve,[o(u,{label:"이름"},{default:t(()=>[o(i,{modelValue:b(n),"onUpdate:modelValue":_[0]||(_[0]=v=>K(n)?n.value=v:null),"error-msg":b(d)},null,8,["modelValue","error-msg"])]),_:1}),o(u,{label:"소속"},{default:t(()=>[o(i,{modelValue:p.value.companyName,"onUpdate:modelValue":_[1]||(_[1]=v=>p.value.companyName=v)},null,8,["modelValue"])]),_:1})]),c("div",be,[o(u,{label:"핸드폰1"},{default:t(()=>[o($,{modelValue:p.value.phoneNumber,"onUpdate:modelValue":_[2]||(_[2]=v=>p.value.phoneNumber=v),"mask-format":"###-####-####",placeholder:"010-1234-1234"},null,8,["modelValue"])]),_:1}),o(u,{label:"핸드폰2"},{default:t(()=>[o($,{modelValue:p.value.phoneNumber2,"onUpdate:modelValue":_[3]||(_[3]=v=>p.value.phoneNumber2=v),"mask-format":"###-####-####",placeholder:"010-1234-1234"},null,8,["modelValue"])]),_:1})]),c("div",Se,[o(u,{label:"전문가 구분"},{default:t(()=>[o(i)]),_:1})])]),c("div",Ne,[o(J,{modelValue:p.value.memo,"onUpdate:modelValue":_[4]||(_[4]=v=>p.value.memo=v),label:"비고",rows:25},null,8,["modelValue"])])]),c("div",we,[o(pe,{"news-source-data":{},"open-yn":b(m),"open-yn-error":b(C),"onUpdate:openYn":x.detail.onUpdateOpenYn},null,8,["open-yn","open-yn-error","onUpdate:openYn"])])]))}}),Ge=y({__name:"NewsSourceCreateView",setup(e){const{formRef:l,closedTabAndMovePage:a,handleFormButton:s}=D(),r=S({submit:!1}),{handleCreateNewsSource:n,createNewsSourceItem:d}=ee({onBeforeCreate:()=>{r.value.submit=!0},onCreateSuccess:()=>{r.value.submit=!1,a()}}),m=k({actionLabel:"저장",onAction:s,onClose:a,showPrint:!0});return(C,Y)=>(f(),g("div",null,[o(B,{"is-show-search":!1,"menu-items":b(m)},null,8,["menu-items"]),o(he,{ref_key:"formRef",ref:l,mode:"create",class:"mt-2",onOnSubmitNewsSource:b(n)},null,8,["onOnSubmitNewsSource"]),r.value.submit?(f(),w(Z,{key:0,text:"취재원 저장하시겠습니까?",onOnSubmit:b(d),onClose:Y[0]||(Y[0]=p=>r.value.submit=!1)},null,8,["onOnSubmit"])):N("",!0)]))}});export{Ge as default};
