import{l as F,aZ as R,a_ as k,a$ as H,d as V,aq as $,ac as j,k as i,b2 as S,V as G,o as q,a as M,c as J,G as g,j as h,Y as v,h as z,K,ae as P,b0 as Z,b1 as Q,ah as w,ap as W}from"./index-eLyz9_Ts.js";import"./journalist-QNhBHHjf.js";import"./organization-qjYuRO6g.js";import{m as X}from"./map-api-response-QNIeEJ9n.js";import{a as tt}from"./time-formatter-ySAnBDjB.js";import{_ as et}from"./ArticleHeader.vue_vue_type_script_setup_true_lang-yXyrXb9T.js";import{_ as at,a as rt}from"./ArticleTabPanel.vue_vue_type_script_setup_true_lang-AIjmoLGW.js";import"./vue-multiselect-Yz8FsF-E.js";import"./GSingleSelect-7u8H0FdH.js";import"./sam-tw0uWIQ_.js";import"./purify.es-OZOo_0xz.js";import"./spell-check-OnBbfX8h.js";/* empty css                                                                  */import"./GDatePicker.vue_vue_type_style_index_0_lang-aP5TJiAZ.js";import{A as it}from"./article-type.code-5cb8riL1.js";import"./program-omP_c4K3.js";import{_ as ot}from"./ConfirmModal.vue_vue_type_script_setup_true_lang-k_ZxaDhN.js";import"./code-mapper-C6rl9hti.js";/* empty css                                                                    *//* empty css                                                                        */import"./tag-Q73uuSte.js";import"./category-zIRntbmZ.js";import"./department-wnuBQoCo.js";import"./GEditor.vue_vue_type_style_index_0_lang-FifEywK1.js";import"./file-Gx0JxWZZ.js";import"./GVideoPlayer-1SUF8s3O.js";import"./main-sHItgwS4.js";import"./vue-resizable.umd.min-blE9hPz6.js";import"./use-pagination-JgK9yJDA.js";import"./ContentHeaderButtons.vue_vue_type_script_setup_true_lang-Db8CUXqr.js";import"./FormItem.vue_vue_type_script_setup_true_lang-ZXQ_7x89.js";import"./use-model-wrapper-XtiLc3Xd.js";import"./OrganizationSelect.vue_vue_type_script_setup_true_lang-BNuugYEX.js";import"./ArticleTypeSelect.vue_vue_type_script_setup_true_lang-Kp5wzGNr.js";import"./ProgramSelect.vue_vue_type_script_setup_true_lang-UHoCrnxw.js";import"./CuesheetPrompter-o2cqkH-a.js";import"./cuesheet-item-code-_LsFMWbX.js";import"./ArticleFormatSelect.vue_vue_type_script_setup_true_lang-0vSziBpo.js";import"./VDCEditor.vue_vue_type_script_setup_true_lang-IhnNo6sk.js";import"./file-division-code-x51qUgaH.js";import"./edtior.helper-P5juSeN5.js";import"./ArticleFileTabPanel.vue_vue_type_script_setup_true_lang-Yk1q8ET1.js";import"./GTextarea-5GIFD2Mo.js";import"./FileDropzone.vue_vue_type_script_setup_true_lang-SVeHifZw.js";import"./FileListView.vue_vue_type_script_setup_true_lang-A40KFqZZ.js";import"./GNoData.vue_vue_type_script_setup_true_lang-rWUb5JCO.js";import"./SpellCheckerModal.vue_vue_type_script_setup_true_lang-Vt6XDlm8.js";import"./GMovableModal.vue_vue_type_script_setup_true_lang-elQvXjL0.js";import"./PageLoader.vue_vue_type_script_setup_true_lang-ZvbvX14z.js";import"./GDateTimePicker-bSYwb_xW.js";import"./use-date-GeeGTbYh.js";import"./ArticleDivisionSelect.vue_vue_type_script_setup_true_lang-Ln9_DwnO.js";import"./UserSearchModal.vue_vue_type_script_setup_true_lang-iHw_FmsN.js";import"./make-grid-column-aeLSdEws.js";import"./PermissionSettingModal.vue_vue_type_script_setup_true_lang-Cz5aOmSI.js";import"./FormLabel.vue_vue_type_script_setup_true_lang-SB4ukE1P.js";import"./vue.runtime.esm-bundler-3P3R-Xon.js";function lt(r){return{editMenuItems:F(()=>[{id:1,label:"CG의뢰"},{id:2,label:"취재의뢰"},{id:3,label:"편집의뢰"},{id:4,label:"오디오"},{id:5,label:"기획서"},{id:6,label:"개인이관",action:r.onPersonalTransfer},{id:7,label:"인터넷이관"},{id:8,label:"수퍼작성"},{id:9,label:"수퍼제작"},{id:10,label:"영상보기"},{id:11,label:"이력저장"},{id:12,label:"저장",action:r.onUpdate},{id:13,label:"인쇄"},{id:14,label:"권한설정"},{id:15,label:"데스킹 요청"},{id:16,label:"닫기",action:r.onClose}])}}function nt(r,n,f){return{editParams:s=>{const T=R(s);return{artclOrd:0,artclTitl:r.articleTitle,artclCtt:s,artclTypCd:String(r.articleType.id),artclTypCdNm:r.articleType.name,artclDivCd:"div_0001",artclDivDtm:"2024-12-09 12:00:00",artclCateId:"",artclCateNm:"",artclClass:"class_001",apprvTypCd:"apprv_typ_000",prdDivCd:"",ancMentCtt:"",brdcPgmId:r.articleDetailItem.program.id,brdcPgmNm:"",brdcSchdDtm:tt(r.articleDetailItem.brdcSchdDtm),artclCttTime:k(n,H(r.articleEditorState.reporterTextArray)),ancMentCttTime:0,deptId:1,memo:"",orgArtclId:"",brdcCnt:"",attcFileYn:"N",notiYn:"N",lckYn:"N",urgYn:"N",delYn:"N",disYn:"N",priority:"",capFnshYn:"N",capFnshDtm:"",lckDtm:"",apprvTypDtm:"",artclExtTime:0,chDivId:1,chDivNm:"SBS",chDivCd:"SBS",userGrpId:"",apprvrId:"",lckrId:"",srcDivCd:"",rptrId:1,rptrNm:"administrator",inputrId:1,inputrNm:"administrator",updtrId:1,orgInputrNm:"administrator",orgRptrNm:"administrator",orgChNm:"SBS",orgChDivId:1,appDivCd:"NRS",inputDtm:"",updtDtm:f,coveragePlanId:"",capList:T,tagIdList:[],articleLinkCreateDtoList:[],articleAttachmentFileCreateDtoList:[],artclFormatCd:String(r.articleFormat.id)}}}}const st={class:"flex flex-wrap justify-between"},ct={class:"mt-2 flex flex-col h-[calc(100vh-150px)] w-[69.5%] p-2.5 border rounded-md"},dt={class:"w-[30%]"},ve=V({__name:"ArticleEditView",props:{id:{},query:{}},setup(r){const n=r,{deleteTabBy:f,getActiveTab:N}=$(),{moveArticleList:s}=W(),T=j(),{fetchArticle:Y,editArticle:E,speed:U,personalTransferArticle:x}=T,c=i(""),d=i(""),C=i("00:00"),y=i("00:00"),A=i("00:00"),m=i(it.STRAIGHT),p=i(S.Broadcasting),l=G({deptNm:"",brdcSchdDtm:"",ancMentCttTime:C,artclCttTime:y,inputDtm:"",apprvTypDtm:"",program:{id:"",brdcPgmNm:"",channel:{chDivId:1}}}),u=i({anchorTextArray:[""],reporterTextArray:[""],captionArray:[]}),b=i(!1),L=F(()=>P().startOf("day").format("YYYY-MM-DD HH:mm:ss")),I=i([]),B=async()=>{try{const a=await Y(n.id);if(a.success){const t=X(a.data,"fetchArticle");m.value={id:a.data.artclTypCd,name:a.data.artclTypCdNm,label:a.data.artclTypCdNm};const e=S.values.find(o=>o.id===t.articleFormat)||{id:t.articleFormat,name:"",label:"",codeId:void 0};p.value=e,d.value=t.articleTitle,u.value=Z({artclTypCd:t.artclTypCd,capList:t.capList,ancMentCtt:t.ancMentCtt||JSON.stringify([`
`]),artclCtt:t.artclCtt||JSON.stringify([`
`])}),c.value=t.artclCtt,Object.keys(t).forEach(o=>{if(o in l)switch(o){case"brdcSchdDtm":case"inputDtm":l[o]=Q(t[o]);break;default:l[o]=t[o]}}),l.program={id:t.brdcPgmId,brdcPgmNm:t.brdcPgmNm}}}catch(a){console.error("getArticle Error",a)}},D={navigation:{onClose:()=>{f(N),s()}},data:{onUpdate:async()=>{try{const{editParams:a}=nt({articleTitle:d.value,articleType:m.value,articleFormat:p.value,articleEditorState:u.value,articleDetailItem:l},U,L.value),t=a(c.value);(await E(n.id,t)).success&&window.Notify.success({message:w.article.success.edit})}catch(a){console.log("Failed Article Update",a)}},onPersonalTransfer:async()=>{try{const a=n.id,t={changeReporter:!0,changeScheduledDay:!0,reportLocation:"class_000",scheduledDay:P().format("YYYY-MM-DD HH:mm:ss"),replaceArticle:!0};(await x(Number(a),t)).success&&(b.value=!0)}catch(a){window.Notify.error({message:w.article.failed.transfer}),console.error("articleView onPersonalTransfer Error",a)}}}},{editMenuItems:_}=lt({onUpdate:D.data.onUpdate,onPersonalTransfer:D.data.onPersonalTransfer,onClose:D.navigation.onClose}),O=async()=>{await B()};return q(()=>{O()}),(a,t)=>(M(),J("div",null,[g(et,{"menu-items":h(_),"is-show-search":!1},null,8,["menu-items"]),v("div",st,[v("div",ct,[g(at,{content:c.value,"onUpdate:content":t[0]||(t[0]=e=>c.value=e),"article-type":m.value,"onUpdate:articleType":t[1]||(t[1]=e=>m.value=e),"article-format":p.value,"onUpdate:articleFormat":t[2]||(t[2]=e=>p.value=e),title:d.value,"onUpdate:title":t[3]||(t[3]=e=>d.value=e),"anc-ment-ctt-time":C.value,"onUpdate:ancMentCttTime":t[4]||(t[4]=e=>C.value=e),"article-time":y.value,"onUpdate:articleTime":t[5]||(t[5]=e=>y.value=e),"report-time":A.value,"onUpdate:reportTime":t[6]||(t[6]=e=>A.value=e),"article-editor-state":u.value,"onUpdate:articleEditorState":t[7]||(t[7]=e=>u.value=e),mode:"edit"},null,8,["content","article-type","article-format","title","anc-ment-ctt-time","article-time","report-time","article-editor-state"])]),v("div",dt,[g(rt,{"article-detail-info-data":l,"onUpdate:articleDetailInfoData":t[8]||(t[8]=e=>l=e),"article-file-data":I.value,"onUpdate:articleFileData":t[9]||(t[9]=e=>I.value=e),mode:"edit"},null,8,["article-detail-info-data","article-file-data"])])]),v("div",null,[b.value?(M(),z(h(ot),{key:0,type:"basic",text:"개인기사로 전송이 완료되었습니다",onClose:t[10]||(t[10]=e=>b.value=!1)})):K("",!0)])]))}});export{ve as default};
