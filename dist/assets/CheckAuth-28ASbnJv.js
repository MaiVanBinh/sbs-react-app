import{d as p,u as d,e as l,f as m,o as f,R as r,a as w,c as h,b as g}from"./index-eLyz9_Ts.js";const k=p({__name:"CheckAuth",setup(A){const s=d(),a=l(),{checkAuthSsoToken:c,setAccessToken:i}=m(),{swalConfirm:u}=g();f(async()=>{const o={};Object.keys(s.query).length>0&&Object.entries(s.query).forEach(([e,t])=>{Array.isArray(t)?o[e]=t.join(","):t!==null&&(o[e]=t)}),o.channelId="1",o.appDivCd="web",o.agentId="3",o.secureToken=o.token;try{const e=await c(o);e.data.resultCode==="000000"?(i(e.data.accessToken),window.localStorage.setItem("savedAccountId",e.data.secureSessionId),await a.push({name:r.Home})):(window.localStorage.getItem("popup")&&localStorage.removeItem("popup"),localStorage.removeItem("savedAccountId"),n(e.data.resultMessage))}catch(e){(window.localStorage.getItem("popup")||"")&&localStorage.removeItem("popup"),console.error(e),n("An unknown error occurred.")}});const n=async o=>{await u({title:`<div class="space-y-1"><div>${o}</div><div>ID/PW 로그인 화면으로 이동합니다.</div></div>`,showCancelButton:!1}).then(async e=>{e.isConfirmed&&await a.push({name:r.Login})})};return(o,e)=>(w(),h("div"))}});export{k as default};
