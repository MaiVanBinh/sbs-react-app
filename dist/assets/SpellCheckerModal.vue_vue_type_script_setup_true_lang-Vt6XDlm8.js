import{d as q,a5 as N,k as h,o as V,aU as W,a as n,h as y,w as v,Y as s,a0 as x,j as F,c as d,G as j,K as b,F as S,C,X as T}from"./index-eLyz9_Ts.js";import{_ as P}from"./GMovableModal.vue_vue_type_script_setup_true_lang-elQvXjL0.js";import{u as G}from"./spell-check-OnBbfX8h.js";import{_ as K}from"./PageLoader.vue_vue_type_script_setup_true_lang-ZvbvX14z.js";import{_ as R}from"./GNoData.vue_vue_type_script_setup_true_lang-rWUb5JCO.js";const U={class:"text-white text-sm"},X={key:0},Y={key:1,class:"p-4 flex w-full h-full space-x-4"},z={class:"w-1/2 bg-gray-100 dark:bg-dark h-full overflow-auto border dark:border-dark-border p-2 rounded-md"},J=["innerHTML"],Q={key:1,class:"w-1/2 h-full p-2 dark:bg-dark-secondary rounded-md border dark:border-dark-border overflow-auto space-y-2"},Z={class:"space-y-2"},ee={class:"items-center text-left text-base"},te=["onClick"],re={class:"space-x-2"},se=["onClick"],ae=["innerHTML"],ie=q({__name:"SpellCheckerModal",props:{editorData:{type:Object,default:()=>({anchorTextArray:[""],reporterTextArray:[""],captionArray:[]})},articleType:{type:String,default:""}},emits:["close"],setup(w,{emit:A}){const u=w,{t:$}=N(),E=A,g=h(""),f=h(""),i=h([]),m=h(!1),L=G(),{fetchSpellCheck:M}=L,k=(l,a,t)=>{const r=document.getElementById(`err-${a}`);r&&(r.innerText=l,r.classList.remove("text-red-500"),r.classList.remove("text-blue-500"),r.classList.add(`text-${t}-500`))},I=(l,a)=>{const t=(e,c,p,_)=>`${e.substring(0,c)}<span id="err-${_}" class="text-red-500">${e.substring(c,p)}</span>${e.substring(p)}`;let r=l,o=0;return a.forEach((e,c)=>{const{nStart:p,nEnd:_}=e,H=p+o,O=_+o;r=t(r,H,O,c),o+=`<span id="err-${c}" class="text-red-500"></span>`.length}),r},D=async()=>{try{m.value=!0;const l={value:g.value,weakOption:!1},t=(await M(l)).data,o=new DOMParser().parseFromString(t,"text/xml");i.value=Array.from(o.querySelectorAll("PnuErrorWord")).map(e=>{const c=Array.from(e.querySelectorAll("CandWordList CandWord")).map(p=>p.textContent);return{orgStr:e.querySelector("OrgStr").textContent,candWords:c,help:e.querySelector("Help").textContent,nErrorIdx:parseInt(e.getAttribute("nErrorIdx"),10),nStart:parseInt(e.getAttribute("m_nStart"),10),nEnd:parseInt(e.getAttribute("m_nEnd"),10)}}),console.log("errorWords",i.value),f.value=I(g.value,i.value)}catch(l){console.error("SpellCheckerModal: getSpellCheck Error ",l)}finally{m.value=!1}},B=()=>{E("close")};return V(()=>{g.value=u.articleType===W.Report.id?`${u.editorData.anchorTextArray[0]}
${u.editorData.reporterTextArray[0]}`:`${u.editorData.reporterTextArray[0]}`,D()}),(l,a)=>(n(),y(P,{width:"w-[800px]",height:"h-[650px]",bottom:"90px",right:"132px",onClose:B},{title:v(()=>[s("span",U,x(F($)("Modal.Article.SpellCheckModal.맞춤법_검사")),1)]),content:v(()=>[m.value?(n(),d("div",X,[j(K)])):(n(),d("div",Y,[s("div",z,[s("div",{class:"h-full whitespace-pre-line",innerHTML:f.value},null,8,J)]),i.value.length?b("",!0):(n(),y(R,{key:0,class:"w-1/2"})),i.value.length?(n(),d("div",Q,[(n(!0),d(S,null,C(i.value,(t,r)=>(n(),d("div",{key:r,class:"bg-gray-100 dark:text-dark-gray-200 text-xs flex items-center space-x-5 border dark:border-dark-border dark:bg-dark rounded-lg px-2 py-1 border-gray-300 overflow-x-hidden overflow-y-hidden scrollbar-hide"},[s("div",Z,[s("div",ee,[s("div",null,[a[0]||(a[0]=T(" 입력어 : ")),s("span",{class:"text-red-500 line-through cursor-pointer",onClick:o=>k(t.orgStr,t.nErrorIdx,"red")},x(t.orgStr),9,te)]),s("div",re,[a[1]||(a[1]=T(" 대체어 : ")),(n(!0),d(S,null,C(t.candWords,(o,e)=>(n(),d("span",{key:e,class:"text-blue-500 cursor-pointer",onClick:c=>k(o,t.nErrorIdx,"blue")},x(o)+x(e<t.candWords.length-1?", ":""),9,se))),128))])]),s("div",null,[s("div",{innerHTML:t.help},null,8,ae)])])]))),128))])):b("",!0)]))]),_:1}))}});export{ie as _};
