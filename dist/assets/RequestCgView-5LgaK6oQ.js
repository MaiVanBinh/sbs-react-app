import{g as ce,M as $e}from"./splitpanes.es-dEoJOrhT.js";import{u as Pe}from"./use-dynamic-height-sJY6bk6Z.js";import{ah as Ve,V as Le,l as ee,k as w,ae as Z,d as Y,a as L,c as H,Y as t,G as r,j as q,as as pe,Q as ae,aj as le,au as ve,a2 as N,h as T,B as Ee,am as he,o as ue,w as R,X as te,a1 as F,a0 as k,al as re,K as W,a3 as de,v as Me,cu as De,ax as Oe,az as Ce,t as se,ch as Ue,F as Ae,cB as Fe,H as Ge,eD as Te,ai as Be}from"./index-eLyz9_Ts.js";import{u as ie}from"./request-graphic-xqdmz7er.js";import{w as Ye}from"./pagination-_g_gc7Ms.js";import{c as we,a as qe,d as We,u as je,b as ge}from"./index.esm-Hbr0u7mK.js";import{B as Q}from"./buttons-3hbXC8Cn.js";import{u as He}from"./use-pagination-JgK9yJDA.js";import{a as ze}from"./journalist-QNhBHHjf.js";import"./organization-qjYuRO6g.js";import{u as Qe}from"./use-grid-T1qwEXJA.js";import{u as Ke}from"./use-intersection-observer-N6Mx7i0c.js";import{u as Xe}from"./use-button-actions-XDAYYO3a.js";import{_ as Je}from"./GDatePicker.vue_vue_type_style_index_0_lang-aP5TJiAZ.js";import{_ as Ze}from"./ContentHeaderButtons.vue_vue_type_script_setup_true_lang-Db8CUXqr.js";import{_ as Se}from"./ProgramSelect.vue_vue_type_script_setup_true_lang-UHoCrnxw.js";import{_ as ke}from"./OrganizationSelect.vue_vue_type_script_setup_true_lang-BNuugYEX.js";import{u as et}from"./use-model-wrapper-XtiLc3Xd.js";import{R as tt,_ as ot}from"./RequestCgTabPanel.vue_vue_type_script_setup_true_lang-M_q8k_mH.js";import{G as st}from"./GSingleSelect-7u8H0FdH.js";import{c as b}from"./make-grid-column-aeLSdEws.js";import{_ as rt}from"./BaseList.vue_vue_type_script_setup_true_lang-aJzIAVm-.js";import{_ as G}from"./FormItem.vue_vue_type_script_setup_true_lang-ZXQ_7x89.js";import{_ as nt}from"./ConfirmModal.vue_vue_type_script_setup_true_lang-k_ZxaDhN.js";import{u as at}from"./file-Gx0JxWZZ.js";import{F as lt}from"./file-division-code-x51qUgaH.js";import{G as ut}from"./GDateTimePicker-bSYwb_xW.js";import{_ as K}from"./FormLabel.vue_vue_type_script_setup_true_lang-SB4ukE1P.js";import{_ as dt}from"./FileDropzone.vue_vue_type_script_setup_true_lang-SVeHifZw.js";import{_ as it}from"./ReferenceVideoModal.vue_vue_type_script_setup_true_lang-PAl24_pJ.js";import{_ as mt}from"./UserSearchModal.vue_vue_type_script_setup_true_lang-iHw_FmsN.js";import"./use-date-GeeGTbYh.js";import"./program-omP_c4K3.js";import"./html-dompurify.util-O5obI-gX.js";import"./purify.es-OZOo_0xz.js";import"./IconLabel.vue_vue_type_script_setup_true_lang-1rGRsbjZ.js";import"./FileListView.vue_vue_type_script_setup_true_lang-A40KFqZZ.js";import"./GNoData.vue_vue_type_script_setup_true_lang-rWUb5JCO.js";import"./GVideoPlayer-1SUF8s3O.js";import"./main-sHItgwS4.js";import"./vue.runtime.esm-bundler-3P3R-Xon.js";import"./CommentV2.vue_vue_type_script_setup_true_lang-bRF2pab6.js";import"./vue-multiselect-Yz8FsF-E.js";/* empty css                                                                        */function ct(e){const p={startDate:e.startDate,endDate:e.endDate};return e.statusCode!==null&&e.statusCode!==""&&(p.statusCode=e.statusCode),e.brdcPgmId&&(p.brdcPgmId=e.brdcPgmId),p}function gt(e,p,s){const v=ie(),{fetchRequestGraphics:g,fetchRequestGraphic:u,fetchAttachmentFile:o,createRequestGraphic:a,updateRequestGraphicStatus:h,createRequestGraphicComplement:y,uploadAttachmentFile:$}=v;return{getRequestCgList:async()=>{var _;try{const S=Ye.default(ct({startDate:e.value.startDate,endDate:e.value.endDate,statusCode:e.value.statusCode,brdcPgmId:e.value.brdcPgmId}),p),c=await g(S);c.success&&((_=s==null?void 0:s.onListSuccess)==null||_.call(s,c.data))}catch(S){console.error("useRequestCgActions getRequestCgList Error",S)}},getRequestCg:async _=>{var S;try{const c=await u(_);c.success&&((S=s==null?void 0:s.onDetailSuccess)==null||S.call(s,c.data))}catch(c){console.error("useRequestCgActions getRequestCg Error",c)}},getRequestCgAttachmentFileList:async _=>{var S;try{const c=await o(_);c.success&&((S=s==null?void 0:s.onFileListSuccess)==null||S.call(s,c.data))}catch(c){console.error("useRequestCgActions getRequestCgAttachmentFileList Error",c)}},createRequestCg:async _=>{var S;try{const c=await a(_);c.success&&(window.Notify.success({message:Ve.requestGraphic.success.create}),(S=s==null?void 0:s.onCreateSuccess)==null||S.call(s,c.success))}catch(c){console.error("useRequestCgActions createRequestGraphic Error",c)}},updateRequestCgStatus:async(_,S)=>{var c;try{(await h(_,S)).success&&((c=s==null?void 0:s.onUpdateStatusSuccess)==null||c.call(s,_))}catch(f){console.error("useRequestCgActions updateRequestCgStatus Error",f)}},createRequestCgComplement:async(_,S)=>{var c;try{const f=await y(_,S);f.success&&((c=s==null?void 0:s.onComplementSuccess)==null||c.call(s,f.data))}catch(f){console.error("useRequestCgActions createRequestCgComplement Error",f)}},uploadRequestCgAttachmentFile:async(_,S)=>{try{const c=await $(_,S);c.success&&console.log(c)}catch(c){console.error("useRequestCgActions uploadRequestCgAttachmentFile Error",c)}}}}function ft(e){const p=ie(),{fetchCommentList:s}=p;return{getCommentList:async g=>{var u;try{const o=await s(g);o.success&&((u=e==null?void 0:e.onCommentListSuccess)==null||u.call(e,o.data))}catch(o){console.error("useRequestCgCommentActions getCommentList Error",o)}}}}we({title:qe().required("의뢰 제목을 입력하세요")});Le({requestContent:"",articleContent:"",title:"",reporterDepartment:"",reporterId:0,reporterName:"",reporterPhone:"",reporterInPhone:"",programId:0,requestCount:0,sourceType:"",designerName:"",designerPhone:"",designerInPhone:""});function pt(e,p){return{menuItems:ee(()=>[{id:1,label:"신규",action:()=>p.requestCg(!0)},{id:2,label:"의뢰복사",disabled:e(Q.COPY),action:()=>p.requestCg(!1)},{id:3,label:"의뢰",disabled:e(Q.REQUEST),action:()=>p.onUpdateRequestStatus("0001")},{id:4,label:"의뢰취소",disabled:e(Q.REQUEST_CANCEL),action:()=>p.onUpdateRequestStatus("0005")},{id:5,label:"제작완료",disabled:e(Q.REQUEST_COMPLETE),action:()=>p.onUpdateRequestStatus("0004")},{id:5,label:"보완요청",disabled:e(Q.REQUEST_IMPROVEMENT),action:()=>p.onUpdateRequestStatus("0003")},{id:6,label:"인쇄"},{id:7,label:"닫기"}])}}function vt(){const e=w({desk:!1,designerManagement:!1,requestCreate:!1,confirmBasic:!1,confirm:!1});return{modals:e,toggleModal:s=>{e.value[s]=!e.value[s]}}}function _e(){const e={selectedRequestCg:w(),selectedRowIndex:w(),deskName:w("")},p={requestCgListData:w(),requestCgDetailData:w(),requestCgAttachmentFileData:w(),requestCgCommentData:w([]),requestCgFormData:w()},s=w({startDate:Z().format("YYYY-MM-DD"),endDate:Z().format("YYYY-MM-DD"),statusCode:"",brdcPgmId:0}),v=w({status:void 0,program:void 0}),g=w("new"),u=()=>{e.selectedRequestCg.value=""},o=ee(()=>e.selectedRequestCg.value);return{...e,...p,requestCgSearchCondition:s,filterState:v,requestCreateMode:g,clearSelection:u,hasSelectedItems:o}}function ht(e){return{onSearch:async()=>{var u;try{await((u=e==null?void 0:e.onSearch)==null?void 0:u.call(e))}catch(o){console.error("useRequsetCgSearchActions onSearch Error",o)}},onChangeDate:async u=>{try{await new Promise(o=>{var a;u&&((a=e==null?void 0:e.onUpdateSearchCondition)==null||a.call(e,{startDate:u,endDate:u})),o(null)})}catch(o){console.error("useRequestCgSearchActions onChangeDate Error",o)}},onChangeStatus:async u=>{try{await new Promise(o=>{var a;(a=e==null?void 0:e.onUpdateSearchCondition)==null||a.call(e,{statusCode:u}),o(null)})}catch(o){console.error("useRequestCgSearchActions onChangeStatus Error",o)}},onChangeProgram:async u=>{try{await new Promise(o=>{var a;(a=e==null?void 0:e.onUpdateSearchCondition)==null||a.call(e,{brdcPgmId:u}),o(null)})}catch(o){console.error("useRequestCgSearchActions onChangeProgram Error",o)}},onUpdateSearchCondition:e==null?void 0:e.onUpdateSearchCondition}}const Ct={class:"flex flex-col"},wt=Y({__name:"RequestCgStatusSelect",props:{modelValue:{default:""},placeholder:{default:"상태 별 전체"},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},selectLabel:{default:"선택"},deselectLabel:{default:"취소"},allowEmpty:{type:Boolean,default:!0},searchable:{type:Boolean,default:!1},required:{type:Boolean,default:!1},width:{default:"w-28"}},emits:["update:modelValue","on-selected"],setup(e,{emit:p}){const s=e,v=p,g=et(s,v,"modelValue"),u=a=>{g.value=a,v("update:modelValue",a),v("on-selected",a)},o=()=>{g.value="",v("update:modelValue",""),v("on-selected","")};return(a,h)=>(L(),H("div",{class:ae(a.width)},[t("div",Ct,[r(st,{modelValue:q(g),"onUpdate:modelValue":h[0]||(h[0]=y=>pe(g)?g.value=y:null),"track-by":"id","item-label":"label",intent:"primary",multiple:!1,options:q(tt),placeholder:a.placeholder,searchable:a.searchable,disabled:a.disabled||a.readonly,"select-label":a.selectLabel,"deselect-label":a.deselectLabel,"allow-empty":a.allowEmpty,required:a.required,"onSelect:value":u,"onRemove:value":o},null,8,["modelValue","options","placeholder","searchable","disabled","select-label","deselect-label","allow-empty","required"])])],2))}}),qt={class:"flex flex-wrap items-start"},St={class:"flex items-center gap-2 flex-1 min-w-[1000px]"},_t={class:"flex gap-x-1"},yt={class:"flex items-center gap-x-1"},xt={class:"flex gap-x-1 items-center"},Rt={class:"flex justify-end"},fe="primary",bt=Y({__name:"RequestCgHeader",props:{menuItems:{},isShowSearch:{type:Boolean,default:!0}},emits:["click:search","on-change-date","on-change-status","on-change-program","on-show-designer-management"],setup(e,{emit:p}){const s=p,v=_e(),{filterState:g}=v,u={search:{onSearch:()=>{s("click:search")}},filter:{onChangeDate:o=>{s("on-change-date",o)},onChangeStatus:o=>{s("on-change-status",(o==null?void 0:o.id)||"")},onChangeProgrm:o=>{s("on-change-program",o.id||0)}}};return(o,a)=>(L(),H("div",qt,[t("div",{class:ae(["w-full flex flex-wrap items-center gap-2 m-[-0.5rem] mb-0 px-2 py-2 bg-primary-gray-900 border-y border-primary-gray-surface-500 dark:bg-dark",o.isShowSearch?"justify-between":"justify-end"])},[le(t("div",St,[t("div",null,[r(ke,{"hide-first-depth":""})]),t("div",null,[r(Je,{intent:fe,label:"",class:"w-[9rem]","onUpdate:modelValue":u.filter.onChangeDate},null,8,["onUpdate:modelValue"])]),t("div",_t,[r(wt,{modelValue:q(g).status,"onUpdate:modelValue":a[0]||(a[0]=h=>q(g).status=h),onOnSelected:u.filter.onChangeStatus},null,8,["modelValue","onOnSelected"]),r(Se,{modelValue:q(g).program,"onUpdate:modelValue":a[1]||(a[1]=h=>q(g).program=h),label:"",class:"w-32",onOnSelected:u.filter.onChangeProgrm},null,8,["modelValue","onOnSelected"])]),t("div",yt,[r(N,{icon:"magnifying-glass",type:"tertiary",onClick:u.search.onSearch},null,8,["onClick"]),r(N,{"button-text":"상세검색",intent:fe,type:"tertiary"})]),t("div",xt,[r(N,{"button-text":"디자이너 관리",class:"bg-primary text-white",onClick:a[2]||(a[2]=h=>s("on-show-designer-management"))})])],512),[[ve,o.isShowSearch]]),t("div",Rt,[r(Ze,{"menu-items":o.menuItems},null,8,["menu-items"])])],2)]))}}),It=Y({__name:"RequestCgList",props:{rowData:{},pageInfo:{},selectedRowIndex:{}},setup(e){const p=[b({headerName:"NO",minWidth:60,valueGetter:"node.rowIndex",cellRenderer:s=>he(s)}),b({headerName:"상태",field:"statusCodeName",minWidth:100}),b({headerName:"취재부서",field:"reporterDepartmentName",minWidth:100,sortable:!0}),b({headerName:"요청자",field:"requesterName",minWidth:100,sortable:!0}),b({headerName:"디자이너",field:"designerName",minWidth:100,sortable:!0}),b({headerName:"제목",field:"title",minWidth:200,flex:1}),b({headerName:"요청건수",field:"reqCnt",minWidth:100}),b({headerName:"의뢰시간",field:"inputDateTime",minWidth:120,sortable:!0}),b({headerName:"배정시간",field:"assignDtm",minWidth:120,sortable:!0}),b({headerName:"완료시간",field:"compltDtm",minWidth:120,sortable:!0})];return(s,v)=>(L(),T(rt,Ee({"column-defs":p,"row-data":s.rowData,"page-info":s.pageInfo,"selected-row-index":s.selectedRowIndex},s.$attrs),null,16,["row-data","page-info","selected-row-index"]))}}),Nt={class:"flex flex-col gap-2"},$t={class:"flex flex-col gap-2"},Pt={class:"flex gap-2"},Vt={class:"flex gap-2"},Lt={class:"flex justify-center gap-2 mt-2"},Et={class:"h-[40vh]"},Mt={class:"text-xs text-right"},Dt={class:"flex justify-center"},Ot=Y({__name:"DesignerManagementModal",emits:["close"],setup(e,{emit:p}){const s=p,v=ie(),{fetchGraphicDesigners:g,createGraphicDesigner:u,deleteGraphicDesigner:o}=v,a=w([]),h=w(""),y=w(""),$=w(""),E=w(!1),m=w([]),P=w(""),D=ee(()=>`총 ${a.value.length}명`),V=async()=>{const n=await g();n.success&&(a.value=n.data)},M=()=>{h.value="",y.value="",$.value=""},B=n=>{m.value=n.filter(l=>l.selected).map(l=>l.data.id)},_=()=>{m.value=[]},S=async()=>{if(!h.value.trim()||!y.value.trim()||!$.value.trim())return;const n={userNm:h.value,phonNo:y.value,inphonNo:$.value};(await u(n)).success&&(V(),M())},c=(n,l)=>{const I=m.value.length;m.value=Array.isArray(n)?n:[n],P.value=I===1?"삭제하시겠습니까?":`${l} 외 ${I-1}인 삭제 하시겠습니까?`,E.value=!0},f=async()=>{if(!m.value.length)return;(await o(m.value)).success&&(E.value=!1,m.value=[],V())},d=()=>{m.value.length&&c(m.value)},i=[b({headerName:"",checkboxSelection:!0,maxWidth:40}),b({headerName:"번호",valueGetter:"node.rowIndex",cellRenderer:n=>he(n)}),b({headerName:"이름",field:"userNm"}),b({headerName:"전화번호",field:"phonNo"}),b({headerName:"내선번호",field:"inphonNo"}),b({headerName:"",cellRenderer:n=>{const l=document.createElement("div"),I=Me(N,{buttonText:"삭제",type:"text",onClick:()=>c(n.data.id,n.data.userNm)});return De({render:()=>I}).mount(l),l}})];return ue(()=>{V()}),(n,l)=>(L(),T(de,{"modal-class":"h-[70vh]",onClose:l[5]||(l[5]=I=>s("close"))},{title:R(()=>l[6]||(l[6]=[te("디자이너 관리")])),content:R(()=>[t("div",Nt,[t("div",null,[t("div",$t,[t("div",Pt,[r(G,{label:"이름"},{default:R(()=>[r(F,{modelValue:h.value,"onUpdate:modelValue":l[0]||(l[0]=I=>h.value=I)},null,8,["modelValue"])]),_:1})]),t("div",Vt,[t("div",null,[r(G,{label:"전화번호"},{default:R(()=>[r(F,{modelValue:y.value,"onUpdate:modelValue":l[1]||(l[1]=I=>y.value=I)},null,8,["modelValue"])]),_:1})]),t("div",null,[r(G,{label:"내선번호"},{default:R(()=>[r(F,{modelValue:$.value,"onUpdate:modelValue":l[2]||(l[2]=I=>$.value=I)},null,8,["modelValue"])]),_:1})])])]),t("div",Lt,[r(N,{"button-text":"등록",type:"primary",onClick:S}),r(N,{"button-text":"취소",type:"secondary",onClick:l[3]||(l[3]=I=>s("close"))})])]),t("div",Et,[t("div",Mt,k(D.value),1),r(re,{"column-defs":i,"row-data":a.value,"row-selection":"multiple",onSelectedRows:B,onDeselectedRows:_},null,8,["row-data"])]),t("div",Dt,[r(N,{"button-text":"선택삭제",disabled:!m.value.length,onClick:d},null,8,["disabled"])]),E.value?(L(),T(nt,{key:0,text:P.value,onOnSubmit:f,onClose:l[4]||(l[4]=I=>E.value=!1)},null,8,["text"])):W("",!0)])]),_:1}))}}),ne=e=>({title:(e==null?void 0:e.title)??"",requesterId:(e==null?void 0:e.requesterId)??0,requesterName:(e==null?void 0:e.requesterName)??"",requesterDepartmentName:(e==null?void 0:e.requesterDepartmentName)??"",requesterPhoneNumber:(e==null?void 0:e.requesterPhoneNumber)??"",requesterInterPhoneNumber:(e==null?void 0:e.requesterInterPhoneNumber)??"",brdcPgmId:(e==null?void 0:e.brdcPgmId)??0,brdcPgmName:(e==null?void 0:e.brdcPgmName)??"",requestDate:Z().format("YYYY-MM-DD HH:mm:ss"),reqCnt:(e==null?void 0:e.reqCnt)??0,content:(e==null?void 0:e.content)??"",drawingImage:e==null?void 0:e.drawingImage,attachments:[],referenceVideo:[],edlList:[],attachmentFileIdList:[]}),Ut=e=>e?{...ne(),title:`${e.title} (복사)`,requesterId:e.requesterId,requesterName:e.requesterName,requesterDepartmentName:e.requesterDepartmentName,requesterPhoneNumber:e.requesterPhoneNumber,requesterInterPhoneNumber:e.requesterInterPhoneNumber,brdcPgmId:e.brdcPgmId,brdcPgmName:e.brdcPgmName,reqCnt:e.reqCnt||0,content:e.content||"",requestDate:e.requestDate||Z().format("YYYY-MM-DD HH:mm:ss"),drawingImage:e.drawingImage}:ne(),At=e=>({title:e.title,content:e.content,brdcPgmId:e.brdcPgmId,reqCnt:Number(e.reqCnt),requesterId:e.requesterId,attachmentFileIdList:e.attachmentFileIdList?[...e.attachmentFileIdList]:[]}),Ft={class:"drawing-canvas-container"},Gt={class:"toolbar p-3 bg-gray-50 border-b flex flex-col items-center justify-between"},Tt={class:"flex items-center gap-3"},Bt={class:"flex items-center gap-2"},Yt=["value"],Wt={class:"flex items-center gap-2"},jt=["value"],Ht={class:"text-sm text-gray-500"},zt={class:"flex-1 p-4 bg-gray-100 overflow-hidden flex items-center justify-center"},Qt=Y({__name:"GDrawingCanvas",props:{width:{default:800},height:{default:600},initialColor:{default:"#000000"},initialLineWidth:{default:5}},emits:["save","update:drawing"],setup(e,{expose:p,emit:s}){const v=e,g=s,u=w(null),o=w(null),a=w(!1),h=w(v.initialColor),y=w(v.initialLineWidth),$=(f,d)=>{const i=f.getBoundingClientRect(),n=f.width/i.width,l=f.height/i.height;return{x:(d.clientX-i.left)*n,y:(d.clientY-i.top)*l}},E=f=>{if(!u.value||!o.value)return;a.value=!0,g("update:drawing",!0);const{x:d,y:i}=$(u.value,f);o.value.beginPath(),o.value.moveTo(d,i),o.value.lineTo(d,i),o.value.stroke()},m=f=>{if(!a.value||!o.value||!u.value)return;const{x:d,y:i}=$(u.value,f);o.value.lineTo(d,i),o.value.stroke()},P=()=>{a.value=!1,g("update:drawing",!1),o.value&&o.value.closePath()},D=()=>{!o.value||!u.value||o.value.clearRect(0,0,u.value.width,u.value.height)},V=f=>{o.value&&(h.value=f,o.value.strokeStyle=f)},M=f=>{o.value&&(y.value=f,o.value.lineWidth=f)},B=()=>{if(!u.value)return;const f=u.value.toDataURL("image/png");g("save",f)},_=()=>{if(!u.value)return;const f=u.value;if(o.value=f.getContext("2d"),!o.value)return;f.width=v.width,f.height=v.height;const d=o.value;d.strokeStyle=h.value,d.lineWidth=y.value,d.lineCap="round",d.lineJoin="round"},S=()=>{P()},c=()=>{P()};return ue(()=>{_()}),p({clear:D,changeColor:V,changeLineWidth:M,save:B}),(f,d)=>(L(),H("div",Ft,[t("div",Gt,[t("div",Tt,[t("div",Bt,[d[2]||(d[2]=t("label",{for:"drawing-color",class:"text-sm font-medium text-gray-600"},"색상:",-1)),t("input",{id:"drawing-color",type:"color",value:h.value,class:"w-8 h-8 rounded cursor-pointer","aria-label":"그리기 색상 선택",onInput:d[0]||(d[0]=i=>V(i.target.value))},null,40,Yt)]),t("div",Wt,[d[3]||(d[3]=t("label",{for:"line-width",class:"text-sm font-medium text-gray-600"},"선 굵기:",-1)),t("input",{id:"line-width",type:"range",value:y.value,min:"1",max:"20",class:"w-32","aria-label":"선 굵기 조절",onInput:d[1]||(d[1]=i=>M(Number(i.target.value)))},null,40,jt),t("span",Ht,k(y.value)+"px",1)]),t("div",{class:"tool-actions"},[t("button",{type:"button",class:"px-4 py-2 text-sm bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors duration-200 flex items-center gap-1",onClick:D},d[4]||(d[4]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),te(" 지우기 ")]))])]),t("div",zt,[t("canvas",{ref_key:"canvasRef",ref:u,class:"border rounded-lg bg-white shadow-sm cursor-pen max-w-full max-h-full",style:Oe({width:`${f.width}px`,height:`${f.height}px`}),tabindex:"0",onMousedown:E,onMousemove:m,onMouseup:P,onMouseleave:P,onMouseout:P,onFocusout:S,onBlur:c},null,36)])])]))}}),Kt=Ce(Qt,[["__scopeId","data-v-0c4b399c"]]),Xt={class:"flex flex-col h-[550px]"},Jt={class:"flex-1 min-h-0"},Zt={class:"flex justify-center gap-2 pt-4"},kt=Y({__name:"DrawingCanvasModal",props:{isOpen:{type:Boolean}},emits:["close","on-save"],setup(e,{emit:p}){const s=p,v=w(null),g=()=>{s("close")},u=async()=>{var o;try{await((o=v.value)==null?void 0:o.save())}catch(a){console.error("DrawingCanvasModal handleSave Error",a)}};return(o,a)=>o.isOpen?(L(),T(de,{key:0,"modal-class":"w-[800px]",onClose:a[1]||(a[1]=h=>s("close"))},{title:R(()=>a[2]||(a[2]=[t("div",{class:"flex items-center gap-2"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})]),te(" 펜으로 그리기 ")],-1)])),content:R(()=>[t("div",Xt,[t("div",Jt,[r(Kt,{ref_key:"drawingCanvasRef",ref:v,width:600,height:400,class:"h-full",onSave:a[0]||(a[0]=h=>s("on-save",h))},null,512)]),t("div",Zt,[r(N,{"button-text":"저장",onClick:u}),r(N,{"button-text":"닫기",type:"warning",onClick:g})])])]),_:1})):W("",!0)}}),eo=Ce(kt,[["__scopeId","data-v-b10a2411"]]),to=we({title:qe().required("의뢰 제목을 입력해주세요"),brdcPgmId:We().required("프로그램을 선택해주세요")});function oo(){const{handleSubmit:e}=je({validationSchema:to,validateOnMount:!1}),{value:p,errorMessage:s}=ge("title",void 0,{validateOnValueUpdate:!1}),{value:v,errorMessage:g}=ge("brdcPgmId",void 0,{validateOnValueUpdate:!1});return{title:p,titleError:s,brdcPgmId:v,brdcPgmIdError:g,handleSubmit:e}}const so={class:"space-y-2",style:{isolation:"isolate"}},ro={class:"border rounded-lg p-2 space-y-2"},no={class:"grid grid-cols-2 gap-4"},ao={class:"flex gap-2 flex-1"},lo={class:"flex gap-2 items-center flex-1"},uo={class:"grid grid-cols-2 gap-4"},io={class:"flex flex-col w-full"},mo={key:0,class:"text-error text-xs mt-1"},co={class:"flex items-center justify-between mb-2"},go={class:"border rounded-lg"},fo={class:"flex gap-2 mb-1"},po={class:"flex justify-between mb-1"},vo={class:"h-[150px] border rounded-lg"},ho={class:"flex justify-between mb-1"},Co={class:"h-[150px] border rounded-lg"},wo={class:"flex justify-center gap-x-2 mb-2"},O="primary",qo=Y({__name:"RequestCgCreateModal",props:{mode:{},formData:{}},emits:["close","on-submit"],setup(e,{emit:p}){const s=Fe(()=>Te(()=>import("./VDCEditor-T5P6DpLS.js"),__vite__mapDeps([0,1,2,3,4,5]))),v=e,g=p,{fileUpload:u}=at(),o=w(),a=w([]),h=w([]),y=w(null),$=ee(()=>v.mode==="new"?"CG의뢰":"CG의뢰 복사"),E=()=>v.mode==="copy"&&v.formData?Ut(v.formData):ne(),m=w(E()),P=w(!1),D=w(!1),V=w(!1),{title:M,titleError:B,brdcPgmId:_,brdcPgmIdError:S,handleSubmit:c}=oo(),f=[b({headerName:"NO",maxWidth:60}),b({headerName:"영상",maxWidth:100}),b({headerName:"미디어ID",maxWidth:120}),b({headerName:"제목"})],d={form:{submit:c(async()=>{m.value.attachmentFileIdList=h.value.length>0?h.value:[],m.value.title=M.value,m.value.brdcPgmId=_.value;const i=At(m.value);console.log("deubg submit form data :::: ",i),await g("on-submit",i)}),setContent:i=>{m.value.content=i}},file:{upload:async i=>{const n=i||a.value;if(!(n!=null&&n.length))return[];const l=n.map(async z=>{const oe={fileName:z.name,publicYn:"Y",fileDivisionCode:lt.Graphic.id,file:z},X=await u(oe);if(X.success)return X.data.id}),I=await Promise.all(l);return i&&(h.value=[...h.value||[],...I]),I}},modal:{drawing:()=>{P.value=!P.value},referenceVideo:()=>{D.value=!D.value},userSearch:()=>{V.value=!V.value}},drawing:{save:i=>{m.value.drawingImage=i,d.modal.drawing()}},userSearch:{select:i=>{if(i.length>0){const n=i[0];m.value.requesterId=Number(n.id),m.value.requesterDepartmentName=String(n.deptNm),m.value.requesterName=String(n.userNm),m.value.requesterPhoneNumber=String(n.phoneNumber),m.value.requesterInterPhoneNumber=String(n.inphonNo)}}}};return se(o,i=>{typeof i=="object"&&i!==null?_.value=i.id:_.value=i}),se(S,i=>{i&&Ge(()=>{y.value&&(y.value.$el.scrollIntoView({behavior:"smooth",block:"center"}),y.value.$el.focus())})}),se([()=>v.mode,()=>v.formData],([i,n])=>{if(i==="copy"&&n){const l=E();m.value=l,l.brdcPgmId&&(o.value=l.brdcPgmId,_.value=l.brdcPgmId)}},{immediate:!0}),(i,n)=>(L(),H(Ae,null,[r(de,{"modal-class":"w-1/2",onClose:n[6]||(n[6]=l=>g("close"))},{title:R(()=>[te(k($.value),1)]),content:R(()=>[t("div",so,[t("div",null,[r(K,{label:"상세정보",class:"mb-2"}),t("div",ro,[t("div",null,[r(G,{label:"의뢰제목",class:"flex items-center"},{default:R(()=>[r(F,{modelValue:q(M),"onUpdate:modelValue":n[0]||(n[0]=l=>pe(M)?M.value=l:null),class:"w-full",intent:O,"error-msg":q(B),placeholder:"의뢰 제목을 입력하세요"},null,8,["modelValue","error-msg"])]),_:1})]),t("div",no,[r(G,{label:"요청자",class:"flex items-center"},{default:R(()=>[t("div",ao,[r(F,{"model-value":m.value.requesterDepartmentName,intent:O,class:"flex-1",disabled:""},null,8,["model-value"]),r(F,{"model-value":m.value.requesterName,intent:O,class:"flex-1",disabled:""},null,8,["model-value"]),le(r(N,{icon:"users",intent:O,onClick:d.modal.userSearch},null,8,["onClick"]),[[ve,i.mode==="new"]])])]),_:1}),r(G,{label:"전화번호",class:"flex items-center"},{default:R(()=>[t("div",lo,[r(F,{"model-value":m.value.requesterPhoneNumber,intent:O,class:"flex-1",disabled:i.mode==="copy"},null,8,["model-value","disabled"]),n[7]||(n[7]=t("span",{class:"text-gray-500"},"/",-1)),r(F,{"model-value":m.value.requesterInterPhoneNumber,intent:O,class:"flex-1",disabled:""},null,8,["model-value"])])]),_:1})]),t("div",uo,[r(G,{label:"프로그램",class:"flex items-center"},{default:R(()=>[t("div",io,[r(Se,{ref_key:"programSelectRef",ref:y,modelValue:o.value,"onUpdate:modelValue":n[1]||(n[1]=l=>o.value=l),label:"",class:"flex-1"},null,8,["modelValue"]),q(S)?(L(),H("span",mo,k(q(S)),1)):W("",!0)])]),_:1}),r(G,{label:"의뢰일시",class:"flex items-center"},{default:R(()=>[r(ut,{"model-value":m.value.requestDate,intent:O,class:"w-full",disabled:""},null,8,["model-value"])]),_:1})]),t("div",null,[r(G,{label:"요청건수",class:"flex items-center"},{default:R(()=>[r(F,{modelValue:m.value.reqCnt,"onUpdate:modelValue":n[2]||(n[2]=l=>m.value.reqCnt=l),intent:O,class:"w-32",type:"number",min:0},null,8,["modelValue"]),n[8]||(n[8]=t("span",{class:"text-gray-500"},"건",-1))]),_:1})])])]),t("div",null,[t("div",null,[t("div",co,[r(K,{label:"첨부파일"}),r(N,{"button-text":"파일첨부하기",intent:O})]),t("div",go,[r(dt,{"file-data":a.value,"onUpdate:fileData":n[3]||(n[3]=l=>a.value=l),mode:"create",onOnUploadFile:d.file.upload},null,8,["file-data","onOnUploadFile"])])])]),t("div",null,[t("div",null,[t("div",fo,[r(K,{label:"의뢰내용"}),r(N,{icon:"pencilSquare",type:"tertiary",intent:O,onClick:d.modal.drawing},null,8,["onClick"])]),(L(),T(Ue,null,{default:R(()=>[r(q(s),{modelValue:m.value.content,"onUpdate:modelValue":n[4]||(n[4]=l=>m.value.content=l),content:""},null,8,["modelValue"])]),fallback:R(()=>n[9]||(n[9]=[t("div",{class:"h-[150px] border rounded-lg"},null,-1)])),_:1}))])]),t("div",null,[t("div",null,[t("div",null,[t("div",po,[r(K,{label:"참고영상"}),r(N,{"button-text":"추가",intent:O,onClick:d.modal.referenceVideo},null,8,["onClick"])]),t("div",vo,[r(re,{"column-defs":f,"header-height":25})])])])]),t("div",null,[t("div",null,[t("div",null,[t("div",ho,[r(K,{label:"EDL"}),r(N,{"button-text":"추가",intent:O,onClick:d.modal.referenceVideo},null,8,["onClick"])]),t("div",Co,[r(re,{"column-defs":f,"header-height":25})])])])])])]),bottom:R(()=>[t("div",wo,[r(N,{"button-text":"의뢰",onClick:d.form.submit},null,8,["onClick"]),r(N,{"button-text":"취소",type:"warning",onClick:n[5]||(n[5]=l=>g("close"))})])]),_:1}),r(eo,{"is-open":P.value,onClose:d.modal.drawing,onOnSave:d.drawing.save},null,8,["is-open","onClose","onOnSave"]),D.value?(L(),T(it,{key:0,onClose:d.modal.referenceVideo},null,8,["onClose"])):W("",!0),V.value?(L(),T(mt,{key:1,onSelectedRow:d.userSearch.select,onClose:d.modal.userSearch},null,8,["onSelectedRow","onClose"])):W("",!0)],64))}}),ms=Y({__name:"RequestCgView",setup(e){const{dynamicHeightVh:p}=Pe("h-[77vh]","h-[85vh]"),s=ze(),{modals:v,toggleModal:g}=vt(),{scrollGrid:u}=Qe(),o=w(null),a=_e(),{selectedRequestCg:h,selectedRowIndex:y,requestCgListData:$,requestCgDetailData:E,requestCgAttachmentFileData:m,requestCgCommentData:P,requestCgFormData:D,requestCgSearchCondition:V,requestCreateMode:M,clearSelection:B,hasSelectedItems:_}=a,{isActionDisabled:S}=Xe(_),c=He(),{pageInfo:f}=c,{getRequestCgList:d,getRequestCg:i,getRequestCgAttachmentFileList:n,createRequestCg:l,createRequestCgComplement:I,updateRequestCgStatus:z}=gt(V,c,{onListSuccess:C=>{var x;if($.value=C.content,(x=h.value)!=null&&x.id){const A=C.content.findIndex(U=>{var J;return U.id===((J=h.value)==null?void 0:J.id)});A!==-1&&(y.value=A)}},onDetailSuccess:C=>{E.value=C,D.value=C},onFileListSuccess:C=>{m.value=C},onCreateSuccess:C=>{C&&(g("requestCreate"),d())},onUpdateStatusSuccess:C=>{d(),i(C)}}),{observerTarget:oe,setupObserver:X}=Ke({onIntersect:async()=>{await d()}}),{onSearch:me,onChangeDate:ye,onChangeStatus:xe,onChangeProgram:Re}=ht({onSearch:async()=>{try{await d()}catch(C){console.error("RequestCgView onSearch Error",C)}},onUpdateSearchCondition:C=>{try{V.value={...V.value,...C},me()}catch(x){console.error("RequestCgView onUpdateSearchCondition Error",x)}}}),{getCommentList:be}=ft({onCommentListSuccess:C=>{P.value=C}}),j={row:{onSelect:async C=>{var x,A;if(C.length>0){y.value=C[0].rowIndex,h.value=((x=C[0])==null?void 0:x.data)??null;const U=(A=C[0])==null?void 0:A.data.id;try{await i(U),await n(U)}catch(J){console.error("RequestCgView onSelect Error",J)}}},onDeselect:()=>{y.value=0,B()}},data:{onRequestCreate:async C=>{try{await l(C)}catch(x){console.error("RequestCgView onRequestCreate Error",x)}},onComplementCreate:async C=>{try{if(h.value){const x={cmplmCtt:C};await I(h.value[0].id,x)}}catch(x){console.error("RequestCgView onComplementCreate Error",x)}}},tab:{onLoadComment:async()=>{h.value.id&&await be(h.value.id)}},request:{onRequestCg:C=>{M.value=C?"new":"copy",g("requestCreate")}},status:{updateRequestStatus:async(C,x,A)=>{try{await z(C,{statusCode:x,designerId:A||0})}catch(U){console.error("RequestCgView updateRequestStatus Error",U)}}}},Ie=C=>{switch(C.srcKey){case"rightScroll":{u(o.value,"right");break}case"leftScroll":{u(o.value,"left");break}case"create":{console.log("create console log..");break}}},{menuItems:Ne}=pt(S,{onUpdateRequestStatus:()=>z,requestCg:C=>j.request.onRequestCg(C)});return ue(()=>{X(),s.setShortKey()}),(C,x)=>{const A=Be("shortkey");return le((L(),H("div",{ref_key:"observerTarget",ref:oe,onShortkey:Ie},[r(bt,{"menu-items":q(Ne),"onClick:search":q(me),onOnShowDesignerManagement:x[0]||(x[0]=U=>q(g)("designerManagement")),onOnChangeDate:q(ye),onOnChangeStatus:q(xe),onOnChangeProgram:q(Re)},null,8,["menu-items","onClick:search","onOnChangeDate","onOnChangeStatus","onOnChangeProgram"]),t("div",null,[r(q($e),{class:"default-theme primary-theme"},{default:R(()=>[r(q(ce),{size:"50",class:"pt-2"},{default:R(()=>[t("div",{ref_key:"gridContainer",ref:o,class:ae(q(p))},[r(It,{class:"relative","row-data":q($)||[],"page-info":q(f),"selected-row-index":q(y),onOnRowSelect:j.row.onSelect,onOnRowDeselect:j.row.onDeselect},null,8,["row-data","page-info","selected-row-index","onOnRowSelect","onOnRowDeselect"])],2)]),_:1}),r(q(ce),null,{default:R(()=>[r(ot,{"detail-data":q(E),"attachment-file-data":q(m),onSubmitComplement:j.data.onComplementCreate,onUpdateRequestStatus:j.status.updateRequestStatus},null,8,["detail-data","attachment-file-data","onSubmitComplement","onUpdateRequestStatus"])]),_:1})]),_:1})]),t("div",null,[q(v).designerManagement?(L(),T(Ot,{key:0,onClose:x[1]||(x[1]=U=>q(g)("designerManagement"))})):W("",!0),q(v).requestCreate?(L(),T(qo,{key:1,mode:q(M),"form-data":q(D),onOnSubmit:j.data.onRequestCreate,onClose:x[2]||(x[2]=U=>q(g)("requestCreate"))},null,8,["mode","form-data","onOnSubmit"])):W("",!0)])],32)),[[A,q(s).currentShortkeys]])}}});export{ms as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/VDCEditor-T5P6DpLS.js","assets/VDCEditor.vue_vue_type_script_setup_true_lang-IhnNo6sk.js","assets/index-eLyz9_Ts.js","assets/index-2FptBV14.css","assets/file-Gx0JxWZZ.js","assets/file-division-code-x51qUgaH.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}