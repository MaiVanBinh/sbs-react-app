import{g as K,M as ee}from"./splitpanes.es-dEoJOrhT.js";import{k as N,l as S,d as V,a as m,c as v,Y as d,F as W,C as oe,Q as T,G as a,a6 as te,a0 as R,h as D,eE as ne,K as $,az as se,t as k,B as Q,H as X,am as re,ai as ie,w as _,a1 as C,$ as ae,X as J,a2 as Y,j as g,an as Z,ao as le,aj as de,o as ue,ap as ce}from"./index-eLyz9_Ts.js";import{u as me}from"./use-pagination-JgK9yJDA.js";import{u as ge}from"./use-intersection-observer-N6Mx7i0c.js";import{u as fe,I as we,a as ve,_ as he}from"./ForeignNewsHeader.vue_vue_type_script_setup_true_lang-QE55xmn5.js";import{w as pe}from"./pagination-_g_gc7Ms.js";import"./journalist-QNhBHHjf.js";import"./organization-qjYuRO6g.js";import{c as F}from"./make-grid-column-aeLSdEws.js";import{_ as ye}from"./BaseList.vue_vue_type_script_setup_true_lang-aJzIAVm-.js";import{u as Se}from"./use-dynamic-height-sJY6bk6Z.js";import{_ as _e}from"./FormLabel.vue_vue_type_script_setup_true_lang-SB4ukE1P.js";import{_ as E}from"./FormItem.vue_vue_type_script_setup_true_lang-ZXQ_7x89.js";import{G as xe}from"./GVideoPlayer-1SUF8s3O.js";import{G as Te}from"./GTextarea-5GIFD2Mo.js";import{_ as Ne}from"./ListViewToggle.vue_vue_type_script_setup_true_lang-ATgWoXP0.js";import"./index.esm-Hbr0u7mK.js";import"./GDatePicker.vue_vue_type_style_index_0_lang-aP5TJiAZ.js";import"./use-date-GeeGTbYh.js";import"./GSingleSelect-7u8H0FdH.js";import"./vue-multiselect-Yz8FsF-E.js";import"./use-model-wrapper-XtiLc3Xd.js";import"./ContentHeaderButtons.vue_vue_type_script_setup_true_lang-Db8CUXqr.js";/* empty css                                                                  */function Ce(e){const u={rcvDtm:e.rcvDtm,rcvYn:e.rcvYn};return e.item!==null&&e.item!==""&&(u.item=e.item),e.broad!==null&&(u.broad=e.broad),u}function Ie(e,u,l){const f=fe(),{fetchForeignNewsList:h,fetchForeignNews:s}=f;return{getForeignNewsList:async()=>{var o;try{const i=pe.default(Ce({rcvDtm:e.value.rcvDtm,rcvYn:e.value.rcvYn,item:e.value.item,broad:e.value.broad}),u);console.log("serachParams",i);const c=await h(i);c!=null&&c.success&&((o=l==null?void 0:l.onListSuccess)==null||o.call(l,c.data))}catch(i){console.error("useForeignNewsActions getForeignNewsList Error",i)}},getForeignNews:async o=>{var i;try{const c=await s(o);c!=null&&c.success&&((i=l==null?void 0:l.onDetailSuccess)==null||i.call(l,c.data))}catch(c){console.error("userForeignNewsActions getForeignNews Error",c)}}}}function De(e){const u=N(!1);return{onSearch:async()=>{var n;try{await((n=e==null?void 0:e.onSearch)==null?void 0:n.call(e))}catch(o){console.error("useForeignNewsSearchActions onSearch Error",o)}},onChangeDate:async n=>{try{await new Promise(o=>{var i;n&&((i=e==null?void 0:e.onUpdateSearchCondition)==null||i.call(e,{rcvDtm:n})),o(null)})}catch(o){console.error("useForeignNewsSearchActions onChangeDate Error",o)}},onChangeItemType:async n=>{try{await new Promise(o=>{var i;n&&((i=e==null?void 0:e.onUpdateSearchCondition)==null||i.call(e,{item:n})),o(null)})}catch(o){console.error("useForeignNewsSearchActions onChangeItemType Error",o)}},onChangeChannelType:async n=>{try{await new Promise(o=>{var i,c;n.id?(i=e==null?void 0:e.onUpdateSearchCondition)==null||i.call(e,{broad:[String(n.id)]}):(c=e==null?void 0:e.onUpdateSearchCondition)==null||c.call(e,{broad:[]}),o(null)})}catch(o){console.error("useForeignNewsSearchActions onChangeChannelType Error",o)}},showReceivedNewsList:u,onToggleExcolusitionReceived:async n=>{try{await new Promise(o=>{var i;(i=e==null?void 0:e.onUpdateSearchCondition)==null||i.call(e,{rcvYn:n}),o(null)})}catch(o){console.error("useForeignNewsSearchActions onToggleExcolusitionReceived Error",o)}}}}function Fe(e){return{menuItems:S(()=>[{id:1,label:"공용이관"},{id:2,label:"개인이관"},{id:3,label:"인터넷이관"},{id:4,label:"신규",action:e.moveNewForeignNews},{id:5,label:"교정"},{id:6,label:"복사"},{id:7,label:"삭제"},{id:8,label:"인쇄"},{id:9,label:"Post"},{id:10,label:"닫기"}])}}const Ee={class:"flex flex-col h-full"},Re={key:0,class:"flex-grow flex flex-col items-center justify-center text-gray-400 p-8"},$e={key:1,class:"flex-grow overflow-auto"},Pe={class:"grid grid-cols-4 xl:grid-cols-6 gap-4 p-4"},Oe=["onClick"],Le={class:"aspect-square overflow-hidden rounded-t-lg bg-gray-50 flex items-center justify-center"},Ve=["src","alt"],qe={key:1,class:"text-center text-gray-400"},Ae={class:"text-sm"},Be={class:"text-sm font-medium line-clamp-2 mt-1"},je={class:"mt-2"},Ge={key:2,class:"flex justify-center py-4"},ze=V({__name:"CardList",props:{rowData:{},pageInfo:{},isLoading:{type:Boolean},selectedItem:{default:void 0},noMediaText:{default:"연결된 미디어가 없습니다."}},emits:["on-card-select","on-change-page"],setup(e,{emit:u}){const l=e,f=S(()=>!l.rowData||l.rowData.length===0),h=t=>(console.log("debug item::::",t),l.selectedItem&&l.selectedItem.id===t.id),s=u;return(t,n)=>(m(),v("div",Ee,[f.value?(m(),v("div",Re,n[1]||(n[1]=[d("svg",{class:"w-16 h-16 mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1),d("p",{class:"text-lg font-medium"},"검색 결과가 없습니다",-1),d("p",{class:"text-sm mt-2"},"다른 검색 조건으로 다시 시도해 보세요",-1)]))):(m(),v("div",$e,[d("div",Pe,[(m(!0),v(W,null,oe(t.rowData,(o,i)=>(m(),v("div",{key:i,class:T(["bg-white rounded-lg shadow-sm hover:shadow-md transition-all duration-200 cursor-pointer",{"ring-2 ring-blue-500 shadow-lg transform scale-[1.02]":h(o),"hover:scale-[1.01]":!h(o)}]),onClick:c=>s("on-card-select",o)},[d("div",Le,[o.thumbnail?(m(),v("img",{key:0,src:o.thumbnail,alt:o.titl,class:"w-full h-full object-cover"},null,8,Ve)):(m(),v("div",qe,[a(te,{icon:"eyeSlash",class:"w-8 h-8 mx-auto mb-2"}),d("p",Ae,R(t.noMediaText),1)]))]),d("div",{class:T(["p-2",{"bg-blue-50":h(o)}])},[d("h3",Be,R(o.titl),1),d("div",je,[d("span",{class:T(["text-xs px-2 py-1 rounded",h(o)?"bg-blue-100":"bg-gray-100"])},R(o.item),3)])],2)],10,Oe))),128))])])),!f.value&&t.pageInfo.isShow?(m(),v("div",Ge,[t.pageInfo.isShow?(m(),D(ne,{key:0,"page-info":t.pageInfo,onOnChangePage:n[0]||(n[0]=o=>s("on-change-page",o))},null,8,["page-info"])):$("",!0)])):$("",!0)]))}}),Me=se(ze,[["__scopeId","data-v-4e2b4003"]]),Ue=V({__name:"ForeignNewsList",props:{isLoading:{type:Boolean},viewType:{default:"list"},rowData:{},customColumn:{default:void 0},pageInfo:{},selectedRowIndex:{default:0},isShowColumnSetting:{type:Boolean,default:!1},selectedItem:{default:void 0}},setup(e){const u=e,l=N(),f=s=>{if(l.value=s.api,u.selectedItem){const t=u.rowData.findIndex(n=>{var o;return n.id===((o=u.selectedItem)==null?void 0:o.id)});t>=0&&X(()=>{const n=l.value.getDisplayedRowAtIndex(t);n&&n.setSelected(!0)})}},h=[F({headerName:"NO",maxWidth:60,valueGetter:"node.rowIndex",cellRenderer:s=>re(s)}),F({headerName:"시각",maxWidth:100,sortable:!0}),F({headerName:"구분",field:"item",maxWidth:100,sortable:!0,cellRenderer:s=>{const t=Object.values(we).find(n=>n.id===s.value);return t?t.label:""}}),F({headerName:"방송사",field:"broad",maxWidth:100,sortable:!0}),F({headerName:"제목",field:"titl",flex:1})];return k(()=>u.viewType,s=>{s==="list"&&l.value&&u.selectedItem&&X(()=>{const t=u.rowData.findIndex(n=>{var o;return n.id===((o=u.selectedItem)==null?void 0:o.id)});if(t>=0){const n=l.value.getDisplayedRowAtIndex(t);n&&n.setSelected(!0)}})}),(s,t)=>s.viewType==="list"?(m(),D(ye,Q({key:0,"column-defs":h,"row-data":s.rowData,"page-info":s.pageInfo,"row-selection":"single","selected-row-index":s.selectedRowIndex},s.$attrs,{onOnGridReady:f}),null,16,["row-data","page-info","selected-row-index"])):(m(),D(Me,Q({key:1,"row-data":s.rowData,"page-info":s.pageInfo,"selected-item":s.selectedItem},s.$attrs),null,16,["row-data","page-info","selected-item"]))}}),Ye={class:"flex flex-col p-2 space-y-2"},He={class:"flex"},We={class:"flex gap-1"},be={class:"flex gap-1"},Ke={class:"flex relative"},Qe={key:1,class:"flex flex-col items-center justify-center gap-4 text-gray-500 mt-[5rem]"},Xe={key:1,class:"flex flex-col items-center justify-center gap-4 text-gray-500 mt-[5rem]"},I="primary",H="border border-gray-200 rounded-lg p-2",Je=V({__name:"ForeignNewsTabPanel",props:{foreignNewsData:{},isShowTranslation:{type:Boolean,default:!0},isShowSTT:{type:Boolean,default:!0}},emits:["request-translation","request-stt"],setup(e,{emit:u}){const l=e,f=u,{dynamicHeightVh:h}=Se("16","22"),s=N(16),t=N(!0),n=N(),o=N(),i=S(()=>({src:n.value,type:o.value})),c=S(()=>[{id:1,name:"영한번역",isShow:l.isShowTranslation},{id:2,name:"STT",isShow:l.isShowSTT}]),q=S(()=>""),P=S(()=>""),A=S(()=>({"transition-all duration-300":!0,"opacity-100 visible":t.value,"opacity-0 invisible":!t.value})),O=S(()=>({"transition-all duration-300":!0,"w-1/2":t.value,"w-full":!t.value})),B=S(()=>"absolute transition-all duration-300 top-0 right-0 border-l-0 hover:bg-gray-100 w-10 h-10 z-10"),j=S(()=>({icon:t.value?"arrowsPointingIn":"arrowsPointingOut"})),G=()=>{f("request-translation")},z=()=>{f("request-stt")},M=()=>{t.value=!t.value};return k(()=>h.value,p=>{s.value=p==="16"?16:22}),(p,x)=>{const U=ie("tooltip");return m(),v("div",Ye,[d("div",He,[d("div",{class:T(["w-1/2",H])},[a(xe,{"video-source":i.value,class:"rounded-lg shadow-sm"},null,8,["video-source"])]),d("div",{class:T(["flex flex-col justify-between w-1/2",H])},[a(_e,{label:"상세정보"}),a(E,{label:"제목"},{default:_(()=>{var r;return[a(C,{"model-value":(r=p.foreignNewsData)==null?void 0:r.titl,intent:I,class:"w-full",readonly:""},null,8,["model-value"])]}),_:1}),a(E,{label:"키워드"}),a(E,{label:"작성일"},{default:_(()=>{var r;return[a(C,{"model-value":(r=p.foreignNewsData)==null?void 0:r.wrDtm,intent:I,class:"w-full",readonly:""},null,8,["model-value"])]}),_:1}),a(E,{label:"수신일"},{default:_(()=>{var r,w,y;return[d("div",We,[a(C,{"model-value":(r=p.foreignNewsData)==null?void 0:r.rcvDtm,intent:I,readonly:""},null,8,["model-value"]),a(C,{"model-value":(w=p.foreignNewsData)==null?void 0:w.rcvStartTime,intent:I,readonly:""},null,8,["model-value"]),a(C,{"model-value":(y=p.foreignNewsData)==null?void 0:y.rcvEndTime,intent:I,readonly:""},null,8,["model-value"])])]}),_:1}),a(E,{label:"방송사"},{default:_(()=>{var r;return[d("div",be,[a(C,{"model-value":(r=p.foreignNewsData)==null?void 0:r.broad,intent:I,readonly:""},null,8,["model-value"]),a(ae,{label:"이외",disabled:""}),a(C,{intent:I,readonly:""})])]}),_:1})])]),d("div",Ke,[d("div",{class:T([O.value])},[a(Te,{rows:s.value,class:"w-full",readonly:""},null,8,["rows"])],2),d("div",{class:T(["absolute top-0 right-0 transition-all duration-300 h-full",t.value?"w-1/2":"w-0"])},[d("div",{class:T([A.value,H,"h-full"])},[a(le,{tabs:c.value,"is-plain-text-mode":!0,"is-compact-mode":""},{default:_(()=>[p.isShowTranslation?(m(),D(g(Z),{key:0,unmount:!1},{default:_(()=>[q.value?(m(),v(W,{key:0},[J(R(""))],64)):(m(),v("div",Qe,[x[0]||(x[0]=d("span",null,"영한번역을 요청해주세요",-1)),a(Y,{"button-text":"번역 요청",onClick:G})]))]),_:1})):$("",!0),p.isShowSTT?(m(),D(g(Z),{key:1,unmount:!1},{default:_(()=>[P.value?(m(),v(W,{key:0},[J(R(""))],64)):(m(),v("div",Xe,[x[1]||(x[1]=d("span",null,"STT를 요청해주세요",-1)),a(Y,{"button-text":"STT 요청",onClick:z})]))]),_:1})):$("",!0)]),_:1},8,["tabs"])],2)],2),de(a(Y,{icon:j.value.icon,type:"secondary",class:T(B.value),onClick:M},null,8,["icon","class"]),[[U,t.value?"접기":"펼치기"]])])])}}}),Ze={class:"flex flex-grow overflow-y-hidden h-[calc(100vh-190px)]"},No=V({__name:"ForeignNewsView",setup(e){const{moveNewForeignNews:u}=ce(),l=N(!1),f=N("list"),h=ve(),{selectedRowIndex:s,selectedItem:t,foreignNewsListData:n,foreignNewsItemData:o,foreignNewsSearchCondition:i}=h,c=me(),{pageInfo:q}=c,{getForeignNewsList:P,getForeignNews:A}=Ie(i,c,{onListSuccess:r=>{n.value=r.content,!r.content||r.content.length===0?t.value=null:t.value&&(r.content.some(y=>y.id===t.value.id)||(t.value=null))},onDetailSuccess:r=>{o.value=r}}),{onSearch:O,onChangeDate:B,onChangeItemType:j,onChangeChannelType:G,onToggleExcolusitionReceived:z}=De({onSearch:async()=>{try{await P()}catch(r){console.error("foreignNewsView onSearch Error",r),t.value=null}},onUpdateSearchCondition:r=>{try{i.value={...i.value,...r},O()}catch(w){console.error("ForeignNewsView onUpdateSearchCondition Error",w)}}}),{observerTarget:M,setupObserver:p}=ge({onIntersect:async()=>{await P()}}),x={row:{onSelect:async r=>{var w,y,b;try{s.value=(w=r[0])==null?void 0:w.rowIndex,t.value=(y=r[0])==null?void 0:y.data;const L=(b=r[0])==null?void 0:b.data.id;L&&A(L)}catch(L){console.error("foreignNewsView onSelect Error",L)}}},card:{onSelect:async r=>{try{t.value=r;const w=n.value.findIndex(y=>y.id===r.id);w!==-1&&(s.value=w)}catch(w){console.error("foreignNewsView onSelect Error",w)}}},request:{onTranslation:()=>{console.log("번역 요청")},onSTT:()=>{console.log("STT 요청")}}},{menuItems:U}=Fe({moveNewForeignNews:u});return ue(()=>{p()}),(r,w)=>(m(),v("div",{ref_key:"observerTarget",ref:M},[d("div",null,[a(he,{"menu-items":g(U),"onClick:search":g(O),onOnChangeDate:g(B),onOnChangeItemType:g(j),onOnChangeChannelType:g(G),onOnToggleExclusitionReceivedList:g(z)},null,8,["menu-items","onClick:search","onOnChangeDate","onOnChangeItemType","onOnChangeChannelType","onOnToggleExclusitionReceivedList"]),a(Ne,{modelValue:f.value,"onUpdate:modelValue":w[0]||(w[0]=y=>f.value=y),class:"mt-2"},null,8,["modelValue"]),d("div",Ze,[a(g(ee),{class:"default-theme"},{default:_(()=>[a(g(K),{size:f.value==="list"||g(t)?40:100,"max-size":f.value==="list"||g(t)?40:100},{default:_(()=>[a(Ue,{"is-loading":l.value,"view-type":f.value,"row-data":g(n),"page-info":g(q),"selected-item":g(t),"selected-row-index":g(s),onOnRowSelect:x.row.onSelect,onOnCardSelect:x.card.onSelect},null,8,["is-loading","view-type","row-data","page-info","selected-item","selected-row-index","onOnRowSelect","onOnCardSelect"])]),_:1},8,["size","max-size"]),f.value==="list"||g(t)?(m(),D(g(K),{key:0,size:60,"max-size":60},{default:_(()=>[a(Je,{"foreign-news-data":g(o),onRequestTranslation:x.request.onTranslation,onRequestStt:x.request.onSTT},null,8,["foreign-news-data","onRequestTranslation","onRequestStt"])]),_:1})):$("",!0)]),_:1})])])],512))}});export{No as default};
