import{d as L,k as F,l as O,ei as z,a as t,c as r,Y as a,F as R,j as d,h as I,K as c,Q as f,G as h,a6 as P,a0 as j,i as N}from"./index-eLyz9_Ts.js";import{u as Z}from"./use-model-wrapper-XtiLc3Xd.js";import{a as w}from"./FileListView.vue_vue_type_script_setup_true_lang-A40KFqZZ.js";const $={class:"p-1 h-full flex flex-col"},E=["disabled"],T={class:"w-full h-full flex flex-col items-center justify-center"},V={key:1,class:"h-full min-h-40"},A={key:0},G={key:0,class:"text-black dark:text-white"},Y=L({__name:"FileDropzone",props:{fileData:{},mode:{},maxLength:{default:5},maxSize:{default:200},isReadOnly:{type:Boolean,default:!1},isPreview:{type:Boolean,default:!1},isShowFile:{type:Boolean,default:!1},isTripped:{type:Boolean,default:!1},isCenter:{type:Boolean,default:!1},fileListCustomClass:{default:""},message:{default:"첨부할 파일을 올려주세요."},icon:{default:"arrow-up-tray"},customClassIcon:{default:""},isShowFileListBottom:{type:Boolean,default:!1},customClassArea:{default:""}},emits:["on-upload-file","on-download-file","on-delete-file"],setup(b,{emit:k}){const o=b,n=k,y=F(),i=Z(o,n,"fileData"),g=F(),u=O(()=>o.mode!=="create"),v=e=>i.value.length+e.length>o.maxLength?(window.Notify.error({message:`파일 등록은 최대 ${o.maxLength}개까지 입니다.`,duration:3e3}),!1):!0,D=e=>{const s=o.maxSize*1024*1024;for(let l=0;l<e.length;l+=1)if(e[l].size>s)return window.Notify.error({message:`첨부파일 사이즈는 ${o.maxSize}MB 이내로 등록 가능합니다.`,duration:3e3}),!1;return!0},C=async e=>{e&&(console.log("files",e),v(e)&&D(e)&&(i.value.push(...e),n("on-upload-file",e)))},B=async e=>{const l=e.target.files;l&&(v(l)&&D(l)&&(i.value.push(...l),n("on-upload-file",[...l])),y.value.value=null)},{isOverDropZone:S}=z(g,{onDrop:C}),m=(e,s)=>{n("on-download-file",{file:e,index:s})},p=(e,s,l)=>(l.stopPropagation(),l.preventDefault(),o.mode==="create"?i.value.splice(s,1):n("on-delete-file",e,s),!1);return(e,s)=>(t(),r("div",null,[a("div",{class:f(["h-full flex flex-col",[e.isTripped?"rounded-md m-2 border border-primary-gray-surface border-dashed":""]])},[a("div",$,[e.mode!=="read"?(t(),r(R,{key:0},[d(i).length&&!e.isShowFileListBottom?(t(),I(w,{key:0,"is-preview":e.isPreview&&e.mode!=="create","file-data":e.fileData,mode:e.mode,"is-read-only":e.isReadOnly,"is-show-download-btn":u.value,"file-list-custom-class":e.fileListCustomClass,onOnDownloadFile:m,onOnDeleteFile:p},null,8,["is-preview","file-data","mode","is-read-only","is-show-download-btn","file-list-custom-class"])):c("",!0),a("label",{for:"file-input",class:f(["w-full",[e.isReadOnly?"":"cursor-pointer",e.isPreview?"h-80":" h-full"]])},[a("div",{ref_key:"dropZoneRef",ref:g,class:f(["flex flex-col w-full min-h-40 h-full p-2 bg-gray-400/10 rounded dark:text-slate-300",[e.isCenter?"justify-center":"justify-start",e.isTripped?"bg-white dark:bg-gray-800 min-h-36":"",d(S)?"border border-gray-400 text-gray-400 dark:!text-slate-400":"",d(i).length?"":"justify-center",e.customClassArea]])},[a("input",{id:"file-input",ref_key:"fileInput",ref:y,type:"file",class:"hidden",multiple:"",disabled:e.isReadOnly,onInput:B},null,40,E),a("div",T,[h(P,{icon:e.icon,class:f(e.customClassIcon)},null,8,["icon","class"]),a("div",null,j(e.message),1)])],2)],2)],64)):(t(),r("div",V,[h(w,{"is-preview":e.isPreview,"file-data":e.fileData,mode:e.mode,"is-read-only":e.isReadOnly,"is-show-download-btn":u.value,"file-list-custom-class":e.fileListCustomClass,"is-show-file":e.isShowFile,onOnDownloadFile:m,onOnDeleteFile:p},null,8,["is-preview","file-data","mode","is-read-only","is-show-download-btn","file-list-custom-class","is-show-file"])]))])],2),N(e.$slots,"description"),e.isShowFileListBottom?(t(),r("div",A,[d(i).length?(t(),r("p",G,"등록된 파일")):c("",!0),h(w,{"is-hide-no-data":"","is-preview":e.isPreview&&e.mode!=="create","file-data":e.fileData,mode:e.mode,"is-read-only":e.isReadOnly,"is-show-download-btn":u.value,"file-list-custom-class":e.fileListCustomClass,onOnDownloadFile:m,onOnDeleteFile:p},null,8,["is-preview","file-data","mode","is-read-only","is-show-download-btn","file-list-custom-class"])])):c("",!0)]))}});export{Y as _};
