import{d as k,a as y,h as N,al as T,am as L,a5 as b,V as R,W as S,w as v,j as o,a0 as p,Y as i,a1 as M,G as r,a2 as f,X as $,a3 as B,k as h,aD as A,o as D,c as F,L as G,aG as j,K as I}from"./index-eLyz9_Ts.js";import{e as K}from"./async-validator.util-IJrtpoc1.js";const O=k({__name:"TagList",props:{tagList:{}},emits:["selected-row"],setup(V,{emit:d}){const n=d,l=[{headerName:"순번",field:"no",maxWidth:60,valueGetter:"node.rowIndex",cellRenderer:a=>L(a)},{headerName:"태그명",field:"tagName"},{headerName:"사용횟수",field:"tagClicked"}],t=a=>{n("selected-row",a[0].data)};return(a,m)=>(y(),N(T,{"row-data":a.tagList,"column-defs":l,onSelectedRows:t},null,8,["row-data"]))}}),U={class:""},W={class:"space-y-8"},Y={class:"space-x-3 flex items-center justify-end"},q=k({__name:"TagCreateModal",emits:["close","on-create"],setup(V,{emit:d}){const n=d,l=()=>{n("close")},{t}=b(),a=R({name:""}),{pass:m,errorFields:c}=S(a,K),x=async()=>{const g={tagNameList:[a.name]};n("on-create",g),l()};return(g,u)=>(y(),N(B,{"modal-class":"sm:w-1/3","dialog-overlay":!1,onClose:l},{title:v(()=>[i("span",U,p(o(t)("Modal.Tag.CreateModal.태그_추가")),1)]),content:v(()=>{var w,s,e;return[i("div",W,[r(M,{modelValue:a.name,"onUpdate:modelValue":u[0]||(u[0]=_=>a.name=_),name:"tagName",required:!0,"error-placeholder":!0,"error-msg":(s=(w=o(c))==null?void 0:w.name)!=null&&s.length?(e=o(c))==null?void 0:e.name[0].message:"",label:o(t)("Modal.Tag.CreateModal.태그_명")},null,8,["modelValue","error-msg","label"]),i("div",Y,[r(f,{type:"secondary",onClick:u[1]||(u[1]=_=>g.$emit("close"))},{default:v(()=>[$(p(o(t)("Modal.Board.CreateModal.취소")),1)]),_:1}),r(f,{disabled:!o(m),onClick:x},{default:v(()=>[$(p(o(t)("Modal.Board.CreateModal.추가")),1)]),_:1},8,["disabled"])])])]}),_:1}))}}),E={class:"h-full"},X={class:"flex justify-between"},z={class:"flex space-x-2 items-center"},H={class:"space-x-2 w-[210px]"},J={class:"text-xl dark:text-dark-gray-200"},P={class:"text-xl text-gray-500"},Q={class:"flex items-center space-x-1.5"},ae=k({__name:"AdminTagView",setup(V){const d=h([]),n=h(),l=h(),t=h(!1),a=A(),{t:m}=b(),c=async()=>{const s={delYn:"N",search:l.value};try{const e=await a.tag.basic.findAll(s);e.success&&(d.value=[...e.data.tagDetailList])}catch(e){console.log("Fail to get tag list",e)}},x=async s=>{try{(await a.tag.basic.create(s)).success&&(window.Notify.success({message:"[태그 추가] 완료되었습니다."}),await c())}catch(e){console.log("Fail to create tag",e)}},g=async()=>{try{(await a.tag.basic.delete(n.value.id)).success&&(window.Notify.success({message:"[태그 삭제] 완료되었습니다."}),await c())}catch(s){console.log("Fail to delete tag",s)}},u=async()=>{l.value="",await c()},w=s=>{n.value=s};return D(()=>c()),(s,e)=>{var _;return y(),F("div",E,[i("div",X,[i("div",z,[i("div",H,[i("span",J,p(o(m)("Tag.태그")),1),i("span",P,p(o(m)("Tag.태그수",{tag:d.value.length})),1)]),r(M,{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=C=>l.value=C),width:"w-96",placeholder:o(m)("Tag.태그명으로_검색하세요"),onKeydown:G(c,["enter"])},null,8,["modelValue","placeholder"]),r(f,{icon:"magnifying-glass",onClick:c})]),i("div",Q,[r(f,{icon:"arrow-path",onClick:u}),r(f,{icon:"plus",onClick:e[1]||(e[1]=C=>t.value=!0)}),r(j,{icon:"trash",title:(_=n.value)==null?void 0:_.tagName,disabled:!n.value,onOnConfirm:g},null,8,["title","disabled"])])]),r(O,{"tag-list":d.value,onSelectedRow:w},null,8,["tag-list"]),t.value?(y(),N(q,{key:0,onOnCreate:x,onClose:e[2]||(e[2]=C=>t.value=!1)})):I("",!0)])}}});export{ae as default};
