var Ba=Object.defineProperty;var Va=(I,C,g)=>C in I?Ba(I,C,{enumerable:!0,configurable:!0,writable:!0,value:g}):I[C]=g;var Q=(I,C,g)=>(Va(I,typeof C!="symbol"?C+"":C,g),g);import{a as D,c as N,Y as l,d as U,l as Y,h as O,N as Bt,K as F,be as Wt,k as x,w as z,X as ie,a0 as M,C as _e,$ as Fa,F as Ee,G as _,a2 as G,a3 as Ve,bf as rt,j as E,af as lt,L as it,a1 as ke,bg as Ha,bh as Ga,bi as Ka,bj as Ja,bk as Za,bl as Xa,bm as Qa,bn as qa,bo as eo,bp as to,bq as ao,br as oo,bs as so,bt as no,bu as ro,bv as lo,bw as io,bx as co,by as uo,bz as mo,bA as po,bB as fo,bC as ho,bD as vo,bE as go,bF as yo,bG as bo,bH as wo,bI as Co,bJ as xo,bK as Io,bL as So,bM as Do,az as To,Q as ct,am as dt,aM as ut,al as Ae,bN as ce,aa as mt,ac as pt,ae as q,bO as _o,ad as Fe,o as be,ap as Eo,aX as Ye,t as re,M as ko,aL as Vt,b4 as Le,aU as ze,b2 as Ft,bb as He,aD as ft,V as ye,b0 as Pe,as as Ht,ak as Ao,ab as Gt,bc as Kt,aP as Te,ba as Jt,ai as Zt,aj as le,a6 as jt,H as Mo,an as Ne,ao as $o,bP as No,aA as Lo,au as Po,a5 as Xt,u as Ro,e as Oo,aG as Wo,ah as ge,b as jo}from"./index-eLyz9_Ts.js";import{g as Ut,M as Uo}from"./splitpanes.es-dEoJOrhT.js";import"./GDatePicker.vue_vue_type_style_index_0_lang-aP5TJiAZ.js";/* empty css                                                                        */import"./vue-multiselect-Yz8FsF-E.js";import{G as Yo}from"./GSingleSelect-7u8H0FdH.js";import"./tag-Q73uuSte.js";import"./program-omP_c4K3.js";import"./article-type.code-5cb8riL1.js";import"./category-zIRntbmZ.js";import"./department-wnuBQoCo.js";import{g as Re,a as Yt,c as zo,b as Be,d as ht,_ as Bo,C as Vo}from"./CuesheetDetailList.vue_vue_type_script_setup_true_lang-QigiNQfb.js";import{S as he,c as at,_ as Fo}from"./icon-zhslyYqN.js";import{C as de}from"./cuesheet-item-code-_LsFMWbX.js";import{C as Ho}from"./CuesheetPrompter-o2cqkH-a.js";import{_ as Qt,a as qt,b as Go}from"./ArticleTabPanel.vue_vue_type_script_setup_true_lang-vwb57C9h.js";import"./code-mapper-C6rl9hti.js";import{u as Ge}from"./use-date-GeeGTbYh.js";import{r as vt}from"./use-render-component-K20sHqiA.js";import{u as st}from"./use-model-wrapper-XtiLc3Xd.js";import{_ as ea}from"./ProgramSelect.vue_vue_type_script_setup_true_lang-UHoCrnxw.js";import{_ as Ko}from"./ConfirmButton.vue_vue_type_script_setup_true_lang-onM9evN8.js";import{_ as Jo}from"./GNoData.vue_vue_type_script_setup_true_lang-rWUb5JCO.js";import{G as Zo}from"./GVideoPlayer-1SUF8s3O.js";import{_ as Xo}from"./RequestItemImage.vue_vue_type_script_setup_true_lang-9Wg4vW2c.js";import"./company-enum-MfEiIQ-N.js";import{P as ot}from"./panel-size-enum-06wl-l7a.js";import{N as Qo}from"./no-image-ERwb0SRC.js";import{_ as qo}from"./FileListView.vue_vue_type_script_setup_true_lang-A40KFqZZ.js";import{_ as es}from"./VideoList.vue_vue_type_script_setup_true_lang-tHhi7MCM.js";import{u as ts}from"./mam-foisk_XK.js";import"./NoDataIcon-o0HaqPy2.js";import"./GEditor.vue_vue_type_style_index_0_lang-FifEywK1.js";import"./GEditor.vue_vue_type_script_setup_true_lang-a2qGOvtc.js";import"./file-division-code-x51qUgaH.js";import"./file-Gx0JxWZZ.js";import"./ArticleTypeSelect.vue_vue_type_script_setup_true_lang-Kp5wzGNr.js";import"./SpellCheckerModal.vue_vue_type_script_setup_true_lang-Vt6XDlm8.js";import"./GMovableModal.vue_vue_type_script_setup_true_lang-elQvXjL0.js";import"./spell-check-OnBbfX8h.js";import"./PageLoader.vue_vue_type_script_setup_true_lang-ZvbvX14z.js";import"./ArticleFileTabPanel.vue_vue_type_script_setup_true_lang-Yk1q8ET1.js";import"./GTextarea-5GIFD2Mo.js";/* empty css                                                                  */import"./FileDropzone.vue_vue_type_script_setup_true_lang-SVeHifZw.js";import"./ArticleFormatSelect.vue_vue_type_script_setup_true_lang-0vSziBpo.js";import"./journalist-QNhBHHjf.js";import"./organization-qjYuRO6g.js";import"./UserSelect.vue_vue_type_script_setup_true_lang-Hk5THi0e.js";import"./ArticleDivisionSelect.vue_vue_type_script_setup_true_lang-Ln9_DwnO.js";import"./GTagSelect.vue_vue_type_script_setup_true_lang-WNNVbcKh.js";import"./GDateTimePicker-bSYwb_xW.js";import"./CoveragePlanSearch.vue_vue_type_script_setup_true_lang-kZic9Ocd.js";import"./CoveragePlanList.vue_vue_type_script_setup_true_lang-vJ0F3lvx.js";import"./DepartmentMultiSelect.vue_vue_type_script_setup_true_lang-OqmQVQH2.js";import"./coverage-plan-nI7mLZOB.js";import"./app-authority-code-Q9MU7mjP.js";import"./vue-resizable.umd.min-blE9hPz6.js";import"./vue.runtime.esm-bundler-3P3R-Xon.js";import"./main-sHItgwS4.js";function as(I,C){return D(),N("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 12H6"})])}function os(I,C){return D(),N("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v12m6-6H6"})])}const ss=U({__name:"ArticleTypeIcon",props:{params:{default:""},typeCode:{default:""},size:{default:"w-7 h-7"}},setup(I){const C=I,g=Y(()=>{let o;return C.params?o=Wt[C.params.value]:o=Wt[C.typeCode],o||""}),c=Y(()=>C.params?C.params.size:C.size);return(o,a)=>g.value?(D(),O(Bt(g.value),{key:0,size:c.value,class:"h-full"},null,8,["size"])):F("",!0)}});class ns{constructor(){Q(this,"MAM",{id:"mam",name:"MAM",label:"MAM"});Q(this,"INGEST",{id:"ingest",name:"인제스트 의뢰",label:"인제스트 의뢰"});Q(this,"VIDEO",{id:"video",name:"영상편집 의뢰",label:"영상편집 의뢰"});Q(this,"GRAPHIC",{id:"graphic",name:"그래픽 의뢰",label:"그래픽 의뢰"});Q(this,"BREAKING",{id:"breaking",name:"속특보영상",label:"속특보영상"});Q(this,"MATERIAL",{id:"material",name:"운영소재",label:"운영소재"});Q(this,"AD_MATERIAL",{id:"ad_material",name:"광고소재",label:"광고소재"});Q(this,"values",[this.MAM,this.INGEST,this.VIDEO,this.GRAPHIC,this.BREAKING,this.MATERIAL,this.AD_MATERIAL])}}const nt=new ns;class rs{constructor(){Q(this,"anc",{id:"anc",name:"option",label:"ANC"});Q(this,"article",{id:"article",name:"option",label:"기사"});Q(this,"super",{id:"super",name:"option",label:"수퍼"});Q(this,"values",[this.anc,this.article,this.super])}}const ls=new rs,is={class:"space-x-2 p-4"},cs={class:"space-y-4"},ds={class:"flex justify-between border p-4"},us={class:"flex justify-center"},ms={class:"space-x-4 flex items-center"},ps=U({__name:"CuesheetPrintModal",emits:["on-close","on-print"],setup(I,{emit:C}){const g=x("인쇄 옵션"),c=C,o=()=>{c("on-close")},a=x([]),s=x(ls.values),d=()=>{console.log("debug...",a),c("on-print",a.value)};return(y,t)=>(D(),O(Ve,{"modal-class":"w-1/4",onClose:o},{title:z(()=>[ie(M(g.value),1)]),content:z(()=>[l("div",is,[l("div",cs,[l("div",ds,[(D(!0),N(Ee,null,_e(s.value,m=>(D(),O(Fa,{key:m.id,modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=u=>a.value=u),value:m.id,class:"space-x-2",label:m.label,checked:a.value.includes(m.name)},null,8,["modelValue","value","label","checked"]))),128))]),l("div",us,[l("div",ms,[_(G,{"button-text":"취소",type:"secondary",onClick:o}),_(G,{"button-text":"확인",onClick:d})])])])])]),_:1}))}}),fs={class:"flex items-center flex-wrap gap-1.5"},hs=U({__name:"CuesheetSearchForm",props:{searchCondition:{}},emits:["click:search"],setup(I,{emit:C}){const g=I,c=C,{searchCondition:o}=rt(g,c),a=d=>{o.value.searchRangeDate=d,c("click:search",o.value)},s=()=>{c("click:search",o.value)};return(d,y)=>(D(),N("div",null,[l("div",fs,[_(E(lt),{modelValue:E(o).searchRangeDate,"onUpdate:modelValue":y[0]||(y[0]=t=>E(o).searchRangeDate=t),onChange:a},null,8,["modelValue"]),_(E(ea),{modelValue:E(o).searchProgram,"onUpdate:modelValue":y[1]||(y[1]=t=>E(o).searchProgram=t),"preselect-first":!0,"is-all-option":"",label:"",class:"w-36",onOnSelected:s},null,8,["modelValue"]),_(ke,{modelValue:E(o).searchText,"onUpdate:modelValue":y[2]||(y[2]=t=>E(o).searchText=t),class:"flex-1",placeholder:"검색어",onKeyup:it(s,["enter"])},null,8,["modelValue"]),_(G,{icon:"magnifying-glass",onClick:s})])]))}}),vs=U({components:{MagnifyingGlassIcon:Ha,XMarkIcon:Ga,LinkIcon:Ka,PencilIcon:Ja,PrinterIcon:Za,TrashIcon:Xa,DocumentDuplicateIcon:Qa,LockClosedIcon:qa,ChevronLeftIcon:eo,ChevronRightIcon:to,ChevronDoubleLeftIcon:ao,ChevronDoubleRightIcon:oo,PlusSmallIcon:os,MinusSmallIcon:as,ArrowDownTrayIcon:so,DocumentArrowDownIcon:no,ArrowPathIcon:ro,DocumentIcon:lo,PlusIcon:io,IntIcon:co,CgIcon:uo,StupIcon:mo,CameraIcon:po,EndIcon:fo,SpecialKeyIcon:ho,AnchorIcon:vo,SyncIcon:go,SpellcheckIcon:yo,SunIcon:bo,MoonIcon:wo,ComputerDesktopIcon:Co,ChatBubbleBottomCenterTextIcon:xo,ClockIcon:Io,MaterialFilterAltOffIcon:So},props:{params:{type:Object,default:null}},setup(I){const C=x(`${Do(I.params.icon)}Icon`),g=x(I.params.size),c=x(I.params.color);return{iconComponent:C,size:g,color:c}}});function gs(I,C,g,c,o,a){return I.params?(D(),O(Bt(I.iconComponent),{key:0,class:ct([I.size,I.color]),"aria-hidden":"true"},null,8,["class"])):F("",!0)}const ys=To(vs,[["render",gs]]),bs=U({__name:"CuesheetList",props:{isLoading:{type:Boolean},rowData:{},pageInfo:{},mode:{default:"edit"}},emits:["selected-rows","on-unlock","double-clicked-row","on-change-page"],setup(I,{emit:C}){const g=I,c=C,o=e=>{var h,r;return`<div class="space-y-1">
      <div>${(h=e.data)==null?void 0:h.lckrNm}(${(r=e.data)==null?void 0:r.lckrUserId})가 <span class="text-red-500 ">작업중인 큐시트</span> 입니다.</div>
      <div class="pt-2">편집 상태를 강제로 해제할 경우, 작성된 데이터가 모두 사라질 수 있습니다.</div>
      <div class="text-blue-800  pt-4">진행하시겠습니까?</div>
    </div>`},a=e=>ce(Math.floor(e.data.brdcDurtn*60)),s=e=>{const h=e.data.brdcPgmNm,r=e.data.cueNm;return r?`${h}(${r})`:`${h}`},d=e=>{const h=document.createElement("div");h.className="flex flex-col justify-center h-full items-start";const r={onConfirm:()=>{c("on-unlock",e.data.id)},icon:"LockClosed",buttonType:"icon",iconSize:"h-5 w-5",iconColor:"text-red-500",html:o(e)};return vt(Ko,r,h)},y=e=>Yt(e.data.pd1Nm,e.data.pd2Nm),t=e=>Yt(e.data.anc1Nm,e.data.anc2Nm),m=e=>zo(e.data.brdcStartTime,e.data.brdcDurtn),u=[{headerName:"순번",field:"make",filter:!1,minWidth:60,maxWidth:60,valueGetter:"node.rowIndex",cellRenderer:e=>dt(e)},{field:"lckYn",filter:!1,minWidth:60,maxWidth:60,hide:g.mode==="read",headerComponent:ys,headerComponentParams:{icon:"LockClosed",size:"h-5 w-5"},cellRenderer:e=>{if(e.value==="Y")return d(e)}},{headerName:"방송상태",field:"",minWidth:100,maxWidth:100,filter:!1,cellStyle:{textAlign:"center",verticalAlign:"middle"},cellClass:"",cellRenderer:ut,cellRendererParams:e=>{if(!e.data.cueStCd)return;const{state:h,color:r}=Re(e.data.cueStCd);return{text:h,color:r,fontColor:"text-white"}}},{headerName:"방송일자",field:"brdcDt",minWidth:170,maxWidth:170,tooltipField:"brdcDt",filter:!1},{headerName:"프로그램 명",field:"brdcPgmNm",tooltipField:"brdcPgmNm",filter:!1,minWidth:100,valueGetter:s},{headerName:"차수",field:"",minWidth:70,maxWidth:70,filter:!1},{headerName:"기사",field:"",minWidth:70,maxWidth:70,filter:!1},{headerName:"방송시간",minWidth:80,field:"brdcStartTime",tooltipField:"brdcStartTime",filter:!1,maxWidth:250,valueGetter:m},{headerName:"제작시간",field:"brdcDurtn",tooltipField:"brdcDurtn",minWidth:100,maxWidth:110,tooltipValueGetter:a,filter:!1,valueGetter:a},{headerName:"PD",minWidth:140,maxWidth:140,field:"pd1Nm",tooltipField:"pd1Nm",filter:!1,valueGetter:y},{headerName:"앵커",minWidth:140,maxWidth:140,field:"anc1Nm",tooltipField:"anc1Nm",filter:!1,valueGetter:t},{headerName:"비고",minWidth:100,field:"rmk",tooltipField:"rmk",filter:!1,maxWidth:250}],i=e=>{c("selected-rows",e)},p=e=>{c("double-clicked-row",e)},f=e=>{c("on-change-page",e)};return(e,h)=>(D(),O(Ae,{"column-defs":u,"row-data":e.rowData,"page-info":e.pageInfo,"is-loading":e.isLoading,"row-selection":"single",onSelectedRows:i,onDoubleClickedRow:p,onOnChangePage:f},null,8,["row-data","page-info","is-loading"]))}}),ws={class:"flex flex-col h-full bg-gray-100 dark:bg-dark-secondary"},Cs=U({__name:"CuesheetArticleSearch",props:{mode:{default:"read"}},emits:["on-add-articles","cuesheet-article-search-list-api","double-clicked-row","on-article-search-drop-zone"],setup(I,{emit:C}){const{getChDivId:g}=mt(),c=pt(),{fetchArticles:o}=c,a=C,{moveCueSheetDetail:s}=Eo(),d=x({searchRangeDate:[q().subtract(1,"day").format("YYYY-MM-DD"),q().format("YYYY-MM-DD")],searchText:"",articleApprove:_o}),y=x(1),t=x(Fe.sm),m=x({isShow:!0,page:1,totalElements:0,totalPages:1,numberOfElements:0,size:t.value}),u=x([]),i=x(!1),p=async()=>{var S;try{i.value=!0;const A={startDate:d.value.searchRangeDate[0],endDate:d.value.searchRangeDate[1],chDivIds:g,page:y.value-1,size:t.value,searchValue:d.value.searchText,apprvTypCds:(S=d.value.articleApprove)==null?void 0:S.approveAll.id},P=await o(A);P.success&&(u.value=P.data.content,m.value={isShow:!0,page:y.value,totalPages:P.data.totalPages,totalElements:P.data.totalElements,numberOfElements:P.data.numberOfElements,size:P.data.size},a("on-article-search-drop-zone"))}catch(A){console.log("CuesheetArticleSearch getArticles Error",A)}finally{i.value=!1}},f=()=>{p()},e=S=>{a("double-clicked-row",S)},h=S=>{a("on-add-articles",S)},r=S=>{a("cuesheet-article-search-list-api",S)},n=S=>{s({cuesheetId:S.id,title:S.brdcPgmNm,brdcStartTime:S.brdcStartTime})},w=S=>{y.value=S,p()};return be(async()=>{await p(),a("on-article-search-drop-zone")}),(S,A)=>(D(),N("div",ws,[_(E(As),{"article-search-condition":d.value,"onUpdate:articleSearchCondition":A[0]||(A[0]=P=>d.value=P),"onClick:search":f},null,8,["article-search-condition"]),_(E(Es),{"is-loading":i.value,"row-data":u.value,"page-info":m.value,"row-drag":!0,mode:S.mode,onOnAddArticles:h,onDoubleClickedRow:e,onCuesheetArticleSearchListApi:r,onOnMoveCueSheet:n,onOnChangePage:w},null,8,["is-loading","row-data","page-info","mode"])]))}}),{formatDate:zt}=Ge(),xs=I=>I.data.artclDivCd===Ye.expected.id?`예) ${zt(I.data.artclDivDtm,"YYYY-MM-DD")}`:I.data.artclDivCd===Ye.embargo.id?zt(I.data.artclDivDtm,"YYYY-MM-DD HH:mm:ss"):"",Is={class:"rounded dark:bg-dark-secondary dark:text-dark-gray-200 text-sm"},Ss={class:"h-32 w-72 space-y-1 p-2 overflow-y-auto"},Ds=["onClick"],Ts=["title"],_s=U({__name:"ArticleMatchCueListContextMenu",props:{articleId:{},matchCount:{default:0}},emits:["on-move-cue-sheet"],setup(I,{emit:C}){const g=I,c=C,{fetchArticle:o}=pt(),a=x(!1),s=x([]),d=async()=>{const t=await o(g.articleId);t.success&&(s.value=t.data.matchedCueSheetList)},y=t=>{c("on-move-cue-sheet",t),a.value=!1};return re(()=>a.value,()=>{a.value?d():s.value=[]}),(t,m)=>(D(),O(E(Vt),{shown:a.value,"onUpdate:shown":m[1]||(m[1]=u=>a.value=u),distance:-10,class:"flex flex-col h-full justify-center items-center"},{popper:z(()=>[l("div",Is,[l("div",Ss,[(D(!0),N(Ee,null,_e(s.value,u=>(D(),N("div",{key:u.id,class:"grid grid-cols-1 gap-4 items-center border-b dark:border-dark-border px-4 py-2 select-none hover:bg-primary-50",onClick:i=>y(u)},[l("div",{class:"truncate",title:`${u.brdcPgmNm}`},M(u.brdcPgmNm),9,Ts)],8,Ds))),128))])])]),default:z(()=>[l("div",{class:"cursor-pointer",onContextmenu:m[0]||(m[0]=ko(()=>{},["prevent"]))},M(t.matchCount),33)]),_:1},8,["shown"]))}}),Es=U({__name:"CuesheetArticleSearchList",props:{isLoading:{type:Boolean},rowData:{},rowDrag:{type:Boolean},mode:{},pageInfo:{}},emits:["selected-rows","double-clicked-row","on-add-articles","cuesheet-article-search-list-api","on-move-cue-sheet","on-change-page"],setup(I,{emit:C}){const g=I,c=C,{formatDate:o}=Ge(),a=Y(()=>g.mode==="edit"),s=x(),d=r=>r.data.isSameChannel?r.data.rptrNm:`${r.data.orgRptrNm}(${r.data.orgChNm})`,y=r=>Le(r.data.artclCttTime+r.data.ancMentCttTime+r.data.artclExtTime),t=r=>{const n=document.createElement("div");n.className="h-full items-center flex flex-col justify-center";const w={onOnMoveCueSheet:S=>{c("on-move-cue-sheet",S)},articleId:r.data.id,matchCount:r.value};return vt(_s,w,n)},m=[{headerName:"",field:"drag",filter:!1,maxWidth:40,rowDrag:!0,rowDragText:(r,n)=>(console.log("params",r),`${n}개 기사 추가`)},{field:"checkbox",filter:!1,minWidth:50,maxWidth:50,headerCheckboxSelection:!0,checkboxSelection:!0,showDisabledCheckboxes:!0},{headerName:"의뢰",field:"",filter:!1,minWidth:70,maxWidth:70},{headerName:"이관일시",field:"inputDtm",filter:!1,minWidth:160,maxWidth:160,valueGetter:r=>o(r.data.inputDtm,"YYYY-MM-DD HH:mm:ss")},{headerName:"형식",field:"artclTypCdNm",filter:!1,hide:!1,sortable:!1,minWidth:75,maxWidth:75},{headerName:"제목",field:"artclTitl",filter:!1,minWidth:150},{headerName:"큐시트",field:"cueMatchCnt",filter:!1,hide:!1,minWidth:80,cellRenderer:r=>t(r)},{headerName:"기자",field:"rptrNm",filter:!1,minWidth:100,maxWidth:100,valueGetter:d},{headerName:"전체",field:"artclCttTime",filter:!1,minWidth:80,maxWidth:80,valueGetter:y},{headerName:"엠바고",field:"artclDivDtm",filter:!1,hide:!1,minWidth:160,valueGetter:xs}],u=r=>r.data.artclDivCd===Ye.expected.id?"!text-cyan-500":r.data.artclDivCd===Ye.embargo.id&&q().isBefore(r.data.artclDivDtm)?"!text-red-500":r.data.stopYn==="Y"?"!text-gray-400":"",i=r=>{c("selected-rows",r)},p=r=>{c("double-clicked-row",r)},f=r=>{c("on-change-page",r)},e=()=>{const r=["drag","checkbox"],n=a.value;s.value.api.setColumnsVisible(r,n),s.value.api.refreshHeader()},h=r=>{s.value=r,e(),c("cuesheet-article-search-list-api",r)};return re(()=>a.value,()=>{e()}),re(()=>s.value,r=>{r.api.destroyCalled||h(r)}),(r,n)=>(D(),O(Ae,{"column-defs":m,"row-data":r.rowData,"is-loading":r.isLoading,"page-info":r.pageInfo,"first-selected-row":!1,"row-selection":"multiple","get-row-class":u,"row-drag-managed":!1,"row-drag-multi-row":!0,onDoubleClickedRow:p,onSelectedRows:i,onOnGridReady:h,onOnChangePage:f},null,8,["row-data","is-loading","page-info"]))}}),ks={class:"flex w-full items-center space-x-1"},As=U({__name:"CuesheetArticleSearchForm",props:{articleSearchCondition:{default:()=>({searchText:"",searchRangeDate:[q().format("YYYY-MM-DD"),q().format("YYYY-MM-DD")]})}},emits:["update:articleSearchCondition","click:search"],setup(I,{emit:C}){const g=I,c=C,o=st(g,c,"articleSearchCondition"),a=d=>{o.value.searchRangeDate=d,c("click:search")},s=()=>{c("click:search")};return(d,y)=>(D(),N("div",ks,[_(lt,{modelValue:E(o).searchRangeDate,"onUpdate:modelValue":y[0]||(y[0]=t=>E(o).searchRangeDate=t),class:"flex-shrink-0",onChange:a},null,8,["modelValue"]),_(ke,{modelValue:E(o).searchText,"onUpdate:modelValue":y[1]||(y[1]=t=>E(o).searchText=t),class:"w-48 flex-1",placeholder:"검색어",onKeyup:it(s,["enter"])},null,8,["modelValue"]),_(G,{icon:"magnifying-glass",class:"flex-none",onClick:s})]))}}),Ms={class:"flex flex-col h-full"},$s={class:"flex justify-center space-x-2 overflow-y-hidden"},Ns={class:"w-full overflow-y-auto dark:bg-dark-secondary p-1.5 border border-gray-300 dark:border-dark-border rounded-md"},Ls={class:"w-[30rem] dark:bg-dark-secondary p-1.5 border border-gray-300 dark:border-dark-border rounded-md overflow-y-auto"},Ps=U({__name:"EditCuesheetItemModal",props:{selectedItem:{},cuesheetId:{default:void 0}},emits:["on-close"],setup(I,{emit:C}){const g=I,c=C,o=x("read"),a=Y(()=>o.value==="read"),s=Y(()=>o.value==="read"?"아이템 보기":"아이템 수정"),d=x(""),y=x(),t=x(!1),m=x("00:00"),u=x("00:00"),i=x("00:00"),p=x(ze.Straight),f=x(Ft.Broadcasting),e=x([]),h=He(),{editCuesheetItem:r}=h,n=x(),w=ft(),S=x({anchorTextArray:[""],captionArray:[],reporterTextArray:[""]}),A=ye({reporter:"",anchorTime:u,reportTime:i,articleTime:m,extraTime:{isPositive:!0,time:"00:00",sec:0},inputer:null,updateDate:void 0,transferDate:void 0,approveDate:void 0,division:void 0,embargo:q().format("YYYY-MM-DD HH:mm:ss"),category:void 0,importance:void 0,tag:[],coveragePlanId:void 0,urgency:!1,disaster:!1,priority:void 0}),P=async()=>{var $;try{t.value=!0;const L=await w.cuesheet.item.findOne(g.selectedItem.data.id);if(L.success){const{cueItemTitl:k,cueItemDivCd:H,cueSheetItemCap:W,cueItemCtt:ne,article:j,oriArticle:K}=L.data;y.value=H,console.log("cueItemDivCd",y.value),y.value===de.ARTICLE.id?(p.value=j.artclTypCd,n.value=j.id,S.value=Pe({artclTypCd:j.artclTypCd,capList:j.articleCaps,ancMentCtt:j.ancMentCtt||JSON.stringify([`
`]),artclCtt:j.artclCtt||JSON.stringify([`
`])}),A.reporter=j.rptrNm||"",A.extraTime={isPositive:j.artclExtTime>=0,time:Le(j.artclExtTime),sec:j.artclExtTime},A.division=j.artclDivCd,A.embargo=j.artclDivDtm,A.category=j.artclCateId||"",A.tag=j.articleTags.map(ue=>({...ue.tag,tagName:ue.tag.tagNm})),A.coveragePlanId=($=j.coveragePlan)==null?void 0:$.id,A.urgency=j.urgYn==="Y",A.disaster=j.disYn==="Y",A.priority=j.priority,A.inputer=K?K.inputrNm:"",A.updateDate=j.updtDtm||"",A.transferDate=K?K.inputDtm:"",A.approveDate=K?K.apprvTypDtm:""):S.value=Pe({artclTypCd:ze.Straight.id,capList:W,ancMentCtt:JSON.stringify([""]),artclCtt:ne||JSON.stringify([`
`])}),d.value=k||""}}catch(L){console.log(L)}finally{t.value=!1}},B=($=!1)=>{c("on-close",$)},ee=async()=>{var $;try{const L={cueItemId:g.selectedItem.data.id,params:{cueItemTitl:d.value,cueId:g.cuesheetId,cueItemCtt:`${JSON.stringify(S.value.reporterTextArray)}`,artclExtTime:($=A.extraTime)==null?void 0:$.sec}};(await r(L)).success&&B(!0)}catch(L){console.log("Fail to edit cuesheet item",L)}},te=async()=>{try{(await w.cuesheet.item.lock(g.selectedItem.data.id)).success&&(o.value="edit")}catch($){console.log("Fail to lock cuesheet item",$)}},se=async()=>{try{(await w.article.basic.lock(n.value)).success&&(o.value="edit")}catch($){console.log("Fail to lock article item",$)}},ae=async()=>{y.value===de.ARTICLE.id?await se():await te()};return be(async()=>{await P()}),($,L)=>(D(),O(Ve,{"modal-class":"sm:w-full xl:w-[80vw] 2xl:w-[80vw] 2xl:min-w-[1000px]","content-class":"h-[85vh]",onClose:B},{title:z(()=>[ie(M(s.value),1)]),content:z(()=>[l("div",Ms,[l("div",$s,[l("div",Ns,[t.value?F("",!0):(D(),O(Qt,{key:0,"article-title":d.value,"onUpdate:articleTitle":L[0]||(L[0]=k=>d.value=k),"article-type":p.value,"onUpdate:articleType":L[1]||(L[1]=k=>p.value=k),"article-format":f.value,"onUpdate:articleFormat":L[2]||(L[2]=k=>f.value=k),"article-time":m.value,"onUpdate:articleTime":L[3]||(L[3]=k=>m.value=k),"anchor-time":u.value,"onUpdate:anchorTime":L[4]||(L[4]=k=>u.value=k),"report-time":i.value,"onUpdate:reportTime":L[5]||(L[5]=k=>i.value=k),"article-editor-state":S.value,"onUpdate:articleEditorState":L[6]||(L[6]=k=>S.value=k),"is-read-only":a.value,onOnSave:ee,onOnClickedEdit:ae},null,8,["article-title","article-type","article-format","article-time","anchor-time","report-time","article-editor-state","is-read-only"]))]),l("div",Ls,[_(qt,{"article-type":p.value,"onUpdate:articleType":L[7]||(L[7]=k=>p.value=k),"article-meta-data-tab":A,"onUpdate:articleMetaDataTab":L[8]||(L[8]=k=>A=k),"article-file-tab":e.value,"onUpdate:articleFileTab":L[9]||(L[9]=k=>e.value=k),"is-show-drop-zone":!1,mode:o.value==="read"?"read":"edit","is-read-only":a.value,"cuesheet-item-division-code":E(de).ITEM.id,class:"h-full"},null,8,["article-type","article-meta-data-tab","article-file-tab","mode","is-read-only","cuesheet-item-division-code"])])])])]),_:1}))}}),Rs=U({__name:"CuesheetTemplateSearchList",props:{rowData:{},mode:{}},emits:["cuesheet-template-search-list-api"],setup(I,{emit:C}){const g=I,c=C,o=x(),a=Y(()=>g.mode==="edit"),s=[{headerName:"",field:"drag",maxWidth:40,rowDrag:!0,rowDragText:(t,m)=>(console.log("params",t),`${m}개 템플릿 추가`)},{field:"checkbox",minWidth:50,maxWidth:50,headerCheckboxSelection:!0,checkboxSelection:!0,showDisabledCheckboxes:!0},{headerName:"제목",minWidth:200,field:"cueItemTitl",tooltipField:"cueItemTitl"},{headerName:"담당",minWidth:100,cellClass:"flex items-center",field:"updtrNm"},{headerName:"길이",field:"cueItemTime",minWidth:80},{headerName:"광고",field:"commercial",minWidth:80}],d=()=>{const t=["drag","checkbox"],m=a.value;o.value.api.setColumnsVisible(t,m),o.value.api.refreshHeader()},y=t=>{o.value=t,d(),c("cuesheet-template-search-list-api",t)};return re(()=>a.value,()=>{d(),console.log(a.value)}),re(()=>o.value,t=>{t.api.destroyCalled||y(t)}),(t,m)=>(D(),O(Ae,{"row-data":t.rowData,"column-defs":s,"first-selected-row":!1,"row-drag-managed":!1,"row-drag-multi-row":!0,"row-selection":"multiple",onOnGridReady:y},null,8,["row-data"]))}}),Os={class:"flex flex-col h-full w-full bg-gray-100 dark:bg-dark-secondary"},Ws={class:"flex items-center gap-1"},js={class:"flex w-full items-center space-x-1"},Us=U({__name:"CuesheetTemplateSearch",props:{mode:{},program:{default:void 0}},emits:["cuesheet-template-search-list-api","on-cuesheet-template-drop-zone","update:program"],setup(I,{emit:C}){const g=I,c=C,o=ft(),a=x(),s=x(),d=x([]),y=x(),{program:t}=rt(g,c),m=async()=>{const p={brdcPgmId:t.value.id};try{const f=await o.template.basic.findAll(p);f.success&&(a.value=f.data,s.value=a.value[0])}catch(f){console.log("Fail to get template list",f)}},u=async()=>{var f;const p={cueTmpltId:(f=s.value)==null?void 0:f.id};try{const e=await o.template.detail.findAll(p);e.success&&(d.value=e.data,c("on-cuesheet-template-drop-zone"))}catch(e){console.log("Fail to get template list",e)}};re(()=>t.value,()=>{m()}),re(()=>s.value,async()=>{if(!s.value){d.value=[];return}await u()});const i=p=>{y.value=p,c("cuesheet-template-search-list-api",p)};return(p,f)=>(D(),N("div",Os,[l("div",Ws,[l("div",js,[_(E(ea),{modelValue:E(t),"onUpdate:modelValue":f[0]||(f[0]=e=>Ht(t)?t.value=e:null),"preselect-first":"",label:"",class:"w-36"},null,8,["modelValue"]),_(Yo,{modelValue:s.value,"onUpdate:modelValue":f[1]||(f[1]=e=>s.value=e),options:a.value,"allow-empty":!1,"preselect-first":!0,"item-label":"cueTmpltNm","track-by":"id",class:"flex-1"},null,8,["modelValue","options"]),_(G,{icon:"magnifying-glass",class:"flex-none",disabled:!s.value,onClick:u},null,8,["disabled"])])]),_(Rs,{"row-data":d.value,"row-drag":!0,mode:p.mode,class:"h-full",onCuesheetTemplateSearchListApi:i},null,8,["row-data","mode"])]))}}),Ys={class:"w-96 bg-primary-accent p-2 rounded dark:bg-dark-secondary"},zs={class:"text-white"},Bs={class:"flex h-full items-center gap-2"},Vs={class:"px-2 flex-1 py-1 rounded bg-gray-700 min-w-20 line-clamp-1"},Fs={class:"px-2 flex-1 py-1 rounded bg-gray-700 min-w-20 line-clamp-1"},Hs={class:"flex h-full items-center gap-2"},Gs={class:"px-2 flex-1 py-1 rounded bg-gray-700 min-w-20 line-clamp-1"},Ks={class:"px-2 flex-1 py-1 rounded bg-gray-700 min-w-20 line-clamp-1"},Js={class:"flex h-full items-center gap-2"},Zs={class:"px-2 flex-1 py-1 rounded bg-gray-700 min-w-20 line-clamp-1"},Xs={class:"px-2 flex-1 py-1 rounded bg-gray-700 min-w-20 line-clamp-1"},Qs={class:"px-2 py-1 rounded bg-gray-700 min-w-20 line-clamp-1"},qs={class:"px-2 py-1 rounded bg-gray-700 min-w-20 line-clamp-1"},en={class:"px-2 py-1 rounded bg-gray-700 min-w-20 line-clamp-1"},tn=U({__name:"CuesheetInfoDropMenu",props:{cuesheetInfo:{},cuesheetItems:{},duration:{}},setup(I){const C=I,g=Y(()=>ce(Math.floor(C.duration*60))||"00:00:00"),c=Y(()=>ce(Be(C.cuesheetItems))||"00:00:00"),o=Y(()=>{const a=Math.floor(C.duration*60)-Be(C.cuesheetItems);return ce(a)||"00:00:00"});return(a,s)=>(D(),N("div",null,[_(E(Vt),{distance:-10,class:"flex flex-col"},{popper:z(()=>{var d,y,t,m,u,i;return[l("div",Ys,[l("div",zs,[s[0]||(s[0]=l("div",{class:"line-clamp-1"},"앵커",-1)),l("div",Bs,[l("div",Vs,M(((d=a.cuesheetInfo)==null?void 0:d.anc1Nm)||"-"),1),l("div",Fs,M(((y=a.cuesheetInfo)==null?void 0:y.anc2Nm)||"-"),1)]),s[1]||(s[1]=l("div",{class:"line-clamp-1"},"PD",-1)),l("div",Hs,[l("div",Gs,M(((t=a.cuesheetInfo)==null?void 0:t.pd1Nm)||"-"),1),l("div",Ks,M(((m=a.cuesheetInfo)==null?void 0:m.pd2Nm)||"-"),1)]),s[2]||(s[2]=l("div",{class:"line-clamp-1"},"TD",-1)),l("div",Js,[l("div",Zs,M(((u=a.cuesheetInfo)==null?void 0:u.td1Nm)||"-"),1),l("div",Xs,M(((i=a.cuesheetInfo)==null?void 0:i.td2Nm)||"-"),1)]),s[3]||(s[3]=l("div",{class:"line-clamp-1"},"방송시간",-1)),l("div",Qs,M(g.value),1),s[4]||(s[4]=l("div",{class:"line-clamp-1"},"누적시간",-1)),l("div",qs,M(c.value),1),s[5]||(s[5]=l("div",{class:"line-clamp-1"},"남은시간",-1)),l("div",en,M(o.value),1)])])]}),default:z(()=>[_(Ao,{icon:"information-circle"})]),_:1})]))}}),an=U({__name:"CuesheetSearchDetailList",props:{isLoading:{type:Boolean},rowData:{},iconList:{},cuesheetId:{},mode:{},userInfo:{}},emits:["selected-rows","cuesheet-search-detail-list-api","on-edit-cuesheet-item","on-changed-cell-value","double-clicked-row"],setup(I,{emit:C}){const g=I,c=C,o=x(),a=x(),s=n=>{c("selected-rows",n),a.value=n},d=n=>{if(n.data.cueItemDivCd!==de.ARTICLE.id)return"!text-[#ff00ff]";if(n.data.stopYn==="Y")return"!text-gray-400"},y=n=>Le(n.data.artclExtTime+n.data.cueItemTime),t=n=>{const w=o.value?o.value.api.getRenderedNodes():[];if(!w.length)return"00:00";const P=w.slice(0,n.node.rowIndex+1).map(B=>B.data.artclExtTime+B.data.cueItemTime).reduce((B,ee)=>B+ee,0);return Le(P)},m=(n,w,S,A)=>{const P=document.querySelector(`button[data-button="${n}-${w.rowIndex}-${S}"]`);if(P&&P.getElementsByTagName("img").length>0){const B=P.getElementsByTagName("img")[0];B.src=A.symbolUrl;return}at({url:A.symbolUrl,css:["w-12","h-6"],targetElement:P})},u=(n,w,S,A)=>{var B,ee,te,se;const P=n.querySelector(`button[data-button="${w}-${S.rowIndex}-${A}"]`);for(let ae=0;ae<=A;ae+=1)S.data.videoSymbolList&&w===he.videoSymbol.name&&((B=S.data.videoSymbolList[ae])==null?void 0:B.symbolOrd)===A?at({url:(ee=S.data.videoSymbolList[ae].symbol)==null?void 0:ee.symbolUrl,css:["w-10","h-6"],targetElement:P}):S.data.audioSymbolList&&w===he.audioSymbol.name&&((te=S.data.audioSymbolList[ae])==null?void 0:te.symbolOrd)===A&&at({url:(se=S.data.audioSymbolList[ae].symbol)==null?void 0:se.symbolUrl,css:["w-10","h-6"],targetElement:P})},i=(n,w=1)=>{const S=n.colDef.field,A=document.createElement("div");A.classList.add("flex","space-x-1","items-center");for(let P=0;P<w;P+=1){const B=document.createElement("div"),ee={iconList:g.iconList,rowIndex:n.rowIndex,iconIndex:P,type:S,disabled:!0,onClickedIcon:se=>{m(S,n,P,se)}},te=vt(Fo,ee,B);u(te,S,n,P),A.appendChild(te)}return A},p=x(),f=[{headerName:"",field:"drag",sortable:!1,maxWidth:40,rowDrag:!0,rowDragText:(n,w)=>(console.log("params",n),`${w}개 큐시트 아이템 추가`)},{field:"checkbox",sortable:!1,maxWidth:50,headerCheckboxSelection:!0,checkboxSelection:!0,showDisabledCheckboxes:!0},{headerName:"순번",field:"no",sortable:!1,minWidth:60,maxWidth:60,valueGetter:"node.rowIndex",cellRenderer:n=>dt(n)},{headerName:"소요시간",field:"itemTime",tooltipValueGetter:y,sortable:!1,minWidth:90,maxWidth:100,valueGetter:y},{headerName:"누적시간",field:"accumulateTime",tooltipValueGetter:t,minWidth:90,maxWidth:100,valueFormatter:t},{headerName:"제목",field:"cueItemTitl",minWidth:250,maxWidth:250,sortable:!1,cellClass:n=>n.data.cueItemDivCd===de.ITEM.id?"editor-input":"",editable:!1,valueGetter:n=>n.data.cueItemTitl},{headerName:"형식",field:"artclTypCdNm",tooltipField:"artclTypCdNm",filter:!1,sortable:!1,minWidth:80,maxWidth:80},{headerName:"기자",field:"rptrNm",tooltipField:"rptrNm",filter:!1,sortable:!1,minWidth:100},{headerName:"부서",field:"",tooltipField:"",filter:!1,sortable:!1,minWidth:60,maxWidth:60},{headerName:"CAM",field:he.camSymbol.name,sortable:!1,minWidth:150,maxWidth:150,cellRenderer:n=>i(n,2)},{headerName:"VIDEO",field:he.videoSymbol.name,sortable:!1,minWidth:150,maxWidth:150,cellRenderer:n=>i(n,2)},{headerName:"영상정보",field:"",tooltipField:"",filter:!1,sortable:!1,minWidth:100,maxWidth:100},{headerName:"AUDIO",field:he.audioSymbol.name,filter:!1,sortable:!1,minWidth:150,maxWidth:150,cellRenderer:n=>i(n,2)},{headerName:"참조사항",field:"rmk",filter:!1,sortable:!1,minWidth:150,cellClass:"editor-input",cellEditor:"agTextCellEditor",editable:!1,valueGetter:n=>n.data.rmk}],e=()=>{const n=["drag","checkbox"],w=g.mode==="edit";p.value.api.setColumnsVisible(n,w),p.value.api.refreshHeader()},h=n=>{o.value=n,p.value=n,e(),c("cuesheet-search-detail-list-api",n)},r=n=>{c("double-clicked-row",n)};return re(()=>g.mode,()=>{e()}),re(()=>p.value,n=>{n.api.destroyCalled||h(n)}),(n,w)=>(D(),O(Ae,{"column-defs":f,"row-data":n.rowData,"is-loading":n.isLoading,"first-selected-row":!1,"row-selection":"multiple","row-drag-managed":!1,"row-drag-multi-row":!0,"get-row-class":d,onSelectedRows:s,onOnGridReady:h,onDoubleClickedRow:r},null,8,["row-data","is-loading"]))}}),on={class:"flex flex-col h-full w-full"},sn={key:0,class:"flex flex-col h-full w-full"},nn={key:1,class:"flex flex-col h-full w-full"},rn={class:"flex justify-between items-center gap-2 bg-primary rounded-md text-white p-2"},ln={class:"text-sm flex flex-wrap gap-2 items-center"},cn={class:"flex items-center rounded px-2 py-1 bg-gray-700 space-x-1"},dn={class:"min-w-48 truncate"},un=U({__name:"CuesheetSearch",props:{mode:{}},emits:["cuesheet-search-detail-list-api","on-cuesheet-search-drop-zone"],setup(I,{emit:C}){const g=C,{fetchCuesheetItems:c}=He(),{companyId:o}=Gt(),{fetchCuesheet:a,fetchDetailCuesheet:s}=Kt(),d=mt(),{getUserInfo:y}=Te(d),t=Jt(),{getIcons:m}=Te(t),u=ye({searchRangeDate:[q().subtract(1,"day").format("YYYY-MM-DD"),q().format("YYYY-MM-DD")],searchChDivIds:o,searchProgram:"",searchText:"",searchProgramType:""}),i=x(!1),p=x([]),f=x([]),e=x(),h=x(),r=x(1),n=x(Fe.sm),w=x({isShow:!1,page:1,totalElements:0,totalPages:1,numberOfElements:0,size:n.value}),S=x(!1),A=Y(()=>{var k,H;return ht((k=h.value)==null?void 0:k.brdcDt,(H=h.value)==null?void 0:H.brdcStartTime)}),P=async()=>{var k;try{i.value=!0;const H={sdate:u.searchRangeDate[0],edate:u.searchRangeDate[1],chDivIds:u.searchChDivIds,brdcPgmId:typeof u.searchProgram=="object"?(k=u.searchProgram)==null?void 0:k.id:"",searchWord:u.searchText,programType:u.searchProgramType,size:n.value,page:r.value-1},W=await a(H);W.success&&(p.value=W.data.content,w.value={isShow:!0,page:r.value,totalPages:W.data.totalPages,totalElements:W.data.totalElements,numberOfElements:W.data.numberOfElements,size:W.data.size})}catch(H){console.error(H)}finally{i.value=!1}},B=()=>{P()},ee=k=>{r.value=k,P()},te=k=>{e.value=k},se=async()=>{const k=await s(e.value[0].data.id);k.success&&(h.value=k.data)},ae=async()=>{try{const k=await c({cueId:e.value[0].data.id});k.success&&(f.value=k.data)}catch(k){console.log("Fail to get cuesheet items",k)}},$=async()=>{S.value=!0,await se(),await ae(),g("on-cuesheet-search-drop-zone")},L=k=>{g("cuesheet-search-detail-list-api",k)};return(k,H)=>{var ne,j,K,ue,we,Ce,xe;const W=Zt("tooltip");return D(),N("div",on,[S.value?F("",!0):(D(),N("div",sn,[_(E(hs),{"search-condition":u,"onClick:search":B},null,8,["search-condition"]),_(bs,{"is-loading":i.value,"row-data":p.value,"page-info":w.value,mode:"read",onSelectedRows:te,onDoubleClickedRow:$,onOnChangePage:ee},null,8,["is-loading","row-data","page-info"])])),S.value?(D(),N("div",nn,[l("div",rn,[l("div",ln,[l("div",cn,[_(E(ut),{text:(j=E(Re)((ne=h.value)==null?void 0:ne.cueStCd))==null?void 0:j.state,color:(ue=E(Re)((K=h.value)==null?void 0:K.cueStCd))==null?void 0:ue.color,"font-color":"text-white"},null,8,["text","color"]),l("div",dn,M((Ce=(we=h.value)==null?void 0:we.program)==null?void 0:Ce.brdcPgmNm)+" "+M(A.value),1),_(tn,{"cuesheet-info":h.value,duration:((xe=h.value)==null?void 0:xe.brdcDurtn)||0,"cuesheet-items":f.value},null,8,["cuesheet-info","duration","cuesheet-items"])])]),le(_(G,{icon:"arrow-uturn-left",onClick:H[0]||(H[0]=Ke=>S.value=!1)},null,512),[[W,"큐시트 목록으로 돌아가기"]])]),_(an,{mode:k.mode,"user-info":E(y),"icon-list":E(m),"row-data":f.value,onCuesheetSearchDetailListApi:L},null,8,["mode","user-info","icon-list","row-data"])])):F("",!0)])}}}),mn={class:"h-full flex flex-col"},pn={key:0,class:"h-full"},fn={key:1,class:"flex flex-col h-full space-y-2"},hn={class:"flex items-center space-x-2"},vn={class:"grid grid-cols-2 items-center dark:text-dark-gray-200 p-0.5"},gn={class:"flex items-center space-x-2"},yn={class:"bg-gray-100 p-1 rounded-full text-primary"},bn={class:"truncate"},wn={class:"flex items-center space-x-2"},Cn={class:"bg-gray-100 p-1 rounded-full text-primary"},xn={class:"truncate"},In={class:"overflow-y-auto"},Sn=U({__name:"ArticleDetailInfo",props:{selectedArticleData:{default:()=>{}},articleEditorState:{}},emits:["update:articleEditorState","update:selectedArticleData"],setup(I,{emit:C}){const g=I,c=C,{formatDate:o}=Ge(),a=st(g,c,"selectedArticleData"),s=st(g,c,"articleEditorState"),d=x(),y=Y(()=>o(a.value.inputDtm,"YYYY-MM-DD HH:mm:ss"));return re(()=>g.selectedArticleData,t=>{d.value=null,Mo(()=>{d.value=t==null?void 0:t.artclTypCd})},{deep:!0,immediate:!0}),(t,m)=>{var u;return D(),N("div",mn,[t.selectedArticleData?(D(),N("div",fn,[l("div",hn,[_(ss,{"type-code":E(a).artclTypCd},null,8,["type-code"]),_(ke,{modelValue:E(a).artclTitl,"onUpdate:modelValue":m[0]||(m[0]=i=>E(a).artclTitl=i),class:"flex-1",disabled:""},null,8,["modelValue"])]),l("div",vn,[l("div",gn,[l("div",yn,[_(jt,{icon:"user"})]),l("span",bn,M((u=E(a))==null?void 0:u.rptrNm),1)]),l("div",wn,[l("div",Cn,[_(jt,{icon:"arrow-up-tray"})]),l("span",xn,M(y.value),1)])]),l("div",In,[d.value?(D(),O(Go,{key:0,"anchor-text-array":E(s).anchorTextArray,"reporter-text-array":E(s).reporterTextArray,"caption-array":E(s).captionArray,"type-id":d.value,"anchor-caption-read-only":"","anchor-editor-read-only":"","reporter-caption-read-only":"","reporter-editor-read-only":""},null,8,["anchor-text-array","reporter-text-array","caption-array","type-id"])):F("",!0)])])):(D(),N("div",pn,[_(Jo)]))])}}}),Dn=U({__name:"VideoLinkList",props:{isLoading:{type:Boolean,default:!1},rowData:{},selectedRowIndex:{default:0},hideActions:{type:Boolean}},emits:["selected-rows","double-clicked-row","on-click-approve","on-click-reject","on-click-link","on-click-delete"],setup(I,{emit:C}){const g=C,c=[{headerName:"순번",field:"NO",filter:!1,hide:!1,sortable:!1,minWidth:60,maxWidth:60,valueGetter:"node.rowIndex",cellRenderer:s=>dt(s)},{headerName:"썸네일",field:"",filter:!1,hide:!1,minWidth:100,maxWidth:100,cellClass:"flex items-center justify-center flex-none",cellRenderer:Xo,cellRendererParams:s=>({imageUrl:s.data.imageUrl})},{headerName:"제목",field:"contentTitle",filter:!1,hide:!1,sortable:!1,minWidth:140},{headerName:"재생길이",field:"contentTitle",filter:!1,hide:!1,sortable:!1,minWidth:140},{headerName:"등록자",field:"contentTitle",filter:!1,hide:!1,sortable:!1,minWidth:140}],o=s=>{g("selected-rows",s)},a=s=>{g("double-clicked-row",s)};return(s,d)=>(D(),O(Ae,{class:"w-full h-full flex flex-col","column-defs":c,"row-data":s.rowData,"is-loading":s.isLoading,filter:!1,sortable:!0,"suppress-movable":!1,onSelectedRows:o,onDoubleClickedRow:a},null,8,["row-data","is-loading"]))}}),Tn={class:"flex flex-col h-full space-y-2 p-1"},_n={class:"flex justify-end"},En={class:"flex flex-col space-y-2 h-full"},kn=U({__name:"VideoLinkPreview",props:{videoLinks:{}},emits:["on-refresh"],setup(I,{emit:C}){const g=C,c=I,o=x(),a=Y(()=>({src:"https://www.shutterstock.com/shutterstock/videos/3487213993/preview/stock-footage-abstract-digital-data-transfer-with-colorful-vertical-lines-on-black-background-seamless-loop.mp4",type:"video/mp4"})),s=()=>{g("on-refresh")},d=y=>{o.value=y};return be(()=>{console.log("videoLinks,",c.videoLinks)}),(y,t)=>(D(),N("div",Tn,[l("div",_n,[_(G,{icon:"arrow-path",onClick:s})]),l("div",En,[_(Zo,{"video-source":a.value},null,8,["video-source"]),_(Dn,{"row-data":y.videoLinks,onSelectedRow:d},null,8,["row-data"])])]))}}),An={class:"flex flex-col h-full"},Mn=U({__name:"CuesheetItemReference",props:{isShowTemplate:{type:Boolean,default:!0},isShowArticleSearch:{type:Boolean,default:!0},isShowCueSheet:{type:Boolean,default:!0},isShowArticle:{type:Boolean,default:!0},isShowVideo:{type:Boolean,default:!0},program:{},mode:{},selectedArticleData:{default:void 0},selectedVideoLinks:{default:()=>[]}},emits:["on-chagnge-tab","cuesheet-article-search-list-api","cuesheet-template-search-list-api","cuesheet-search-detail-list-api","on-article-search-drop-zone","on-cuesheet-template-drop-zone","on-cuesheet-search-drop-zone","double-clicked-article-row","update:program","on-refresh"],setup(I,{emit:C}){const g=I,c=C,{program:o}=rt(g,c),a=Y(()=>{var p,f,e,h;return Pe({artclTypCd:(p=g.selectedArticleData)==null?void 0:p.artclTypCd,capList:(f=g.selectedArticleData)==null?void 0:f.articleCaps,ancMentCtt:((e=g.selectedArticleData)==null?void 0:e.ancMentCtt)||JSON.stringify([`
`]),artclCtt:((h=g.selectedArticleData)==null?void 0:h.artclCtt)||JSON.stringify([`
`])})}),s=p=>{c("cuesheet-article-search-list-api",p)},d=p=>{c("cuesheet-template-search-list-api",p)},y=p=>{c("cuesheet-search-detail-list-api",p)},t=Y(()=>[{id:0,name:"기사검색",isShow:g.isShowArticleSearch},{id:1,name:"운영참조",isShow:!1},{id:2,name:"큐시트",isShow:g.isShowTemplate},{id:3,name:"기사",isShow:g.isShowArticle},{id:4,name:"영상",isShow:g.isShowVideo}].filter(p=>p.isShow)),m=p=>{c("on-chagnge-tab",p)},u=p=>{c("double-clicked-article-row",p)},i=()=>{c("on-refresh")};return(p,f)=>(D(),N("div",An,[_($o,{tabs:t.value,onChange:m},{default:z(()=>[p.isShowArticleSearch?(D(),O(E(Ne),{key:0,unmount:!1,class:"flex flex-col h-full"},{default:z(()=>[_(Cs,{mode:p.mode,onDoubleClickedRow:u,onCuesheetArticleSearchListApi:s,onOnArticleSearchDropZone:f[0]||(f[0]=e=>p.$emit("on-article-search-drop-zone"))},null,8,["mode"])]),_:1})):F("",!0),p.isShowTemplate?(D(),O(E(Ne),{key:1,unmount:!1,class:"flex flex-col h-full"},{default:z(()=>[_(Us,{program:E(o),"onUpdate:program":f[1]||(f[1]=e=>Ht(o)?o.value=e:null),mode:p.mode,onCuesheetTemplateSearchListApi:d,onOnCuesheetTemplateDropZone:f[2]||(f[2]=e=>p.$emit("on-cuesheet-template-drop-zone"))},null,8,["program","mode"])]),_:1})):F("",!0),p.isShowCueSheet?(D(),O(E(Ne),{key:2,unmount:!0,class:"flex flex-col h-full"},{default:z(()=>[_(un,{mode:p.mode,onCuesheetSearchDetailListApi:y,onOnCuesheetSearchDropZone:f[3]||(f[3]=e=>p.$emit("on-cuesheet-search-drop-zone"))},null,8,["mode"])]),_:1})):F("",!0),p.isShowArticle?(D(),O(E(Ne),{key:3,"un-mount":!0,class:"flex flex-col h-full"},{default:z(()=>[_(Sn,{"selected-article-data":p.selectedArticleData,"article-editor-state":a.value,class:"p-2"},null,8,["selected-article-data","article-editor-state"])]),_:1})):F("",!0),p.isShowVideo?(D(),O(E(Ne),{key:4,"un-mount":!0,class:"flex flex-col h-full"},{default:z(()=>[_(kn,{"video-links":p.selectedVideoLinks,onOnRefresh:i},null,8,["video-links"])]),_:1})):F("",!0)]),_:1},8,["tabs"])]))}}),$n={class:"flex flex-col h-full"},Nn={class:"flex justify-center space-x-2 overflow-y-hidden"},Ln={class:"w-full overflow-y-auto dark:bg-dark-secondary p-1.5 border border-gray-300 dark:border-dark-border rounded-md"},Pn={class:"w-[30rem] dark:bg-dark-secondary p-1.5 border border-gray-300 dark:border-dark-border rounded-md overflow-y-auto"},Rn=U({__name:"ArticleModal",props:{articleId:{},mode:{default:"readOnly"}},emits:["close"],setup(I,{emit:C}){const g=I,c=C,{fetchArticle:o}=pt(),a=x(ze.Straight),s=x(Ft.Broadcasting),d=x([]),y=x(!0),t=x(""),m=x("00:00"),u=x("00:00"),i=x("00:00"),p=x({anchorTextArray:[""],captionArray:[],reporterTextArray:[""]}),f=ye({reporter:"",anchorTime:u,reportTime:i,articleTime:m,extraTime:{isPositive:!0,time:"00:00",sec:0},inputer:null,updateDate:void 0,transferDate:void 0,approveDate:void 0,division:void 0,embargo:q().format("YYYY-MM-DD HH:mm:ss"),category:void 0,importance:void 0,tag:[],coveragePlanId:void 0,urgency:!1,disaster:!1,priority:void 0}),e=Y(()=>"기사 보기"),h=(n=!1)=>{c("close",n)},r=async()=>{const n=await o(Number(g.articleId));n&&n.success&&(t.value=n.data.artclTitl,a.value=n.data.artclTypCd,p.value=Pe({artclTypCd:n.data.artclTypCd,capList:n.data.articleCaps,ancMentCtt:n.data.ancMentCtt||JSON.stringify([`
`]),artclCtt:n.data.artclCtt||JSON.stringify([`
`])}),f.reporter=n.data.rptrNm,f.program=n.data.brdcPgmId,f.extraTime={isPositive:n.data.artclExtTime>=0,time:Le(n.data.artclExtTime),sec:n.data.artclExtTime},f.division=n.data.artclDivCd,f.embargo=n.data.artclDivDtm,f.category=n.data.artclCateId,f.tag=n.data.articleTags.map(w=>({...w.tag,tagName:w.tag.tagNm})),d.value=n.data.articleAttachmentFileList.map(w=>({...w,name:w.fileName})))};return be(()=>{r()}),(n,w)=>(D(),O(Ve,{"modal-class":"sm:w-full xl:w-[80vw] 2xl:w-[80vw] 2xl:min-w-[1000px]","content-class":"h-[85vh]",onClose:h},{title:z(()=>[ie(M(e.value),1)]),content:z(()=>[l("div",$n,[l("div",Nn,[l("div",Ln,[_(Qt,{"article-title":t.value,"onUpdate:articleTitle":w[0]||(w[0]=S=>t.value=S),"article-type":a.value,"onUpdate:articleType":w[1]||(w[1]=S=>a.value=S),"article-format":s.value,"onUpdate:articleFormat":w[2]||(w[2]=S=>s.value=S),"article-time":m.value,"onUpdate:articleTime":w[3]||(w[3]=S=>m.value=S),"anchor-time":u.value,"onUpdate:anchorTime":w[4]||(w[4]=S=>u.value=S),"report-time":i.value,"onUpdate:reportTime":w[5]||(w[5]=S=>i.value=S),"article-editor-state":p.value,"onUpdate:articleEditorState":w[6]||(w[6]=S=>p.value=S),mode:n.mode,"is-read-only":y.value},null,8,["article-title","article-type","article-format","article-time","anchor-time","report-time","article-editor-state","mode","is-read-only"])]),l("div",Pn,[_(qt,{"article-type":a.value,"onUpdate:articleType":w[7]||(w[7]=S=>a.value=S),"article-meta-data-tab":f,"onUpdate:articleMetaDataTab":w[8]||(w[8]=S=>f=S),"article-file-tab":d.value,"onUpdate:articleFileTab":w[9]||(w[9]=S=>d.value=S),"is-show-drop-zone":!1,mode:n.mode==="read"?"read":"edit","is-read-only":y.value,class:"h-full"},null,8,["article-type","article-meta-data-tab","article-file-tab","mode","is-read-only"])])])])]),_:1}))}});var ta={exports:{}};(function(I,C){(function(c,o){I.exports=o()})(window,function(){return function(g){var c={};function o(a){if(c[a])return c[a].exports;var s=c[a]={i:a,l:!1,exports:{}};return g[a].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=g,o.c=c,o.d=function(a,s,d){o.o(a,s)||Object.defineProperty(a,s,{enumerable:!0,get:d})},o.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,s){if(s&1&&(a=o(a)),s&8||s&4&&typeof a=="object"&&a&&a.__esModule)return a;var d=Object.create(null);if(o.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:a}),s&2&&typeof a!="string")for(var y in a)o.d(d,y,(function(t){return a[t]}).bind(null,y));return d},o.n=function(a){var s=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(s,"a",s),s},o.o=function(a,s){return Object.prototype.hasOwnProperty.call(a,s)},o.p="",o(o.s=0)}({"./src/index.js":function(g,c,o){o.r(c),o("./src/sass/index.scss");var a=o("./src/js/init.js"),s=a.default.init;typeof window<"u"&&(window.printJS=s),c.default=s},"./src/js/browser.js":function(g,c,o){o.r(c);var a={isFirefox:function(){return typeof InstallTrigger<"u"},isIE:function(){return navigator.userAgent.indexOf("MSIE")!==-1||!!document.documentMode},isEdge:function(){return!a.isIE()&&!!window.StyleMedia},isChrome:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window;return!!d.chrome},isSafari:function(){return Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||navigator.userAgent.toLowerCase().indexOf("safari")!==-1},isIOSChrome:function(){return navigator.userAgent.toLowerCase().indexOf("crios")!==-1}};c.default=a},"./src/js/functions.js":function(g,c,o){o.r(c),o.d(c,"addWrapper",function(){return y}),o.d(c,"capitalizePrint",function(){return t}),o.d(c,"collectStyles",function(){return m}),o.d(c,"addHeader",function(){return i}),o.d(c,"cleanUp",function(){return p}),o.d(c,"isRawHTML",function(){return f});var a=o("./src/js/modal.js"),s=o("./src/js/browser.js");function d(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?d=function(r){return typeof r}:d=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},d(e)}function y(e,h){var r="font-family:"+h.font+" !important; font-size: "+h.font_size+" !important; width:100%;";return'<div style="'+r+'">'+e+"</div>"}function t(e){return e.charAt(0).toUpperCase()+e.slice(1)}function m(e,h){for(var r=document.defaultView||window,n="",w=r.getComputedStyle(e,""),S=0;S<w.length;S++)(h.targetStyles.indexOf("*")!==-1||h.targetStyle.indexOf(w[S])!==-1||u(h.targetStyles,w[S]))&&w.getPropertyValue(w[S])&&(n+=w[S]+":"+w.getPropertyValue(w[S])+";");return n+="max-width: "+h.maxWidth+"px !important; font-size: "+h.font_size+" !important;",n}function u(e,h){for(var r=0;r<e.length;r++)if(d(h)==="object"&&h.indexOf(e[r])!==-1)return!0;return!1}function i(e,h){var r=document.createElement("div");if(f(h.header))r.innerHTML=h.header;else{var n=document.createElement("h1"),w=document.createTextNode(h.header);n.appendChild(w),n.setAttribute("style",h.headerStyle),r.appendChild(n)}e.insertBefore(r,e.childNodes[0])}function p(e){e.showModal&&a.default.close(),e.onLoadingEnd&&e.onLoadingEnd(),(e.showModal||e.onLoadingStart)&&window.URL.revokeObjectURL(e.printable);var h="mouseover";(s.default.isChrome()||s.default.isFirefox())&&(h="focus");var r=function n(){window.removeEventListener(h,n),e.onPrintDialogClose();var w=document.getElementById(e.frameId);w&&w.remove()};window.addEventListener(h,r)}function f(e){var h=new RegExp("<([A-Za-z][A-Za-z0-9]*)\\b[^>]*>(.*?)</\\1>");return h.test(e)}},"./src/js/html.js":function(g,c,o){o.r(c);var a=o("./src/js/functions.js"),s=o("./src/js/print.js");function d(m){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?d=function(i){return typeof i}:d=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},d(m)}c.default={print:function(u,i){var p=t(u.printable)?u.printable:document.getElementById(u.printable);if(!p){window.console.error("Invalid HTML element id: "+u.printable);return}u.printableElement=y(p,u),u.header&&Object(a.addHeader)(u.printableElement,u),s.default.send(u,i)}};function y(m,u){for(var i=m.cloneNode(),p=Array.prototype.slice.call(m.childNodes),f=0;f<p.length;f++)if(u.ignoreElements.indexOf(p[f].id)===-1){var e=y(p[f],u);i.appendChild(e)}switch(u.scanStyles&&m.nodeType===1&&i.setAttribute("style",Object(a.collectStyles)(m,u)),m.tagName){case"SELECT":i.value=m.value;break;case"CANVAS":i.getContext("2d").drawImage(m,0,0);break}return i}function t(m){return d(m)==="object"&&m&&(m instanceof HTMLElement||m.nodeType===1)}},"./src/js/image.js":function(g,c,o){o.r(c);var a=o("./src/js/functions.js"),s=o("./src/js/print.js"),d=o("./src/js/browser.js");c.default={print:function(t,m){t.printable.constructor!==Array&&(t.printable=[t.printable]),t.printableElement=document.createElement("div"),t.printable.forEach(function(u){var i=document.createElement("img");if(i.setAttribute("style",t.imageStyle),i.src=u,d.default.isFirefox()){var p=i.src;i.src=p}var f=document.createElement("div");f.appendChild(i),t.printableElement.appendChild(f)}),t.header&&Object(a.addHeader)(t.printableElement,t),s.default.send(t,m)}}},"./src/js/init.js":function(g,c,o){o.r(c);var a=o("./src/js/browser.js"),s=o("./src/js/modal.js"),d=o("./src/js/pdf.js"),y=o("./src/js/html.js"),t=o("./src/js/raw-html.js"),m=o("./src/js/image.js"),u=o("./src/js/json.js");function i(f){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?i=function(h){return typeof h}:i=function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},i(f)}var p=["pdf","html","image","json","raw-html"];c.default={init:function(){var e={printable:null,fallbackPrintable:null,type:"pdf",header:null,headerStyle:"font-weight: 300;",maxWidth:800,properties:null,gridHeaderStyle:"font-weight: bold; padding: 5px; border: 1px solid #dddddd;",gridStyle:"border: 1px solid lightgray; margin-bottom: -1px;",showModal:!1,onError:function(P){throw P},onLoadingStart:null,onLoadingEnd:null,onPrintDialogClose:function(){},onIncompatibleBrowser:function(){},modalMessage:"Retrieving Document...",frameId:"printJS",printableElement:null,documentTitle:"Document",targetStyle:["clear","display","width","min-width","height","min-height","max-height"],targetStyles:["border","box","break","text-decoration"],ignoreElements:[],repeatTableHeader:!0,css:null,style:null,scanStyles:!0,base64:!1,onPdfOpen:null,font:"TimesNewRoman",font_size:"12pt",honorMarginPadding:!0,honorColor:!1,imageStyle:"max-width: 100%;"},h=arguments[0];if(h===void 0)throw new Error("printJS expects at least 1 attribute.");switch(i(h)){case"string":e.printable=encodeURI(h),e.fallbackPrintable=e.printable,e.type=arguments[1]||e.type;break;case"object":e.printable=h.printable,e.fallbackPrintable=typeof h.fallbackPrintable<"u"?h.fallbackPrintable:e.printable,e.fallbackPrintable=e.base64?"data:application/pdf;base64,".concat(e.fallbackPrintable):e.fallbackPrintable;for(var r in e)r==="printable"||r==="fallbackPrintable"||(e[r]=typeof h[r]<"u"?h[r]:e[r]);break;default:throw new Error('Unexpected argument type! Expected "string" or "object", got '+i(h))}if(!e.printable)throw new Error("Missing printable information.");if(!e.type||typeof e.type!="string"||p.indexOf(e.type.toLowerCase())===-1)throw new Error("Invalid print type. Available types are: pdf, html, image and json.");e.showModal&&s.default.show(e),e.onLoadingStart&&e.onLoadingStart();var n=document.getElementById(e.frameId);n&&n.parentNode.removeChild(n);var w=document.createElement("iframe");switch(a.default.isFirefox()?w.setAttribute("style","width: 1px; height: 100px; position: fixed; left: 0; top: 0; opacity: 0; border-width: 0; margin: 0; padding: 0"):w.setAttribute("style","visibility: hidden; height: 0; width: 0; position: absolute; border: 0"),w.setAttribute("id",e.frameId),e.type!=="pdf"&&(w.srcdoc="<html><head><title>"+e.documentTitle+"</title>",e.css&&(Array.isArray(e.css)||(e.css=[e.css]),e.css.forEach(function(A){w.srcdoc+='<link rel="stylesheet" href="'+A+'">'})),w.srcdoc+="</head><body></body></html>"),e.type){case"pdf":if(a.default.isIE())try{console.info("Print.js doesn't support PDF printing in Internet Explorer.");var S=window.open(e.fallbackPrintable,"_blank");S.focus(),e.onIncompatibleBrowser()}catch(A){e.onError(A)}finally{e.showModal&&s.default.close(),e.onLoadingEnd&&e.onLoadingEnd()}else d.default.print(e,w);break;case"image":m.default.print(e,w);break;case"html":y.default.print(e,w);break;case"raw-html":t.default.print(e,w);break;case"json":u.default.print(e,w);break}}}},"./src/js/json.js":function(g,c,o){o.r(c);var a=o("./src/js/functions.js"),s=o("./src/js/print.js");function d(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?d=function(u){return typeof u}:d=function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},d(t)}c.default={print:function(m,u){if(d(m.printable)!=="object")throw new Error("Invalid javascript data object (JSON).");if(typeof m.repeatTableHeader!="boolean")throw new Error("Invalid value for repeatTableHeader attribute (JSON).");if(!m.properties||!Array.isArray(m.properties))throw new Error("Invalid properties array for your JSON data.");m.properties=m.properties.map(function(i){return{field:d(i)==="object"?i.field:i,displayName:d(i)==="object"?i.displayName:i,columnSize:d(i)==="object"&&i.columnSize?i.columnSize+";":100/m.properties.length+"%;"}}),m.printableElement=document.createElement("div"),m.header&&Object(a.addHeader)(m.printableElement,m),m.printableElement.innerHTML+=y(m),s.default.send(m,u)}};function y(t){var m=t.printable,u=t.properties,i='<table style="border-collapse: collapse; width: 100%;">';t.repeatTableHeader&&(i+="<thead>"),i+="<tr>";for(var p=0;p<u.length;p++)i+='<th style="width:'+u[p].columnSize+";"+t.gridHeaderStyle+'">'+Object(a.capitalizePrint)(u[p].displayName)+"</th>";i+="</tr>",t.repeatTableHeader&&(i+="</thead>"),i+="<tbody>";for(var f=0;f<m.length;f++){i+="<tr>";for(var e=0;e<u.length;e++){var h=m[f],r=u[e].field.split(".");if(r.length>1)for(var n=0;n<r.length;n++)h=h[r[n]];else h=h[u[e].field];i+='<td style="width:'+u[e].columnSize+t.gridStyle+'">'+h+"</td>"}i+="</tr>"}return i+="</tbody></table>",i}},"./src/js/modal.js":function(g,c,o){o.r(c);var a={show:function(d){var y="font-family:sans-serif; display:table; text-align:center; font-weight:300; font-size:30px; left:0; top:0;position:fixed; z-index: 9990;color: #0460B5; width: 100%; height: 100%; background-color:rgba(255,255,255,.9);transition: opacity .3s ease;",t=document.createElement("div");t.setAttribute("style",y),t.setAttribute("id","printJS-Modal");var m=document.createElement("div");m.setAttribute("style","display:table-cell; vertical-align:middle; padding-bottom:100px;");var u=document.createElement("div");u.setAttribute("class","printClose"),u.setAttribute("id","printClose"),m.appendChild(u);var i=document.createElement("span");i.setAttribute("class","printSpinner"),m.appendChild(i);var p=document.createTextNode(d.modalMessage);m.appendChild(p),t.appendChild(m),document.getElementsByTagName("body")[0].appendChild(t),document.getElementById("printClose").addEventListener("click",function(){a.close()})},close:function(){var d=document.getElementById("printJS-Modal");d&&d.parentNode.removeChild(d)}};c.default=a},"./src/js/pdf.js":function(g,c,o){o.r(c);var a=o("./src/js/print.js"),s=o("./src/js/functions.js");c.default={print:function(t,m){if(t.base64){var u=Uint8Array.from(atob(t.printable),function(p){return p.charCodeAt(0)});d(t,m,u);return}t.printable=/^(blob|http|\/\/)/i.test(t.printable)?t.printable:window.location.origin+(t.printable.charAt(0)!=="/"?"/"+t.printable:t.printable);var i=new window.XMLHttpRequest;i.responseType="arraybuffer",i.addEventListener("error",function(){Object(s.cleanUp)(t),t.onError(i.statusText,i)}),i.addEventListener("load",function(){if([200,201].indexOf(i.status)===-1){Object(s.cleanUp)(t),t.onError(i.statusText,i);return}d(t,m,i.response)}),i.open("GET",t.printable,!0),i.send()}};function d(y,t,m){var u=new window.Blob([m],{type:"application/pdf"});u=window.URL.createObjectURL(u),t.setAttribute("src",u),a.default.send(y,t)}},"./src/js/print.js":function(g,c,o){o.r(c);var a=o("./src/js/browser.js"),s=o("./src/js/functions.js"),d={send:function(i,p){document.getElementsByTagName("body")[0].appendChild(p);var f=document.getElementById(i.frameId);f.onload=function(){if(i.type==="pdf"){a.default.isFirefox()?setTimeout(function(){return y(f,i)},1e3):y(f,i);return}var e=f.contentWindow||f.contentDocument;if(e.document&&(e=e.document),e.body.appendChild(i.printableElement),i.type!=="pdf"&&i.style){var h=document.createElement("style");h.innerHTML=i.style,e.head.appendChild(h)}var r=e.getElementsByTagName("img");r.length>0?t(Array.from(r)).then(function(){return y(f,i)}):y(f,i)}}};function y(u,i){try{if(u.focus(),a.default.isEdge()||a.default.isIE())try{u.contentWindow.document.execCommand("print",!1,null)}catch{u.contentWindow.print()}else u.contentWindow.print()}catch(p){i.onError(p)}finally{a.default.isFirefox()&&(u.style.visibility="hidden",u.style.left="-1px"),Object(s.cleanUp)(i)}}function t(u){var i=u.map(function(p){if(p.src&&p.src!==window.location.href)return m(p)});return Promise.all(i)}function m(u){return new Promise(function(i){var p=function f(){!u||typeof u.naturalWidth>"u"||u.naturalWidth===0||!u.complete?setTimeout(f,500):i()};p()})}c.default=d},"./src/js/raw-html.js":function(g,c,o){o.r(c);var a=o("./src/js/print.js");c.default={print:function(d,y){d.printableElement=document.createElement("div"),d.printableElement.setAttribute("style","width:100%"),d.printableElement.innerHTML=d.printable,a.default.send(d,y)}}},"./src/sass/index.scss":function(g,c,o){},0:function(g,c,o){g.exports=o("./src/index.js")}}).default})})(ta);var On=ta.exports;const Wn=No(On),jn={id:"printContent",class:"print-cuesheet-list"},Un={class:"border-collapse",style:{width:"100%"}},Yn={style:{"page-break-before":"always"}},zn={class:"header"},Bn={class:"header-title"},Vn={class:"info"},Fn={style:{}},Hn={class:"border-collapse w-full"},Gn={class:"border border-gray order"},Kn={class:"border border-gray time"},Jn={class:"border border-gray time"},Zn={class:"border border-gray"},Xn={class:"item-title-truncate"},Qn={class:"border border-gray type"},qn={class:"border border-gray inputer"},er={class:"inputer-truncate"},tr={class:"border border-gray inputer"},ar={class:"inputer-truncate"},or={class:"border border-gray icon"},sr=["src"],nr={class:"border border-gray icon"},rr=["src"],lr={__name:"CuesheetPrintPage",props:{cuesheetInfo:{type:Object,default:()=>({})},cuesheetList:{type:Array,default:()=>[]},iconList:{type:Array,default:()=>[]}},emits:["close-print"],setup(I,{emit:C}){const g="http://192.168.1.11:9000/api/files",c=I,o=C,{userId:a,userName:s}=Gt(),d=()=>{window.removeEventListener("mouseover",d);const p=document.getElementById("printJS");o("close-print"),p&&p.remove()},y=()=>{Wn({printable:"printContent",type:"html",css:["/print/cuesheet-list.css","/print/common.css"],documentTitle:`${s}(${a})`,scanStyles:!1}),setTimeout(()=>{window.addEventListener("mouseover",d)},1e3)},t=Y(()=>ht(c.cuesheetInfo.brdcDt,c.cuesheetInfo.brdcStartTime)),m=p=>{const f=p.target;f.src=Qo},u=p=>{const h=c.cuesheetList.slice(0,p+1).map(r=>r.artclExtTime+r.cueItemTime).reduce((r,n)=>r+n,0);return ce(h)},i=p=>{const f=p.symbol.symbolUrl;return`${g}/${f}`};return be(()=>{setTimeout(()=>{y()},200)}),(p,f)=>le((D(),N("div",null,[l("div",jn,[l("table",Un,[l("thead",Yn,[l("tr",null,[l("div",zn,[l("h1",Bn,M(I.cuesheetInfo.brdcPgmNm),1),l("div",Vn,[l("div",null,[f[0]||(f[0]=l("strong",null,"방송일시: ",-1)),ie(M(t.value),1)]),l("div",null,[f[1]||(f[1]=l("strong",null,"ANC:",-1)),ie(" "+M(I.cuesheetInfo.anc1Nm)+M(I.cuesheetInfo.anc2Nm?`, ${I.cuesheetInfo.anc2Nm}`:""),1)]),l("div",null,[f[2]||(f[2]=l("strong",null,"PD:",-1)),ie(" "+M(I.cuesheetInfo.pd1Nm)+M(I.cuesheetInfo.pd2Nm?`, ${I.cuesheetInfo.pd2Nm}`:""),1)]),l("div",null,[f[3]||(f[3]=l("strong",null,"TD:",-1)),ie(" "+M(I.cuesheetInfo.td1Nm)+M(I.cuesheetInfo.td2Nm?`, ${I.cuesheetInfo.td2Nm}`:""),1)])]),f[4]||(f[4]=Lo('<table class="border-collapse w-full"><tr class="border border-collapse border-gray bg-gray-200 text-center align-middle w-full"><th class="border border-gray text-center order">No</th><th class="border border-gray text-center time">소요</th><th class="border border-gray text-center time">누적</th><th class="border border-gray text-center">제목</th><th class="border border-gray text-center type">형식</th><th class="border border-gray text-center inputer">기자</th><th class="border border-gray text-center inputer">부서</th><th class="border border-gray text-center icon">Camera</th><th class="border border-gray text-center icon">Video</th></tr></table>',1))])])]),l("tbody",Fn,[l("table",Hn,[(D(!0),N(Ee,null,_e(I.cuesheetList,(e,h)=>(D(),N("tr",{key:`page-${h}`,style:{height:"30px"}},[l("td",Gn,M(h+1),1),l("td",Kn,M(E(ce)((e==null?void 0:e.cueItemTime)+(e==null?void 0:e.artclExtTime)||0)),1),l("td",Jn,M(u(h)),1),l("td",Zn,[l("div",Xn,M(`${e.cueItemTitl?e.cueItemTitl:""}`),1)]),l("td",Qn,[l("span",null,M(e.artclTypCdNm),1)]),l("td",qn,[l("div",er,M(e==null?void 0:e.rptrNm),1)]),l("td",tr,[l("div",ar,M(e==null?void 0:e.deptNm),1)]),l("td",or,[(D(!0),N(Ee,null,_e(e==null?void 0:e.camSymbolList,(r,n)=>(D(),N("span",{key:`${n}_cam_symbol`,class:"icon-symbol"},[l("img",{src:i(r),alt:"",onError:m},null,40,sr)]))),128))]),l("td",nr,[(D(!0),N(Ee,null,_e(e==null?void 0:e.videoSymbolList,(r,n)=>(D(),N("span",{key:`${n}_video_symbol`,class:"icon-symbol"},[l("img",{src:i(r),alt:"",onError:m},null,40,rr)]))),128))])]))),128))])])])])],512)),[[Po,!1]])}},ir=lr,cr=U({__name:"LinkedVideoList",props:{isLoading:{type:Boolean},rowData:{},pageInfo:{},selectedRowIndex:{}},emits:["selected-row"],setup(I,{emit:C}){const g=C,{formatDate:c}=Ge(),o=[{headerName:"",field:"drag",sortable:!1,maxWidth:40,rowDrag:!0},{headerName:"영상 제목",field:"mediaTitle",minWidth:150,maxWidth:150},{headerName:"재생길이",field:"timeCode",minWidth:170,maxWidth:170},{headerName:"작성자",field:"inputerName",minWidth:80,maxWidth:80},{headerName:"작성일시",field:"inputDateTime",minWidth:170,valueGetter:s=>c(s.data.inputDateTime,"YYYY-MM-DD HH:mm:ss")}],a=s=>{g("selected-row",s)};return(s,d)=>(D(),O(Ae,{"column-defs":o,"row-data":s.rowData,"page-info":s.pageInfo,"selected-row-index":s.selectedRowIndex,onSelectedRows:a},null,8,["row-data","page-info","selected-row-index"]))}}),dr={class:"flex gap-4 border p-2 rounded-full"},ur=["onClick"],mr={class:"flex items-center space-x-2"},pr=U({__name:"MamMediaSearchFilter",emits:["on-search-filter"],setup(I,{emit:C}){const g=C,{t:c}=Xt(),o=x(Fe.sm),a=ye({folderList:nt.values,folder:nt.MAM,page:1,pageInfo:{isShow:!0,page:1,totalElements:0,totalPages:1,numberOfElements:0,size:o.value},selectedRowIndex:null,selectedFolderIndex:0,selectedRow:null,searchInput:"",dates:[q().subtract(1,"week").format("YYYY-MM-DD"),q().format("YYYY-MM-DD")]}),s={onSearch:()=>{a.page=1,a.selectedRowIndex=null,a.selectedRow=null,g("on-search-filter",a)},onSelectedFolder:(d,y)=>{a.selectedFolderIndex=y,a.folder=d,s.onSearch()}};return(d,y)=>(D(),N("div",null,[l("div",dr,[(D(!0),N(Ee,null,_e(a.folderList,(t,m)=>(D(),N("div",{key:t.id,class:ct(["text-xs text rounded-2xl py-1 px-2 cursor-pointer select-none",[m===a.selectedFolderIndex?"bg-primary text-white":"bg-gray-100"]]),onClick:u=>s.onSelectedFolder(t,m)},M(t.name),11,ur))),128))]),l("div",mr,[_(lt,{modelValue:a.dates,"onUpdate:modelValue":[y[0]||(y[0]=t=>a.dates=t),s.onSearch]},null,8,["modelValue","onUpdate:modelValue"]),_(ke,{modelValue:a.searchInput,"onUpdate:modelValue":y[1]||(y[1]=t=>a.searchInput=t),placeholder:E(c)("RequestMovie.검색어"),width:"w-48",onKeydown:it(s.onSearch,["enter"])},null,8,["modelValue","placeholder","onKeydown"]),_(G,{icon:"magnifying-glass",onClick:s.onSearch},null,8,["onClick"])]),y[2]||(y[2]=l("div",null,null,-1))]))}}),fr={class:"flex flex-col h-full justify-between"},hr={class:"flex h-full space-x-2"},vr={class:"flex-1"},gr={class:"flex flex-col h-full space-y-2"},yr={class:"flex-1"},br={class:"flex flex-col h-full space-y-2"},wr={class:"sm:flex sm:flex-row-reverse pt-4 pb-2"},Cr=U({__name:"VideoLinkModal",props:{cueSheetItemId:{}},emits:["close","on-send-article"],setup(I,{emit:C}){const g=I,c=C,{fetchCuesheetItem:o}=He(),{fetchMams:a}=ts(),s=x(Fe.sm),d=x(""),y=ye({url:"",fileType:"video"}),t=ye({isLoading:!1,list:[],page:1,sort:"asc",pageInfo:{isShow:!0,page:1,totalElements:0,totalPages:1,numberOfElements:0,size:s.value},folder:nt.MAM,searchInput:"",dates:[q().subtract(1,"week").format("YYYY-MM-DD"),q().format("YYYY-MM-DD")],selectedRowIndex:null,selectedRow:null}),m=ye({isLoading:!1,page:1,pageInfo:{isShow:!0,page:1,totalElements:0,totalPages:1,numberOfElements:0,size:s.value},list:[{title:"제목제목",playTime:"00:00:00",inputerName:"test",inputDateTime:"0000-00-00 00:00:00",videoUrl:"https://www.shutterstock.com/shutterstock/videos/3487213993/preview/stock-footage-abstract-digital-data-transfer-with-colorful-vertical-lines-on-black-background-seamless-loop.mp4"}],selectedRowIndex:void 0,selectedRow:void 0}),u=async()=>{const r={type:t.folder.id,fromDate:t.dates[0],toDate:t.dates[1],pageable:{page:t.page-1,size:s.value,sort:[t.sort]},keyword:t.searchInput};try{t.isLoading=!0;const n=await a(r);n.success&&(t.list=n.data.data)}catch(n){console.log("Fail to get mam video list",n)}finally{t.isLoading=!1}},i={onSelectedRow:r=>{var n,w;t.selectedRowIndex=(n=r[0])==null?void 0:n.rowIndex,t.selectedRow=(w=r[0])==null?void 0:w.data},onDoubleClickedRow:r=>{t.selectedRow=r.data},onSearch:async()=>{t.page=1,t.selectedRowIndex=null,t.selectedRow=null,await u()},onChangePage:r=>{t.page=r,u()}},p={onRemove:()=>{console.log("연결영상 삭제")},onMatch:()=>{console.log("연결영상 매핑")},onSelectedRow:r=>{m.selectedRow=r[0].data,m.selectedRow&&(y.url=m.selectedRow.videoUrl)}},f=()=>{c("close")},e=async()=>{const r=await o(g.cueSheetItemId);r.success&&(r.data.cueItemDivCd===de.ARTICLE.id?d.value=r.data.article.artclTitl:d.value=r.data.cueItemTitl)},h=r=>{t.folder=r.folder,t.searchInput=r.searchInput,t.dates=r.dates,u()};return be(async()=>{await e(),await u()}),(r,n)=>(D(),O(Ve,{"modal-class":"w-[80vw]","content-class":"h-[85vh]",onClose:f},{title:z(()=>n[2]||(n[2]=[ie(" 영상매칭 ")])),content:z(()=>[l("div",fr,[l("div",hr,[l("div",vr,[l("div",gr,[_(ke,{modelValue:d.value,"onUpdate:modelValue":n[0]||(n[0]=w=>d.value=w),label:"기사",disabled:!0},null,8,["modelValue"]),_(pr,{class:"space-y-2",onOnSearchFilter:h}),_(es,{"remove-checkbox":!0,"row-data":t.list,"page-info":t.pageInfo,onSelectedRow:i.onSelectedRow,onOnChangePage:i.onChangePage},null,8,["row-data","page-info","onSelectedRow","onOnChangePage"])])]),l("div",yr,[l("div",br,[_(ke,{modelValue:d.value,"onUpdate:modelValue":n[1]||(n[1]=w=>d.value=w),label:"영상 제목",disabled:!0},null,8,["modelValue"]),l("div",null,[_(qo,{url:y.url,type:y.fileType},null,8,["url","type"])]),_(cr,{"is-loading":m.isLoading,"page-info":m.pageInfo,"row-data":m.list,onSelectedRow:p.onSelectedRow},null,8,["is-loading","page-info","row-data","onSelectedRow"])])])]),l("div",wr,[_(G,{type:"secondary",class:"dark:bg-dark-secondary dark:text-white dark:hover:bg-gray-600",onClick:f},{default:z(()=>n[3]||(n[3]=[ie("취소")])),_:1})])])]),_:1}))}}),xr={class:"!p-0"},Ir={key:0,class:"flex flex-col h-full !p-0"},Sr={class:"flex flex-wrap justify-between p-2 text-white bg-primary dark:bg-dark dark:border-dark-border"},Dr={class:"text-sm flex flex-wrap gap-2 items-center"},Tr={class:"flex items-center rounded px-2 py-1 bg-gray-700 space-x-1"},_r={class:"min-w-48 truncate"},Er={class:"flex items-center space-x-1"},kr={class:"px-2 py-1 rounded bg-gray-700"},Ar={key:0,class:"line-clamp-1"},Mr={key:1,class:"invisible line-clamp-1"},$r={class:"px-2 py-1 rounded bg-gray-700"},Nr={key:0,class:"line-clamp-1"},Lr={key:1,class:"invisible line-clamp-1"},Pr={class:"flex items-center space-x-1"},Rr={class:"px-2 py-1 rounded bg-gray-700"},Or={key:0,class:"line-clamp-1"},Wr={key:1,class:"invisible line-clamp-1"},jr={class:"px-2 py-1 rounded bg-gray-700"},Ur={key:0,class:"line-clamp-1"},Yr={key:1,class:"invisible line-clamp-1"},zr={class:"flex items-center space-x-1"},Br={class:"px-2 py-1 rounded bg-gray-700"},Vr={key:0,class:"line-clamp-1"},Fr={key:1,class:"invisible line-clamp-1"},Hr={class:"px-2 py-1 rounded bg-gray-700"},Gr={key:0,class:"line-clamp-1"},Kr={key:1,class:"invisible line-clamp-1"},Jr={class:"px-2 py-1 rounded bg-gray-700 min-w-20 line-clamp-1"},Zr={class:"px-2 py-1 rounded bg-gray-700 min-w-20 line-clamp-1"},Xr={class:"px-2 py-1 rounded bg-gray-700 min-w-20 line-clamp-1"},Qr={class:"flex items-center space-x-1"},qr={class:"flex flex-col h-full overflow-hidden py-1 px-2"},li=U({__name:"CuesheetDetailView",props:{id:{}},setup(I){const C=I,g=Kt(),c=Ro(),o=Oo(),{t:a}=Xt(),s=ft(),{fetchDetailCuesheet:d,toggleCuesheetLock:y}=g,{getCuesheet:t}=Te(g),m=He(),{fetchCuesheetItems:u,fetchCuesheetItem:i,createCuesheetItem:p,editCuesheetItem:f,updateOrderList:e,deleteSymbol:h,createCuesheetMutipleArticle:r,deleteCuesheetItems:n}=m,{isLoading:w,getCuesheetItems:S}=Te(m),A=Jt(),{fetchIcons:P}=A,{getIcons:B}=Te(A),ee=mt(),{getUserInfo:te}=Te(ee),{swalConfirm:se,swalError:ae}=jo(),$=x({}),L=x(),k=x(),H=x(0),W=x([]),ne=x(),j=x([]),K=x(),ue=x(0),we=x(0),Ce=x(!1),xe=x(!1),Ke=x([]);let oe,me,Oe,Me;const Ie=x(c.query.mode),gt=x(!1),Je=x(),Ze=x(),Xe=x(),Se=x(!1),aa=x(!1),$e=x(!1),Qe=x(!1),pe=Y(()=>({mode:Ie.value==="edit"?"edit":"read",name:Ie.value==="edit"?"편집":"읽기"})),oa=Y(()=>W.value.length===1?W.value[0].data.cueItemTitl:""),sa=Y(()=>ce(Math.floor($.value.brdcDurtn*60))||"00:00:00"),na=Y(()=>ce(Be(k.value))||"00:00:00"),ra=Y(()=>{const v=Math.floor($.value.brdcDurtn*60)-Be(k.value);return ce(v)||"00:00:00"}),la=Y(()=>ht($.value.brdcDt,$.value.brdcStartTime)),We=async()=>{const v=await d(C.id);if(v.success)if($.value=v.data,L.value=$.value.program,te.value.id===v.data.lckrId||v.data.lckYn==="N"){$.value.lckYn==="Y"?Ie.value="edit":Ie.value="read";const b=JSON.parse(JSON.stringify(c.query));b.mode=Ie.value,o.replace({query:b})}else Ie.value="read"},ia=v=>{oe=v},X=async()=>{try{const v=await u({cueId:C.id});v.success&&(k.value=v.data,K.value=void 0,Ke.value=[],W.value=[])}catch(v){console.log("Fail to get cuesheet items",v)}},qe=v=>{oe.api.forEachNode(b=>{b.rowIndex===v&&b.setSelected(!0)})},ca=async v=>{const b=v.map(T=>T.data.id);try{const T={cueId:C.id,cueItemOrd:v[0].rowIndex,artclIdList:b};H.value=v[v.length-1].rowIndex,(await r(T)).success}catch(T){console.error(T)}finally{await X(),qe(H.value)}},da=async v=>{const b=v.map(R=>R.data.id);H.value=v[v.length-1].rowIndex;const T={cueTmpId:v[0].data.cueSheetTemplate.id,cueId:C.id,cueTmpltItemIdList:b,index:v[0].rowIndex};try{(await s.cuesheet.item.createTemplate(T)).success}catch(R){console.log("Fail to add cuesheet item: template",R)}finally{await X(),qe(H.value)}},ua=v=>{console.log("cuesheetSearchs",v)},ma=async()=>{oe.api.isDestroyed()||me.api.isDestroyed()||(Je.value=oe.api.getRowDropZoneParams({onDragStop:v=>{me.api.applyTransaction({remove:v.nodes.map(R=>R.data)});const b=oe.api.getRenderedNodes(),T=[];v.nodes.forEach(R=>{b.forEach(V=>{R.data.id===V.data.id&&T.push(V)})}),ca(T)}}),me.api.addRowDropZone(Je.value))},pa=async()=>{oe.api.isDestroyed()||me.api.isDestroyed()||(Ze.value=oe.api.getRowDropZoneParams({onDragStop:v=>{Oe.api.applyTransaction({remove:v.nodes.map(R=>R.data)});const b=oe.api.getRenderedNodes(),T=[];v.nodes.forEach(R=>{b.forEach(V=>{R.data.id===V.data.id&&T.push(V)})}),da(T)}}),Oe.api.addRowDropZone(Ze.value))},fa=async()=>{oe.api.isDestroyed()||me.api.isDestroyed()||Me.api.isDestroyed()||(Xe.value=oe.api.getRowDropZoneParams({onDragStop:v=>{Me.api.applyTransaction({remove:v.nodes.map(R=>R.data)});const b=oe.api.getRenderedNodes(),T=[];v.nodes.forEach(R=>{b.forEach(V=>{R.data.id===V.data.id&&T.push(V)})}),ua(T)}}),Me.api.addRowDropZone(Xe.value))},ha=v=>{me=v,me.api.removeRowDropZone(Je.value),ma()},va=v=>{Oe=v,Oe.api.removeRowDropZone(Ze.value),pa()},ga=v=>{Me=v,Me.api.removeRowDropZone(Xe.value),fa()},yt=async()=>{oe.api.refreshCells(),me.api.refreshCells()},bt=async()=>{const{lckYn:v}=$.value;try{(await y({cuesheetId:C.id,lckYn:v==="Y"?"N":"Y"})).success&&(await We(),await X())}catch(b){b.errorCode===4e4&&await ae({showCancelButton:!1,html:`<div>${b.message}</div>`})}},ya=async()=>{await se({title:'<div class="space-y-1"><div><span class="text-red-500">방송완료</span>된 큐시트입니다.</div><div>수정하시겠습니까?</div></div>',showCancelButton:!0}).then(async v=>{v.isConfirmed&&(await bt(),await d(C.id),$.value=t.value)})},et=async()=>{try{await We();const{lckYn:v,cueStCd:b}=$.value;b===Vo.OffAir.id&&v==="N"&&await ya(),await bt()}catch(v){console.log("error",v)}},ba=async()=>{if(!await se({title:ge.cuesheetItem.create,icon:void 0,iconColor:"#ff0303",iconHtml:'<svg class="h-24 w-24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20.043 21H3.957c-1.538 0-2.5-1.664-1.734-2.997l8.043-13.988c.77-1.337 2.699-1.337 3.468 0l8.043 13.988C22.543 19.336 21.58 21 20.043 21zM12 9v4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path><path d="M12 17.01l.01-.011" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',html:"<div>추가하시겠습니까?</div>",customClass:{icon:"no-border"},confirmButtonText:"추가"}).then(T=>T.isConfirmed))return;let b;if(W.value.length>0){const T=W.value.length-1;b=W.value[T].data.cueItemOrd+1}else b=S.value.length;try{const T={cueId:C.id,cueItemOrd:b};(await p(T)).success&&window.Notify.success({message:ge.cuesheetItem.create}),qe(b)}catch(T){console.error("Error!",T)}finally{await X(),await yt()}},wa=async v=>{const{cueItemTitl:b,rmk:T,id:R}=v.data,V={cueId:C.id,cueItemTitl:b,rmk:T};(await f({cueItemId:R,params:V})).success&&await X()},Ca=async()=>{await Promise.all([d(C.id),P({useYn:"Y"}),X()]),yt()},xa=async()=>{try{if(W.value){const v={cueId:C.id,cueItemIdList:W.value.map(b=>b.data.id)};await n(v)}window.Notify.success({message:ge.cuesheetItem.delete}),await X()}catch(v){console.error("error",v)}},Ia=async v=>{if(v.node.rowIndex!==null)try{const b={cueId:C.id,cueItemOrd:v.node.rowIndex};b.cueItemIdList=v.nodes.map(T=>T.data.id),await e(b),await X()}catch(b){console.error("error",b)}},Sa=async v=>{var ve;const{type:b,data:T,index:R,icon:V}=v,J={cueId:C.id,newSymbolId:V.symbolId,symbolIndex:R,originSymbolId:void 0};if(b===he.videoSymbol.name||b===he.audioSymbol.name){const Z=`${b}SymbolList`,De=T[Z],je=`${b}Symbol`;if(b===he[je].name||De.length){const Ue=(ve=De[De.length-1])==null?void 0:ve.symbol.symbolId;J.originSymbolId=Ue||void 0}}try{(await s.cuesheet.item.updateLockItem(W.value[0].data.id,J)).success&&(window.Notify.success({message:ge.cuesheetItem.icon.create}),await X())}catch(Z){console.log("Fail to create item icon",Z)}},Da=async(v,b,T)=>{const R={cueId:C.id,cueItemId:v.id,symbolId:""},V=`${b}SymbolList`,J=v[V],[ve]=J.filter(Z=>Z.symbolOrd===T).map(Z=>Z.symbol.symbolId);R.symbolId=ve;try{(await h(R)).success&&(window.Notify.success({message:ge.cuesheetItem.icon.delete}),await X())}catch(Z){console.error("error",Z)}},Ta=async(v,b)=>{const{event:T,data:R,type:V}=v,J=T.target;J&&J.tagName==="BUTTON"||J&&J.tagName==="IMG"&&(await Da(R,V,b),J.remove())},_a=async()=>{var v,b;try{const T=await i(W.value[0].data.id);T.success&&(we.value=T.data.id,T.data.cueItemDivCd===de.ARTICLE.id?K.value=(v=T.data)==null?void 0:v.article:K.value={artclTypCd:ze.Straight.id,artclTitl:T.data.cueItemTitl,rptrNm:T.data.inputrNm,articleCaps:(b=T.data)==null?void 0:b.cueSheetItemCap,ancMentCtt:JSON.stringify([""]),artclCtt:T.data.cueItemCtt},Ke.value=[])}catch(T){console.error(T)}},wt=()=>{W.value.length?_a():window.Notify.error({message:ge.cuesheetItem.error.selected})},Ea=v=>{W.value=v,wt()},ka=()=>{wt()},Aa=async()=>{try{const v={cueId:C.id},b=await s.cuesheet.item.findAllPrompter(v);b.success&&(j.value=b.data.map(T=>({...Pe({artclTypCd:T.artclTypCd,capList:T.articleCaps,ancMentCtt:T.ancMentCtt||JSON.stringify([`
`]),artclCtt:T.artclCtt?T.artclCtt:T.cueItemCtt?T.cueItemCtt:JSON.stringify([`
`])}),...T})))}catch{console.log("Fail to get prompter list")}},Ma=async()=>{await Aa(),Se.value=!0},$a=v=>{ne.value=v,Qe.value=!0},Na=async()=>{const v={isForce:!1};(await s.cuesheet.item.unlock(ne.value.data.id,v)).success&&(gt.value=!0)},La=async()=>{const v={isForce:!1};try{(await s.article.basic.unLock(ne.value.data.artclId,v)).success&&(gt.value=!0)}catch(b){console.log("Fail to unlock article item",b)}},Pa=async v=>{Qe.value=!1,v&&(ne.value.data.cueItemDivCd===de.ITEM.id&&await Na(),ne.value.data.cueItemDivCd===de.ARTICLE.id&&await La(),window.Notify.success({message:ge.cuesheetItem.edit}),await X())},Ra=async()=>{},Oa=async()=>{},Wa=async()=>{},ja=v=>{Ce.value=!0,ue.value=v.data.id},Ua=v=>{we.value=v.id,xe.value=!0},Ct=async()=>{await Promise.all([We(),P({useYn:"Y"}),X()])},tt=x(!1),xt=x(),Ya=async()=>{await We(),await X(),xt.value=k.value,tt.value=!0,$e.value=!1},za=v=>{({cuesheet:()=>Ya(),article:()=>{},caption:()=>{},compactPlus:()=>{},compactMinus:()=>{}})[v](),$e.value=!1};return be(async()=>{await Ct()}),re(()=>Se.value,async()=>{Se.value||await Ct()}),(v,b)=>{var R,V,J,ve,Z,De,je,Ue,It,St,Dt,Tt,_t,Et,kt,At,Mt,$t,Nt,Lt,Pt,Rt,Ot;const T=Zt("tooltip");return D(),N("div",xr,[Se.value?F("",!0):(D(),N("div",Ir,[l("div",Sr,[l("div",Dr,[l("button",{type:"button",class:ct(["w-20 truncate p-2 rounded text-white uppercase cursor-pointer",((R=pe.value)==null?void 0:R.mode)==="read"?"bg-blue-500":"bg-red-500"]),onClick:et},M((V=pe.value)==null?void 0:V.name)+" 모드 ",3),l("div",Tr,[_(E(ut),{text:(ve=E(Re)((J=$.value)==null?void 0:J.cueStCd))==null?void 0:ve.state,color:(De=E(Re)((Z=$.value)==null?void 0:Z.cueStCd))==null?void 0:De.color,"font-color":"text-white"},null,8,["text","color"]),l("div",_r,M((je=$.value.program)==null?void 0:je.brdcPgmNm)+" "+M(la.value),1)]),l("div",Er,[b[8]||(b[8]=l("span",{class:"line-clamp-1"},"앵커",-1)),l("div",kr,[(Ue=$.value)!=null&&Ue.anc1Nm?(D(),N("div",Ar,M((It=$.value)==null?void 0:It.anc1Nm),1)):(D(),N("div",Mr,"none text"))]),l("div",$r,[(St=$.value)!=null&&St.anc2Nm?(D(),N("div",Nr,M((Dt=$.value)==null?void 0:Dt.anc2Nm),1)):(D(),N("div",Lr,"none text"))])]),l("div",Pr,[b[9]||(b[9]=l("span",{class:"line-clamp-1"},"PD",-1)),l("div",Rr,[(Tt=$.value)!=null&&Tt.pd1Nm?(D(),N("div",Or,M((_t=$.value)==null?void 0:_t.pd1Nm),1)):(D(),N("div",Wr,"none text"))]),l("div",jr,[(Et=$.value)!=null&&Et.pd2Nm?(D(),N("div",Ur,M((kt=$.value)==null?void 0:kt.pd2Nm),1)):(D(),N("div",Yr,"none text"))])]),l("div",zr,[b[10]||(b[10]=l("span",{class:"line-clamp-1"},"TD",-1)),l("div",Br,[(At=$.value)!=null&&At.td1Nm?(D(),N("div",Vr,M((Mt=$.value)==null?void 0:Mt.td1Nm),1)):(D(),N("div",Fr,"none text"))]),l("div",Hr,[($t=$.value)!=null&&$t.td2Nm?(D(),N("div",Gr,M((Nt=$.value)==null?void 0:Nt.td2Nm),1)):(D(),N("div",Kr,"none text"))])]),b[11]||(b[11]=l("div",{class:"flex items-center space-x-1"},null,-1)),b[12]||(b[12]=l("div",{class:"line-clamp-1"},"방송시간",-1)),l("div",Jr,M(sa.value),1),b[13]||(b[13]=l("div",{class:"flex items-center space-x-1"},null,-1)),b[14]||(b[14]=l("div",{class:"line-clamp-1"},"누적시간",-1)),l("div",Zr,M(na.value),1),b[15]||(b[15]=l("div",{class:"flex items-center space-x-1"},null,-1)),b[16]||(b[16]=l("div",{class:"line-clamp-1"},"남은시간",-1)),l("div",Xr,M(ra.value),1)]),l("div",Qr,[le(_(G,{icon:"arrow-path",onClick:Ca},null,512),[[T,"새로고침"]]),((Lt=pe.value)==null?void 0:Lt.mode)==="read"?le((D(),O(G,{key:0,icon:"pencil-square",onClick:et},null,512)),[[T,((Pt=pe.value)==null?void 0:Pt.mode)==="read"?"편집모드로 전환":"보기모드로 전환"]]):le((D(),O(G,{key:1,icon:"eye",onClick:et},null,512)),[[T,((Rt=pe.value)==null?void 0:Rt.mode)==="edit"?"보기모드로 전환":"편집모드로 전환"]]),le(_(G,{icon:"plus",disabled:E(w)||((Ot=pe.value)==null?void 0:Ot.mode)==="read",onClick:ba},null,8,["disabled"]),[[T,E(a)("CuesheetDetail.항목_추가")]]),le(_(E(Wo),{title:oa.value,"delete-count":W.value.length,disabled:!W.value.length,loading:E(w),onOnConfirm:xa},null,8,["title","delete-count","disabled","loading"]),[[T,"삭제"]]),le(_(G,{icon:"printer",onClick:b[0]||(b[0]=fe=>$e.value=!0)},null,512),[[T,"인쇄"]]),le(_(G,{icon:"computer-desktop",onClick:Ma},null,512),[[T,"프롬프터"]]),le(_(G,{icon:"clock",onClick:b[1]||(b[1]=fe=>aa.value=!0)},null,512),[[T,"큐시트 이력"]])])]),l("div",qr,[_(E(Uo),{class:"default-theme"},{default:z(()=>[_(E(Ut),{size:"70"},{default:z(()=>[_(E(Bo),{"is-loading":E(w),"row-data":k.value,"icon-list":E(B),"cuesheet-id":v.id,mode:pe.value.mode,"user-info":E(te),onSelectedRows:Ea,onDoubleClickedRow:$a,onOnUpdateItemOrder:Ia,onCuesheetDetailListApi:ia,onOnClickedIcon:Sa,onOnClickedContextmenu:Ta,onOnEditCuesheetItem:wa,onOnClickedVideoLink:Ua},null,8,["is-loading","row-data","icon-list","cuesheet-id","mode","user-info"])]),_:1}),_(E(Ut),{size:E(ot).basic.size,"max-size":E(ot).basic.maxSize,"min-size":E(ot).basic.minSize},{default:z(()=>[_(Mn,{program:L.value,"onUpdate:program":b[2]||(b[2]=fe=>L.value=fe),mode:pe.value.mode,"selected-article-data":K.value,onCuesheetArticleSearchListApi:ha,onCuesheetTemplateSearchListApi:va,onCuesheetSearchDetailListApi:ga,onOnArticleSearchDropZone:Ra,onOnCuesheetTemplateDropZone:Oa,onOnCuesheetSearchDropZone:Wa,onDoubleClickedArticleRow:ja,onOnRefresh:ka},null,8,["program","mode","selected-article-data"])]),_:1},8,["size","max-size","min-size"])]),_:1})])])),Se.value?(D(),O(Ho,{key:1,"cuesheet-item-list":j.value,class:"flex flex-col h-full",onClose:b[3]||(b[3]=fe=>Se.value=!1)},null,8,["cuesheet-item-list"])):F("",!0),$e.value?(D(),O(ps,{key:2,onOnClose:b[4]||(b[4]=fe=>$e.value=!1),onOnPrint:za})):F("",!0),Qe.value?(D(),O(Ps,{key:3,"selected-item":ne.value,"cuesheet-id":v.id,onOnClose:Pa},null,8,["selected-item","cuesheet-id"])):F("",!0),Ce.value?(D(),O(Rn,{key:4,"article-id":ue.value,onClose:b[5]||(b[5]=fe=>Ce.value=!1)},null,8,["article-id"])):F("",!0),tt.value?(D(),O(ir,{key:5,"icon-list":E(B),"cuesheet-info":$.value,"cuesheet-list":xt.value,onClosePrint:b[6]||(b[6]=fe=>tt.value=!1)},null,8,["icon-list","cuesheet-info","cuesheet-list"])):F("",!0),xe.value?(D(),O(Cr,{key:6,"cue-sheet-item-id":we.value,onClose:b[7]||(b[7]=fe=>xe.value=!1)},null,8,["cue-sheet-item-id"])):F("",!0)])}}});export{li as default};
