import{k as u,ah as y,d as S,u as B,o as w,a as h,c as E,G as v,j as f,Y as U,h as I,K as L}from"./index-eLyz9_Ts.js";import{c as N}from"./use-plan-menu-omF6lTyZ.js";import{e as V}from"./journalist-QNhBHHjf.js";import"./organization-qjYuRO6g.js";import{_ as j}from"./JournalistHeader.vue_vue_type_script_setup_true_lang-49dK_3bg.js";import{u as A,_ as D}from"./JournalistForm.vue_vue_type_script_setup_true_lang-6Noz4xPg.js";import{_ as C}from"./ConfirmModal.vue_vue_type_script_setup_true_lang-k_ZxaDhN.js";import"./buttons-3hbXC8Cn.js";import"./GDatePicker.vue_vue_type_style_index_0_lang-aP5TJiAZ.js";import"./use-date-GeeGTbYh.js";import"./ContentHeaderButtons.vue_vue_type_script_setup_true_lang-Db8CUXqr.js";import"./GSingleSelect-7u8H0FdH.js";import"./vue-multiselect-Yz8FsF-E.js";import"./use-model-wrapper-XtiLc3Xd.js";import"./index.esm-Hbr0u7mK.js";import"./FormItem.vue_vue_type_script_setup_true_lang-ZXQ_7x89.js";import"./OpenTypeSelect.vue_vue_type_script_setup_true_lang-iyP-3dNY.js";import"./UserSearchModal.vue_vue_type_script_setup_true_lang-iHw_FmsN.js";import"./make-grid-column-aeLSdEws.js";import"./OrganizationSelect.vue_vue_type_script_setup_true_lang-BNuugYEX.js";import"./VDCEditor.vue_vue_type_script_setup_true_lang-IhnNo6sk.js";import"./file-Gx0JxWZZ.js";import"./file-division-code-x51qUgaH.js";import"./news-source-d-EIoPzs.js";function F(t){const d=V(),{fetchJournalist:p,updateJournalist:i}=d,s=u(),n=u();return{formRef:s,handleUpdateJournalist:e=>{n.value=e,t==null||t.onBeforeUpdate()},handleUpdateButton:async()=>{var e;if(s.value)try{await((e=s.value)==null?void 0:e.onSubmitJournalist())}catch(r){console.error("Failed onSubmitJournalist",r)}},loadJournalistDetail:async e=>{var r;try{const o=await p(e);o!=null&&o.success&&((r=t==null?void 0:t.onLoadSuccess)==null||r.call(t,o.data))}catch(o){console.error("useJournalistEditActions loadJournalistDetail Error",o)}},updateJournalistItem:async e=>{var r;try{if(!n.value)return;(await i(e,n.value)).success&&((r=t==null?void 0:t.onUpdateSuccess)==null||r.call(t,!0),window.Notify.success({message:y.journalist.success.edit}))}catch(o){console.error("useJournalistEditActions updateJournalist Error",o)}}}}const O={class:"h-full"},at=S({__name:"JournalistEditView",setup(t){const d=B(),{formRef:p,closedTabAndMovePage:i,handleFormButton:s}=A(),n=u(null),l=u(),a=u({update:!1}),{handleUpdateButton:c,loadJournalistDetail:J,updateJournalistItem:e}=F({onBeforeUpdate:()=>{a.value.update=!0},onLoadSuccess:m=>{l.value=m},onUpdateSuccess:()=>{a.value.update=!1,i()}}),r={data:{onLoad:async()=>{n.value=Number(d.params.id);try{await J(n.value)}catch(m){console.error("JournalistEditView onLoad Error",m)}}}},o=N({actionLabel:"저장",onAction:s,onClose:i});return w(()=>{r.data.onLoad()}),(m,_)=>(h(),E("div",O,[v(j,{"is-show-search":!1,"menu-items":f(o)},null,8,["menu-items"]),U("div",null,[v(D,{ref_key:"formRef",ref:p,mode:"edit","form-data":l.value,onOnSubmitJournlist:f(c)},null,8,["form-data","onOnSubmitJournlist"])]),a.value.update?(h(),I(C,{key:0,text:"저장하시겠습니까?",onOnSubmit:f(e),onClose:_[0]||(_[0]=R=>a.value.update=!1)},null,8,["onOnSubmit"])):L("",!0)]))}});export{at as default};
