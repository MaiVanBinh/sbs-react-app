import{az as A,a as l,c as a,Y as i,d as R,G as k,ak as V,a0 as u,a5 as F,l as x,Q as O,j as n,K as y,h as M,ax as B,w as I,X as N,a2 as E,F as T,C as U,ab as Z,t as K}from"./index-eLyz9_Ts.js";import{i as b,d as z,R as q,G as H}from"./comment.helper-kn9hfxav.js";import{X as G}from"./XIcon-gk7lh7BZ.js";const Q={},Y={width:"15",height:"14",viewBox:"0 0 15 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function J(L,C){return l(),a("svg",Y,C[0]||(C[0]=[i("path",{d:"M2.28889 10.8341C1.73148 10.325 1.29398 9.74167 0.976389 9.08409C0.658796 8.42651 0.5 7.73182 0.5 7C0.5 5.40909 1.18056 4.05682 2.54167 2.94318C3.90278 1.82955 5.55556 1.27273 7.5 1.27273V0L11.3889 2.38636L7.5 4.77273V3.5C6.32037 3.5 5.3125 3.84205 4.47639 4.52614C3.64028 5.21023 3.22222 6.03485 3.22222 7C3.22222 7.48788 3.33565 7.94394 3.5625 8.36818C3.78935 8.79242 4.09722 9.16364 4.48611 9.48182L2.28889 10.8341ZM7.5 14L3.61111 11.6136L7.5 9.22727V10.5C8.67963 10.5 9.6875 10.158 10.5236 9.47386C11.3597 8.78977 11.7778 7.96515 11.7778 7C11.7778 6.51212 11.6644 6.05606 11.4375 5.63182C11.2106 5.20758 10.9028 4.83636 10.5139 4.51818L12.7111 3.16591C13.2685 3.675 13.706 4.25833 14.0236 4.91591C14.3412 5.57348 14.5 6.26818 14.5 7C14.5 8.59091 13.8194 9.94318 12.4583 11.0568C11.0972 12.1705 9.44444 12.7273 7.5 12.7273V14Z",fill:"#9E9E9E"},null,-1)]))}const P=A(Q,[["render",J]]),W={class:"flex items-center gap-1 mt-1.5"},ee={class:"flex items-center"},se={class:"flex items-center"},X=R({__name:"LikeAndDislike",props:{likeCount:{default:0},dislikeCount:{default:0},isLiked:{type:[Boolean,null],default:null},isDisliked:{type:[Boolean,null],default:null},useDoubleClick:{type:Boolean,default:!1}},emits:["like","dislike"],setup(L,{emit:C}){const o=L,c=C,f=()=>{o.useDoubleClick&&o.isLiked||c("like")},m=()=>{o.useDoubleClick&&o.isDisliked||c("dislike")},g=()=>{if(o.useDoubleClick){if(o.isLiked){c("like");return}o.isDisliked&&c("dislike")}};return(p,D)=>(l(),a("div",W,[i("div",ee,[k(V,{class:"p-1","icon-color":p.isLiked?"text-[#0071FF]":"",icon:p.isLiked?"custom-hand-thumb-up-fill":"custom-hand-thumb-up","icon-size":"w-[20.5px] h-[20.5px]",onClick:f,onDblclick:g},null,8,["icon-color","icon"]),i("span",null,u(p.likeCount),1)]),i("div",se,[k(V,{class:"p-1","icon-color":p.isDisliked?"text-[#FF0000]":"",icon:p.isDisliked?"custom-hand-thumb-down-fill":"custom-hand-thumb-down","icon-size":"w-[20.5px] h-[20.5px]",onClick:m,onDblclick:g},null,8,["icon-color","icon"]),i("span",null,u(p.dislikeCount),1)])]))}}),ie={class:"mt-3"},te={class:"text-xs mb-2"},ne={key:0,class:"flex items-start gap-3 border border-primary-gray-surface p-2 text-xs"},le={class:"inline-block rounded-sm bg-primary-blue-200 min-w-max px-1"},oe=["innerHTML"],re={key:0,class:"flex gap-1 mt-4"},de={class:"inline-block rounded-sm bg-primary-blue-200 px-1 text-xs"},ae={class:"py-2 flex"},j=R({__name:"ChildComment",props:{child:{},userMngId:{},userList:{},depth:{}},emits:["on-submit","on-edit","on-delete","like-comment"],setup(L,{emit:C}){const o=L,c=C,{t:f}=F(),m=x(()=>o.child),g=x(()=>o.child.childComments.length),p=x(()=>o.depth||1),D=(s,r)=>{m.value.isReplying=!1,c("on-submit",s,r)},w=(s,r)=>{m.value.isEditing=!1,c("on-edit",s,r)},S=async s=>{c("on-delete",s)},_=(s,r,$,t)=>{c("like-comment",s,r,$,t)};return(s,r)=>{var $;return l(),a("div",ie,[i("div",{class:"flex gap-6 items-start space-y-3 border-b border-primary-gray-surface pl-1.5",style:B(`padding-left: ${p.value*70}px`)},[i("div",{class:O(["w-full",n(b)(s.child)?"pb-4":"pb-2.5"])},[i("div",te,[i("span",null,u((s.child.inputUserName||"")+(s.child.inputUserDeptName?` (${s.child.inputUserDeptName}) `:" ")),1),i("span",null,u(s.child.inputDateTime),1)]),s.child.isEditing?y("",!0):(l(),a("div",ne,[i("span",le,"@"+u(s.child.inputUserName||""),1),i("div",{innerHTML:n(b)(s.child)?n(z):s.child.content},null,8,oe)])),n(b)(s.child)?y("",!0):(l(),M(X,{key:1,"like-count":s.child.likeCount,"dislike-count":s.child.unlikeCount,"is-liked":s.child.userLikeStatus,"is-disliked":(($=s.child)==null?void 0:$.rdrDislike)||s.child.userLikeStatus===!1,"use-double-click":!0,onLike:r[0]||(r[0]=t=>{var d;return _(s.child.id,!0,s.child.userLikeStatus,(d=s.child)==null?void 0:d.rdrDislike)}),onDislike:r[1]||(r[1]=t=>{var d;return _(s.child.id,!1,s.child.userLikeStatus,(d=s.child)==null?void 0:d.rdrDislike)})},null,8,["like-count","dislike-count","is-liked","is-disliked"]))],2),n(b)(s.child)?y("",!0):(l(),a("div",re,[i("div",{class:"cursor-pointer hover:opacity-80 transition",onClick:r[2]||(r[2]=t=>m.value.isReplying=!0)},[k(n(q),{class:"w-5 h-5"})]),i("div",{class:"cursor-pointer hover:opacity-80 transition",onClick:r[3]||(r[3]=t=>S(s.child.id))},[k(n(G),{class:"w-5 h-5"})])]))],4),s.child.isReplying?(l(),a("div",{key:0,class:"space-y-2 px-2 border-b border-primary-gray-surface",style:B(`padding-left: ${p.value*70}px`)},[i("span",de,"@"+u(s.child.inputUserName),1),i("div",ae,[k(H,{"user-list":s.userList,name:`reply_${s.child.id}`},null,8,["user-list","name"]),k(E,{type:"comment",class:"w-[80px] mb-[24px]",onClick:r[4]||(r[4]=t=>D(`reply_${s.child.id}`,s.child.id))},{default:I(()=>[N(u(n(f)("Comment.등록")),1)]),_:1})])],4)):y("",!0),g.value?(l(!0),a(T,{key:1},U(s.child.childComments,t=>(l(),M(j,{key:t.id,"user-mng-id":s.userMngId,child:t,"user-list":s.userList,depth:p.value+1,onOnSubmit:D,onOnEdit:w,onOnDelete:S,onLikeComment:_},null,8,["user-mng-id","child","user-list","depth"]))),128)):y("",!0)])}}}),ue={class:"space-y-2"},ce={class:"flex justify-between p-2 border-b border-primary-gray-surface"},pe={class:"font-bold text-black dark:text-white"},ke={class:"font-bold text-primary-gray-50 dark:text-white text-[9px]"},he={class:"border-b border-primary-gray-surface p-2 flex"},me={class:"flex gap-6 items-start border-b border-primary-gray-surface"},ye={class:"text-xs mb-2"},Ce={key:0},fe=["innerHTML"],be={key:0,class:"flex gap-1 mt-4"},ve=["onClick"],Le=["onClick"],ge={key:0,class:"pl-10 space-y-3 border-b border-primary-gray-surface"},_e={class:"space-y-2 px-2"},$e={class:"inline-block rounded-sm bg-primary-blue-200 px-1 text-xs"},De={class:"py-2 flex"},we={key:1,class:"space-y-3"},Ne=R({__name:"Comment",props:{parentId:{},commentList:{},userList:{},commentCount:{}},emits:["on-edit","on-submit","on-delete","on-refresh","on-like-comment","on-reply"],setup(L,{emit:C}){const o=C,c=L,{userMngId:f}=Z(),{t:m}=F(),g=x(()=>c.commentList),p=x(()=>c.commentCount),D=async(t,d)=>{var h;const e=(h=document.querySelector(`[name="${t}"]`))==null?void 0:h.innerHTML;o("on-edit",{updateUserId:f,content:e},d)},w=async(t,d)=>{const e=document.querySelector(`[name="${t}"]`),v=e==null?void 0:e.innerHTML;if((e==null?void 0:e.textContent)==="")return;o("on-submit",{content:v,createUserId:f,parentCommentId:d}),e&&(e.innerHTML="")},S=async()=>{o("on-refresh"),window.Notify.success({message:"댓글을 새로 고침했습니다."})},_=async t=>{o("on-delete",t)},s=async(t,d,e,v)=>{o("on-like-comment",t,d,e,f,v)},r=()=>{const t=document.querySelectorAll('div[contenteditable="true"]');t.forEach((d,e)=>{t[e].innerHTML=""})},$=t=>{o("on-reply",t)};return K(()=>c.parentId,()=>{r()}),(t,d)=>(l(),a("div",ue,[i("div",ce,[i("p",pe,u(n(m)("Comment.코맨트"))+" "+u(p.value?`${p.value} 개`:""),1),i("div",{class:"cursor-pointer hover:opacity-80 transition",onClick:S},[k(n(P),{class:"w-4 h-4 mx-auto"}),i("p",ke,u(n(m)("Comment.새로고침")),1)])]),i("div",null,[i("div",he,[k(H,{"user-list":t.userList,name:"createComment"},null,8,["user-list"]),k(E,{type:"comment",class:"w-[80px] mb-[24px]",onClick:d[0]||(d[0]=e=>w("createComment",null))},{default:I(()=>[N(u(n(m)("Comment.등록")),1)]),_:1})]),(l(!0),a(T,null,U(g.value,e=>{var v;return l(),a("div",{key:e.id,class:"p-2 text-black dark:text-white"},[i("div",me,[i("div",{class:O(["w-full",n(b)(e)?"pb-4":"pb-2.5"])},[i("div",ye,[i("span",null,u((e.inputUserName||"")+(e.inputUserDeptName?` (${e.inputUserDeptName}) `:" ")),1),i("span",null,u(e.inputDateTime),1)]),e.isEditing?y("",!0):(l(),a("div",Ce,[i("div",{class:"border border-primary-gray-surface p-2 text-xs",innerHTML:n(b)(e)?n(z):e.content},null,8,fe)])),n(b)(e)?y("",!0):(l(),M(X,{key:1,"like-count":e.likeCount,"dislike-count":e.unlikeCount,"is-liked":e.userLikeStatus===!0,"is-disliked":(e==null?void 0:e.rdrDislike)||e.userLikeStatus===!1,"use-double-click":!0,onLike:h=>s(e.id,!0,e.userLikeStatus,e==null?void 0:e.rdrDislike),onDislike:h=>s(e.id,!1,e.userLikeStatus,e==null?void 0:e.rdrDislike)},null,8,["like-count","dislike-count","is-liked","is-disliked","onLike","onDislike"]))],2),n(b)(e)?y("",!0):(l(),a("div",be,[i("div",{class:"cursor-pointer hover:opacity-80 transition",onClick:h=>$(e.id)},[k(n(q),{class:"w-5 h-5"})],8,ve),i("div",{class:"cursor-pointer hover:opacity-80 transition",onClick:h=>_(e.id)},[k(n(G),{class:"w-5 h-5"})],8,Le)]))]),e.isReplying?(l(),a("div",ge,[i("div",_e,[i("span",$e,"@"+u(e.inputUserName||""),1),i("div",De,[k(H,{"user-list":t.userList,name:`reply_${e.id}`},null,8,["user-list","name"]),k(E,{type:"comment",class:"w-[80px] mb-[24px]",onClick:h=>w(`reply_${e.id}`,e.id)},{default:I(()=>[N(u(n(m)("Comment.등록")),1)]),_:2},1032,["onClick"])])])])):y("",!0),(v=e.childComments)!=null&&v.length?(l(),a("div",we,[(l(!0),a(T,null,U(e.childComments,h=>(l(),M(j,{key:h.id,"user-mng-id":n(f),"user-list":t.userList,child:h,depth:1,onLikeComment:s,onOnSubmit:w,onOnEdit:D,onOnDelete:_},null,8,["user-mng-id","user-list","child"]))),128))])):y("",!0)])}),128))])]))}});export{Ne as _};
