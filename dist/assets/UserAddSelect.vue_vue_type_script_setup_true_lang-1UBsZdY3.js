import{d as C,aa as S,k as d,c6 as V,ai as I,a as o,c as r,G as f,K as b,Y as n,a0 as i,F as _,C as E,Q as v,aj as Y,h as $,j as G,ah as L,ak as j}from"./index-eLyz9_Ts.js";import{G as z}from"./GSingleSelect-7u8H0FdH.js";import{u as F}from"./use-model-wrapper-XtiLc3Xd.js";import{_ as M}from"./DepartmentMultiSelect.vue_vue_type_script_setup_true_lang-OqmQVQH2.js";const q={class:"flex flex-col"},A={key:0,class:"flex items-end space-x-2"},K={class:"flex sm:text-xs text-xs font-medium text-gray-700 dark:text-white"},O={class:"truncate"},Q={class:"truncate"},T=C({__name:"UserAddSelect",props:{modelValue:{default:void 0},name:{default:"userName"},label:{default:""},tableName:{default:"사용자"},tableClass:{default:"max-h-28"},searchable:{type:Boolean,default:!1},placeholder:{default:"사용자 선택"},allowEmpty:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},useDepartment:{type:Boolean,default:!0}},emits:["update:modelValue","on-selected"],setup(h,{emit:y}){const k=h,g=y,{fetchUsers:w,getChDivId:N}=S(),s=F(k,g,"modelValue"),c=d([]),m=d(!1),p=d([]),u=d(),x=async()=>{try{m.value=!0;const l=await w({chDivId:N,useYn:"Y",delYn:"N",size:1e4});l.success&&(c.value=l.data.content)}catch(e){console.error(e)}finally{m.value=!1}},D=e=>{p.value=e},U=e=>{s.value.some(t=>t.id===e.id)?window.Notify.error({message:L.user.error.duplicate}):s.value.push(e),u.value=null},B=e=>{const l=s.value.findIndex(t=>t.id===e.id);s.value.splice(l,1),c.value.push(e)};return V(async()=>{await x()}),(e,l)=>{const t=I("tooltip");return o(),r("div",q,[e.disabled?b("",!0):(o(),r("div",A,[f(M,{"selected-departments":p.value,"onUpdate:selectedDepartments":l[0]||(l[0]=a=>p.value=a),onOnSelectedDepartment:D},null,8,["selected-departments"]),f(z,{modelValue:u.value,"onUpdate:modelValue":l[1]||(l[1]=a=>u.value=a),name:e.name,"is-loading":m.value,label:e.label?e.label:"",options:c.value,"item-label":"userNm","track-by":"userId","allow-empty":e.allowEmpty,searchable:e.searchable,required:!1,disabled:e.disabled,"preselect-first":!1,placeholder:e.placeholder,class:"flex-1","onSelect:value":U},null,8,["modelValue","name","is-loading","label","options","allow-empty","searchable","disabled","placeholder"])])),n("span",K,i(e.tableName),1),n("div",{class:v(["flex flex-col h-full min-h-[30px] space-y-2 border border-gray-300 dark:border-dark-border dark:text-dark-gray-200 rounded-md shadow overflow-y-auto text-sm",[e.disabled?"bg-gray-200 dark:bg-dark-disabled ":"",e.tableClass]])},[(o(!0),r(_,null,E(G(s),a=>(o(),r("div",{key:a.id,class:v(["grid gap-4 border-b dark:border-dark-border px-4 py-2 items-center",e.disabled?"grid-cols-2":"grid-cols-3"])},[n("div",O,i(a.userNm||a.userName)+i(a!=null&&a.userId?`(${a==null?void 0:a.userId})`:""),1),n("div",Q,i(a==null?void 0:a.phoneNumber),1),e.disabled?b("",!0):Y((o(),$(j,{key:0,icon:"trash",class:"w-6 h-6",onClick:W=>B(a)},null,8,["onClick"])),[[t,"삭제"]])],2))),128))],2)])}}});export{T as _};
