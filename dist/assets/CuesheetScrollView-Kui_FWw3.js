import{g as xe,M as Me}from"./splitpanes.es-dEoJOrhT.js";import{d as M,a as k,c as L,Y as e,a5 as A,ae as $e,G as r,al as ee,a0 as b,bT as Re,bW as Ne,bV as Pe,eA as Le,l as Q,w as I,an as Oe,j as p,h as V,K as H,ao as Ae,k as h,a1 as Te,a2 as z,a6 as ne,aD as re,aa as Ee,V as De,o as le,a3 as Se,eB as N,t as Ce,u as Ve,ad as Ue,bY as ye,R as _e,Q as we,eC as qe,bQ as Be,ah as ze,ap as je}from"./index-eLyz9_Ts.js";import{_ as Ge}from"./PaginationSecondary.vue_vue_type_script_setup_true_lang-5bABwX9_.js";import{_ as We}from"./CuesheetScrollHeader.vue_vue_type_script_setup_true_lang-5tdp6pBY.js";import{_ as ke}from"./VDCEditor.vue_vue_type_script_setup_true_lang-IhnNo6sk.js";import{_ as Qe}from"./PostModal.vue_vue_type_script_setup_true_lang-ywCBp_X3.js";import{_ as Ye}from"./PrintModal.vue_vue_type_script_setup_true_lang-ZsBYknDF.js";import{u as Fe}from"./use-dynamic-height-sJY6bk6Z.js";import{_ as He}from"./OrganizationSelect.vue_vue_type_script_setup_true_lang-BNuugYEX.js";import{_ as Z}from"./ModalButton.vue_vue_type_script_setup_true_lang-WIw8hxFk.js";import{r as be}from"./format.util-TjqX3dGB.js";import{G as Ze}from"./GTextarea-5GIFD2Mo.js";import"./GSingleSelect-7u8H0FdH.js";import"./vue-multiselect-Yz8FsF-E.js";import"./use-model-wrapper-XtiLc3Xd.js";import"./ContentHeaderButtons.vue_vue_type_script_setup_true_lang-Db8CUXqr.js";import"./ConfirmModal.vue_vue_type_script_setup_true_lang-k_ZxaDhN.js";import"./ProgramSelect.vue_vue_type_script_setup_true_lang-UHoCrnxw.js";import"./program-omP_c4K3.js";import"./organization-qjYuRO6g.js";import"./file-Gx0JxWZZ.js";import"./file-division-code-x51qUgaH.js";import"./vue-resizable.umd.min-blE9hPz6.js";import"./vue.runtime.esm-bundler-3P3R-Xon.js";/* empty css                                                                  */const Ke={width:"19",height:"19",viewBox:"0 0 19 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Je=["fill"],Xe=M({__name:"SearchIcon",props:{fill:{}},setup(_){return(i,d)=>(k(),L("svg",Ke,[e("path",{d:"M16.7797 18.5L10.4797 12.2C9.97969 12.6 9.40469 12.9167 8.75469 13.15C8.10469 13.3833 7.41302 13.5 6.67969 13.5C4.86302 13.5 3.32552 12.8708 2.06719 11.6125C0.808854 10.3542 0.179688 8.81667 0.179688 7C0.179688 5.18333 0.808854 3.64583 2.06719 2.3875C3.32552 1.12917 4.86302 0.5 6.67969 0.5C8.49635 0.5 10.0339 1.12917 11.2922 2.3875C12.5505 3.64583 13.1797 5.18333 13.1797 7C13.1797 7.73333 13.063 8.425 12.8297 9.075C12.5964 9.725 12.2797 10.3 11.8797 10.8L18.1797 17.1L16.7797 18.5ZM6.67969 11.5C7.92969 11.5 8.99219 11.0625 9.86719 10.1875C10.7422 9.3125 11.1797 8.25 11.1797 7C11.1797 5.75 10.7422 4.6875 9.86719 3.8125C8.99219 2.9375 7.92969 2.5 6.67969 2.5C5.42969 2.5 4.36719 2.9375 3.49219 3.8125C2.61719 4.6875 2.17969 5.75 2.17969 7C2.17969 8.25 2.61719 9.3125 3.49219 10.1875C4.36719 11.0625 5.42969 11.5 6.67969 11.5Z",fill:i.fill?i.fill:"#B3B3B3"},null,8,Je)]))}}),et={class:"h-[92%]"},tt=M({__name:"CuesheetScrollList",props:{isLoading:{type:Boolean},pageInfo:{},selectedRowIndex:{},rowData:{}},emits:["selected-rows","on-change-page","select-size"],setup(_,{emit:i}){const d=n=>n.code==="apprv_typ_000"?"border-white bg-primary-gray-surface-500":n.code==="apprv_typ_001"||n.code==="apprv_typ_002"||n.code==="apprv_typ_003"?"bg-primary-blue-300":(n.code==="apprv_typ_004","bg-primary-green-500"),l=i,{t:a}=A(),g=[{headerName:a("Cuesheet.부서"),field:"deptNm",headerClass:"font-bold",cellStyle:{textAlign:"left"},maxWidth:100,sortable:!0,sort:"desc",sortingOrder:["desc","asc"]},{headerName:a("Cuesheet.작성자"),field:"inputrNm",maxWidth:100,headerClass:"font-bold",cellStyle:{textAlign:"center"},sortable:!0,sort:"desc",sortingOrder:["desc","asc"]},{headerName:a("Cuesheet.제목"),headerClass:"font-bold",field:"titl",cellStyle:{textAlign:"left",fontWeight:"bold"}},{headerName:a("Cuesheet.데스킹_여부"),field:"scrollApprovalType",maxWidth:110,cellStyle:{textAlign:"center"},valueFormatter:n=>n.data.scrollApprovalType.description,cellRenderer:n=>{const m=n.value;return`<span class='border rounded-full text-[11px] tracking-[0.5px] leading-[16px] font-roboto font-medium text-white px-0.5 ${d(m)}'> ${m.description}</span>`}},{headerName:a("Cuesheet.작성일"),headerClass:"font-bold",field:"inputDtm",maxWidth:90,cellStyle:{textAlign:"center"},sortable:!0,sort:"desc",sortingOrder:["desc","asc"],cellRenderer:n=>`<span class='text-xs'>${$e(n.value).format("MM-DD")}</span>`},{headerName:a("Cuesheet.교정자"),field:"lckrNm",headerClass:"font-bold",maxWidth:90,cellStyle:{textAlign:"center"},sortable:!0,sort:"desc",sortingOrder:["desc","asc"]}],u=n=>{l("selected-rows",n)},c=n=>{l("on-change-page",n)},x=n=>{l("select-size",n)};return(n,m)=>(k(),L("div",et,[r(ee,{intent:"green","column-defs":g,"row-data":n.rowData,"selected-row-index":n.selectedRowIndex,"is-loading":n.isLoading,"row-height":35,"page-info":n.pageInfo,"row-selection":"multiple",filter:!1,onSelectedRows:u},null,8,["row-data","selected-row-index","is-loading","page-info"]),r(Ge,{"current-page":n.pageInfo.page,"page-info":n.pageInfo,onOnChangePage:c,onSelectSize:x},null,8,["current-page","page-info"])]))}}),st={class:"h-full text-sm flex flex-col"},at={class:"px-2 py-4 space-y-3"},ot={class:"min-h-[26px] dark:bg-dark py-1 px-3 border rounded-[3px] border-black text-primary-black-100 font-roboto font-medium text-xs dark:text-white"},nt={class:"flex flex-wrap gap-x-10 text-xs gap-y-3 text-primary-gray-40 dark:text-white"},rt={class:"flex items-center gap-2"},lt={class:"flex items-center gap-2"},it={class:"flex items-center gap-2"},ct={class:"flex items-center gap-2"},dt={class:"dark:bg-dark-secondary bg-primary-gray-80 p-2 border border-primary-gray-20 rounded-[3px] flex-grow overflow-y-hidden"},ut={class:"dark:bg-dark bg-white rounded-[3px] h-full"},pt=M({__name:"CuesheetScrollPrintDetail",props:{dataDetail:{}},setup(_){return(i,d)=>{var l,a,g,u,c,x;return k(),L("div",st,[e("div",at,[e("div",ot,b(((l=i.dataDetail)==null?void 0:l.titl)||""),1),e("div",nt,[e("div",rt,[r(Re),e("p",null,b(((a=i.dataDetail)==null?void 0:a.brdcPrgmNm)||"-"),1)]),e("div",lt,[r(Ne),e("p",null,b((g=i.dataDetail)==null?void 0:g.inputDtm),1)]),e("div",it,[r(Pe),e("p",null,b((u=i.dataDetail)==null?void 0:u.inputrNm),1)]),e("div",ct,[r(Le),e("p",null,b((c=i.dataDetail)==null?void 0:c.updtDtm),1)])])]),e("div",dt,[e("div",ut,[r(ke,{content:(x=i.dataDetail)==null?void 0:x.ctt,disabled:"","editor-class":"vdc-readonly","spell-check":!1,"custom-class":"font-roboto"},null,8,["content"])])])])}}}),gt={class:"w-full h-full bg-white dark:bg-dark-grid"},mt=M({__name:"CuesheetScrollTabPanel",props:{dataDetail:{},isShowDetail:{type:Boolean,default:!0},currentDetailId:{}},setup(_){const i=_,{t:d}=A(),l=Q(()=>[{id:1,name:d("Community.상세정보"),isShow:i.isShowDetail}]);return(a,g)=>(k(),L("div",gt,[r(Ae,{tabs:l.value,"is-plain-text-mode":!0,"is-compact-mode":!0,class:"!p-0"},{default:I(()=>[a.isShowDetail?(k(),V(p(Oe),{key:0,unmount:!1,class:"overflow-y-auto flex flex-col h-full"},{default:I(()=>[r(pt,{"data-detail":a.dataDetail},null,8,["data-detail"])]),_:1})):H("",!0)]),_:1},8,["tabs"])]))}}),ft={class:"space-y-4 text-sm p-4 dark:text-white"},ht={class:"space-y-1 p-3 border border-primary-gray-surface"},vt={class:"text-sm"},xt={class:"space-y-2"},yt={class:"w-full text-xs"},_t={class:"w-[70px] border border-primary-gray-surface text-center p-2"},wt={class:"border border-primary-gray-surface p-2 px-4"},Dt={class:"w-[70px] border border-primary-gray-surface text-center p-2"},St={class:"border border-primary-gray-surface p-2 px-4"},Ct={class:"space-y-1 p-3 border border-primary-gray-surface"},kt={class:"text-sm"},bt={class:"space-y-4"},It=M({__name:"CuesheetScrollPrintTemplate",props:{dataDetail:{}},setup(_){const{t:i}=A();return(d,l)=>{var a,g,u;return k(),L("div",ft,[e("div",ht,[e("p",vt,[e("b",null,b(p(i)("Community.기본정보")),1)]),e("div",xt,[e("table",yt,[e("tbody",null,[e("tr",null,[e("td",_t,b(p(i)("Community.제목")),1),e("td",wt,b(((a=d.dataDetail)==null?void 0:a.titl)||""),1)]),e("tr",null,[e("td",Dt,b(p(i)("Community.작성일시")),1),e("td",St,b((g=d.dataDetail)==null?void 0:g.inputDtm),1)])])])])]),e("div",Ct,[e("p",kt,[e("b",null,b(p(i)("Community.내용")),1)]),e("div",bt,[r(ke,{content:(u=d.dataDetail)==null?void 0:u.ctt,disabled:"","editor-class":"vdc-readonly","spell-check":!1,"custom-class":"font-roboto"},null,8,["content"])])])])}}}),Mt={class:"border border-primary-gray-surface rounded-sm p-2 w-[335px] space-y-2"},$t=M({__name:"DeskingSettingLeft",props:{isLoading:{type:Boolean},selectedRowIndex:{},rowData:{}},emits:["selected-rows"],setup(_,{emit:i}){const d=i,{t:l}=A(),a=Q(()=>[{headerName:l("Modal.DeskingSettingsModal.부서명"),field:"deptNm",cellStyle:{textAlign:"left"}},{headerName:l("Modal.DeskingSettingsModal.사용자ID"),field:"userId",cellStyle:{textAlign:"center"}},{headerName:l("Modal.DeskingSettingsModal.사용자명"),field:"userNm",cellStyle:{textAlign:"center"}}]),g=u=>{d("selected-rows",u)};return(u,c)=>(k(),L("div",Mt,[r(ee,{intent:"quinary","column-defs":a.value,"row-data":u.rowData,"selected-row-index":u.selectedRowIndex,"is-loading":"","row-height":25,"header-height":25,onSelectedRows:g},null,8,["column-defs","row-data","selected-row-index"])]))}}),Rt={class:"flex items-center gap-x-2"},Nt={class:"flex items-center"},Pt={class:"text-xs text-primary-gray-40 mr-2.5 w-20 text-right"},Lt={class:"flex gap-x-2"},Ot=M({__name:"DeskSettingsSearch",emits:["click:search"],setup(_,{emit:i}){const d=i,{t:l}=A(),a=h({orgDivCd:"C",orgCd:"S",useDeptCd:"",searchValue:""}),g=c=>{a.value.useDeptCd=c.useDeptCd,a.value.orgDivCd=c.orgDivCd,a.value.orgCd=c.orgCd},u=()=>{d("click:search",a.value)};return(c,x)=>(k(),L("div",Rt,[e("div",Nt,[e("p",Pt,b(p(l)("Modal.DeskingSettingsModal.사용자")),1),r(He,{width:"100%","custom-class":"short-multiselect",onOnSelected:g})]),e("div",Lt,[r(Te,{modelValue:a.value.searchValue,"onUpdate:modelValue":x[0]||(x[0]=n=>a.value.searchValue=n),placeholder:"사용자 이름",intent:"primary"},null,8,["modelValue"]),r(z,{type:"tertiary","custom-text-class":"!font-inter font-normal",class:"w-[104px] h-[26px] !py-0.5 !px-4 !border-0 !shadow-[0_1px_2px_0_#0000004D,0_1px_3px_1px_#00000026]","button-text":p(l)("Modal.DeskingSettingsModal.조회"),onClick:u},{iconLeft:I(()=>[r(p(Xe),{class:"mr-2",fill:"#65558F"})]),_:1},8,["button-text"])])]))}}),Ie=(_,i,d=0)=>{var l;if(_.rowIndex!==void 0){const a=i-1;return _.rowIndex===a?"최종":((l=_.data.apprvStCd)==null?void 0:l.code)==="apprv_st_request"?"요청자":`${_.rowIndex+1-d}차`}return""},At={class:"flex flex-col border border-primary-gray-surface rounded-sm p-2 w-[449px] space-y-3"},Tt={class:"flex items-center justify-between"},Et={class:"flex items-center justify-start gap-3"},Vt={class:"text-xs text-primary-gray-40"},Ut={class:"flex gap-2"},qt=M({__name:"DeskingSettingRight",props:{isLoading:{type:Boolean},selectedRowIndex:{},rowData:{}},emits:["selected-rows","sort"],setup(_,{emit:i}){const d=i,{t:l}=A(),a=Q(()=>[{headerName:l("Modal.DeskingSettingsModal.결제단계"),field:"NO",valueGetter:"node.rowIndex",cellStyle:{textAlign:"center"},cellRenderer:u=>{const c=u.api.getDisplayedRowCount();return Ie(u,c)}},{headerName:l("Modal.DeskingSettingsModal.부서명"),field:"deptNm",cellStyle:{textAlign:"center"}},{headerName:l("Modal.DeskingSettingsModal.사용자ID"),field:"chargrId",cellStyle:{textAlign:"center"}},{headerName:l("Modal.DeskingSettingsModal.이름"),field:"chargrNm",cellStyle:{textAlign:"center"}}]),g=u=>{d("selected-rows",u)};return(u,c)=>(k(),L("div",At,[e("div",Tt,[e("div",Et,[r(ne,{icon:"custom-chevron",size:"w-[17px] h-[17px]"}),e("p",Vt,b(p(l)("Modal.DeskingSettingsModal.데스킹 설정된 목록")),1)]),e("div",Ut,[r(z,{intent:"primary","button-text":p(l)("Modal.DeskingSettingsModal.오름차순"),onClick:c[0]||(c[0]=x=>d("sort","asc"))},null,8,["button-text"]),r(z,{intent:"primary","button-text":p(l)("Modal.DeskingSettingsModal.내림차순"),onClick:c[1]||(c[1]=x=>d("sort","desc"))},null,8,["button-text"])])]),r(ee,{intent:"quinary","column-defs":a.value,"row-data":u.rowData,"selected-row-index":u.selectedRowIndex,"is-loading":"","row-height":25,"header-height":25,onSelectedRows:g},null,8,["column-defs","row-data","selected-row-index"])]))}}),Bt={class:"space-y-3 h-full"},zt={class:"flex gap-4 justify-between h-[495px]"},jt={class:"flex justify-center flex-col space-y-14"},Gt={class:"flex items-center p-2"},Wt={class:"flex-grow flex justify-center gap-x-2"},Qt=M({__name:"DeskingSettingsModal",props:{postId:{},apprvProcTyp:{},postDeptId:{}},emits:["on-close","click:search","on-refresh"],setup(_,{emit:i}){const d=_,l=i,{t:a}=A(),g=re(),{getUserInfo:u}=Ee(),c=h(!1),x=h(!1),n=h([]),m=h([]),o=h(0),y=h(0),U=h(null),w=h("desc"),R=De({orgDivCd:"C",orgCd:"S",useDeptCd:"",searchValue:""}),O=Q(()=>u),T=t=>t.filter(v=>!m.value.some(P=>P.chargrMngId===v.userMngId)),E=async()=>{c.value=!0;try{const t=await g.organization.findUsers(be(R));t!=null&&t.success&&(n.value=T(t.data))}catch(t){console.log("getUserList error",t)}c.value=!1},q=t=>{w.value=t,m.value=[...m.value].sort((v,P)=>w.value==="asc"?v.ord-P.ord:P.ord-v.ord)},D=async()=>{x.value=!0;const t={apprvProcTyp:d.apprvProcTyp.id,deptId:d.postDeptId};try{const v=await g.desking.basic.findAll(t);v!=null&&v.success&&(m.value=v.data,q(w.value))}catch(v){console.log("getDeskingList error",v)}x.value=!1},f=t=>{var v;t.length!==0&&(o.value=((v=t[0])==null?void 0:v.rowIndex)||0,U.value=t[0].data.id)},$=t=>{var v;t.length!==0&&(y.value=((v=t[0])==null?void 0:v.rowIndex)||0,U.value=t[0].data.id)},S=async t=>{R.searchValue=t.searchValue,R.orgDivCd=t.orgDivCd,R.orgCd=t.orgCd,R.useDeptCd=t.useDeptCd,await E()},j=async()=>{const t=n.value[o.value];if(!t)return;const v={chargrNm:t.userNm,chargrMngId:t.userMngId,ord:m.value.length+1,apprvProcId:0,apprvProcTyp:d.apprvProcTyp.id,useYn:"Y",chargrId:t.userId,deptId:t.deptId,deptNm:t.deptNm};m.value=[...m.value,v],n.value=n.value.filter(P=>P.userMngId!==t.userMngId)},B=t=>({userMngId:t.chargrMngId,userNm:t.chargrNm,userId:t.chargrId,deptId:t.deptId,deptNm:t.deptNm,deptCd:t.deptNm}),G=async()=>{const t=m.value[y.value];t&&(m.value=m.value.filter(v=>v.chargrMngId!==t.chargrMngId),n.value=[...n.value,B(t)])},W=async()=>{n.value=[...n.value,...m.value.map(t=>B(t))],m.value=[]},Y=()=>{l("on-close")},K=async(t="all")=>{const v=m.value.map(X=>({chrgrId:X.chargrMngId,ord:X.ord})),P={chrgrId:O.value.id||0,ord:1},ae={approveCreateDtos:t==="self"?[P]:v},F=await g.cuesheet.scroll.postScrollDeskingRequest(d.postId,ae);if(F!=null&&F.success){window.Notify.success({message:"Success"}),l("on-refresh"),Y();return}window.Notify.error({message:"Submit error"})},J=()=>d.apprvProcTyp===N.apprvProcTyp.SCROLL,te=async()=>{J()&&await K("self")},se=async()=>{J()&&await K()};return le(async()=>{await D(),await E()}),(t,v)=>(k(),V(Se,{"title-class":"!rounded-t-sm","modal-class":"w-[914px] h-[647px] !rounded-t-sm !rounded-b-none","content-class":"!p-2 !mb-0 h-[calc(100%-91px)]",intent:"primary",onClose:Y},{title:I(()=>[e("span",null,b(p(a)("Modal.DeskingSettingsModal.데스킹 설정")),1)]),content:I(()=>[e("div",Bt,[r(Ot,{"onClick:search":S}),e("div",zt,[r($t,{"is-loading":c.value,"row-data":n.value,"selected-row-index":o.value,onSelectedRows:f},null,8,["is-loading","row-data","selected-row-index"]),e("div",jt,[r(z,{intent:"primary",class:"max-w-16 !h-[25px] !rounded-[4px]","custom-text-class":"font-bold text-[11px]","button-text":p(a)("Modal.DeskingSettingsModal.추가"),onClick:j},null,8,["button-text"]),r(z,{intent:"primary",class:"max-w-16 !h-[25px] !rounded-[4px]","custom-text-class":"font-bold text-[11px]","button-text":p(a)("Modal.DeskingSettingsModal.삭제"),onClick:G},null,8,["button-text"]),r(z,{intent:"primary",class:"max-w-16 !h-[25px] !rounded-[4px]","custom-text-class":"font-bold text-[11px]","button-text":p(a)("Modal.DeskingSettingsModal.모두삭제"),onClick:W},null,8,["button-text"])]),r(qt,{"is-loading":x.value,"row-data":m.value,"selected-row-index":y.value,onSelectedRows:$,onSort:q},null,8,["is-loading","row-data","selected-row-index"])])])]),bottom:I(()=>[e("div",Gt,[e("div",Wt,[r(Z,{class:"h-[33px]",text:p(a)("Modal.DeskingSettingsModal.확인"),icon:"check",onClick:se},null,8,["text"]),r(Z,{class:"h-[33px]",type:"warning",text:p(a)("Modal.DeskingSettingsModal.취소"),icon:"xMark",onClick:Y},null,8,["text"])]),e("div",null,[r(z,{type:"secondary",class:"h-[33px] w-20 bg-primary-gray-310 border-primary-gray-30","custom-text-class":"font-bold text-primary-black-100 text-[11px]","button-text":p(a)("Modal.DeskingSettingsModal.본인요청"),onClick:te},null,8,["button-text"])])])]),_:1}))}}),Yt={class:"w-full h-[135px] overflow-y-auto"},Ft=M({__name:"DeskingApproveTable",props:{isLoading:{type:Boolean},selectedRowIndex:{},rowData:{}},emits:["selected-rows"],setup(_,{emit:i}){const d=_,l=o=>{switch(o){case N.apprvStCd.REQUEST.id:return"bg-primary-gray-60 text-white";case N.apprvStCd.APPROVAL.id:return"bg-blue-500 text-white";case N.apprvStCd.RETURN.id:case N.apprvStCd.PENDING.id:return"bg-primary-gray-900 text-primary-gray-150 border border-primary-gray-150";default:return""}},a=o=>o.data.apprvStCd==="REQUEST"?o.data.rqstrNm:o.data.chrgrNm,g=Q(()=>{var o;return(o=d.rowData)==null?void 0:o.filter(y=>y.apprvStCd.code===N.apprvStCd.REQUEST.id).length}),u=i,{t:c}=A(),x=Q(()=>[{headerName:c("Modal.DeskingSettingsModal.결제단계"),field:"NO",valueGetter:"node.rowIndex",cellStyle:{textAlign:"center"},cellRenderer:o=>{const y=o.api.getDisplayedRowCount();return Ie(o,y,g.value)}},{headerName:c("Modal.DeskingSettingsModal.부서명"),field:"rqstrDeptNm",cellStyle:{textAlign:"center"}},{headerName:c("Modal.DeskingSettingsModal.사용자ID"),field:"rqstrId",cellStyle:{textAlign:"center"}},{headerName:c("Modal.DeskingSettingsModal.이름"),field:"rqstrNm",cellStyle:{textAlign:"center"}},{headerName:c("Modal.DeskingSettingsModal.현황"),field:"apprvStCd.description",tooltipValueGetter:a,cellRenderer:o=>{const y=o.data.apprvStCd;return`<div class="h-[16px] text-center mx-auto font-roboto font-medium text-[11px]  rounded-[10px] 
       ${l(y.code)} leading-4">
        ${(y==null?void 0:y.description)??""}
      </div>`}}]),n={defaultColDef:{flex:1,minWidth:100},enableBrowserTooltips:!0,columnDefs:x.value,rowClassRules:{"!bg-primary-gray-20":o=>{const y=o.data.apprvStCd.code;return y===N.apprvStCd.APPROVAL.id||y===N.apprvStCd.REQUEST.id}}},m=o=>{u("selected-rows",o)};return(o,y)=>(k(),L("div",Yt,[r(ee,{intent:"quinary","column-defs":x.value,"row-data":o.rowData,"grid-options":n,"selected-row-index":o.selectedRowIndex,"is-loading":"","row-height":25,"header-height":25,onSelectedRows:m},null,8,["column-defs","row-data","selected-row-index"])]))}}),Ht={class:"space-y-4 h-full border border-primary-gray-surface p-3 rounded-[4px]"},Zt={class:"flex items-center justify-start gap-3"},Kt={class:"text-xs text-primary-gray-40"},Jt={class:"flex items-center justify-start gap-3"},Xt={class:"text-xs text-primary-gray-40"},es={class:"flex items-center justify-center gap-x-2 p-2"},ts=M({__name:"DeskingApprovalModal",props:{postId:{},apprvProcTyp:{}},emits:["close","on-refresh"],setup(_,{emit:i}){const d=_,l=i,{t:a}=A(),g=re(),u=h(!1),c=h([]),x=h(0),n=h(null),m=h(""),o=()=>d.apprvProcTyp===N.apprvProcTyp.SCROLL,y=D=>{const f={apprv_st_request:0,apprv_st_approval:1};return D.sort(($,S)=>{var G,W;const j=f[(G=$==null?void 0:$.apprvStCd)==null?void 0:G.code]??2,B=f[(W=S==null?void 0:S.apprvStCd)==null?void 0:W.code]??2;return j!==B?j-B:(($==null?void 0:$.ord)??0)-((S==null?void 0:S.ord)??0)})},U=async()=>{const D=await g.cuesheet.scroll.getDeskingOfScroll(d.postId);D!=null&&D.success&&(c.value=y(D.data),m.value=c.value[0].returnReas||"")},w=async()=>{u.value=!0;try{o()&&await U()}catch(D){console.log("getDataList error",D)}u.value=!1},R=D=>{var f;D.length!==0&&(x.value=((f=D[0])==null?void 0:f.rowIndex)||0,n.value=D[0].data.id)},O=()=>{l("close")},T=async D=>{const f=await g.cuesheet.scroll.deskingUpdate(d.postId,D,m.value);if(f!=null&&f.success){window.Notify.success({message:"Success"}),l("on-refresh"),O();return}window.Notify.error({message:"Error"})},E=async()=>{o()&&await T("APPROVAL")},q=async()=>{o()&&await T("RETURN")};return le(async()=>{await w()}),Ce(x,()=>{m.value=c.value[x.value].returnReas||""}),(D,f)=>(k(),V(Se,{"title-class":"!rounded-t-sm","modal-class":"w-[588px] !rounded-t-sm !rounded-b-none","content-class":"!p-2 !mb-0 h-[calc(100%-91px)]",intent:"primary",onClose:O},{title:I(()=>[e("span",null,b(p(a)("Modal.DeskingSettingsModal.데스킹 승인")),1)]),content:I(()=>[e("div",Ht,[e("div",Zt,[r(ne,{icon:"custom-chevron",size:"w-[17px] h-[17px]"}),e("p",Kt,b(p(a)("Modal.DeskingSettingsModal.테스킹 현황")),1)]),r(Ft,{"is-loading":u.value,"row-data":c.value,"selected-row-index":x.value,onSelectedRows:R},null,8,["is-loading","row-data","selected-row-index"]),e("div",Jt,[r(ne,{icon:"custom-chevron",size:"w-[17px] h-[17px]"}),e("p",Xt,b(p(a)("Modal.DeskingSettingsModal.반려사유")),1)]),r(Ze,{modelValue:m.value,"onUpdate:modelValue":f[0]||(f[0]=$=>m.value=$),rows:3,"custom-class":"h-[73px]"},null,8,["modelValue"])])]),bottom:I(()=>[e("div",es,[r(Z,{class:"h-[33px]",text:p(a)("Modal.DeskingSettingsModal.확인"),icon:"check",onClick:E},null,8,["text"]),r(Z,{type:"quinary",class:"h-[33px]",text:p(a)("Modal.DeskingSettingsModal.반려"),icon:"check",onClick:q},null,8,["text"]),r(Z,{class:"h-[33px]",type:"warning",text:p(a)("Modal.DeskingSettingsModal.취소"),icon:"xMark",onClick:O},null,8,["text"])])]),_:1}))}}),ss={class:"dark:text-white"},as={class:"flex flex-grow h-full overflow-y-hidden mr-[-8px]"},os=M({__name:"CuesheetScrollView",setup(_){const i=Ve(),{moveEditCuesheetScroll:d,moveCreateCuesheetScroll:l,moveListPrivateBroadcasting:a}=je(),g=re(),{dynamicHeightVh:u}=Fe("h-[86.5vh]","h-[86.5vh]"),c=h(),x=h(!0),n=h(!1),m=h(0),o=h(null),y=h(Ue.md),U=h([]),w=h(),R=h(!1),O=h(!1),T=h(!1),E=h(!1),q=h({page:1,totalElements:0,totalPages:1,numberOfElements:0,size:y.value}),D=()=>({startDate:qe,endDate:Be,apprvTypCd:null,orgCd:null,deptId:null,brdcPgmId:null,size:y.value,page:0,sort:"inputDtm,desc"}),f=De(D()),$=()=>{o.value=null,w.value=void 0},S=async()=>{$(),n.value=!0;try{const s=await g.cuesheet.scroll.findAll(be(f));s!=null&&s.success&&(U.value=s.data.content.filter(C=>C.delYn==="N"),q.value={page:f.page??0,totalPages:s.data.totalPages,totalElements:s.data.totalElements,numberOfElements:s.data.numberOfElements,size:s.data.size})}catch(s){console.log("getDataList error",s)}n.value=!1},j=async s=>{if(s)try{const C=await g.cuesheet.scroll.findOne(s);C.success&&(w.value=C.data)}catch(C){console.log("getDataDetail error",C)}},B=async s=>{f.page=s,await S()},G=async s=>{f.page=0,f.size=Number(s),await S()},W=s=>{var C;s.length!==0&&(m.value=((C=s[0])==null?void 0:C.rowIndex)||0,o.value=s[0].data.scrlId,x.value=!1)},Y=()=>{l()},K=()=>{o.value&&d(o.value)},J=()=>{o.value&&(O.value=!0)},te=()=>{o.value&&(R.value=!0)},se=()=>{o.value&&(T.value=!0)},t=async()=>{if(!o.value)return;const s=await g.cuesheet.scroll.deskingDelete(o.value);s!=null&&s.success?(window.Notify.success({message:"Successfully deleted"}),await S()):window.Notify.error({message:s.msg})},v=()=>{o.value&&(E.value=!0)},P=async()=>{if(!o.value)return;const s=await g.cuesheet.scroll.commercialBroadcast(o.value);if(s!=null&&s.success){window.Notify.success({message:"Successfully transmitted"}),a(i,"Transmit");return}window.Notify.error({message:s.msg})},ae=async()=>{if(!o.value)return;const s=await g.cuesheet.scroll.remove(o.value);s!=null&&s.success?(window.Notify.success({message:ze.cuesheet.scroll.success.delete}),await S()):window.Notify.error({message:s.msg})},F=async s=>{f.startDate=s.startDate,f.endDate=s.endDate,f.apprvTypCd=s.apprvTypCd,f.orgCd=s.orgCd,f.deptId=s.deptId,f.brdcPgmId=s.brdcPgmId,await S()},X=()=>{var s;Object.assign(f,D()),(s=c.value)==null||s.resetFields()};return ye(`${_e.CuesheetScroll}Create`,async()=>{X(),await S()}),ye(`${_e.CuesheetScroll}Edit`,async()=>{await S()}),le(async()=>{await S()}),Ce(()=>o.value,async s=>{s&&await j(s)}),(s,C)=>{var ie,ce,de,ue,pe,ge,me,fe,he,ve;return k(),L("div",ss,[r(We,{ref_key:"headerRef",ref:c,"show-request-desking":(ie=w.value)==null?void 0:ie.requestDeskingToggle,"show-apprv-desking":(ce=w.value)==null?void 0:ce.apprvDeskingToggle,"show-cancel-desking":(de=w.value)==null?void 0:de.cancelDeskingToggle,"current-id":o.value,onOnSearch:F,onOnCreate:Y,onOnEdit:K,onOnDelete:ae,onOnPrint:J,onOnPost:te,onOnDeskingRequest:se,onOnDeleteDesking:t,onOnDeskingApproval:v,onOnTransmit:P},null,8,["show-request-desking","show-apprv-desking","show-cancel-desking","current-id"]),e("div",as,[r(p(Me),{class:"default-theme primary-theme"},{default:I(()=>[r(p(xe),{class:we([p(u),"overflow-auto dark:!bg-dark-secondary pt-2 pr-2"])},{default:I(()=>[r(tt,{"is-deselected-all":x.value&&!o.value,"is-loading":n.value,"row-data":U.value,"page-info":q.value,"selected-row-index":m.value,onSelectedRows:W,onOnChangePage:B,onSelectSize:G},null,8,["is-deselected-all","is-loading","row-data","page-info","selected-row-index"])]),_:1},8,["class"]),r(p(xe),{class:we([p(u),"overflow-visible dark:!bg-dark-secondary p-2 border-t-0 border-primary-gray-999 rounded-[3px] ml-[-2px]"])},{default:I(()=>[r(mt,{"current-detail-id":o.value,"data-detail":w.value},null,8,["current-detail-id","data-detail"])]),_:1},8,["class"])]),_:1})]),R.value?(k(),V(Qe,{key:0,title:(ue=w.value)==null?void 0:ue.titl,content:(pe=w.value)==null?void 0:pe.ctt,onOnClose:C[0]||(C[0]=oe=>R.value=!1)},null,8,["title","content"])):H("",!0),T.value&&((ge=w.value)!=null&&ge.scrlId)?(k(),V(Qt,{key:1,"post-dept-id":(me=w.value)==null?void 0:me.deptId,"apprv-proc-typ":p(N).apprvProcTyp.SCROLL,"post-id":(fe=w.value)==null?void 0:fe.scrlId,onOnClose:C[1]||(C[1]=oe=>T.value=!1),onOnRefresh:S},null,8,["post-dept-id","apprv-proc-typ","post-id"])):H("",!0),E.value&&((he=w.value)!=null&&he.scrlId)?(k(),V(ts,{key:2,"post-id":(ve=w.value)==null?void 0:ve.scrlId,"apprv-proc-typ":p(N).apprvProcTyp.SCROLL,onClose:C[2]||(C[2]=oe=>E.value=!1),onOnRefresh:S},null,8,["post-id","apprv-proc-typ"])):H("",!0),O.value?(k(),V(Ye,{key:3,onOnClose:C[3]||(C[3]=oe=>O.value=!1)},{default:I(()=>[r(It,{"data-detail":w.value},null,8,["data-detail"])]),_:1})):H("",!0)])}}}),Rs=M({__name:"CuesheetScrollView",setup(_){return(i,d)=>(k(),V(os))}});export{Rs as default};
