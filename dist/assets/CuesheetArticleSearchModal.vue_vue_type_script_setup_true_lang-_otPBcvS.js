import{k as l,o as H,E as L,d as S,a as A,c as F,G as s,ac as P,ae as d,ad as X,l as x,h as J,w as h,X as K,Y as o,af as Q,$ as Z,a1 as ee,a2 as M,al as ae}from"./index-eLyz9_Ts.js";import{c as f}from"./make-grid-column-aeLSdEws.js";import"./journalist-QNhBHHjf.js";import"./organization-qjYuRO6g.js";import{g as te}from"./code-mapper-C6rl9hti.js";import{w as le}from"./format.util-TjqX3dGB.js";import{_ as oe}from"./GMovableModal.vue_vue_type_script_setup_true_lang-elQvXjL0.js";import{_ as b}from"./FormItem.vue_vue_type_script_setup_true_lang-ZXQ_7x89.js";import{u as se}from"./use-model-wrapper-XtiLc3Xd.js";import{G as ne}from"./GSingleSelect-7u8H0FdH.js";function ie(){const p=l(window.innerWidth),r=l(window.innerHeight),c=()=>{p.value=window.innerWidth,r.value=window.innerHeight};return H(()=>{window.addEventListener("resize",c)}),L(()=>{window.removeEventListener("resize",c)}),{windowWidth:p,windowHeight:r}}const de=S({__name:"ArticleClassSelect",props:{modelValue:{default:""},placeholder:{default:""},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},allowEmpty:{type:Boolean,default:!0},searchable:{type:Boolean,default:!1},required:{type:Boolean,default:!1}},emits:["update:modelValue","on-selected"],setup(p,{emit:r}){const c=l([{id:1,classNm:"공용기사(출고)"},{id:2,classNm:"프로그램별"},{id:3,classNm:"긴급기사"},{id:4,classNm:"공용기사(미출고)"},{id:5,classNm:"기획서"},{id:6,classNm:"전체기사"}]),_=p,i=r,u=se(_,i,"modelValue"),y=t=>{u.value=t,i("update:modelValue",t),i("on-selected",t)},D=t=>{u.value=t,i("update:modelValue",t),i("on-selected","")};return(t,v)=>(A(),F("div",null,[s(ne,{"track-by":"id","item-label":"classNm",options:c.value,placeholder:t.placeholder,searchable:t.searchable,disabled:t.disabled||t.readonly,"allow-empty":t.allowEmpty,required:t.required,"onSelect:value":y,"onRemove:value":D},null,8,["options","placeholder","searchable","disabled","allow-empty","required"])]))}}),re={class:"flex justify-between gap-x-2 mb-2"},ce={class:"flex-grow"},ue={class:"flex justify-start mb-2 gap-x-4 items-center"},me={class:"flex justify-between mb-2 gap-x-4 items-center"},fe={class:"flex-grow"},pe={class:"flex flex-col gap-y-1"},ve={class:"flex-grow"},he={class:"w-full h-[50vh]"},Me=S({__name:"CuesheetArticleSearchModal",emits:["close","double-clicked-row","cuesheet-article-search-list-api"],setup(p,{emit:r}){const c=[f({headerName:"시간",field:""}),f({headerName:"제목",field:"artclTitl"}),f({headerName:"작성자",field:"inputrNm"}),f({headerName:"데스크"}),f({headerName:"프로그램"}),f({headerName:"기사구분",field:"artclFormatCd",cellRenderer:e=>te(e.value,"articleFormatType")})],_={rowDragManaged:!0,rowDragEntireRow:!0,suppressMoveWhenRowDragging:!1,rowDragText:e=>{var a;return`titl:::: ${(a=e.rowNode)==null?void 0:a.data.artclTitl}`}},i=r,u=P(),{fetchArticles:y,fetchArticle:D}=u,t=l(d().format("YYYY-MM-DD")),v=l(d().format("YYYY-MM-DD")),w=l([t.value,v.value]),N=l(!1),m=l(!1),g=l(""),V=l([]),k=l(null),C=l(1),R=l(X.xs),B=l({isShow:!0,page:C.value,totalElements:0,totalPages:1,numberOfElements:0,size:R.value}),{windowHeight:E,windowWidth:$}=ie(),T=x(()=>`${E.value/2-325}px`),W=x(()=>`${$.value/2-400}px`),z=async()=>{const e={startDate:m.value?d().format("YYYY-MM-DD"):t.value,endDate:m.value?d().format("YYYY-MM-DD"):v.value};g.value.trim()&&(e.searchValue=g.value);const a=await y(e);a.success&&(V.value=a.data.content)},G=async()=>{const e=u.selectArticleId;e&&await D(e)},I=e=>{const a=Number(e.data.id);u.selectArticleId=a,G(),i("double-clicked-row")},O=e=>{k.value=e,i("cuesheet-article-search-list-api",e)},U=e=>{if(e){const a=le(e);if(a.length===2&&d(a[0]).isValid()&&d(a[1]).isValid()){const[n,Y]=e;t.value=n,v.value=Y,w.value=[n,Y]}}},j=()=>{if(m.value=!m.value,m.value){const e=d().format("YYYY-MM-DD");t.value=e,v.value=e,w.value=[e,e]}},q=()=>i("close");return(e,a)=>(A(),J(oe,{height:"h-[80vh]",width:"w-1/2",bottom:T.value,right:W.value,"in-wrap-modal":!0,onClose:q},{title:h(()=>a[4]||(a[4]=[K("큐시트-기사검색")])),content:h(()=>[o("div",re,[o("div",ce,[o("div",ue,[s(b,{label:"일자"},{default:h(()=>[o("div",null,[s(Q,{modelValue:w.value,"onUpdate:modelValue":a[0]||(a[0]=n=>w.value=n),clearable:!0,"text-input":!0,teleport:!0,onChange:U},null,8,["modelValue"])])]),_:1}),s(Z,{modelValue:N.value,"onUpdate:modelValue":a[1]||(a[1]=n=>N.value=n),checked:m.value,label:"오늘기사만보기",onChange:j},null,8,["modelValue","checked"])]),o("div",me,[o("div",fe,[s(b,{label:"부서"})]),o("div",null,[s(b,{label:"구분"},{default:h(()=>[o("div",null,[s(de,{class:"w-32"})])]),_:1})])]),o("div",null,[s(b,{label:"제목입력"},{default:h(()=>[s(ee,{modelValue:g.value,"onUpdate:modelValue":a[2]||(a[2]=n=>g.value=n),class:"w-full"},null,8,["modelValue"])]),_:1})])]),o("div",pe,[o("div",null,[s(M,{"button-text":"초기화",type:"secondary",icon:"arrowPath"})]),o("div",ve,[s(M,{"button-text":"조회",class:"w-full h-full",onClick:z})])])]),o("div",he,[s(ae,{"column-defs":c,"row-data":V.value,"enable-row-drag":!0,"dnd-source":!0,"grid-options":_,"page-info":B.value,onOnGridReady:O,onDoubleClickedRow:a[3]||(a[3]=n=>I(n))},null,8,["row-data","page-info"])])]),_:1},8,["bottom","right"]))}});export{Me as _};
